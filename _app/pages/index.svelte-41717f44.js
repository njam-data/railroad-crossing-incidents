import{H as e,C as t,S as n,i as r,s as a,I as s,c as o,a as l,d as c,b as i,f as d,F as u,G as f,e as h,t as m,g as p,h as g,k as y,n as x,J as b,K as v,E as w,v as $,r as E,j as k,m as N,o as I,B as C,u as T,w as D,L as S,x as j,z as _,D as V,M as A,l as P,N as z,O as M,P as L,Q as R,R as O,T as B,U,V as K}from"../chunks/vendor-39a0c49e.js";import{r as q,b as H}from"../chunks/paths-7dc55c62.js";function F(e){const t=["rowid","Latitude","Longitude","Active or Passive?"],n=["CityName","Street","Number of accidents","Total Killed","Total injured","Meets federal safety guidelines","StateName","CountyName","Distance from highway (feet)","Daily trains","Max train speed","Gates","Lights","Daily traffic","Last time traffic counted","School buses","Bus count","Railroad","CrossingID"],r=["link",...e.columns];return{rows:e.rows.map((e=>r.map(((n,r)=>{if(!t.find((e=>e.includes(n))))return"link"===n?{key:"Map view",value:[e[12],e[11]]}:{key:n,value:e[r-1]}})).filter((e=>!!e)).sort(((e,t)=>n.indexOf(e.key)-n.indexOf(t.key))))),columns:r}}const G={subscribe:t=>(()=>{const t=e("__svelte__");return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:t.navigating.subscribe}},session:t.session}})().page.subscribe(t)},Y=async function(e,t){return q.goto(e,t,[])};const J={},Q={},W=t({zoom:7.5,lngLat:["-74.558333","40.16"]}),X=t({zoom:2,lngLat:["-98.5556","39.8097"]}),Z=t(!0);function ee(e){let t,n;return{c(){t=s("svg"),n=s("path"),this.h()},l(e){t=o(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var r=l(t);n=o(r,"path",{d:!0},1),l(n).forEach(c),r.forEach(c),this.h()},h(){i(n,"d","M50,5C25.147,5,5,25.148,5,50c0,24.852,20.147,45,45,45c24.854,0,45-20.148,45-45C95,25.148,74.854,5,50,5z M74.675,38.917  l-23.75,29.511c-1.109,1.379-2.756,2.252-4.517,2.396c-0.173,0.015-0.347,0.021-0.52,0.021c-1.585,0-3.138-0.589-4.326-1.652  L25.985,55.17c-2.463-2.217-2.661-6.01-0.444-8.473c2.218-2.463,6.012-2.662,8.474-0.444l11.223,10.103l20.088-24.961  c2.078-2.582,5.855-2.989,8.438-0.913C76.344,32.558,76.752,36.335,74.675,38.917z"),i(t,"height","20px"),i(t,"width","20px"),i(t,"class","align-top inline"),i(t,"fill","#4CE600"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),i(t,"version","1.1"),i(t,"x","0px"),i(t,"y","0px"),i(t,"viewBox","0 0 100 100"),i(t,"enable-background","new 0 0 100 100"),i(t,"xml:space","preserve")},m(e,r){d(e,t,r),u(t,n)},p:f,i:f,o:f,d(e){e&&c(t)}}}class te extends n{constructor(e){super(),r(this,e,null,ee,a,{})}}function ne(e){let t,n;return{c(){t=s("svg"),n=s("path"),this.h()},l(e){t=o(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var r=l(t);n=o(r,"path",{d:!0},1),l(n).forEach(c),r.forEach(c),this.h()},h(){i(n,"d","M50,5C25.147,5,5,25.147,5,50c0,24.854,20.147,45,45,45c24.854,0,45-20.146,45-45C95,25.147,74.854,5,50,5z M49.999,76.75  c-3.342,0-6.061-2.717-6.061-6.057c0-3.346,2.719-6.066,6.061-6.066c3.343,0,6.063,2.723,6.063,6.066  C56.063,74.033,53.342,76.75,49.999,76.75z M66.238,43.808c-1.174,1.827-2.795,4.01-6.028,6.531  c-3.213,2.461-4.185,3.724-4.478,4.259c-0.166,0.299-0.402,0.895-0.59,2.004c-0.065,0.39-0.119,0.812-0.162,1.265l-0.254,2.714  l-9.771,0.023l0.124-3.127c0.017-0.4,0.06-1.185,0.168-1.918c0.324-2.229,1.085-4.209,2.261-5.882  c1.104-1.573,3.247-3.563,6.549-6.079c2.442-1.863,3.396-2.928,3.764-3.492c0.47-0.717,0.697-1.472,0.697-2.305  c0-1.931-0.705-3.46-2.094-4.545c-1.474-1.151-3.518-1.735-6.073-1.735c-2.265,0-4.176,0.599-5.682,1.778  c-1.594,1.239-2.713,2.953-3.245,4.964l-0.66,2.492l-9.563-1.037l0.676-3.238c0.88-4.218,2.865-7.474,5.902-9.677  c3.934-2.855,8.156-4.303,12.552-4.303c4.856,0,8.831,1.249,12.508,3.931c3.399,2.482,5.349,6.492,5.349,11.002  C68.188,39.642,67.55,41.727,66.238,43.808z"),i(t,"height","20px"),i(t,"width","20px"),i(t,"class","align-top inline"),i(t,"fill","#A2A2A2"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),i(t,"version","1.1"),i(t,"x","0px"),i(t,"y","0px"),i(t,"viewBox","0 0 100 100"),i(t,"enable-background","new 0 0 100 100"),i(t,"xml:space","preserve")},m(e,r){d(e,t,r),u(t,n)},p:f,i:f,o:f,d(e){e&&c(t)}}}class re extends n{constructor(e){super(),r(this,e,null,ne,a,{})}}function ae(e){let t,n;return{c(){t=s("svg"),n=s("path"),this.h()},l(e){t=o(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var r=l(t);n=o(r,"path",{d:!0},1),l(n).forEach(c),r.forEach(c),this.h()},h(){i(n,"d","M50,5C25.147,5,5,25.147,5,50c0,24.852,20.147,45,45,45c24.854,0,45-20.148,45-45C95,25.147,74.854,5,50,5z M70.243,70.24  c-1.173,1.172-2.708,1.758-4.243,1.758s-3.07-0.586-4.242-1.757L50,58.484L38.243,70.242C37.071,71.414,35.536,72,34,72  s-3.071-0.586-4.243-1.757c-2.343-2.345-2.343-6.144,0-8.485L41.515,50L29.757,38.242c-2.343-2.343-2.343-6.142,0-8.485  c2.343-2.343,6.142-2.343,8.485,0L50,41.514l11.756-11.757c2.344-2.343,6.145-2.343,8.485,0c2.344,2.343,2.344,6.142,0.001,8.485  L58.486,49.999l11.756,11.756C72.586,64.1,72.586,67.898,70.243,70.24z"),i(t,"height","20px"),i(t,"width","20px"),i(t,"class","align-top inline"),i(t,"fill","#FF0000"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),i(t,"version","1.1"),i(t,"x","0px"),i(t,"y","0px"),i(t,"viewBox","0 0 100 100"),i(t,"enable-background","new 0 0 100 100"),i(t,"xml:space","preserve")},m(e,r){d(e,t,r),u(t,n)},p:f,i:f,o:f,d(e){e&&c(t)}}}class se extends n{constructor(e){super(),r(this,e,null,ae,a,{})}}function oe(e,t,n){const r=e.slice();return r[2]=t[n],r}function le(e){let t,n;return{c(){t=h("h1"),n=m(e[1]),this.h()},l(r){t=o(r,"H1",{class:!0});var a=l(t);n=p(a,e[1]),a.forEach(c),this.h()},h(){i(t,"class","font-medium mb-2")},m(e,r){d(e,t,r),u(t,n)},p(e,t){2&t&&g(n,e[1])},d(e){e&&c(t)}}}function ce(e){let t,n,r,a,s,f,v=e[2].description+"";return{c(){t=h("div"),n=h("span"),r=y(),a=h("span"),s=m(v),f=y(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"SPAN",{class:!0,style:!0}),l(n).forEach(c),r=x(i),a=o(i,"SPAN",{class:!0});var d=l(a);s=p(d,v),d.forEach(c),f=x(i),i.forEach(c),this.h()},h(){i(n,"class","w-4 h-4 inline-block rounded-full align-middle"),b(n,"background-color",e[2].color),i(a,"class","align-middle"),i(t,"class","")},m(e,o){d(e,t,o),u(t,n),u(t,r),u(t,a),u(a,s),u(t,f)},p(e,t){1&t&&b(n,"background-color",e[2].color),1&t&&v!==(v=e[2].description+"")&&g(s,v)},d(e){e&&c(t)}}}function ie(e){let t,n,r=e[1]&&le(e),a=e[0],s=[];for(let o=0;o<a.length;o+=1)s[o]=ce(oe(e,a,o));return{c(){t=h("div"),r&&r.c(),n=y();for(let e=0;e<s.length;e+=1)s[e].c();this.h()},l(e){t=o(e,"DIV",{class:!0});var a=l(t);r&&r.l(a),n=x(a);for(let t=0;t<s.length;t+=1)s[t].l(a);a.forEach(c),this.h()},h(){i(t,"class","\n    absolute\n    z-10\n    flex\n    flex-col\n    bg-white\n    px-4\n    py-2\n    max-w-[150px]\n    shadow-sm\n    rounded-md\n    bottom-12\n    left-2\n  ")},m(e,a){d(e,t,a),r&&r.m(t,null),u(t,n);for(let n=0;n<s.length;n+=1)s[n].m(t,null)},p(e,[o]){if(e[1]?r?r.p(e,o):(r=le(e),r.c(),r.m(t,n)):r&&(r.d(1),r=null),1&o){let n;for(a=e[0],n=0;n<a.length;n+=1){const r=oe(e,a,n);s[n]?s[n].p(r,o):(s[n]=ce(r),s[n].c(),s[n].m(t,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=a.length}},i:f,o:f,d(e){e&&c(t),r&&r.d(),v(s,e)}}}function de(e,t,n){let{points:r}=t,{title:a}=t;return e.$$set=e=>{"points"in e&&n(0,r=e.points),"title"in e&&n(1,a=e.title)},[r,a]}class ue extends n{constructor(e){super(),r(this,e,de,ie,a,{points:0,title:1})}}function fe(e,t,n){const r=e.slice();return r[13]=t[n],r}function he(e){let t;const n=e[8].default,r=V(n,e,e[7],null);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,n){r&&r.m(e,n),t=!0},p(e,a){r&&r.p&&(!t||128&a)&&w(r,n,e,e[7],a,null,null)},i(e){t||($(r,e),t=!0)},o(e){E(r,e),t=!1},d(e){r&&r.d(e)}}}function me(e){let t,n,r,a,s,g,b,v,w,$;return{c(){t=h("div"),n=h("div"),r=h("h1"),a=m("Railroad crossing incidents"),s=y(),g=h("p"),b=m("Click a crossing to see its safety data and whether it meets safety guidelines."),v=y(),w=h("p"),$=m("This data was retrieved from the Federal Railroad Administration in early April 2021 and the agency acknowledges that it might not offer a complete or accurate picture of U.S. rail crossings."),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"DIV",{class:!0});var d=l(n);r=o(d,"H1",{class:!0});var u=l(r);a=p(u,"Railroad crossing incidents"),u.forEach(c),s=x(d),g=o(d,"P",{class:!0});var f=l(g);b=p(f,"Click a crossing to see its safety data and whether it meets safety guidelines."),f.forEach(c),v=x(d),w=o(d,"P",{class:!0});var h=l(w);$=p(h,"This data was retrieved from the Federal Railroad Administration in early April 2021 and the agency acknowledges that it might not offer a complete or accurate picture of U.S. rail crossings."),h.forEach(c),d.forEach(c),i.forEach(c),this.h()},h(){i(r,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),i(g,"class","font-medium text-gray-700 text-xl"),i(w,"class","text-gray-500 mt-4"),i(n,"class","h-40 self-center"),i(t,"class","px-4 py-4 sm:px-6 flex items-center h-full")},m(e,o){d(e,t,o),u(t,n),u(n,r),u(r,a),u(n,s),u(n,g),u(g,b),u(n,v),u(n,w),u(w,$)},p:f,i:f,o:f,d(e){e&&c(t)}}}function pe(e){let t,n,r,a,s,f,b,v,w,k,N,I,D,S,j,_,V,A,P,z,M,L,R,O,B,U,K,q,H,F,G=e[0].properties.Street+"",Y=e[0].properties.CityName+"",J=e[0].properties.CountyName+"",Q=e[0].properties.StateName+"",W=e[0].properties["Number of accidents"]+"",X=e[0].properties["Total Killed"]+"",Z=e[0].properties["Total injured"]+"";const ee=[xe,ye,ge],te=[];function ne(e,t){return"Yes"===e[0].properties["Meets federal safety guidelines"]?0:"No"===e[0].properties["Meets federal safety guidelines"]?1:2}D=ne(e),S=te[D]=ee[D](e);let re=e[3]&&be(e);return{c(){t=h("div"),n=h("h3"),r=m(G),a=y(),s=h("h3"),f=m(Y),b=m(", "),v=m(J),w=m(", "),k=m(Q),N=y(),I=h("p"),S.c(),j=y(),_=h("p"),V=m(W),A=m(" Accidents"),P=y(),z=h("p"),M=m(X),L=m(" Killed"),R=y(),O=h("p"),B=m(Z),U=m(" Injured"),K=y(),q=h("div"),H=h("dl"),re&&re.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"H3",{class:!0});var d=l(n);r=p(d,G),d.forEach(c),a=x(i),s=o(i,"H3",{class:!0});var u=l(s);f=p(u,Y),b=p(u,", "),v=p(u,J),w=p(u,", "),k=p(u,Q),u.forEach(c),N=x(i),I=o(i,"P",{class:!0});var h=l(I);S.l(h),h.forEach(c),j=x(i),_=o(i,"P",{class:!0});var m=l(_);V=p(m,W),A=p(m," Accidents"),m.forEach(c),P=x(i),z=o(i,"P",{class:!0});var g=l(z);M=p(g,X),L=p(g," Killed"),g.forEach(c),R=x(i),O=o(i,"P",{class:!0});var y=l(O);B=p(y,Z),U=p(y," Injured"),y.forEach(c),i.forEach(c),K=x(e),q=o(e,"DIV",{class:!0});var $=l(q);H=o($,"DL",{class:!0});var E=l(H);re&&re.l(E),E.forEach(c),$.forEach(c),this.h()},h(){i(n,"class","text-lg leading-6 font-medium text-gray-900"),i(s,"class","text-md leading-6 font-medium text-gray-600 mb-2"),i(I,"class","font-bold my-0 pt-1 pb-3 max-w-2xl text-sm text-gray-600"),i(_,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(z,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(O,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(t,"class","px-4 py-4 sm:px-6"),i(H,"class","divide-y divide-gray-200"),i(q,"class","border-t border-gray-200 px-4 py-2 sm:py-4 sm:p-0")},m(e,o){d(e,t,o),u(t,n),u(n,r),u(t,a),u(t,s),u(s,f),u(s,b),u(s,v),u(s,w),u(s,k),u(t,N),u(t,I),te[D].m(I,null),u(t,j),u(t,_),u(_,V),u(_,A),u(t,P),u(t,z),u(z,M),u(z,L),u(t,R),u(t,O),u(O,B),u(O,U),d(e,K,o),d(e,q,o),u(q,H),re&&re.m(H,null),F=!0},p(e,t){(!F||1&t)&&G!==(G=e[0].properties.Street+"")&&g(r,G),(!F||1&t)&&Y!==(Y=e[0].properties.CityName+"")&&g(f,Y),(!F||1&t)&&J!==(J=e[0].properties.CountyName+"")&&g(v,J),(!F||1&t)&&Q!==(Q=e[0].properties.StateName+"")&&g(k,Q);let n=D;D=ne(e),D!==n&&(C(),E(te[n],1,1,(()=>{te[n]=null})),T(),S=te[D],S||(S=te[D]=ee[D](e),S.c()),$(S,1),S.m(I,null)),(!F||1&t)&&W!==(W=e[0].properties["Number of accidents"]+"")&&g(V,W),(!F||1&t)&&X!==(X=e[0].properties["Total Killed"]+"")&&g(M,X),(!F||1&t)&&Z!==(Z=e[0].properties["Total injured"]+"")&&g(B,Z),e[3]?re?re.p(e,t):(re=be(e),re.c(),re.m(H,null)):re&&(re.d(1),re=null)},i(e){F||($(S),F=!0)},o(e){E(S),F=!1},d(e){e&&c(t),te[D].d(),e&&c(K),e&&c(q),re&&re.d()}}}function ge(e){let t,n,r;return t=new re({}),{c(){k(t.$$.fragment),n=m(" May or may not meet federal safety guidelines")},l(e){N(t.$$.fragment,e),n=p(e," May or may not meet federal safety guidelines")},m(e,a){I(t,e,a),d(e,n,a),r=!0},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){E(t.$$.fragment,e),r=!1},d(e){D(t,e),e&&c(n)}}}function ye(e){let t,n,r;return t=new se({}),{c(){k(t.$$.fragment),n=m(" Does not meet federal safety guidelines")},l(e){N(t.$$.fragment,e),n=p(e," Does not meet federal safety guidelines")},m(e,a){I(t,e,a),d(e,n,a),r=!0},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){E(t.$$.fragment,e),r=!1},d(e){D(t,e),e&&c(n)}}}function xe(e){let t,n,r;return t=new te({}),{c(){k(t.$$.fragment),n=m(" Meets federal safety guidelines")},l(e){N(t.$$.fragment,e),n=p(e," Meets federal safety guidelines")},m(e,a){I(t,e,a),d(e,n,a),r=!0},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){E(t.$$.fragment,e),r=!1},d(e){D(t,e),e&&c(n)}}}function be(e){let t,n=e[3],r=[];for(let a=0;a<n.length;a+=1)r[a]=ve(fe(e,n,a));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=P()},l(e){for(let t=0;t<r.length;t+=1)r[t].l(e);t=P()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);d(e,t,n)},p(e,a){if(40&a){let s;for(n=e[3],s=0;s<n.length;s+=1){const o=fe(e,n,s);r[s]?r[s].p(o,a):(r[s]=ve(o),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){v(r,e),e&&c(t)}}}function ve(e){let t,n,r,a,s,f,b,v=(e[5][e[13].key]||e[13].key)+"",w=e[13].value+"";return{c(){t=h("div"),n=h("dt"),r=m(v),a=y(),s=h("dd"),f=m(w),b=y(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"DT",{class:!0});var d=l(n);r=p(d,v),d.forEach(c),a=x(i),s=o(i,"DD",{class:!0});var u=l(s);f=p(u,w),u.forEach(c),b=x(i),i.forEach(c),this.h()},h(){i(n,"class","text-sm font-medium text-gray-500"),i(s,"class","text-sm text-gray-900 mt-0 col-span-1"),i(t,"class","py-1 sm:py-2 grid grid-cols-2 gap-2 sm:px-6")},m(e,o){d(e,t,o),u(t,n),u(n,r),u(t,a),u(t,s),u(s,f),u(t,b)},p(e,t){8&t&&v!==(v=(e[5][e[13].key]||e[13].key)+"")&&g(r,v),8&t&&w!==(w=e[13].value+"")&&g(f,w)},d(e){e&&c(t)}}}function we(e){let t,n,r,a,s,f,m,p,g,b,v=e[2]&&he(e);a=new ue({props:{points:e[4]}});const w=[pe,me],S=[];function j(e,t){return e[0]?0:1}return p=j(e),g=S[p]=w[p](e),{c(){t=h("div"),n=h("div"),v&&v.c(),r=y(),k(a.$$.fragment),s=y(),f=h("div"),m=h("div"),g.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"DIV",{class:!0});var d=l(n);v&&v.l(d),r=x(d),N(a.$$.fragment,d),d.forEach(c),s=x(i),f=o(i,"DIV",{class:!0});var u=l(f);m=o(u,"DIV",{class:!0});var h=l(m);g.l(h),h.forEach(c),u.forEach(c),i.forEach(c),this.h()},h(){i(n,"class","flex-grow z-0 h-full"),i(m,"class","h-full overflow-y-scroll"),i(f,"class","bg-white h-1/2 sm:w-1/2 sm:h-full md:w-96 border-gray-200 border-t sm:border-t-0 sm:border-l"),i(t,"class","flex flex-col sm:flex-row h-full")},m(o,l){d(o,t,l),u(t,n),v&&v.m(n,null),u(n,r),I(a,n,null),e[9](n),u(t,s),u(t,f),u(f,m),S[p].m(m,null),b=!0},p(e,[t]){e[2]?v?(v.p(e,t),4&t&&$(v,1)):(v=he(e),v.c(),$(v,1),v.m(n,r)):v&&(C(),E(v,1,1,(()=>{v=null})),T());let a=p;p=j(e),p===a?S[p].p(e,t):(C(),E(S[a],1,1,(()=>{S[a]=null})),T(),g=S[p],g?g.p(e,t):(g=S[p]=w[p](e),g.c()),$(g,1),g.m(m,null))},i(e){b||($(v),$(a.$$.fragment,e),$(g),b=!0)},o(e){E(v),E(a.$$.fragment,e),E(g),b=!1},d(n){n&&c(t),v&&v.d(),D(a),e[9](null),S[p].d()}}}function $e(e,t,n){let r;S(e,W,(e=>n(11,r=e)));let a,s,o,l,{$$slots:c={},$$scope:i}=t,{center:d}=t,u=null;const f=["id","CrossingID","Total Killed","Total injured","Number of accidents","Latitude","Longitude","Street","CityName","CountyName","StateName","Meets federal safety guidelines"];return j(J,{getMap:()=>s}),j(Q,{getMapbox:()=>o}),_((async()=>{o=window.mapboxgl,o.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(2,s=new o.Map({container:a,style:"mapbox://styles/mapbox/light-v10",center:d||r.lngLat,zoom:d?15:r.zoom,minZoom:3,maxZoom:20})),s.addControl(new MapboxGeocoder({accessToken:o.accessToken,mapboxgl:o}),"top-left"),s.addControl(new o.NavigationControl,"top-left"),s.on("load",(()=>{s.resize(),s.addSource("railroad_crossing_incidents",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incidents/{z}/{x}/{y}.pbf"]}),s.addLayer({id:"railroad_crossing_incidents",type:"circle",source:"railroad_crossing_incidents","source-layer":"railroad_crossing_incidents",layout:{},paint:{"circle-radius":["case",["has","sqrt_point_count"],["+",["*",["get","sqrt_point_count"],1.1],10],10],"circle-color":["case",["==",["get","Number of accidents"],0],"blue","red"],"circle-opacity":["case",["boolean",["feature-state","hover"],!1],1,.3],"circle-stroke-color":"white","circle-stroke-width":["case",["boolean",["feature-state","hover"],!1],3,0]}})})),d&&setTimeout((()=>{const e=s.project(d),t=s.queryRenderedFeatures([[e.x-5,e.y-5],[e.x+5,e.y+5]],{layers:["railroad_crossing_incidents"]});1===t.length&&n(0,u=t[0])}),1100);let e=null;function t({featureId:e,state:t}){s.setFeatureState({id:e,source:"railroad_crossing_incidents",sourceLayer:"railroad_crossing_incidents"},{hover:t})}let l=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1});return s.on("mousemove",(n=>{const r=s.queryRenderedFeatures(n.point,{layers:["railroad_crossing_incidents"]})[0];if(!r)return s.getCanvas().style.cursor="",l.remove(),void(e&&(t({featureId:e,state:!1}),e=null));if(s.getCanvas().style.cursor="pointer",r&&r.id===e)return;e&&t({featureId:e,state:!1}),e=r.id,t({featureId:r.id,state:!0});const a=r.properties,o=r.geometry.coordinates.slice();for(e=r.id;Math.abs(n.lngLat.lng-o[0])>180;)o[0]+=n.lngLat.lng>o[0]?360:-360;if(a.point_count&&a.point_count>-2){const e=`${a.point_count} locations`;l.setLngLat(o).setHTML(e).addTo(s)}})),s.on("click","railroad_crossing_incidents",(async function(e){const t=e.features[0],{point_count:r}=t.properties;if(s.resize(),console.log("feature",t),r){const e=s.getZoom()+2;s.flyTo({center:t.geometry.coordinates,zoom:e}),n(0,u=null)}else n(0,u=e.features[0])})),()=>{n(2,s=null)}})),e.$$set=e=>{"center"in e&&n(6,d=e.center),"$$scope"in e&&n(7,i=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&u&&n(3,l=Object.keys(u.properties).filter((e=>!f.find((t=>t.includes(e))))).map((e=>({key:e,value:u.properties[e]}))))},[u,a,s,l,[{color:"red",description:"Accidents"},{color:"blue",description:"No accidents"}],{CountyName:"County",CityName:"City",StateName:"State"},d,i,c,function(e){A[e?"unshift":"push"]((()=>{a=e,n(1,a)}))}]}class Ee extends n{constructor(e){super(),r(this,e,$e,we,a,{center:6})}}const ke={Alabama:"AL",Alaska:"AK",Arizona:"AZ",Arkansas:"AR",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE","District of Columbia":"DC",Florida:"FL",Georgia:"GA",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Puerto Rico":"PR","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY"};function Ne(e){const t=t=>{!e||e.contains(t.target)||t.defaultPrevented||e.dispatchEvent(new CustomEvent("click_outside",{detail:{event:t,node:e}}))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function Ie(e,t,n){const r=e.slice();return r[25]=t[n],r}function Ce(e,t,n){const r=e.slice();return r[28]=t[n],r}function Te(e,t,n){const r=e.slice();return r[31]=t[n],r}function De(e){let t,n,r,a,s,g,b,v,w,$,E,k,N,I,C,T;return{c(){t=h("div"),n=h("div"),r=h("button"),a=m("x"),s=y(),g=h("div"),b=h("h3"),v=m("Locations table"),w=y(),$=h("p"),E=m("Search for railroad crossings near you using the search bar on the left. Sort by a column by selecting the drop down menu next to its name."),k=y(),N=h("button"),I=m("Get started"),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"DIV",{class:!0});var d=l(n);r=o(d,"BUTTON",{class:!0});var u=l(r);a=p(u,"x"),u.forEach(c),s=x(d),g=o(d,"DIV",{class:!0});var f=l(g);b=o(f,"H3",{class:!0});var h=l(b);v=p(h,"Locations table"),h.forEach(c),w=x(f),$=o(f,"P",{class:!0});var m=l($);E=p(m,"Search for railroad crossings near you using the search bar on the left. Sort by a column by selecting the drop down menu next to its name."),m.forEach(c),k=x(f),N=o(f,"BUTTON",{class:!0});var y=l(N);I=p(y,"Get started"),y.forEach(c),f.forEach(c),d.forEach(c),i.forEach(c),this.h()},h(){i(r,"class","\n        float-right\n        h-4\n        px-2\n        pb-5\n        rounded-sm\n        mt-2\n        mr-2\n        hover:bg-gray-100\n        text-gray-600\n        hover:text-gray-900\n      "),i(b,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),i($,"class","font-medium my-0 py0 max-w-2xl text-gray-600"),i(N,"class","mt-2 float-right inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),i(g,"class","p-4 sm:px-6"),i(n,"class","z-10 bg-white shadow overflow-hidden absolute rounded-md mr-2 w-1/2 lg:w-1/3 pb-2"),i(t,"class","flex justify-center")},m(o,l){d(o,t,l),u(t,n),u(n,r),u(r,a),u(n,s),u(n,g),u(g,b),u(b,v),u(g,w),u(g,$),u($,E),u(g,k),u(g,N),u(N,I),C||(T=[z(r,"click",e[16]),z(N,"click",e[16])],C=!0)},p:f,d(e){e&&c(t),C=!1,M(T)}}}function Se(e){let t,n,r,a,s,f,g,b,v,w,$,E,k,N,I,C,T=e[5].column===e[31]&&"ASC"===e[5].order&&je();function D(){return e[18](e[31])}let S=e[5].column===e[31]&&"DESC"===e[5].order&&_e();function j(){return e[19](e[31])}function _(){return e[20](e[31])}function V(...t){return e[21](e[31],...t)}return{c(){t=h("div"),n=h("div"),r=h("button"),a=h("span"),T&&T.c(),s=m("\n                            Sort Ascending"),f=y(),g=h("button"),b=h("span"),S&&S.c(),v=m("\n                            Sort Descending"),w=y(),$=h("button"),E=h("span"),k=m("𐄂"),N=m("\n                            Remove Sort"),this.h()},l(e){t=o(e,"DIV",{class:!0,role:!0,"aria-orientation":!0,"aria-labelledby":!0,tabindex:!0});var i=l(t);n=o(i,"DIV",{class:!0,role:!0});var d=l(n);r=o(d,"BUTTON",{type:!0,class:!0,role:!0,tabindex:!0,id:!0});var u=l(r);a=o(u,"SPAN",{class:!0});var h=l(a);T&&T.l(h),h.forEach(c),s=p(u,"\n                            Sort Ascending"),u.forEach(c),f=x(d),g=o(d,"BUTTON",{type:!0,class:!0,role:!0,tabindex:!0,id:!0});var m=l(g);b=o(m,"SPAN",{class:!0});var y=l(b);S&&S.l(y),y.forEach(c),v=p(m,"\n                            Sort Descending"),m.forEach(c),w=x(d),$=o(d,"BUTTON",{type:!0,class:!0,role:!0,tabindex:!0,id:!0});var I=l($);E=o(I,"SPAN",{class:!0});var C=l(E);k=p(C,"𐄂"),C.forEach(c),N=p(I,"\n                            Remove Sort"),I.forEach(c),d.forEach(c),i.forEach(c),this.h()},h(){i(a,"class","inline-block w-3 h-3"),i(r,"type","button"),i(r,"class","text-gray-700 hover:text-gray-900 hover:bg-gray-100 block px-2 py-2 text-xs"),i(r,"role","menuitem"),i(r,"tabindex","-1"),i(r,"id","menu-item-0"),i(b,"class","inline-block w-3 h-3"),i(g,"type","button"),i(g,"class","text-gray-700 hover:text-gray-900 hover:bg-gray-100 block px-2 py-2 text-xs"),i(g,"role","menuitem"),i(g,"tabindex","-1"),i(g,"id","menu-item-1"),i(E,"class","inline-block w-3 h-3"),i($,"type","button"),i($,"class","text-gray-700 hover:text-gray-900 hover:bg-gray-100 block px-2 py-2 text-xs"),i($,"role","menuitem"),i($,"tabindex","-1"),i($,"id","menu-item-2"),i(n,"class",""),i(n,"role","none"),i(t,"class","origin-top-right absolute right-0 mt-2 w-40 rounded-md shadow bg-white ring-1 ring-black ring-opacity-5 focus:outline-none"),i(t,"role","menu"),i(t,"aria-orientation","vertical"),i(t,"aria-labelledby","menu-button"),i(t,"tabindex","-1")},m(e,o){d(e,t,o),u(t,n),u(n,r),u(r,a),T&&T.m(a,null),u(r,s),u(n,f),u(n,g),u(g,b),S&&S.m(b,null),u(g,v),u(n,w),u(n,$),u($,E),u(E,k),u($,N),I||(C=[z(r,"click",D),z(g,"click",j),z($,"click",_),R(Ne.call(null,t)),z(t,"click_outside",V)],I=!0)},p(t,n){(e=t)[5].column===e[31]&&"ASC"===e[5].order?T||(T=je(),T.c(),T.m(a,null)):T&&(T.d(1),T=null),e[5].column===e[31]&&"DESC"===e[5].order?S||(S=_e(),S.c(),S.m(b,null)):S&&(S.d(1),S=null)},d(e){e&&c(t),T&&T.d(),S&&S.d(),I=!1,M(C)}}}function je(e){let t;return{c(){t=m("✓")},l(e){t=p(e,"✓")},m(e,n){d(e,t,n)},d(e){e&&c(t)}}}function _e(e){let t;return{c(){t=m("✓")},l(e){t=p(e,"✓")},m(e,n){d(e,t,n)},d(e){e&&c(t)}}}function Ve(e){let t,n,r,a,f,g,b=e[31]+"",v="Map view"!==e[31]&&function(e){let t,n,r,a,f,m,p,g;function b(){return e[17](e[31])}let v=e[6].open&&e[6].open===e[31]&&Se(e);return{c(){t=h("div"),n=h("div"),r=h("button"),a=s("svg"),f=s("path"),m=y(),v&&v.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var s=l(t);n=o(s,"DIV",{});var i=l(n);r=o(i,"BUTTON",{type:!0,class:!0,id:!0,"aria-expanded":!0,"aria-haspopup":!0});var d=l(r);a=o(d,"svg",{class:!0,xmlns:!0,viewBox:!0,fill:!0,"aria-hidden":!0},1);var u=l(a);f=o(u,"path",{"fill-rule":!0,d:!0,"clip-rule":!0},1),l(f).forEach(c),u.forEach(c),d.forEach(c),i.forEach(c),m=x(s),v&&v.l(s),s.forEach(c),this.h()},h(){i(f,"fill-rule","evenodd"),i(f,"d","M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"),i(f,"clip-rule","evenodd"),i(a,"class","h-3 w-3"),i(a,"xmlns","http://www.w3.org/2000/svg"),i(a,"viewBox","0 0 20 20"),i(a,"fill","currentColor"),i(a,"aria-hidden","true"),i(r,"type","button"),i(r,"class","inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm p-1 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-indigo-500"),i(r,"id","menu-button"),i(r,"aria-expanded","true"),i(r,"aria-haspopup","true"),i(t,"class","relative inline-block text-left right-0 top-0 ml-4 self-center")},m(e,s){d(e,t,s),u(t,n),u(n,r),u(r,a),u(a,f),u(t,m),v&&v.m(t,null),p||(g=z(r,"click",b),p=!0)},p(n,r){(e=n)[6].open&&e[6].open===e[31]?v?v.p(e,r):(v=Se(e),v.c(),v.m(t,null)):v&&(v.d(1),v=null)},d(e){e&&c(t),v&&v.d(),p=!1,g()}}}(e);return{c(){t=h("th"),n=h("div"),r=h("span"),a=m(b),f=y(),v&&v.c(),g=y(),this.h()},l(e){t=o(e,"TH",{scope:!0,class:!0});var s=l(t);n=o(s,"DIV",{class:!0});var i=l(n);r=o(i,"SPAN",{});var d=l(r);a=p(d,b),d.forEach(c),f=x(i),v&&v.l(i),i.forEach(c),g=x(s),s.forEach(c),this.h()},h(){i(n,"class","flex flex-row "),i(t,"scope","col"),i(t,"class","px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider")},m(e,s){d(e,t,s),u(t,n),u(n,r),u(r,a),u(n,f),v&&v.m(n,null),u(t,g)},p(e,t){"Map view"!==e[31]&&v.p(e,t)},d(e){e&&c(t),v&&v.d()}}}function Ae(e){let t,n=e[28].value+"";return{c(){t=m(n)},l(e){t=p(e,n)},m(e,n){d(e,t,n)},p(e,r){1&r[0]&&n!==(n=e[28].value+"")&&g(t,n)},i:f,o:f,d(e){e&&c(t)}}}function Pe(e){let t,n,r,a;const s=[Re,Le,Me],o=[];function l(e,t){return"Yes"===e[28].value?0:"No"===e[28].value?1:2}return t=l(e),n=o[t]=s[t](e),{c(){n.c(),r=P()},l(e){n.l(e),r=P()},m(e,n){o[t].m(e,n),d(e,r,n),a=!0},p(e,a){let c=t;t=l(e),t!==c&&(C(),E(o[c],1,1,(()=>{o[c]=null})),T(),n=o[t],n||(n=o[t]=s[t](e),n.c()),$(n,1),n.m(r.parentNode,r))},i(e){a||($(n),a=!0)},o(e){E(n),a=!1},d(e){o[t].d(e),e&&c(r)}}}function ze(e){let t,n,r,a;function s(){return e[22](e[28])}return{c(){t=h("button"),n=m("View on map"),this.h()},l(e){t=o(e,"BUTTON",{class:!0});var r=l(t);n=p(r,"View on map"),r.forEach(c),this.h()},h(){i(t,"class","text-gray-600 hover:text-blue-600 hover:shadow-sm bg-gray-50 hover:bg-gray-100 p-2")},m(e,o){d(e,t,o),u(t,n),r||(a=z(t,"click",s),r=!0)},p(t,n){e=t},i:f,o:f,d(e){e&&c(t),r=!1,a()}}}function Me(e){let t,n,r;return t=new re({}),{c(){k(t.$$.fragment),n=m(" Info unavailable")},l(e){N(t.$$.fragment,e),n=p(e," Info unavailable")},m(e,a){I(t,e,a),d(e,n,a),r=!0},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){E(t.$$.fragment,e),r=!1},d(e){D(t,e),e&&c(n)}}}function Le(e){let t,n,r;return t=new se({}),{c(){k(t.$$.fragment),n=m(" No")},l(e){N(t.$$.fragment,e),n=p(e," No")},m(e,a){I(t,e,a),d(e,n,a),r=!0},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){E(t.$$.fragment,e),r=!1},d(e){D(t,e),e&&c(n)}}}function Re(e){let t,n,r;return t=new te({}),{c(){k(t.$$.fragment),n=m(" Yes")},l(e){N(t.$$.fragment,e),n=p(e," Yes")},m(e,a){I(t,e,a),d(e,n,a),r=!0},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){E(t.$$.fragment,e),r=!1},d(e){D(t,e),e&&c(n)}}}function Oe(e){let t,n,r,a;const s=[ze,Pe,Ae],u=[];function f(e,t){return"Map view"===e[28].key?0:"Meets federal safety guidelines"===e[28].key?1:2}return n=f(e),r=u[n]=s[n](e),{c(){t=h("td"),r.c(),this.h()},l(e){t=o(e,"TD",{class:!0});var n=l(t);r.l(n),n.forEach(c),this.h()},h(){i(t,"class","px-4 py-4 text-left whitespace-nowrap text-xs font-medium text-gray-900")},m(e,r){d(e,t,r),u[n].m(t,null),a=!0},p(e,a){let o=n;n=f(e),n===o?u[n].p(e,a):(C(),E(u[o],1,1,(()=>{u[o]=null})),T(),r=u[n],r?r.p(e,a):(r=u[n]=s[n](e),r.c()),$(r,1),r.m(t,null))},i(e){a||($(r),a=!0)},o(e){E(r),a=!1},d(e){e&&c(t),u[n].d()}}}function Be(e){let t,n,r,a=e[25],s=[];for(let o=0;o<a.length;o+=1)s[o]=Oe(Ce(e,a,o));const i=e=>E(s[e],1,1,(()=>{s[e]=null}));return{c(){t=h("tr");for(let e=0;e<s.length;e+=1)s[e].c();n=y()},l(e){t=o(e,"TR",{});var r=l(t);for(let t=0;t<s.length;t+=1)s[t].l(r);n=x(r),r.forEach(c)},m(e,a){d(e,t,a);for(let n=0;n<s.length;n+=1)s[n].m(t,null);u(t,n),r=!0},p(e,r){if(32769&r[0]){let o;for(a=e[25],o=0;o<a.length;o+=1){const l=Ce(e,a,o);s[o]?(s[o].p(l,r),$(s[o],1)):(s[o]=Oe(l),s[o].c(),$(s[o],1),s[o].m(t,n))}for(C(),o=a.length;o<s.length;o+=1)i(o);T()}},i(e){if(!r){for(let e=0;e<a.length;e+=1)$(s[e]);r=!0}},o(e){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)E(s[t]);r=!1},d(e){e&&c(t),v(s,e)}}}function Ue(e){let t,n,r,a;function s(e,t){return e[4]>1?qe:Ke}let f=s(e),y=f(e);return{c(){t=h("p"),y.c(),n=m("\n\n    of "),r=m(e[2]),a=m(" total rows."),this.h()},l(s){t=o(s,"P",{class:!0});var i=l(t);y.l(i),n=p(i,"\n\n    of "),r=p(i,e[2]),a=p(i," total rows."),i.forEach(c),this.h()},h(){i(t,"class","float-left py-1.5 mt-2 text-xs text-gray-700")},m(e,s){d(e,t,s),y.m(t,null),u(t,n),u(t,r),u(t,a)},p(e,a){f===(f=s(e))&&y?y.p(e,a):(y.d(1),y=f(e),y&&(y.c(),y.m(t,n))),4&a[0]&&g(r,e[2])},d(e){e&&c(t),y.d()}}}function Ke(e){let t;return{c(){t=m("1 to 100")},l(e){t=p(e,"1 to 100")},m(e,n){d(e,t,n)},p:f,d(e){e&&c(t)}}}function qe(e){let t,n,r,a=100*e[4]-100+1+"";function s(e,t){return 100*e[4]>e[2]?Fe:He}let o=s(e),l=o(e);return{c(){t=m(a),n=m("\n      to\n      "),l.c(),r=P()},l(e){t=p(e,a),n=p(e,"\n      to\n      "),l.l(e),r=P()},m(e,a){d(e,t,a),d(e,n,a),l.m(e,a),d(e,r,a)},p(e,n){16&n[0]&&a!==(a=100*e[4]-100+1+"")&&g(t,a),o===(o=s(e))&&l?l.p(e,n):(l.d(1),l=o(e),l&&(l.c(),l.m(r.parentNode,r)))},d(e){e&&c(t),e&&c(n),l.d(e),e&&c(r)}}}function He(e){let t,n=100*e[4]+"";return{c(){t=m(n)},l(e){t=p(e,n)},m(e,n){d(e,t,n)},p(e,r){16&r[0]&&n!==(n=100*e[4]+"")&&g(t,n)},d(e){e&&c(t)}}}function Fe(e){let t;return{c(){t=m(e[2])},l(n){t=p(n,e[2])},m(e,n){d(e,t,n)},p(e,n){4&n[0]&&g(t,e[2])},d(e){e&&c(t)}}}function Ge(e){let t,n,r,a;return{c(){t=h("button"),n=m("Next page"),this.h()},l(e){t=o(e,"BUTTON",{class:!0});var r=l(t);n=p(r,"Next page"),r.forEach(c),this.h()},h(){i(t,"class","mt-2 float-right inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},m(s,o){d(s,t,o),u(t,n),r||(a=z(t,"click",e[13]),r=!0)},p:f,d(e){e&&c(t),r=!1,a()}}}function Ye(e){let t,n,r,a;return{c(){t=h("button"),n=m("Previous page"),this.h()},l(e){t=o(e,"BUTTON",{class:!0});var r=l(t);n=p(r,"Previous page"),r.forEach(c),this.h()},h(){i(t,"class","mt-2 mr-2 float-right inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},m(s,o){d(s,t,o),u(t,n),r||(a=z(t,"click",e[14]),r=!0)},p:f,d(e){e&&c(t),r=!1,a()}}}function Je(e){let t,n,r,a,s,f,m,p,g,b,w,k,N,I,D,S,j,_,V,A=e[7]&&De(e),P=e[8],z=[];for(let o=0;o<P.length;o+=1)z[o]=Ve(Te(e,P,o));let M=e[0],L=[];for(let o=0;o<M.length;o+=1)L[o]=Be(Ie(e,M,o));const R=e=>E(L[e],1,1,(()=>{L[e]=null}));let O=e[3]&&Ue(e),B=e[1]&&Ge(e),U=e[4]>1&&Ye(e);return{c(){A&&A.c(),t=y(),n=h("div"),r=h("div"),a=h("div"),s=h("div"),f=y(),m=h("div"),p=h("div"),g=h("div"),b=h("table"),w=h("thead"),k=h("tr");for(let e=0;e<z.length;e+=1)z[e].c();N=y(),I=h("tbody");for(let e=0;e<L.length;e+=1)L[e].c();D=y(),S=h("div"),O&&O.c(),j=y(),B&&B.c(),_=y(),U&&U.c(),this.h()},l(e){A&&A.l(e),t=x(e),n=o(e,"DIV",{class:!0});var i=l(n);r=o(i,"DIV",{class:!0});var d=l(r);a=o(d,"DIV",{});var u=l(a);s=o(u,"DIV",{id:!0}),l(s).forEach(c),u.forEach(c),d.forEach(c),f=x(i),m=o(i,"DIV",{});var h=l(m);p=o(h,"DIV",{class:!0});var y=l(p);g=o(y,"DIV",{class:!0});var v=l(g);b=o(v,"TABLE",{class:!0});var $=l(b);w=o($,"THEAD",{class:!0});var E=l(w);k=o(E,"TR",{class:!0});var C=l(k);for(let t=0;t<z.length;t+=1)z[t].l(C);C.forEach(c),E.forEach(c),N=x($),I=o($,"TBODY",{class:!0});var T=l(I);for(let t=0;t<L.length;t+=1)L[t].l(T);T.forEach(c),$.forEach(c),v.forEach(c),y.forEach(c),h.forEach(c),i.forEach(c),D=x(e),S=o(e,"DIV",{class:!0});var V=l(S);O&&O.l(V),j=x(V),B&&B.l(V),_=x(V),U&&U.l(V),V.forEach(c),this.h()},h(){i(s,"id","geocoder"),i(r,"class","w-full h-96 p-2"),i(k,"class","divide-x divide-gray-200"),i(w,"class","bg-gray-50"),i(I,"class","divide-y divide-gray-200"),i(b,"class","min-w-full divide-y divide-gray-200 bg-white"),i(g,"class","shadow border-b border-t border-gray-200 sm:rounded-md"),i(p,"class","align-middle inline-block min-w-full"),i(n,"class","flex flex-col h-full overflow-scroll bg-gray-50"),i(S,"class","")},m(e,o){A&&A.m(e,o),d(e,t,o),d(e,n,o),u(n,r),u(r,a),u(a,s),u(n,f),u(n,m),u(m,p),u(p,g),u(g,b),u(b,w),u(w,k);for(let t=0;t<z.length;t+=1)z[t].m(k,null);u(b,N),u(b,I);for(let t=0;t<L.length;t+=1)L[t].m(I,null);d(e,D,o),d(e,S,o),O&&O.m(S,null),u(S,j),B&&B.m(S,null),u(S,_),U&&U.m(S,null),V=!0},p(e,n){if(e[7]?A?A.p(e,n):(A=De(e),A.c(),A.m(t.parentNode,t)):A&&(A.d(1),A=null),8032&n[0]){let t;for(P=e[8],t=0;t<P.length;t+=1){const r=Te(e,P,t);z[t]?z[t].p(r,n):(z[t]=Ve(r),z[t].c(),z[t].m(k,null))}for(;t<z.length;t+=1)z[t].d(1);z.length=P.length}if(32769&n[0]){let t;for(M=e[0],t=0;t<M.length;t+=1){const r=Ie(e,M,t);L[t]?(L[t].p(r,n),$(L[t],1)):(L[t]=Be(r),L[t].c(),$(L[t],1),L[t].m(I,null))}for(C(),t=M.length;t<L.length;t+=1)R(t);T()}e[3]?O?O.p(e,n):(O=Ue(e),O.c(),O.m(S,j)):O&&(O.d(1),O=null),e[1]?B?B.p(e,n):(B=Ge(e),B.c(),B.m(S,_)):B&&(B.d(1),B=null),e[4]>1?U?U.p(e,n):(U=Ye(e),U.c(),U.m(S,null)):U&&(U.d(1),U=null)},i(e){if(!V){for(let e=0;e<M.length;e+=1)$(L[e]);V=!0}},o(e){L=L.filter(Boolean);for(let t=0;t<L.length;t+=1)E(L[t]);V=!1},d(e){A&&A.d(e),e&&c(t),e&&c(n),v(z,e),v(L,e),e&&c(D),e&&c(S),O&&O.d(),B&&B.d(),U&&U.d()}}}function Qe(e,t,n){let r;S(e,Z,(e=>n(7,r=e)));let{rows:a}=t,{next:s}=t,{rowsCount:o}=t,{loaded:l}=t,{currentPage:c}=t,i=[],d={column:null,order:null},u={open:null};const f=a[0].map((e=>e.key)),h=L();function m(e){u.open===e?n(6,u.open=null,u):setTimeout((()=>{n(6,u.open=e,u)}),2)}function p(e,t){console.log("e",t.detail),u.open===e&&setTimeout((()=>{n(6,u.open=null,u)}),1),n(6,u.open=e,u)}function g(e,t){n(5,d={column:e,order:t}),h("query",{sort:d,filters:i})}function y(e){n(5,d={column:null,order:null}),h("query",{sort:d,filters:i})}function x(e){console.log("huh"),h("viewLocation",e)}_((()=>{const e=window.mapboxgl;e.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJuR1ZmQ01vIn0.zyEdsIKM-4orPm-3Y0XWDQ";const t=new MapboxGeocoder({accessToken:e.accessToken,types:"region,district,place"});t.addTo("#geocoder"),t.on("result",(({result:e})=>{const t=e,{place_name:n,place_type:r}=t,a=n.split(", "),s=r[0];"place"===s?(i.push({column:"CityName",value:a[0]}),i.push({column:"StateName",value:ke[a[1]]})):"district"===s?(i.push({column:"CountyName",value:a[0].replace(" County","").toLowerCase()}),i.push({column:"StateName",value:ke[a[1]]})):"region"===s&&i.push({column:"StateName",value:ke[a[0]]}),h("query",{sort:d,filters:i})}))}));return e.$$set=e=>{"rows"in e&&n(0,a=e.rows),"next"in e&&n(1,s=e.next),"rowsCount"in e&&n(2,o=e.rowsCount),"loaded"in e&&n(3,l=e.loaded),"currentPage"in e&&n(4,c=e.currentPage)},[a,s,o,l,c,d,u,r,f,m,p,g,y,function(e){h("nextPage",{sort:d,filters:i})},function(e){h("previousPage",{sort:d,filters:i})},x,function(){Z.update((()=>!1))},e=>{m(e)},e=>g(e,"ASC"),e=>g(e,"DESC"),e=>y(),(e,t)=>{p(e,t)},e=>{x(e.value)}]}class We extends n{constructor(e){super(),r(this,e,Qe,Je,a,{rows:0,next:1,rowsCount:2,loaded:3,currentPage:4},[-1,-1])}}function Xe(e,t,n){const r=e.slice();return r[2]=t[n],r[4]=n,r}function Ze(e){let t,n;return{c(){t=h("h1"),n=m(e[1]),this.h()},l(r){t=o(r,"H1",{class:!0});var a=l(t);n=p(a,e[1]),a.forEach(c),this.h()},h(){i(t,"class","font-medium mb-2")},m(e,r){d(e,t,r),u(t,n)},p(e,t){2&t&&g(n,e[1])},d(e){e&&c(t)}}}function et(e){let t;return{c(){t=m("+")},l(e){t=p(e,"+")},m(e,n){d(e,t,n)},p:f,d(e){e&&c(t)}}}function tt(e){let t,n,r=e[0][e[4]+1][0]-1+"";return{c(){t=m("-"),n=m(r)},l(e){t=p(e,"-"),n=p(e,r)},m(e,r){d(e,t,r),d(e,n,r)},p(e,t){1&t&&r!==(r=e[0][e[4]+1][0]-1+"")&&g(n,r)},d(e){e&&c(t),e&&c(n)}}}function nt(e){let t,n,r,a,s,f,v=e[2][0]+"";function w(e,t){return e[0][e[4]+1]?tt:et}let $=w(e),E=$(e);return{c(){t=h("div"),n=h("span"),r=y(),a=h("span"),s=m(v),E.c(),f=y(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"SPAN",{class:!0,style:!0}),l(n).forEach(c),r=x(i),a=o(i,"SPAN",{});var d=l(a);s=p(d,v),E.l(d),d.forEach(c),f=x(i),i.forEach(c),this.h()},h(){i(n,"class","w-4 h-4 inline-block"),b(n,"background-color",e[2][1]),i(t,"class","")},m(e,o){d(e,t,o),u(t,n),u(t,r),u(t,a),u(a,s),E.m(a,null),u(t,f)},p(e,t){1&t&&b(n,"background-color",e[2][1]),1&t&&v!==(v=e[2][0]+"")&&g(s,v),$===($=w(e))&&E?E.p(e,t):(E.d(1),E=$(e),E&&(E.c(),E.m(a,null)))},d(e){e&&c(t),E.d()}}}function rt(e){let t,n,r=e[1]&&Ze(e),a=e[0],s=[];for(let o=0;o<a.length;o+=1)s[o]=nt(Xe(e,a,o));return{c(){t=h("div"),r&&r.c(),n=y();for(let e=0;e<s.length;e+=1)s[e].c();this.h()},l(e){t=o(e,"DIV",{class:!0});var a=l(t);r&&r.l(a),n=x(a);for(let t=0;t<s.length;t+=1)s[t].l(a);a.forEach(c),this.h()},h(){i(t,"class","\n    absolute\n    z-10\n    flex\n    flex-col\n    bg-white\n    px-4\n    py-2\n    max-w-[150px]\n    shadow-sm\n    rounded-md\n    bottom-12\n    left-2\n  ")},m(e,a){d(e,t,a),r&&r.m(t,null),u(t,n);for(let n=0;n<s.length;n+=1)s[n].m(t,null)},p(e,[o]){if(e[1]?r?r.p(e,o):(r=Ze(e),r.c(),r.m(t,n)):r&&(r.d(1),r=null),1&o){let n;for(a=e[0],n=0;n<a.length;n+=1){const r=Xe(e,a,n);s[n]?s[n].p(r,o):(s[n]=nt(r),s[n].c(),s[n].m(t,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=a.length}},i:f,o:f,d(e){e&&c(t),r&&r.d(),v(s,e)}}}function at(e,t,n){let{scale:r}=t,{title:a}=t;return e.$$set=e=>{"scale"in e&&n(0,r=e.scale),"title"in e&&n(1,a=e.title)},[r,a]}class st extends n{constructor(e){super(),r(this,e,at,rt,a,{scale:0,title:1})}}function ot(e){let t;const n=e[8].default,r=V(n,e,e[7],null);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,n){r&&r.m(e,n),t=!0},p(e,a){r&&r.p&&(!t||128&a)&&w(r,n,e,e[7],a,null,null)},i(e){t||($(r,e),t=!0)},o(e){E(r,e),t=!1},d(e){r&&r.d(e)}}}function lt(e){let t,n,r,a,s;return{c(){t=h("h3"),n=m("Railroad crossing accidents in U.S. states"),r=y(),a=h("p"),s=m("Click states to see the total railroad crossing crashes, deaths and injuries. For more information on specific crossings, see the database and interactive map."),this.h()},l(e){t=o(e,"H3",{class:!0});var i=l(t);n=p(i,"Railroad crossing accidents in U.S. states"),i.forEach(c),r=x(e),a=o(e,"P",{class:!0});var d=l(a);s=p(d,"Click states to see the total railroad crossing crashes, deaths and injuries. For more information on specific crossings, see the database and interactive map."),d.forEach(c),this.h()},h(){i(t,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),i(a,"class","font-medium my-0 py0 max-w-2xl text-lg text-gray-600")},m(e,o){d(e,t,o),u(t,n),d(e,r,o),d(e,a,o),u(a,s)},p:f,d(e){e&&c(t),e&&c(r),e&&c(a)}}}function ct(e){let t,n,r,a,s,f,b,v,w,$,E,k,N,I,C,T,D,S,j,_,V=e[3].properties.name+"",A=e[3].properties.accidents+"",P=e[3].properties.killed+"",z=e[3].properties.injured+"";return{c(){t=h("h3"),n=m(V),r=y(),a=h("p"),s=m(A),f=y(),b=h("span"),v=m("Accidents"),w=y(),$=h("p"),E=m(P),k=y(),N=h("span"),I=m("Killed"),C=y(),T=h("p"),D=m(z),S=y(),j=h("span"),_=m("Injured"),this.h()},l(e){t=o(e,"H3",{class:!0});var i=l(t);n=p(i,V),i.forEach(c),r=x(e),a=o(e,"P",{class:!0});var d=l(a);s=p(d,A),f=x(d),b=o(d,"SPAN",{class:!0});var u=l(b);v=p(u,"Accidents"),u.forEach(c),d.forEach(c),w=x(e),$=o(e,"P",{class:!0});var h=l($);E=p(h,P),k=x(h),N=o(h,"SPAN",{class:!0});var m=l(N);I=p(m,"Killed"),m.forEach(c),h.forEach(c),C=x(e),T=o(e,"P",{class:!0});var g=l(T);D=p(g,z),S=x(g),j=o(g,"SPAN",{class:!0});var y=l(j);_=p(y,"Injured"),y.forEach(c),g.forEach(c),this.h()},h(){i(t,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),i(b,"class","font-normal"),i(a,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(N,"class","font-normal"),i($,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(j,"class","font-normal"),i(T,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600")},m(e,o){d(e,t,o),u(t,n),d(e,r,o),d(e,a,o),u(a,s),u(a,f),u(a,b),u(b,v),d(e,w,o),d(e,$,o),u($,E),u($,k),u($,N),u(N,I),d(e,C,o),d(e,T,o),u(T,D),u(T,S),u(T,j),u(j,_)},p(e,t){8&t&&V!==(V=e[3].properties.name+"")&&g(n,V),8&t&&A!==(A=e[3].properties.accidents+"")&&g(s,A),8&t&&P!==(P=e[3].properties.killed+"")&&g(E,P),8&t&&z!==(z=e[3].properties.injured+"")&&g(D,z)},d(e){e&&c(t),e&&c(r),e&&c(a),e&&c(w),e&&c($),e&&c(C),e&&c(T)}}}function it(e){let t,n,r,a,s,f,g,b,v,w,S,j,_,V,A,P,L,R,B,U=e[2]&&ot(e);function K(e,t){return e[3]?ct:lt}_=new st({props:{scale:e[5],title:e[4]}});let q=K(e),H=q(e);return{c(){t=h("div"),U&&U.c(),n=y(),r=h("div"),a=h("button"),s=m("Accidents"),f=y(),g=h("button"),b=m("Killed"),v=y(),w=h("button"),S=m("Injured"),j=y(),k(_.$$.fragment),V=y(),A=h("div"),P=h("div"),H.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);U&&U.l(i),n=x(i),r=o(i,"DIV",{class:!0});var d=l(r);a=o(d,"BUTTON",{type:!0,class:!0});var u=l(a);s=p(u,"Accidents"),u.forEach(c),f=x(d),g=o(d,"BUTTON",{type:!0,class:!0});var h=l(g);b=p(h,"Killed"),h.forEach(c),v=x(d),w=o(d,"BUTTON",{type:!0,class:!0});var m=l(w);S=p(m,"Injured"),m.forEach(c),d.forEach(c),j=x(i),N(_.$$.fragment,i),V=x(i),A=o(i,"DIV",{class:!0});var y=l(A);P=o(y,"DIV",{class:!0});var $=l(P);H.l($),$.forEach(c),y.forEach(c),i.forEach(c),this.h()},h(){i(a,"type","button"),i(a,"class","\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-t-md\n        sm:rounded-l-md\n        sm:rounded-tr-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(a,"selected","accidents"===e[0]),i(g,"type","button"),i(g,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(g,"selected","killed"===e[0]),i(w,"type","button"),i(w,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-b-md\n        sm:rounded-r-md\n        sm:rounded-bl-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(w,"selected","injured"===e[0]),i(r,"class","absolute z-10 flex flex-col sm:flex-row shadow-sm rounded-md top-2 left-2"),i(P,"class","p-4 sm:px-6"),i(A,"class","z-10 bg-white shadow overflow-hidden rounded-md absolute top-2 right-0 mr-2 w-1/2 lg:w-1/3 pb-2"),i(t,"class","flex-grow z-0 h-full")},m(o,l){d(o,t,l),U&&U.m(t,null),u(t,n),u(t,r),u(r,a),u(a,s),u(r,f),u(r,g),u(g,b),u(r,v),u(r,w),u(w,S),u(t,j),I(_,t,null),u(t,V),u(t,A),u(A,P),H.m(P,null),e[12](t),L=!0,R||(B=[z(a,"click",e[9]),z(g,"click",e[10]),z(w,"click",e[11])],R=!0)},p(e,[r]){e[2]?U?(U.p(e,r),4&r&&$(U,1)):(U=ot(e),U.c(),$(U,1),U.m(t,n)):U&&(C(),E(U,1,1,(()=>{U=null})),T()),1&r&&O(a,"selected","accidents"===e[0]),1&r&&O(g,"selected","killed"===e[0]),1&r&&O(w,"selected","injured"===e[0]);const s={};32&r&&(s.scale=e[5]),16&r&&(s.title=e[4]),_.$set(s),q===(q=K(e))&&H?H.p(e,r):(H.d(1),H=q(e),H&&(H.c(),H.m(P,null)))},i(e){L||($(U),$(_.$$.fragment,e),L=!0)},o(e){E(U),E(_.$$.fragment,e),L=!1},d(n){n&&c(t),U&&U.d(),D(_),H.d(),e[12](null),R=!1,M(B)}}}function dt(e,t,n){let r,a,s;S(e,X,(e=>n(14,s=e)));let o,l,c,{$$slots:i={},$$scope:d}=t,u="accidents",f=null;const h={accidents:"Number of accidents",injured:"Number of accidents with injuries",killed:"Number of accidents with fatalities"},m={accidents:[[0,"#fcde9c"],[500,"#faa476"],[1e3,"#f0746e"],[2e3,"#e34f6f"],[4e3,"#dc3977"],[8e3,"#b9257a"],[16e3,"#7c1d6f"]],injured:[[0,"#fcde9c"],[250,"#faa476"],[500,"#f0746e"],[750,"#e34f6f"],[1e3,"#dc3977"],[1250,"#b9257a"],[1500,"#7c1d6f"]],killed:[[0,"#fcde9c"],[825,"#faa476"],[1750,"#f0746e"],[2625,"#e34f6f"],[3500,"#dc3977"],[4375,"#b9257a"],[6175,"#7c1d6f"]]};function p(e){console.log("prop",e),n(0,u=e);const t=a;l.setPaintProperty("state_totals","fill-color",{property:u,stops:t})}j(J,{getMap:()=>l}),j(Q,{getMapbox:()=>c}),_((async()=>{c=window.mapboxgl,c.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(2,l=new c.Map({container:o,style:"mapbox://styles/mapbox/light-v10",center:s.lngLat,zoom:s.zoom,minZoom:0,maxZoom:8}));return l.addControl(new class{onAdd(e){return this.map=e,this.container=document.createElement("div"),this.container.style.display="block",this.container.style.height="2.75rem",this.container.style.width="2.75rem",this.container}onRemove(){this.container.parentNode.removeChild(this.container),this.map=void 0}},"top-left"),l.addControl(new c.NavigationControl,"top-left"),l.on("load",(()=>{l.resize(),l.addSource("state_totals",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incident-totals/states/{z}/{x}/{y}.pbf"]}),l.addLayer({id:"state_totals",type:"fill",source:"state_totals","source-layer":"state_totals",layout:{},paint:{"fill-color":{property:u,stops:[[0,"#fcde9c"],[500,"#faa476"],[1e3,"#f0746e"],[2e3,"#e34f6f"],[4e3,"#dc3977"],[8e3,"#b9257a"],[16e3,"#7c1d6f"]]},"fill-opacity":["case",["boolean",["feature-state","hover"],!1],1,.8]}}),l.addLayer({id:"state_totals_lines",type:"line",source:"state_totals","source-layer":"state_totals",layout:{},paint:{"line-color":"#444","line-width":2}})})),l.on("mouseenter","state_totals",(function(e){l.getCanvas().style.cursor="pointer"})),l.on("mouseleave","state_totals",(function(){l.getCanvas().style.cursor=""})),l.on("click",(async function(e){const t=l.queryRenderedFeatures(e.point);n(3,f=t.find((e=>"state_totals"===e.layer.id)))})),()=>{n(2,l=null)}}));return e.$$set=e=>{"$$scope"in e&&n(7,d=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&n(4,r=h[u]),1&e.$$.dirty&&n(5,a=m[u])},[u,o,l,f,r,a,p,d,i,()=>{p("accidents")},()=>{p("killed")},()=>{p("injured")},function(e){A[e?"unshift":"push"]((()=>{o=e,n(1,o)}))}]}class ut extends n{constructor(e){super(),r(this,e,dt,it,a,{})}}function ft(e){let t;const n=e[8].default,r=V(n,e,e[7],null);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,n){r&&r.m(e,n),t=!0},p(e,a){r&&r.p&&(!t||128&a)&&w(r,n,e,e[7],a,null,null)},i(e){t||($(r,e),t=!0)},o(e){E(r,e),t=!1},d(e){r&&r.d(e)}}}function ht(e){let t,n,r,a,s;return{c(){t=h("h3"),n=m("Railroad crossing accidents in New Jersey counties"),r=y(),a=h("p"),s=m("Click counties to see the total railroad crossing crashes, deaths and injuries. For more information on specific crossings, see the database and interactive map."),this.h()},l(e){t=o(e,"H3",{class:!0});var i=l(t);n=p(i,"Railroad crossing accidents in New Jersey counties"),i.forEach(c),r=x(e),a=o(e,"P",{class:!0});var d=l(a);s=p(d,"Click counties to see the total railroad crossing crashes, deaths and injuries. For more information on specific crossings, see the database and interactive map."),d.forEach(c),this.h()},h(){i(t,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),i(a,"class","font-medium my-0 py0 max-w-2xl text-lg text-gray-600")},m(e,o){d(e,t,o),u(t,n),d(e,r,o),d(e,a,o),u(a,s)},p:f,d(e){e&&c(t),e&&c(r),e&&c(a)}}}function mt(e){let t,n,r,a,s,f,b,v,w,$,E,k,N,I,C,T,D,S,j,_,V=e[3].properties.name+"",A=e[3].properties.accidents+"",P=e[3].properties.killed+"",z=e[3].properties.injured+"";return{c(){t=h("h3"),n=m(V),r=y(),a=h("p"),s=m(A),f=y(),b=h("span"),v=m("Accidents"),w=y(),$=h("p"),E=m(P),k=y(),N=h("span"),I=m("Killed"),C=y(),T=h("p"),D=m(z),S=y(),j=h("span"),_=m("Injured"),this.h()},l(e){t=o(e,"H3",{class:!0});var i=l(t);n=p(i,V),i.forEach(c),r=x(e),a=o(e,"P",{class:!0});var d=l(a);s=p(d,A),f=x(d),b=o(d,"SPAN",{class:!0});var u=l(b);v=p(u,"Accidents"),u.forEach(c),d.forEach(c),w=x(e),$=o(e,"P",{class:!0});var h=l($);E=p(h,P),k=x(h),N=o(h,"SPAN",{class:!0});var m=l(N);I=p(m,"Killed"),m.forEach(c),h.forEach(c),C=x(e),T=o(e,"P",{class:!0});var g=l(T);D=p(g,z),S=x(g),j=o(g,"SPAN",{class:!0});var y=l(j);_=p(y,"Injured"),y.forEach(c),g.forEach(c),this.h()},h(){i(t,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),i(b,"class","font-normal"),i(a,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(N,"class","font-normal"),i($,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(j,"class","font-normal"),i(T,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600")},m(e,o){d(e,t,o),u(t,n),d(e,r,o),d(e,a,o),u(a,s),u(a,f),u(a,b),u(b,v),d(e,w,o),d(e,$,o),u($,E),u($,k),u($,N),u(N,I),d(e,C,o),d(e,T,o),u(T,D),u(T,S),u(T,j),u(j,_)},p(e,t){8&t&&V!==(V=e[3].properties.name+"")&&g(n,V),8&t&&A!==(A=e[3].properties.accidents+"")&&g(s,A),8&t&&P!==(P=e[3].properties.killed+"")&&g(E,P),8&t&&z!==(z=e[3].properties.injured+"")&&g(D,z)},d(e){e&&c(t),e&&c(r),e&&c(a),e&&c(w),e&&c($),e&&c(C),e&&c(T)}}}function pt(e){let t,n,r,a,s,f,g,b,v,w,S,j,_,V,A,P,L,R,B,U=e[2]&&ft(e);function K(e,t){return e[3]?mt:ht}_=new st({props:{scale:e[5],title:e[4]}});let q=K(e),H=q(e);return{c(){t=h("div"),U&&U.c(),n=y(),r=h("div"),a=h("button"),s=m("Accidents"),f=y(),g=h("button"),b=m("Killed"),v=y(),w=h("button"),S=m("Injured"),j=y(),k(_.$$.fragment),V=y(),A=h("div"),P=h("div"),H.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);U&&U.l(i),n=x(i),r=o(i,"DIV",{class:!0});var d=l(r);a=o(d,"BUTTON",{type:!0,class:!0});var u=l(a);s=p(u,"Accidents"),u.forEach(c),f=x(d),g=o(d,"BUTTON",{type:!0,class:!0});var h=l(g);b=p(h,"Killed"),h.forEach(c),v=x(d),w=o(d,"BUTTON",{type:!0,class:!0});var m=l(w);S=p(m,"Injured"),m.forEach(c),d.forEach(c),j=x(i),N(_.$$.fragment,i),V=x(i),A=o(i,"DIV",{class:!0});var y=l(A);P=o(y,"DIV",{class:!0});var $=l(P);H.l($),$.forEach(c),y.forEach(c),i.forEach(c),this.h()},h(){i(a,"type","button"),i(a,"class","\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-t-md\n        sm:rounded-l-md\n        sm:rounded-tr-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(a,"selected","accidents"===e[0]),i(g,"type","button"),i(g,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(g,"selected","killed"===e[0]),i(w,"type","button"),i(w,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-b-md\n        sm:rounded-r-md\n        sm:rounded-bl-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(w,"selected","injured"===e[0]),i(r,"class","absolute z-10 flex flex-col sm:flex-row shadow-sm rounded-md top-2 left-2"),i(P,"class","p-4 sm:px-6"),i(A,"class","z-10 bg-white shadow overflow-hidden rounded-md absolute top-2 right-0 mr-2 w-1/2 lg:w-1/3 pb-2"),i(t,"class","flex-grow z-0 h-full")},m(o,l){d(o,t,l),U&&U.m(t,null),u(t,n),u(t,r),u(r,a),u(a,s),u(r,f),u(r,g),u(g,b),u(r,v),u(r,w),u(w,S),u(t,j),I(_,t,null),u(t,V),u(t,A),u(A,P),H.m(P,null),e[12](t),L=!0,R||(B=[z(a,"click",e[9]),z(g,"click",e[10]),z(w,"click",e[11])],R=!0)},p(e,[r]){e[2]?U?(U.p(e,r),4&r&&$(U,1)):(U=ft(e),U.c(),$(U,1),U.m(t,n)):U&&(C(),E(U,1,1,(()=>{U=null})),T()),1&r&&O(a,"selected","accidents"===e[0]),1&r&&O(g,"selected","killed"===e[0]),1&r&&O(w,"selected","injured"===e[0]);const s={};16&r&&(s.title=e[4]),_.$set(s),q===(q=K(e))&&H?H.p(e,r):(H.d(1),H=q(e),H&&(H.c(),H.m(P,null)))},i(e){L||($(U),$(_.$$.fragment,e),L=!0)},o(e){E(U),E(_.$$.fragment,e),L=!1},d(n){n&&c(t),U&&U.d(),D(_),H.d(),e[12](null),R=!1,M(B)}}}function gt(e,t,n){let r,a;S(e,W,(e=>n(14,a=e)));let s,o,l,c,{$$slots:i={},$$scope:d}=t,u="accidents";const f={accidents:"Number of accidents",injured:"Number of accidents with injuries",killed:"Number of accidents with fatalities"};j(J,{getMap:()=>o}),j(Q,{getMapbox:()=>l});const h=[[0,"#fcde9c"],[15,"#faa476"],[30,"#f0746e"],[45,"#e34f6f"],[60,"#dc3977"],[75,"#b9257a"],[90,"#7c1d6f"]];function m(e){n(0,u=e),o.setPaintProperty("county_totals","fill-color",{property:u,stops:h})}_((async()=>{l=window.mapboxgl,l.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(2,o=new l.Map({container:s,style:"mapbox://styles/mapbox/light-v10",center:a.lngLat,zoom:a.zoom,minZoom:7,maxZoom:14}));return o.addControl(new class{onAdd(e){return this.map=e,this.container=document.createElement("div"),this.container.style.display="block",this.container.style.height="2.75rem",this.container.style.width="2.75rem",this.container}onRemove(){this.container.parentNode.removeChild(this.container),this.map=void 0}},"top-left"),o.addControl(new l.NavigationControl,"top-left"),o.on("load",(()=>{o.resize(),o.addSource("county_totals",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incident-totals/counties/{z}/{x}/{y}.pbf"]}),o.addLayer({id:"county_totals",type:"fill",source:"county_totals","source-layer":"county_totals",layout:{},paint:{"fill-color":{property:u,stops:[[0,"#fcde9c"],[15,"#faa476"],[30,"#f0746e"],[45,"#e34f6f"],[60,"#dc3977"],[75,"#b9257a"],[90,"#7c1d6f"]]},"fill-opacity":["case",["boolean",["feature-state","hover"],!1],1,.8]}}),o.addLayer({id:"county_totals_lines",type:"line",source:"county_totals","source-layer":"county_totals",layout:{},paint:{"line-color":"#444","line-width":2}})})),o.on("mousemove","county_totals",(function(e){o.getCanvas().style.cursor="pointer"})),o.on("mouseleave","county_totals",(function(){o.getCanvas().style.cursor=""})),o.on("click",(async function(e){const t=o.queryRenderedFeatures(e.point);n(3,c=t.find((e=>"county_totals"===e.layer.id)))})),()=>{n(2,o=null)}}));return e.$$set=e=>{"$$scope"in e&&n(7,d=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&n(4,r=f[u])},[u,s,o,c,r,h,m,d,i,()=>{m("accidents")},()=>{m("killed")},()=>{m("injured")},function(e){A[e?"unshift":"push"]((()=>{s=e,n(1,s)}))}]}class yt extends n{constructor(e){super(),r(this,e,gt,pt,a,{})}}function xt(e){let t,n,r,a;return r=new yt({}),{c(){t=h("div"),n=h("div"),k(r.$$.fragment),this.h()},l(e){t=o(e,"DIV",{class:!0});var a=l(t);n=o(a,"DIV",{class:!0});var s=l(n);N(r.$$.fragment,s),s.forEach(c),a.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,s){d(e,t,s),u(t,n),I(r,n,null),a=!0},p:f,i(e){a||($(r.$$.fragment,e),a=!0)},o(e){E(r.$$.fragment,e),a=!1},d(e){e&&c(t),D(r)}}}function bt(e){let t,n,r,a;return r=new ut({}),{c(){t=h("div"),n=h("div"),k(r.$$.fragment),this.h()},l(e){t=o(e,"DIV",{class:!0});var a=l(t);n=o(a,"DIV",{class:!0});var s=l(n);N(r.$$.fragment,s),s.forEach(c),a.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,s){d(e,t,s),u(t,n),I(r,n,null),a=!0},p:f,i(e){a||($(r.$$.fragment,e),a=!0)},o(e){E(r.$$.fragment,e),a=!1},d(e){e&&c(t),D(r)}}}function vt(e){let t,n,r,a;return r=new We({props:{rows:e[0],columns:e[1],next:e[2],rowsCount:e[3],loaded:e[5],currentPage:e[6]}}),r.$on("query",e[9]),r.$on("nextPage",e[10]),r.$on("previousPage",e[11]),r.$on("viewLocation",e[12]),{c(){t=h("div"),n=h("div"),k(r.$$.fragment),this.h()},l(e){t=o(e,"DIV",{class:!0});var a=l(t);n=o(a,"DIV",{class:!0});var s=l(n);N(r.$$.fragment,s),s.forEach(c),a.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 pb-12 h-full bg-gray-50")},m(e,s){d(e,t,s),u(t,n),I(r,n,null),a=!0},p(e,t){const n={};1&t&&(n.rows=e[0]),2&t&&(n.columns=e[1]),4&t&&(n.next=e[2]),8&t&&(n.rowsCount=e[3]),32&t&&(n.loaded=e[5]),64&t&&(n.currentPage=e[6]),r.$set(n)},i(e){a||($(r.$$.fragment,e),a=!0)},o(e){E(r.$$.fragment,e),a=!1},d(e){e&&c(t),D(r)}}}function wt(e){let t,n,r,a;return r=new Ee({props:{center:e[7]}}),{c(){t=h("div"),n=h("div"),k(r.$$.fragment),this.h()},l(e){t=o(e,"DIV",{class:!0});var a=l(t);n=o(a,"DIV",{class:!0});var s=l(n);N(r.$$.fragment,s),s.forEach(c),a.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,s){d(e,t,s),u(t,n),I(r,n,null),a=!0},p(e,t){const n={};128&t&&(n.center=e[7]),r.$set(n)},i(e){a||($(r.$$.fragment,e),a=!0)},o(e){E(r.$$.fragment,e),a=!1},d(e){e&&c(t),D(r)}}}function $t(e){let t,n,r,a,s,f,g,b,v,w,k,N,I,D,S,j,_,V,A,P,L,R,O,U,K,q,H,F,G,Y,J,Q,W,X,Z,ee,te,ne,re,ae,se,oe,le,ce,ie,de,ue,fe,he,me,pe,ge,ye,xe,be,ve,we,$e,Ee,ke,Ne,Ie,Ce,Te,De,Se;const je=[wt,vt,bt,xt],_e=[];function Ve(e,t){return"map"===e[4]?0:"list"===e[4]?1:"us-totals"===e[4]?2:"nj-totals"===e[4]?3:-1}return~(fe=Ve(e))&&(he=_e[fe]=je[fe](e)),{c(){t=h("script"),r=h("link"),a=h("script"),f=h("link"),g=y(),b=h("div"),v=h("div"),w=h("h1"),k=m("Railroad Crossing Incidents"),N=y(),I=h("div"),D=h("nav"),S=h("button"),j=h("span"),_=m("Map"),V=y(),A=h("span"),R=y(),O=h("button"),U=h("span"),K=m("Locations"),q=y(),H=h("span"),Y=y(),J=h("button"),Q=h("span"),W=m("N.J. Totals"),X=y(),Z=h("span"),ne=y(),re=h("button"),ae=h("span"),se=m("U.S. Totals"),oe=y(),le=h("span"),de=y(),ue=h("div"),he&&he.c(),me=y(),pe=h("div"),ge=m("Story by "),ye=h("a"),xe=m("Payton Guion"),be=m(". Graphics by "),ve=h("a"),we=m("Seth Vincent"),$e=m(". "),Ee=h("br"),ke=m("Data from the "),Ne=h("a"),Ie=m("Federal Railroad Administration"),Ce=m("."),this.h()},l(e){const n=B('[data-svelte="svelte-hlw6vs"]',document.head);t=o(n,"SCRIPT",{src:!0}),l(t).forEach(c),r=o(n,"LINK",{href:!0,rel:!0}),a=o(n,"SCRIPT",{src:!0}),l(a).forEach(c),f=o(n,"LINK",{rel:!0,href:!0,type:!0}),n.forEach(c),g=x(e),b=o(e,"DIV",{class:!0});var s=l(b);v=o(s,"DIV",{class:!0});var i=l(v);w=o(i,"H1",{class:!0});var d=l(w);k=p(d,"Railroad Crossing Incidents"),d.forEach(c),i.forEach(c),N=x(s),I=o(s,"DIV",{class:!0});var u=l(I);D=o(u,"NAV",{class:!0,"aria-label":!0});var h=l(D);S=o(h,"BUTTON",{class:!0,"aria-current":!0});var m=l(S);j=o(m,"SPAN",{});var y=l(j);_=p(y,"Map"),y.forEach(c),V=x(m),A=o(m,"SPAN",{"aria-hidden":!0,class:!0}),l(A).forEach(c),m.forEach(c),R=x(h),O=o(h,"BUTTON",{class:!0,"aria-current":!0});var $=l(O);U=o($,"SPAN",{});var E=l(U);K=p(E,"Locations"),E.forEach(c),q=x($),H=o($,"SPAN",{"aria-hidden":!0,class:!0}),l(H).forEach(c),$.forEach(c),Y=x(h),J=o(h,"BUTTON",{class:!0,"aria-current":!0});var C=l(J);Q=o(C,"SPAN",{});var T=l(Q);W=p(T,"N.J. Totals"),T.forEach(c),X=x(C),Z=o(C,"SPAN",{"aria-hidden":!0,class:!0}),l(Z).forEach(c),C.forEach(c),ne=x(h),re=o(h,"BUTTON",{class:!0,"aria-current":!0});var P=l(re);ae=o(P,"SPAN",{});var z=l(ae);se=p(z,"U.S. Totals"),z.forEach(c),oe=x(P),le=o(P,"SPAN",{"aria-hidden":!0,class:!0}),l(le).forEach(c),P.forEach(c),h.forEach(c),u.forEach(c),de=x(s),ue=o(s,"DIV",{class:!0});var M=l(ue);he&&he.l(M),M.forEach(c),me=x(s),pe=o(s,"DIV",{class:!0});var L=l(pe);ge=p(L,"Story by "),ye=o(L,"A",{href:!0,target:!0,class:!0});var F=l(ye);xe=p(F,"Payton Guion"),F.forEach(c),be=p(L,". Graphics by "),ve=o(L,"A",{href:!0,target:!0,class:!0});var G=l(ve);we=p(G,"Seth Vincent"),G.forEach(c),$e=p(L,". "),Ee=o(L,"BR",{class:!0}),ke=p(L,"Data from the "),Ne=o(L,"A",{href:!0,target:!0,class:!0});var ee=l(Ne);Ie=p(ee,"Federal Railroad Administration"),ee.forEach(c),Ce=p(L,"."),L.forEach(c),s.forEach(c),this.h()},h(){document.title="Railroad Crossing Incidents",t.src!==(n="https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js")&&i(t,"src","https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js"),i(r,"href","https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.css"),i(r,"rel","stylesheet"),a.src!==(s="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js")&&i(a,"src","https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js"),i(f,"rel","stylesheet"),i(f,"href","https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.css"),i(f,"type","text/css"),i(w,"class","font-bold text-gray-600"),i(v,"class","flex-none p-4"),i(A,"aria-hidden","true"),i(A,"class",P="\n          "+("map"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n          absolute inset-x-0 bottom-0 h-0.5\n        "),i(S,"class",L="\n        "+("map"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n        group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n      "),i(S,"aria-current","page"),i(H,"aria-hidden","true"),i(H,"class",F="\n          "+("list"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n          absolute inset-x-0 bottom-0 h-0.5\n        "),i(O,"class",G="\n        "+("list"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n        group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n      "),i(O,"aria-current","page"),i(Z,"aria-hidden","true"),i(Z,"class",ee="\n            "+("nj-totals"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),i(J,"class",te="\n          "+("nj-totals"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),i(J,"aria-current","page"),i(le,"aria-hidden","true"),i(le,"class",ce="\n            "+("us-totals"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),i(re,"class",ie="\n          "+("us-totals"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),i(re,"aria-current","page"),i(D,"class","relative z-0 shadow flex divide-x divide-gray-200 border-t border-gray-100 border-"),i(D,"aria-label","Tabs"),i(I,"class","flex-none block"),i(ue,"class","flex-grow border-t border-gray-200 overflow-hidden"),i(ye,"href","https://twitter.com/PaytonGuion"),i(ye,"target","_blank"),i(ye,"class","underline"),i(ve,"href","https://twitter.com/sethdvincent"),i(ve,"target","_blank"),i(ve,"class","underline"),i(Ee,"class","sm:hidden"),i(Ne,"href","https://railroads.dot.gov"),i(Ne,"target","_blank"),i(Ne,"class","underline"),i(pe,"class","flex-none p-4 text-xs text-gray-500 border-t border-gray-200"),i(b,"class","flex flex-col h-screen border border-gray-100  max-w-screen-lg mx-auto")},m(n,s){u(document.head,t),u(document.head,r),u(document.head,a),u(document.head,f),d(n,g,s),d(n,b,s),u(b,v),u(v,w),u(w,k),u(b,N),u(b,I),u(I,D),u(D,S),u(S,j),u(j,_),u(S,V),u(S,A),u(D,R),u(D,O),u(O,U),u(U,K),u(O,q),u(O,H),u(D,Y),u(D,J),u(J,Q),u(Q,W),u(J,X),u(J,Z),u(D,ne),u(D,re),u(re,ae),u(ae,se),u(re,oe),u(re,le),u(b,de),u(b,ue),~fe&&_e[fe].m(ue,null),u(b,me),u(b,pe),u(pe,ge),u(pe,ye),u(ye,xe),u(pe,be),u(pe,ve),u(ve,we),u(pe,$e),u(pe,Ee),u(pe,ke),u(pe,Ne),u(Ne,Ie),u(pe,Ce),Te=!0,De||(Se=[z(S,"click",e[16]),z(O,"click",e[17]),z(J,"click",e[18]),z(re,"click",e[19])],De=!0)},p(e,[t]){(!Te||16&t&&P!==(P="\n          "+("map"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n          absolute inset-x-0 bottom-0 h-0.5\n        "))&&i(A,"class",P),(!Te||16&t&&L!==(L="\n        "+("map"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n        group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n      "))&&i(S,"class",L),(!Te||16&t&&F!==(F="\n          "+("list"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n          absolute inset-x-0 bottom-0 h-0.5\n        "))&&i(H,"class",F),(!Te||16&t&&G!==(G="\n        "+("list"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n        group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n      "))&&i(O,"class",G),(!Te||16&t&&ee!==(ee="\n            "+("nj-totals"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&i(Z,"class",ee),(!Te||16&t&&te!==(te="\n          "+("nj-totals"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&i(J,"class",te),(!Te||16&t&&ce!==(ce="\n            "+("us-totals"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&i(le,"class",ce),(!Te||16&t&&ie!==(ie="\n          "+("us-totals"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&i(re,"class",ie);let n=fe;fe=Ve(e),fe===n?~fe&&_e[fe].p(e,t):(he&&(C(),E(_e[n],1,1,(()=>{_e[n]=null})),T()),~fe?(he=_e[fe],he?he.p(e,t):(he=_e[fe]=je[fe](e),he.c()),$(he,1),he.m(ue,null)):he=null)},i(e){Te||($(he),Te=!0)},o(e){E(he),Te=!1},d(e){c(t),c(r),c(a),c(f),e&&c(g),e&&c(b),~fe&&_e[fe].d(),De=!1,M(Se)}}}async function Et({fetch:e,page:t}){const n=await e("https://railroad-crossing-data.vercel.app/railroad_crossing_data/RRData.json?&_sort=StateName"),r=await n.json();if(n.ok){const{rows:e,columns:t}=F(r),n=r.filtered_table_rows_count;let a=null;return a=r.next&&r.next.includes(",")?r.next.split(",")[1]:r.next,console.log("next",a),{props:{rows:e,columns:t,next:a,rowsCount:n}}}return{status:n.status,error:new Error("Could not load data")}}function kt(e,t,n){let r,a,s,o;S(e,G,(e=>n(13,o=e)));let{rows:l}=t,{columns:c}=t,{next:i}=t,{rowsCount:d}=t,u=!0,f=1,h=o.query.get("view")||"map";async function m(e){n(5,u=!1);const{sort:t,filters:r}=e,a=i?`_next=${i}`:"";let s="";t.column&&(s=`_sort${"DESC"===t.order?"_desc":""}=${t.column}`);const o=[];if(r.length)for(const n of r)"StateName"===n.column?o.push(`StateName__exact=${n.value}`):"CountyName"===n.column?o.push(`CountyName__like=${n.value}`):"CityName"===n.column&&o.push(`CityName__like=${n.value}`);const f=`https://railroad-crossing-data.vercel.app/railroad_crossing_data/RRData.json?${[a,...o,s].join("&")}`,h=await fetch(f),m=await h.json(),p=F(m);n(0,l=[...p.rows]),n(1,c=[...p.columns]),n(3,d=m.filtered_table_rows_count),m.rows[0][0],m.next&&m.next.includes(",")?n(2,i=m.next.split(",")[1]):n(2,i=m.next),n(5,u=!0)}async function p(e){o.query.set("view",e),n(4,h=e);const t=o.query.toString();await Y(`${H}?${t}`)}U(1e3),K(150);return e.$$set=e=>{"rows"in e&&n(0,l=e.rows),"columns"in e&&n(1,c=e.columns),"next"in e&&n(2,i=e.next),"rowsCount"in e&&n(3,d=e.rowsCount)},e.$$.update=()=>{if(8192&e.$$.dirty&&n(14,r=o.query.get("lng")),8192&e.$$.dirty&&n(15,a=o.query.get("lat")),49152&e.$$.dirty&&n(7,s=r&a?[r,a]:null),8208&e.$$.dirty&&"map"!==h&&(o.query.has("lng")||o.query.has("lat"))){o.query.delete("lng"),o.query.delete("lat");const e=o.query.toString();Y(`${H}?${e}`)}},[l,c,i,d,h,u,f,s,p,async function(e){n(2,i=null),n(6,f=1),await m(e.detail)},async function(e){console.log("next"),n(6,f+=1),await m(e.detail)},async function(e){console.log("previous"),n(2,i-=200),i<0&&(n(2,i=null),n(6,f=1)),n(6,f-=1),await m(e.detail)},function(e){const[t,r]=e.detail;o.query.set("lng",t),o.query.set("lat",r),n(7,s=[t,r]),p("map")},o,r,a,()=>{p("map")},()=>{p("list")},()=>{p("nj-totals")},()=>{p("us-totals")}]}export default class extends n{constructor(e){super(),r(this,e,kt,$t,a,{rows:0,columns:1,next:2,rowsCount:3})}}export{Et as load};

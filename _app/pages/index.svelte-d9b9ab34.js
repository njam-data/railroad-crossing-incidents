import{H as e,C as t,S as n,i as r,s as a,I as o,c as s,a as l,d as c,b as i,f as d,F as u,G as f,e as h,t as m,g as p,h as g,k as x,n as y,J as b,K as v,E as w,v as $,r as E,j as k,m as N,o as I,B as C,u as D,w as T,L as S,x as j,z as _,D as V,M as A,l as P,N as z,O as M,P as L,Q as R,R as O,T as B,U as K,V as U}from"../chunks/vendor-39a0c49e.js";import{r as q,b as H}from"../chunks/paths-7dc55c62.js";function G(e){const t=["rowid","Latitude","Longitude"],n=["Meets minimum safety guidelines","Total Killed","Total injured","Number of accidents","StateName","CountyName","CityName","Street","Active or Passive?","Distance from highway (feet)","Daily trains","Max train speed","Gates","Lights","Daily traffic","Last time traffic counted","School buses","Bus count","Railroad","CrossingID"],r=["link",...e.columns];return{rows:e.rows.map((e=>r.map(((n,r)=>{if(!t.find((e=>e.includes(n))))return"link"===n?{key:"Map view",value:[e[12],e[11]]}:{key:n,value:e[r-1]}})).filter((e=>!!e)).sort(((e,t)=>n.indexOf(e.key)-n.indexOf(t.key))))),columns:r}}const Y={subscribe:t=>(()=>{const t=e("__svelte__");return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:t.navigating.subscribe}},session:t.session}})().page.subscribe(t)},J=async function(e,t){return q.goto(e,t,[])};const F={},Q={},W=t({zoom:7.5,lngLat:["-74.558333","40.16"]}),X=t({zoom:2,lngLat:["-98.5556","39.8097"]}),Z=t(!0);function ee(e){let t,n;return{c(){t=o("svg"),n=o("path"),this.h()},l(e){t=s(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var r=l(t);n=s(r,"path",{d:!0},1),l(n).forEach(c),r.forEach(c),this.h()},h(){i(n,"d","M50,5C25.147,5,5,25.148,5,50c0,24.852,20.147,45,45,45c24.854,0,45-20.148,45-45C95,25.148,74.854,5,50,5z M74.675,38.917  l-23.75,29.511c-1.109,1.379-2.756,2.252-4.517,2.396c-0.173,0.015-0.347,0.021-0.52,0.021c-1.585,0-3.138-0.589-4.326-1.652  L25.985,55.17c-2.463-2.217-2.661-6.01-0.444-8.473c2.218-2.463,6.012-2.662,8.474-0.444l11.223,10.103l20.088-24.961  c2.078-2.582,5.855-2.989,8.438-0.913C76.344,32.558,76.752,36.335,74.675,38.917z"),i(t,"height","20px"),i(t,"width","20px"),i(t,"class","align-top inline"),i(t,"fill","#4CE600"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),i(t,"version","1.1"),i(t,"x","0px"),i(t,"y","0px"),i(t,"viewBox","0 0 100 100"),i(t,"enable-background","new 0 0 100 100"),i(t,"xml:space","preserve")},m(e,r){d(e,t,r),u(t,n)},p:f,i:f,o:f,d(e){e&&c(t)}}}class te extends n{constructor(e){super(),r(this,e,null,ee,a,{})}}function ne(e){let t,n;return{c(){t=o("svg"),n=o("path"),this.h()},l(e){t=s(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var r=l(t);n=s(r,"path",{d:!0},1),l(n).forEach(c),r.forEach(c),this.h()},h(){i(n,"d","M50,5C25.147,5,5,25.147,5,50c0,24.854,20.147,45,45,45c24.854,0,45-20.146,45-45C95,25.147,74.854,5,50,5z M49.999,76.75  c-3.342,0-6.061-2.717-6.061-6.057c0-3.346,2.719-6.066,6.061-6.066c3.343,0,6.063,2.723,6.063,6.066  C56.063,74.033,53.342,76.75,49.999,76.75z M66.238,43.808c-1.174,1.827-2.795,4.01-6.028,6.531  c-3.213,2.461-4.185,3.724-4.478,4.259c-0.166,0.299-0.402,0.895-0.59,2.004c-0.065,0.39-0.119,0.812-0.162,1.265l-0.254,2.714  l-9.771,0.023l0.124-3.127c0.017-0.4,0.06-1.185,0.168-1.918c0.324-2.229,1.085-4.209,2.261-5.882  c1.104-1.573,3.247-3.563,6.549-6.079c2.442-1.863,3.396-2.928,3.764-3.492c0.47-0.717,0.697-1.472,0.697-2.305  c0-1.931-0.705-3.46-2.094-4.545c-1.474-1.151-3.518-1.735-6.073-1.735c-2.265,0-4.176,0.599-5.682,1.778  c-1.594,1.239-2.713,2.953-3.245,4.964l-0.66,2.492l-9.563-1.037l0.676-3.238c0.88-4.218,2.865-7.474,5.902-9.677  c3.934-2.855,8.156-4.303,12.552-4.303c4.856,0,8.831,1.249,12.508,3.931c3.399,2.482,5.349,6.492,5.349,11.002  C68.188,39.642,67.55,41.727,66.238,43.808z"),i(t,"height","20px"),i(t,"width","20px"),i(t,"class","align-top inline"),i(t,"fill","#A2A2A2"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),i(t,"version","1.1"),i(t,"x","0px"),i(t,"y","0px"),i(t,"viewBox","0 0 100 100"),i(t,"enable-background","new 0 0 100 100"),i(t,"xml:space","preserve")},m(e,r){d(e,t,r),u(t,n)},p:f,i:f,o:f,d(e){e&&c(t)}}}class re extends n{constructor(e){super(),r(this,e,null,ne,a,{})}}function ae(e){let t,n;return{c(){t=o("svg"),n=o("path"),this.h()},l(e){t=s(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var r=l(t);n=s(r,"path",{d:!0},1),l(n).forEach(c),r.forEach(c),this.h()},h(){i(n,"d","M50,5C25.147,5,5,25.147,5,50c0,24.852,20.147,45,45,45c24.854,0,45-20.148,45-45C95,25.147,74.854,5,50,5z M70.243,70.24  c-1.173,1.172-2.708,1.758-4.243,1.758s-3.07-0.586-4.242-1.757L50,58.484L38.243,70.242C37.071,71.414,35.536,72,34,72  s-3.071-0.586-4.243-1.757c-2.343-2.345-2.343-6.144,0-8.485L41.515,50L29.757,38.242c-2.343-2.343-2.343-6.142,0-8.485  c2.343-2.343,6.142-2.343,8.485,0L50,41.514l11.756-11.757c2.344-2.343,6.145-2.343,8.485,0c2.344,2.343,2.344,6.142,0.001,8.485  L58.486,49.999l11.756,11.756C72.586,64.1,72.586,67.898,70.243,70.24z"),i(t,"height","20px"),i(t,"width","20px"),i(t,"class","align-top inline"),i(t,"fill","#FF0000"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),i(t,"version","1.1"),i(t,"x","0px"),i(t,"y","0px"),i(t,"viewBox","0 0 100 100"),i(t,"enable-background","new 0 0 100 100"),i(t,"xml:space","preserve")},m(e,r){d(e,t,r),u(t,n)},p:f,i:f,o:f,d(e){e&&c(t)}}}class oe extends n{constructor(e){super(),r(this,e,null,ae,a,{})}}function se(e,t,n){const r=e.slice();return r[2]=t[n],r}function le(e){let t,n;return{c(){t=h("h1"),n=m(e[1]),this.h()},l(r){t=s(r,"H1",{class:!0});var a=l(t);n=p(a,e[1]),a.forEach(c),this.h()},h(){i(t,"class","font-medium mb-2")},m(e,r){d(e,t,r),u(t,n)},p(e,t){2&t&&g(n,e[1])},d(e){e&&c(t)}}}function ce(e){let t,n,r,a,o,f,v=e[2].description+"";return{c(){t=h("div"),n=h("span"),r=x(),a=h("span"),o=m(v),f=x(),this.h()},l(e){t=s(e,"DIV",{class:!0});var i=l(t);n=s(i,"SPAN",{class:!0,style:!0}),l(n).forEach(c),r=y(i),a=s(i,"SPAN",{class:!0});var d=l(a);o=p(d,v),d.forEach(c),f=y(i),i.forEach(c),this.h()},h(){i(n,"class","w-4 h-4 inline-block rounded-full align-middle"),b(n,"background-color",e[2].color),i(a,"class","align-middle"),i(t,"class","")},m(e,s){d(e,t,s),u(t,n),u(t,r),u(t,a),u(a,o),u(t,f)},p(e,t){1&t&&b(n,"background-color",e[2].color),1&t&&v!==(v=e[2].description+"")&&g(o,v)},d(e){e&&c(t)}}}function ie(e){let t,n,r=e[1]&&le(e),a=e[0],o=[];for(let s=0;s<a.length;s+=1)o[s]=ce(se(e,a,s));return{c(){t=h("div"),r&&r.c(),n=x();for(let e=0;e<o.length;e+=1)o[e].c();this.h()},l(e){t=s(e,"DIV",{class:!0});var a=l(t);r&&r.l(a),n=y(a);for(let t=0;t<o.length;t+=1)o[t].l(a);a.forEach(c),this.h()},h(){i(t,"class","\n    absolute\n    z-10\n    flex\n    flex-col\n    bg-white\n    px-4\n    py-2\n    max-w-[150px]\n    shadow-sm\n    rounded-md\n    bottom-12\n    left-2\n  ")},m(e,a){d(e,t,a),r&&r.m(t,null),u(t,n);for(let n=0;n<o.length;n+=1)o[n].m(t,null)},p(e,[s]){if(e[1]?r?r.p(e,s):(r=le(e),r.c(),r.m(t,n)):r&&(r.d(1),r=null),1&s){let n;for(a=e[0],n=0;n<a.length;n+=1){const r=se(e,a,n);o[n]?o[n].p(r,s):(o[n]=ce(r),o[n].c(),o[n].m(t,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=a.length}},i:f,o:f,d(e){e&&c(t),r&&r.d(),v(o,e)}}}function de(e,t,n){let{points:r}=t,{title:a}=t;return e.$$set=e=>{"points"in e&&n(0,r=e.points),"title"in e&&n(1,a=e.title)},[r,a]}class ue extends n{constructor(e){super(),r(this,e,de,ie,a,{points:0,title:1})}}function fe(e,t,n){const r=e.slice();return r[13]=t[n],r}function he(e){let t;const n=e[8].default,r=V(n,e,e[7],null);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,n){r&&r.m(e,n),t=!0},p(e,a){r&&r.p&&(!t||128&a)&&w(r,n,e,e[7],a,null,null)},i(e){t||($(r,e),t=!0)},o(e){E(r,e),t=!1},d(e){r&&r.d(e)}}}function me(e){let t,n,r,a,o,g,b,v,w;return{c(){t=h("div"),n=h("div"),r=h("h1"),a=m("Railroad crossing incidents"),o=x(),g=h("p"),b=m("Click a point to learn "),v=h("br"),w=m("about accidents and other information at that railroad crossing."),this.h()},l(e){t=s(e,"DIV",{class:!0});var i=l(t);n=s(i,"DIV",{class:!0});var d=l(n);r=s(d,"H1",{class:!0});var u=l(r);a=p(u,"Railroad crossing incidents"),u.forEach(c),o=y(d),g=s(d,"P",{class:!0});var f=l(g);b=p(f,"Click a point to learn "),v=s(f,"BR",{}),w=p(f,"about accidents and other information at that railroad crossing."),f.forEach(c),d.forEach(c),i.forEach(c),this.h()},h(){i(r,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),i(g,"class","font-medium text-gray-500 text-xl"),i(n,"class","h-40 self-center"),i(t,"class","px-4 py-4 sm:px-6 flex items-center h-full")},m(e,s){d(e,t,s),u(t,n),u(n,r),u(r,a),u(n,o),u(n,g),u(g,b),u(g,v),u(g,w)},p:f,i:f,o:f,d(e){e&&c(t)}}}function pe(e){let t,n,r,a,o,f,b,v,w,k,N,I,T,S,j,_,V,A,P,z,M,L,R,O,B,K,U,q,H,G,Y=e[0].properties.Street+"",J=e[0].properties.CityName+"",F=e[0].properties.CountyName+"",Q=e[0].properties.StateName+"",W=e[0].properties["Number of accidents"]+"",X=e[0].properties["Total Killed"]+"",Z=e[0].properties["Total injured"]+"";const ee=[ye,xe,ge],te=[];function ne(e,t){return"Yes"===e[0].properties["Meets minimum safety guidelines"]?0:"No"===e[0].properties["Meets minimum safety guidelines"]?1:2}T=ne(e),S=te[T]=ee[T](e);let re=e[3]&&be(e);return{c(){t=h("div"),n=h("h3"),r=m(Y),a=x(),o=h("h3"),f=m(J),b=m(", "),v=m(F),w=m(", "),k=m(Q),N=x(),I=h("p"),S.c(),j=x(),_=h("p"),V=m(W),A=m(" Accidents"),P=x(),z=h("p"),M=m(X),L=m(" Killed"),R=x(),O=h("p"),B=m(Z),K=m(" Injured"),U=x(),q=h("div"),H=h("dl"),re&&re.c(),this.h()},l(e){t=s(e,"DIV",{class:!0});var i=l(t);n=s(i,"H3",{class:!0});var d=l(n);r=p(d,Y),d.forEach(c),a=y(i),o=s(i,"H3",{class:!0});var u=l(o);f=p(u,J),b=p(u,", "),v=p(u,F),w=p(u,", "),k=p(u,Q),u.forEach(c),N=y(i),I=s(i,"P",{class:!0});var h=l(I);S.l(h),h.forEach(c),j=y(i),_=s(i,"P",{class:!0});var m=l(_);V=p(m,W),A=p(m," Accidents"),m.forEach(c),P=y(i),z=s(i,"P",{class:!0});var g=l(z);M=p(g,X),L=p(g," Killed"),g.forEach(c),R=y(i),O=s(i,"P",{class:!0});var x=l(O);B=p(x,Z),K=p(x," Injured"),x.forEach(c),i.forEach(c),U=y(e),q=s(e,"DIV",{class:!0});var $=l(q);H=s($,"DL",{class:!0});var E=l(H);re&&re.l(E),E.forEach(c),$.forEach(c),this.h()},h(){i(n,"class","text-lg leading-6 font-medium text-gray-900"),i(o,"class","text-md leading-6 font-medium text-gray-600 mb-2"),i(I,"class","font-bold my-0 pt-1 pb-3 max-w-2xl text-sm text-gray-600"),i(_,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(z,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(O,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(t,"class","px-4 py-4 sm:px-6"),i(H,"class","divide-y divide-gray-200"),i(q,"class","border-t border-gray-200 px-4 py-2 sm:py-4 sm:p-0")},m(e,s){d(e,t,s),u(t,n),u(n,r),u(t,a),u(t,o),u(o,f),u(o,b),u(o,v),u(o,w),u(o,k),u(t,N),u(t,I),te[T].m(I,null),u(t,j),u(t,_),u(_,V),u(_,A),u(t,P),u(t,z),u(z,M),u(z,L),u(t,R),u(t,O),u(O,B),u(O,K),d(e,U,s),d(e,q,s),u(q,H),re&&re.m(H,null),G=!0},p(e,t){(!G||1&t)&&Y!==(Y=e[0].properties.Street+"")&&g(r,Y),(!G||1&t)&&J!==(J=e[0].properties.CityName+"")&&g(f,J),(!G||1&t)&&F!==(F=e[0].properties.CountyName+"")&&g(v,F),(!G||1&t)&&Q!==(Q=e[0].properties.StateName+"")&&g(k,Q);let n=T;T=ne(e),T!==n&&(C(),E(te[n],1,1,(()=>{te[n]=null})),D(),S=te[T],S||(S=te[T]=ee[T](e),S.c()),$(S,1),S.m(I,null)),(!G||1&t)&&W!==(W=e[0].properties["Number of accidents"]+"")&&g(V,W),(!G||1&t)&&X!==(X=e[0].properties["Total Killed"]+"")&&g(M,X),(!G||1&t)&&Z!==(Z=e[0].properties["Total injured"]+"")&&g(B,Z),e[3]?re?re.p(e,t):(re=be(e),re.c(),re.m(H,null)):re&&(re.d(1),re=null)},i(e){G||($(S),G=!0)},o(e){E(S),G=!1},d(e){e&&c(t),te[T].d(),e&&c(U),e&&c(q),re&&re.d()}}}function ge(e){let t,n,r;return t=new re({}),{c(){k(t.$$.fragment),n=m(" May or may not meet minimum safety guidelines")},l(e){N(t.$$.fragment,e),n=p(e," May or may not meet minimum safety guidelines")},m(e,a){I(t,e,a),d(e,n,a),r=!0},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){E(t.$$.fragment,e),r=!1},d(e){T(t,e),e&&c(n)}}}function xe(e){let t,n,r;return t=new oe({}),{c(){k(t.$$.fragment),n=m(" Does not meet minimum safety guidelines")},l(e){N(t.$$.fragment,e),n=p(e," Does not meet minimum safety guidelines")},m(e,a){I(t,e,a),d(e,n,a),r=!0},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){E(t.$$.fragment,e),r=!1},d(e){T(t,e),e&&c(n)}}}function ye(e){let t,n,r;return t=new te({}),{c(){k(t.$$.fragment),n=m(" Meets minimum safety guidelines")},l(e){N(t.$$.fragment,e),n=p(e," Meets minimum safety guidelines")},m(e,a){I(t,e,a),d(e,n,a),r=!0},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){E(t.$$.fragment,e),r=!1},d(e){T(t,e),e&&c(n)}}}function be(e){let t,n=e[3],r=[];for(let a=0;a<n.length;a+=1)r[a]=ve(fe(e,n,a));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=P()},l(e){for(let t=0;t<r.length;t+=1)r[t].l(e);t=P()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);d(e,t,n)},p(e,a){if(40&a){let o;for(n=e[3],o=0;o<n.length;o+=1){const s=fe(e,n,o);r[o]?r[o].p(s,a):(r[o]=ve(s),r[o].c(),r[o].m(t.parentNode,t))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(e){v(r,e),e&&c(t)}}}function ve(e){let t,n,r,a,o,f,b,v=(e[5][e[13].key]||e[13].key)+"",w=e[13].value+"";return{c(){t=h("div"),n=h("dt"),r=m(v),a=x(),o=h("dd"),f=m(w),b=x(),this.h()},l(e){t=s(e,"DIV",{class:!0});var i=l(t);n=s(i,"DT",{class:!0});var d=l(n);r=p(d,v),d.forEach(c),a=y(i),o=s(i,"DD",{class:!0});var u=l(o);f=p(u,w),u.forEach(c),b=y(i),i.forEach(c),this.h()},h(){i(n,"class","text-sm font-medium text-gray-500"),i(o,"class","text-sm text-gray-900 mt-0 col-span-1"),i(t,"class","py-1 sm:py-2 grid grid-cols-2 gap-2 sm:px-6")},m(e,s){d(e,t,s),u(t,n),u(n,r),u(t,a),u(t,o),u(o,f),u(t,b)},p(e,t){8&t&&v!==(v=(e[5][e[13].key]||e[13].key)+"")&&g(r,v),8&t&&w!==(w=e[13].value+"")&&g(f,w)},d(e){e&&c(t)}}}function we(e){let t,n,r,a,o,f,m,p,g,b,v=e[2]&&he(e);a=new ue({props:{points:e[4]}});const w=[pe,me],S=[];function j(e,t){return e[0]?0:1}return p=j(e),g=S[p]=w[p](e),{c(){t=h("div"),n=h("div"),v&&v.c(),r=x(),k(a.$$.fragment),o=x(),f=h("div"),m=h("div"),g.c(),this.h()},l(e){t=s(e,"DIV",{class:!0});var i=l(t);n=s(i,"DIV",{class:!0});var d=l(n);v&&v.l(d),r=y(d),N(a.$$.fragment,d),d.forEach(c),o=y(i),f=s(i,"DIV",{class:!0});var u=l(f);m=s(u,"DIV",{class:!0});var h=l(m);g.l(h),h.forEach(c),u.forEach(c),i.forEach(c),this.h()},h(){i(n,"class","flex-grow z-0 h-full"),i(m,"class","h-full overflow-y-scroll"),i(f,"class","bg-white h-1/2 sm:w-1/2 sm:h-full md:w-96 border-gray-200 border-t sm:border-t-0 sm:border-l"),i(t,"class","flex flex-col sm:flex-row h-full")},m(s,l){d(s,t,l),u(t,n),v&&v.m(n,null),u(n,r),I(a,n,null),e[9](n),u(t,o),u(t,f),u(f,m),S[p].m(m,null),b=!0},p(e,[t]){e[2]?v?(v.p(e,t),4&t&&$(v,1)):(v=he(e),v.c(),$(v,1),v.m(n,r)):v&&(C(),E(v,1,1,(()=>{v=null})),D());let a=p;p=j(e),p===a?S[p].p(e,t):(C(),E(S[a],1,1,(()=>{S[a]=null})),D(),g=S[p],g?g.p(e,t):(g=S[p]=w[p](e),g.c()),$(g,1),g.m(m,null))},i(e){b||($(v),$(a.$$.fragment,e),$(g),b=!0)},o(e){E(v),E(a.$$.fragment,e),E(g),b=!1},d(n){n&&c(t),v&&v.d(),T(a),e[9](null),S[p].d()}}}function $e(e,t,n){let r;S(e,W,(e=>n(11,r=e)));let a,o,s,l,{$$slots:c={},$$scope:i}=t,{center:d}=t,u=null;const f=["id","CrossingID","Total Killed","Total injured","Number of accidents","Latitude","Longitude","Street","CityName","CountyName","StateName","Meets minimum safety guidelines"];return j(F,{getMap:()=>o}),j(Q,{getMapbox:()=>s}),_((async()=>{s=window.mapboxgl,s.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(2,o=new s.Map({container:a,style:"mapbox://styles/mapbox/light-v10",center:d||r.lngLat,zoom:d?15:r.zoom,minZoom:3,maxZoom:20})),o.addControl(new MapboxGeocoder({accessToken:s.accessToken,mapboxgl:s}),"top-left"),o.addControl(new s.NavigationControl,"top-left"),o.on("load",(()=>{o.resize(),o.addSource("railroad_crossing_incidents",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incidents/{z}/{x}/{y}.pbf"]}),o.addLayer({id:"railroad_crossing_incidents",type:"circle",source:"railroad_crossing_incidents","source-layer":"railroad_crossing_incidents",layout:{},paint:{"circle-radius":["case",["has","sqrt_point_count"],["+",["*",["get","sqrt_point_count"],1.1],10],10],"circle-color":["case",["==",["get","Number of accidents"],0],"blue","red"],"circle-opacity":["case",["boolean",["feature-state","hover"],!1],1,.3],"circle-stroke-color":"white","circle-stroke-width":["case",["boolean",["feature-state","hover"],!1],3,0]}})})),d&&setTimeout((()=>{const e=o.project(d),t=o.queryRenderedFeatures([[e.x-5,e.y-5],[e.x+5,e.y+5]],{layers:["railroad_crossing_incidents"]});1===t.length&&n(0,u=t[0])}),1100);let e=null;function t({featureId:e,state:t}){o.setFeatureState({id:e,source:"railroad_crossing_incidents",sourceLayer:"railroad_crossing_incidents"},{hover:t})}let l=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1});return o.on("mousemove",(n=>{const r=o.queryRenderedFeatures(n.point,{layers:["railroad_crossing_incidents"]})[0];if(!r)return o.getCanvas().style.cursor="",l.remove(),void(e&&(t({featureId:e,state:!1}),e=null));if(o.getCanvas().style.cursor="pointer",r&&r.id===e)return;e&&t({featureId:e,state:!1}),e=r.id,t({featureId:r.id,state:!0});const a=r.properties,s=r.geometry.coordinates.slice();for(e=r.id;Math.abs(n.lngLat.lng-s[0])>180;)s[0]+=n.lngLat.lng>s[0]?360:-360;if(a.point_count&&a.point_count>-2){const e=`${a.point_count} locations`;l.setLngLat(s).setHTML(e).addTo(o)}})),o.on("click","railroad_crossing_incidents",(async function(e){const t=e.features[0],{point_count:r}=t.properties;if(o.resize(),r){const e=o.getZoom()+2;o.flyTo({center:t.geometry.coordinates,zoom:e}),n(0,u=null)}else n(0,u=e.features[0])})),()=>{n(2,o=null)}})),e.$$set=e=>{"center"in e&&n(6,d=e.center),"$$scope"in e&&n(7,i=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&u&&n(3,l=Object.keys(u.properties).filter((e=>!f.find((t=>t.includes(e))))).map((e=>({key:e,value:u.properties[e]}))))},[u,a,o,l,[{color:"red",description:"Accidents"},{color:"blue",description:"No accidents"}],{CountyName:"County",CityName:"City",StateName:"State"},d,i,c,function(e){A[e?"unshift":"push"]((()=>{a=e,n(1,a)}))}]}class Ee extends n{constructor(e){super(),r(this,e,$e,we,a,{center:6})}}const ke={Alabama:"AL",Alaska:"AK",Arizona:"AZ",Arkansas:"AR",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE","District of Columbia":"DC",Florida:"FL",Georgia:"GA",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Puerto Rico":"PR","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY"};function Ne(e){const t=t=>{!e||e.contains(t.target)||t.defaultPrevented||e.dispatchEvent(new CustomEvent("click_outside",{detail:{event:t,node:e}}))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function Ie(e,t,n){const r=e.slice();return r[25]=t[n],r}function Ce(e,t,n){const r=e.slice();return r[28]=t[n],r}function De(e,t,n){const r=e.slice();return r[31]=t[n],r}function Te(e){let t,n,r,a,o,g,b,v,w,$,E,k,N,I,C,D;return{c(){t=h("div"),n=h("div"),r=h("button"),a=m("x"),o=x(),g=h("div"),b=h("h3"),v=m("Locations table"),w=x(),$=h("p"),E=m("Search for railroad crossings near you using the search bar on the left. Sort by a column by selecting the drop down menu next to its name."),k=x(),N=h("button"),I=m("Get started"),this.h()},l(e){t=s(e,"DIV",{class:!0});var i=l(t);n=s(i,"DIV",{class:!0});var d=l(n);r=s(d,"BUTTON",{class:!0});var u=l(r);a=p(u,"x"),u.forEach(c),o=y(d),g=s(d,"DIV",{class:!0});var f=l(g);b=s(f,"H3",{class:!0});var h=l(b);v=p(h,"Locations table"),h.forEach(c),w=y(f),$=s(f,"P",{class:!0});var m=l($);E=p(m,"Search for railroad crossings near you using the search bar on the left. Sort by a column by selecting the drop down menu next to its name."),m.forEach(c),k=y(f),N=s(f,"BUTTON",{class:!0});var x=l(N);I=p(x,"Get started"),x.forEach(c),f.forEach(c),d.forEach(c),i.forEach(c),this.h()},h(){i(r,"class","\n        float-right\n        h-4\n        px-2\n        pb-5\n        rounded-sm\n        mt-2\n        mr-2\n        hover:bg-gray-100\n        text-gray-600\n        hover:text-gray-900\n      "),i(b,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),i($,"class","font-medium my-0 py0 max-w-2xl text-gray-600"),i(N,"class","mt-2 float-right inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),i(g,"class","p-4 sm:px-6"),i(n,"class","z-10 bg-white shadow overflow-hidden absolute rounded-md mr-2 w-1/2 lg:w-1/3 pb-2"),i(t,"class","flex justify-center")},m(s,l){d(s,t,l),u(t,n),u(n,r),u(r,a),u(n,o),u(n,g),u(g,b),u(b,v),u(g,w),u(g,$),u($,E),u(g,k),u(g,N),u(N,I),C||(D=[z(r,"click",e[16]),z(N,"click",e[16])],C=!0)},p:f,d(e){e&&c(t),C=!1,M(D)}}}function Se(e){let t,n,r,a,o,f,g,b,v,w,$,E,k,N,I,C,D=e[5].column===e[31]&&"ASC"===e[5].order&&je();function T(){return e[18](e[31])}let S=e[5].column===e[31]&&"DESC"===e[5].order&&_e();function j(){return e[19](e[31])}function _(){return e[20](e[31])}function V(...t){return e[21](e[31],...t)}return{c(){t=h("div"),n=h("div"),r=h("button"),a=h("span"),D&&D.c(),o=m("\n                            Sort Ascending"),f=x(),g=h("button"),b=h("span"),S&&S.c(),v=m("\n                            Sort Descending"),w=x(),$=h("button"),E=h("span"),k=m("ð„‚"),N=m("\n                            Remove Sort"),this.h()},l(e){t=s(e,"DIV",{class:!0,role:!0,"aria-orientation":!0,"aria-labelledby":!0,tabindex:!0});var i=l(t);n=s(i,"DIV",{class:!0,role:!0});var d=l(n);r=s(d,"BUTTON",{type:!0,class:!0,role:!0,tabindex:!0,id:!0});var u=l(r);a=s(u,"SPAN",{class:!0});var h=l(a);D&&D.l(h),h.forEach(c),o=p(u,"\n                            Sort Ascending"),u.forEach(c),f=y(d),g=s(d,"BUTTON",{type:!0,class:!0,role:!0,tabindex:!0,id:!0});var m=l(g);b=s(m,"SPAN",{class:!0});var x=l(b);S&&S.l(x),x.forEach(c),v=p(m,"\n                            Sort Descending"),m.forEach(c),w=y(d),$=s(d,"BUTTON",{type:!0,class:!0,role:!0,tabindex:!0,id:!0});var I=l($);E=s(I,"SPAN",{class:!0});var C=l(E);k=p(C,"ð„‚"),C.forEach(c),N=p(I,"\n                            Remove Sort"),I.forEach(c),d.forEach(c),i.forEach(c),this.h()},h(){i(a,"class","inline-block w-3 h-3"),i(r,"type","button"),i(r,"class","text-gray-700 hover:text-gray-900 hover:bg-gray-100 block px-2 py-2 text-xs"),i(r,"role","menuitem"),i(r,"tabindex","-1"),i(r,"id","menu-item-0"),i(b,"class","inline-block w-3 h-3"),i(g,"type","button"),i(g,"class","text-gray-700 hover:text-gray-900 hover:bg-gray-100 block px-2 py-2 text-xs"),i(g,"role","menuitem"),i(g,"tabindex","-1"),i(g,"id","menu-item-1"),i(E,"class","inline-block w-3 h-3"),i($,"type","button"),i($,"class","text-gray-700 hover:text-gray-900 hover:bg-gray-100 block px-2 py-2 text-xs"),i($,"role","menuitem"),i($,"tabindex","-1"),i($,"id","menu-item-2"),i(n,"class",""),i(n,"role","none"),i(t,"class","origin-top-right absolute right-0 mt-2 w-40 rounded-md shadow bg-white ring-1 ring-black ring-opacity-5 focus:outline-none"),i(t,"role","menu"),i(t,"aria-orientation","vertical"),i(t,"aria-labelledby","menu-button"),i(t,"tabindex","-1")},m(e,s){d(e,t,s),u(t,n),u(n,r),u(r,a),D&&D.m(a,null),u(r,o),u(n,f),u(n,g),u(g,b),S&&S.m(b,null),u(g,v),u(n,w),u(n,$),u($,E),u(E,k),u($,N),I||(C=[z(r,"click",T),z(g,"click",j),z($,"click",_),R(Ne.call(null,t)),z(t,"click_outside",V)],I=!0)},p(t,n){(e=t)[5].column===e[31]&&"ASC"===e[5].order?D||(D=je(),D.c(),D.m(a,null)):D&&(D.d(1),D=null),e[5].column===e[31]&&"DESC"===e[5].order?S||(S=_e(),S.c(),S.m(b,null)):S&&(S.d(1),S=null)},d(e){e&&c(t),D&&D.d(),S&&S.d(),I=!1,M(C)}}}function je(e){let t;return{c(){t=m("âœ“")},l(e){t=p(e,"âœ“")},m(e,n){d(e,t,n)},d(e){e&&c(t)}}}function _e(e){let t;return{c(){t=m("âœ“")},l(e){t=p(e,"âœ“")},m(e,n){d(e,t,n)},d(e){e&&c(t)}}}function Ve(e){let t,n,r,a,f,g,b=e[31]+"",v="Map view"!==e[31]&&function(e){let t,n,r,a,f,m,p,g;function b(){return e[17](e[31])}let v=e[6].open&&e[6].open===e[31]&&Se(e);return{c(){t=h("div"),n=h("div"),r=h("button"),a=o("svg"),f=o("path"),m=x(),v&&v.c(),this.h()},l(e){t=s(e,"DIV",{class:!0});var o=l(t);n=s(o,"DIV",{});var i=l(n);r=s(i,"BUTTON",{type:!0,class:!0,id:!0,"aria-expanded":!0,"aria-haspopup":!0});var d=l(r);a=s(d,"svg",{class:!0,xmlns:!0,viewBox:!0,fill:!0,"aria-hidden":!0},1);var u=l(a);f=s(u,"path",{"fill-rule":!0,d:!0,"clip-rule":!0},1),l(f).forEach(c),u.forEach(c),d.forEach(c),i.forEach(c),m=y(o),v&&v.l(o),o.forEach(c),this.h()},h(){i(f,"fill-rule","evenodd"),i(f,"d","M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"),i(f,"clip-rule","evenodd"),i(a,"class","h-3 w-3"),i(a,"xmlns","http://www.w3.org/2000/svg"),i(a,"viewBox","0 0 20 20"),i(a,"fill","currentColor"),i(a,"aria-hidden","true"),i(r,"type","button"),i(r,"class","inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm p-1 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-indigo-500"),i(r,"id","menu-button"),i(r,"aria-expanded","true"),i(r,"aria-haspopup","true"),i(t,"class","relative inline-block text-left right-0 top-0 ml-4 self-center")},m(e,o){d(e,t,o),u(t,n),u(n,r),u(r,a),u(a,f),u(t,m),v&&v.m(t,null),p||(g=z(r,"click",b),p=!0)},p(n,r){(e=n)[6].open&&e[6].open===e[31]?v?v.p(e,r):(v=Se(e),v.c(),v.m(t,null)):v&&(v.d(1),v=null)},d(e){e&&c(t),v&&v.d(),p=!1,g()}}}(e);return{c(){t=h("th"),n=h("div"),r=h("span"),a=m(b),f=x(),v&&v.c(),g=x(),this.h()},l(e){t=s(e,"TH",{scope:!0,class:!0});var o=l(t);n=s(o,"DIV",{class:!0});var i=l(n);r=s(i,"SPAN",{});var d=l(r);a=p(d,b),d.forEach(c),f=y(i),v&&v.l(i),i.forEach(c),g=y(o),o.forEach(c),this.h()},h(){i(n,"class","flex flex-row "),i(t,"scope","col"),i(t,"class","px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider")},m(e,o){d(e,t,o),u(t,n),u(n,r),u(r,a),u(n,f),v&&v.m(n,null),u(t,g)},p(e,t){"Map view"!==e[31]&&v.p(e,t)},d(e){e&&c(t),v&&v.d()}}}function Ae(e){let t,n=e[28].value+"";return{c(){t=m(n)},l(e){t=p(e,n)},m(e,n){d(e,t,n)},p(e,r){1&r[0]&&n!==(n=e[28].value+"")&&g(t,n)},i:f,o:f,d(e){e&&c(t)}}}function Pe(e){let t,n,r,a;const o=[Re,Le,Me],s=[];function l(e,t){return"Yes"===e[28].value?0:"No"===e[28].value?1:2}return t=l(e),n=s[t]=o[t](e),{c(){n.c(),r=P()},l(e){n.l(e),r=P()},m(e,n){s[t].m(e,n),d(e,r,n),a=!0},p(e,a){let c=t;t=l(e),t!==c&&(C(),E(s[c],1,1,(()=>{s[c]=null})),D(),n=s[t],n||(n=s[t]=o[t](e),n.c()),$(n,1),n.m(r.parentNode,r))},i(e){a||($(n),a=!0)},o(e){E(n),a=!1},d(e){s[t].d(e),e&&c(r)}}}function ze(e){let t,n,r,a;function o(){return e[22](e[28])}return{c(){t=h("button"),n=m("View on map"),this.h()},l(e){t=s(e,"BUTTON",{class:!0});var r=l(t);n=p(r,"View on map"),r.forEach(c),this.h()},h(){i(t,"class","text-gray-600 hover:text-blue-600 hover:shadow-sm bg-gray-50 hover:bg-gray-100 p-2")},m(e,s){d(e,t,s),u(t,n),r||(a=z(t,"click",o),r=!0)},p(t,n){e=t},i:f,o:f,d(e){e&&c(t),r=!1,a()}}}function Me(e){let t,n,r;return t=new re({}),{c(){k(t.$$.fragment),n=m(" Info unavailable")},l(e){N(t.$$.fragment,e),n=p(e," Info unavailable")},m(e,a){I(t,e,a),d(e,n,a),r=!0},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){E(t.$$.fragment,e),r=!1},d(e){T(t,e),e&&c(n)}}}function Le(e){let t,n,r;return t=new oe({}),{c(){k(t.$$.fragment),n=m(" No")},l(e){N(t.$$.fragment,e),n=p(e," No")},m(e,a){I(t,e,a),d(e,n,a),r=!0},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){E(t.$$.fragment,e),r=!1},d(e){T(t,e),e&&c(n)}}}function Re(e){let t,n,r;return t=new te({}),{c(){k(t.$$.fragment),n=m(" Yes")},l(e){N(t.$$.fragment,e),n=p(e," Yes")},m(e,a){I(t,e,a),d(e,n,a),r=!0},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){E(t.$$.fragment,e),r=!1},d(e){T(t,e),e&&c(n)}}}function Oe(e){let t,n,r,a;const o=[ze,Pe,Ae],u=[];function f(e,t){return"Map view"===e[28].key?0:"Meets minimum safety guidelines"===e[28].key?1:2}return n=f(e),r=u[n]=o[n](e),{c(){t=h("td"),r.c(),this.h()},l(e){t=s(e,"TD",{class:!0});var n=l(t);r.l(n),n.forEach(c),this.h()},h(){i(t,"class","px-4 py-4 text-left whitespace-nowrap text-sm font-medium text-gray-900")},m(e,r){d(e,t,r),u[n].m(t,null),a=!0},p(e,a){let s=n;n=f(e),n===s?u[n].p(e,a):(C(),E(u[s],1,1,(()=>{u[s]=null})),D(),r=u[n],r?r.p(e,a):(r=u[n]=o[n](e),r.c()),$(r,1),r.m(t,null))},i(e){a||($(r),a=!0)},o(e){E(r),a=!1},d(e){e&&c(t),u[n].d()}}}function Be(e){let t,n,r,a=e[25],o=[];for(let s=0;s<a.length;s+=1)o[s]=Oe(Ce(e,a,s));const i=e=>E(o[e],1,1,(()=>{o[e]=null}));return{c(){t=h("tr");for(let e=0;e<o.length;e+=1)o[e].c();n=x()},l(e){t=s(e,"TR",{});var r=l(t);for(let t=0;t<o.length;t+=1)o[t].l(r);n=y(r),r.forEach(c)},m(e,a){d(e,t,a);for(let n=0;n<o.length;n+=1)o[n].m(t,null);u(t,n),r=!0},p(e,r){if(32769&r[0]){let s;for(a=e[25],s=0;s<a.length;s+=1){const l=Ce(e,a,s);o[s]?(o[s].p(l,r),$(o[s],1)):(o[s]=Oe(l),o[s].c(),$(o[s],1),o[s].m(t,n))}for(C(),s=a.length;s<o.length;s+=1)i(s);D()}},i(e){if(!r){for(let e=0;e<a.length;e+=1)$(o[e]);r=!0}},o(e){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)E(o[t]);r=!1},d(e){e&&c(t),v(o,e)}}}function Ke(e){let t,n,r,a;function o(e,t){return e[4]>1?qe:Ue}let f=o(e),x=f(e);return{c(){t=h("p"),x.c(),n=m("\n\n    of "),r=m(e[2]),a=m(" total rows."),this.h()},l(o){t=s(o,"P",{class:!0});var i=l(t);x.l(i),n=p(i,"\n\n    of "),r=p(i,e[2]),a=p(i," total rows."),i.forEach(c),this.h()},h(){i(t,"class","float-left py-1.5 mt-2 text-xs text-gray-700")},m(e,o){d(e,t,o),x.m(t,null),u(t,n),u(t,r),u(t,a)},p(e,a){f===(f=o(e))&&x?x.p(e,a):(x.d(1),x=f(e),x&&(x.c(),x.m(t,n))),4&a[0]&&g(r,e[2])},d(e){e&&c(t),x.d()}}}function Ue(e){let t;return{c(){t=m("1 to 100")},l(e){t=p(e,"1 to 100")},m(e,n){d(e,t,n)},p:f,d(e){e&&c(t)}}}function qe(e){let t,n,r,a=100*e[4]-100+1+"";function o(e,t){return 100*e[4]>e[2]?Ge:He}let s=o(e),l=s(e);return{c(){t=m(a),n=m("\n      to\n      "),l.c(),r=P()},l(e){t=p(e,a),n=p(e,"\n      to\n      "),l.l(e),r=P()},m(e,a){d(e,t,a),d(e,n,a),l.m(e,a),d(e,r,a)},p(e,n){16&n[0]&&a!==(a=100*e[4]-100+1+"")&&g(t,a),s===(s=o(e))&&l?l.p(e,n):(l.d(1),l=s(e),l&&(l.c(),l.m(r.parentNode,r)))},d(e){e&&c(t),e&&c(n),l.d(e),e&&c(r)}}}function He(e){let t,n=100*e[4]+"";return{c(){t=m(n)},l(e){t=p(e,n)},m(e,n){d(e,t,n)},p(e,r){16&r[0]&&n!==(n=100*e[4]+"")&&g(t,n)},d(e){e&&c(t)}}}function Ge(e){let t;return{c(){t=m(e[2])},l(n){t=p(n,e[2])},m(e,n){d(e,t,n)},p(e,n){4&n[0]&&g(t,e[2])},d(e){e&&c(t)}}}function Ye(e){let t,n,r,a;return{c(){t=h("button"),n=m("Next page"),this.h()},l(e){t=s(e,"BUTTON",{class:!0});var r=l(t);n=p(r,"Next page"),r.forEach(c),this.h()},h(){i(t,"class","mt-2 float-right inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},m(o,s){d(o,t,s),u(t,n),r||(a=z(t,"click",e[13]),r=!0)},p:f,d(e){e&&c(t),r=!1,a()}}}function Je(e){let t,n,r,a;return{c(){t=h("button"),n=m("Previous page"),this.h()},l(e){t=s(e,"BUTTON",{class:!0});var r=l(t);n=p(r,"Previous page"),r.forEach(c),this.h()},h(){i(t,"class","mt-2 mr-2 float-right inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},m(o,s){d(o,t,s),u(t,n),r||(a=z(t,"click",e[14]),r=!0)},p:f,d(e){e&&c(t),r=!1,a()}}}function Fe(e){let t,n,r,a,o,f,m,p,g,b,w,k,N,I,T,S,j,_,V,A=e[7]&&Te(e),P=e[8],z=[];for(let s=0;s<P.length;s+=1)z[s]=Ve(De(e,P,s));let M=e[0],L=[];for(let s=0;s<M.length;s+=1)L[s]=Be(Ie(e,M,s));const R=e=>E(L[e],1,1,(()=>{L[e]=null}));let O=e[3]&&Ke(e),B=e[1]&&Ye(e),K=e[4]>1&&Je(e);return{c(){A&&A.c(),t=x(),n=h("div"),r=h("div"),a=h("div"),o=h("div"),f=x(),m=h("div"),p=h("div"),g=h("div"),b=h("table"),w=h("thead"),k=h("tr");for(let e=0;e<z.length;e+=1)z[e].c();N=x(),I=h("tbody");for(let e=0;e<L.length;e+=1)L[e].c();T=x(),S=h("div"),O&&O.c(),j=x(),B&&B.c(),_=x(),K&&K.c(),this.h()},l(e){A&&A.l(e),t=y(e),n=s(e,"DIV",{class:!0});var i=l(n);r=s(i,"DIV",{class:!0});var d=l(r);a=s(d,"DIV",{class:!0});var u=l(a);o=s(u,"DIV",{id:!0}),l(o).forEach(c),u.forEach(c),d.forEach(c),f=y(i),m=s(i,"DIV",{class:!0});var h=l(m);p=s(h,"DIV",{class:!0});var x=l(p);g=s(x,"DIV",{class:!0});var v=l(g);b=s(v,"TABLE",{class:!0});var $=l(b);w=s($,"THEAD",{class:!0});var E=l(w);k=s(E,"TR",{class:!0});var C=l(k);for(let t=0;t<z.length;t+=1)z[t].l(C);C.forEach(c),E.forEach(c),N=y($),I=s($,"TBODY",{class:!0});var D=l(I);for(let t=0;t<L.length;t+=1)L[t].l(D);D.forEach(c),$.forEach(c),v.forEach(c),x.forEach(c),h.forEach(c),i.forEach(c),T=y(e),S=s(e,"DIV",{class:!0});var V=l(S);O&&O.l(V),j=y(V),B&&B.l(V),_=y(V),K&&K.l(V),V.forEach(c),this.h()},h(){i(o,"id","geocoder"),i(a,"class",""),i(r,"class","w-full h-96 p-2"),i(k,"class","divide-x divide-gray-200"),i(w,"class","bg-gray-50"),i(I,"class","divide-y divide-gray-200"),i(b,"class","min-w-full divide-y divide-gray-200 bg-white"),i(g,"class","shadow border-b border-t border-gray-200 sm:rounded-md"),i(p,"class","align-middle inline-block min-w-full"),i(m,"class",""),i(n,"class","flex flex-col h-full overflow-scroll bg-gray-50"),i(S,"class","")},m(e,s){A&&A.m(e,s),d(e,t,s),d(e,n,s),u(n,r),u(r,a),u(a,o),u(n,f),u(n,m),u(m,p),u(p,g),u(g,b),u(b,w),u(w,k);for(let t=0;t<z.length;t+=1)z[t].m(k,null);u(b,N),u(b,I);for(let t=0;t<L.length;t+=1)L[t].m(I,null);d(e,T,s),d(e,S,s),O&&O.m(S,null),u(S,j),B&&B.m(S,null),u(S,_),K&&K.m(S,null),V=!0},p(e,n){if(e[7]?A?A.p(e,n):(A=Te(e),A.c(),A.m(t.parentNode,t)):A&&(A.d(1),A=null),8032&n[0]){let t;for(P=e[8],t=0;t<P.length;t+=1){const r=De(e,P,t);z[t]?z[t].p(r,n):(z[t]=Ve(r),z[t].c(),z[t].m(k,null))}for(;t<z.length;t+=1)z[t].d(1);z.length=P.length}if(32769&n[0]){let t;for(M=e[0],t=0;t<M.length;t+=1){const r=Ie(e,M,t);L[t]?(L[t].p(r,n),$(L[t],1)):(L[t]=Be(r),L[t].c(),$(L[t],1),L[t].m(I,null))}for(C(),t=M.length;t<L.length;t+=1)R(t);D()}e[3]?O?O.p(e,n):(O=Ke(e),O.c(),O.m(S,j)):O&&(O.d(1),O=null),e[1]?B?B.p(e,n):(B=Ye(e),B.c(),B.m(S,_)):B&&(B.d(1),B=null),e[4]>1?K?K.p(e,n):(K=Je(e),K.c(),K.m(S,null)):K&&(K.d(1),K=null)},i(e){if(!V){for(let e=0;e<M.length;e+=1)$(L[e]);V=!0}},o(e){L=L.filter(Boolean);for(let t=0;t<L.length;t+=1)E(L[t]);V=!1},d(e){A&&A.d(e),e&&c(t),e&&c(n),v(z,e),v(L,e),e&&c(T),e&&c(S),O&&O.d(),B&&B.d(),K&&K.d()}}}function Qe(e,t,n){let r;S(e,Z,(e=>n(7,r=e)));let{rows:a}=t,{next:o}=t,{rowsCount:s}=t,{loaded:l}=t,{currentPage:c}=t,i=[],d={column:null,order:null},u={open:null};const f=a[0].map((e=>e.key)),h=L();function m(e){u.open===e?n(6,u.open=null,u):setTimeout((()=>{n(6,u.open=e,u)}),2)}function p(e,t){console.log("e",t.detail),u.open===e&&setTimeout((()=>{n(6,u.open=null,u)}),1),n(6,u.open=e,u)}function g(e,t){n(5,d={column:e,order:t}),h("query",{sort:d,filters:i})}function x(e){n(5,d={column:null,order:null}),h("query",{sort:d,filters:i})}function y(e){console.log("huh"),h("viewLocation",e)}_((()=>{const e=window.mapboxgl;e.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJuR1ZmQ01vIn0.zyEdsIKM-4orPm-3Y0XWDQ";const t=new MapboxGeocoder({accessToken:e.accessToken,types:"region,district,place"});t.addTo("#geocoder"),t.on("result",(({result:e})=>{const t=e,{place_name:n,place_type:r}=t,a=n.split(", "),o=r[0];"place"===o?(i.push({column:"CityName",value:a[0]}),i.push({column:"StateName",value:ke[a[1]]})):"district"===o?(i.push({column:"CountyName",value:a[0].replace(" County","").toLowerCase()}),i.push({column:"StateName",value:ke[a[1]]})):"region"===o&&i.push({column:"StateName",value:ke[a[0]]}),h("query",{sort:d,filters:i})}))}));return e.$$set=e=>{"rows"in e&&n(0,a=e.rows),"next"in e&&n(1,o=e.next),"rowsCount"in e&&n(2,s=e.rowsCount),"loaded"in e&&n(3,l=e.loaded),"currentPage"in e&&n(4,c=e.currentPage)},[a,o,s,l,c,d,u,r,f,m,p,g,x,function(e){h("nextPage",{sort:d,filters:i})},function(e){h("previousPage",{sort:d,filters:i})},y,function(){Z.update((()=>!1))},e=>{m(e)},e=>g(e,"ASC"),e=>g(e,"DESC"),e=>x(),(e,t)=>{p(e,t)},e=>{y(e.value)}]}class We extends n{constructor(e){super(),r(this,e,Qe,Fe,a,{rows:0,next:1,rowsCount:2,loaded:3,currentPage:4},[-1,-1])}}function Xe(e,t,n){const r=e.slice();return r[2]=t[n],r[4]=n,r}function Ze(e){let t,n;return{c(){t=h("h1"),n=m(e[1]),this.h()},l(r){t=s(r,"H1",{class:!0});var a=l(t);n=p(a,e[1]),a.forEach(c),this.h()},h(){i(t,"class","font-medium mb-2")},m(e,r){d(e,t,r),u(t,n)},p(e,t){2&t&&g(n,e[1])},d(e){e&&c(t)}}}function et(e){let t;return{c(){t=m("+")},l(e){t=p(e,"+")},m(e,n){d(e,t,n)},p:f,d(e){e&&c(t)}}}function tt(e){let t,n,r=e[0][e[4]+1][0]-1+"";return{c(){t=m("-"),n=m(r)},l(e){t=p(e,"-"),n=p(e,r)},m(e,r){d(e,t,r),d(e,n,r)},p(e,t){1&t&&r!==(r=e[0][e[4]+1][0]-1+"")&&g(n,r)},d(e){e&&c(t),e&&c(n)}}}function nt(e){let t,n,r,a,o,f,v=e[2][0]+"";function w(e,t){return e[0][e[4]+1]?tt:et}let $=w(e),E=$(e);return{c(){t=h("div"),n=h("span"),r=x(),a=h("span"),o=m(v),E.c(),f=x(),this.h()},l(e){t=s(e,"DIV",{class:!0});var i=l(t);n=s(i,"SPAN",{class:!0,style:!0}),l(n).forEach(c),r=y(i),a=s(i,"SPAN",{});var d=l(a);o=p(d,v),E.l(d),d.forEach(c),f=y(i),i.forEach(c),this.h()},h(){i(n,"class","w-4 h-4 inline-block"),b(n,"background-color",e[2][1]),i(t,"class","")},m(e,s){d(e,t,s),u(t,n),u(t,r),u(t,a),u(a,o),E.m(a,null),u(t,f)},p(e,t){1&t&&b(n,"background-color",e[2][1]),1&t&&v!==(v=e[2][0]+"")&&g(o,v),$===($=w(e))&&E?E.p(e,t):(E.d(1),E=$(e),E&&(E.c(),E.m(a,null)))},d(e){e&&c(t),E.d()}}}function rt(e){let t,n,r=e[1]&&Ze(e),a=e[0],o=[];for(let s=0;s<a.length;s+=1)o[s]=nt(Xe(e,a,s));return{c(){t=h("div"),r&&r.c(),n=x();for(let e=0;e<o.length;e+=1)o[e].c();this.h()},l(e){t=s(e,"DIV",{class:!0});var a=l(t);r&&r.l(a),n=y(a);for(let t=0;t<o.length;t+=1)o[t].l(a);a.forEach(c),this.h()},h(){i(t,"class","\n    absolute\n    z-10\n    flex\n    flex-col\n    bg-white\n    px-4\n    py-2\n    max-w-[150px]\n    shadow-sm\n    rounded-md\n    bottom-12\n    left-2\n  ")},m(e,a){d(e,t,a),r&&r.m(t,null),u(t,n);for(let n=0;n<o.length;n+=1)o[n].m(t,null)},p(e,[s]){if(e[1]?r?r.p(e,s):(r=Ze(e),r.c(),r.m(t,n)):r&&(r.d(1),r=null),1&s){let n;for(a=e[0],n=0;n<a.length;n+=1){const r=Xe(e,a,n);o[n]?o[n].p(r,s):(o[n]=nt(r),o[n].c(),o[n].m(t,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=a.length}},i:f,o:f,d(e){e&&c(t),r&&r.d(),v(o,e)}}}function at(e,t,n){let{scale:r}=t,{title:a}=t;return e.$$set=e=>{"scale"in e&&n(0,r=e.scale),"title"in e&&n(1,a=e.title)},[r,a]}class ot extends n{constructor(e){super(),r(this,e,at,rt,a,{scale:0,title:1})}}function st(e){let t;const n=e[8].default,r=V(n,e,e[7],null);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,n){r&&r.m(e,n),t=!0},p(e,a){r&&r.p&&(!t||128&a)&&w(r,n,e,e[7],a,null,null)},i(e){t||($(r,e),t=!0)},o(e){E(r,e),t=!1},d(e){r&&r.d(e)}}}function lt(e){let t,n,r,a,o;return{c(){t=h("h3"),n=m("Railroad crossing accidents in U.S. states"),r=x(),a=h("p"),o=m("Click states to see the total accidents and the number of accidents with injuries and fatalities."),this.h()},l(e){t=s(e,"H3",{class:!0});var i=l(t);n=p(i,"Railroad crossing accidents in U.S. states"),i.forEach(c),r=y(e),a=s(e,"P",{class:!0});var d=l(a);o=p(d,"Click states to see the total accidents and the number of accidents with injuries and fatalities."),d.forEach(c),this.h()},h(){i(t,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),i(a,"class","font-medium my-0 py0 max-w-2xl text-lg text-gray-600")},m(e,s){d(e,t,s),u(t,n),d(e,r,s),d(e,a,s),u(a,o)},p:f,d(e){e&&c(t),e&&c(r),e&&c(a)}}}function ct(e){let t,n,r,a,o,f,b,v,w,$,E,k,N,I,C,D,T,S,j,_,V=e[3].properties.name+"",A=e[3].properties.accidents+"",P=e[3].properties.killed+"",z=e[3].properties.injured+"";return{c(){t=h("h3"),n=m(V),r=x(),a=h("p"),o=m(A),f=x(),b=h("span"),v=m("Accidents"),w=x(),$=h("p"),E=m(P),k=x(),N=h("span"),I=m("Killed"),C=x(),D=h("p"),T=m(z),S=x(),j=h("span"),_=m("Injured"),this.h()},l(e){t=s(e,"H3",{class:!0});var i=l(t);n=p(i,V),i.forEach(c),r=y(e),a=s(e,"P",{class:!0});var d=l(a);o=p(d,A),f=y(d),b=s(d,"SPAN",{class:!0});var u=l(b);v=p(u,"Accidents"),u.forEach(c),d.forEach(c),w=y(e),$=s(e,"P",{class:!0});var h=l($);E=p(h,P),k=y(h),N=s(h,"SPAN",{class:!0});var m=l(N);I=p(m,"Killed"),m.forEach(c),h.forEach(c),C=y(e),D=s(e,"P",{class:!0});var g=l(D);T=p(g,z),S=y(g),j=s(g,"SPAN",{class:!0});var x=l(j);_=p(x,"Injured"),x.forEach(c),g.forEach(c),this.h()},h(){i(t,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),i(b,"class","font-normal"),i(a,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(N,"class","font-normal"),i($,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(j,"class","font-normal"),i(D,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600")},m(e,s){d(e,t,s),u(t,n),d(e,r,s),d(e,a,s),u(a,o),u(a,f),u(a,b),u(b,v),d(e,w,s),d(e,$,s),u($,E),u($,k),u($,N),u(N,I),d(e,C,s),d(e,D,s),u(D,T),u(D,S),u(D,j),u(j,_)},p(e,t){8&t&&V!==(V=e[3].properties.name+"")&&g(n,V),8&t&&A!==(A=e[3].properties.accidents+"")&&g(o,A),8&t&&P!==(P=e[3].properties.killed+"")&&g(E,P),8&t&&z!==(z=e[3].properties.injured+"")&&g(T,z)},d(e){e&&c(t),e&&c(r),e&&c(a),e&&c(w),e&&c($),e&&c(C),e&&c(D)}}}function it(e){let t,n,r,a,o,f,g,b,v,w,S,j,_,V,A,P,L,R,B,K=e[2]&&st(e);function U(e,t){return e[3]?ct:lt}_=new ot({props:{scale:e[5],title:e[4]}});let q=U(e),H=q(e);return{c(){t=h("div"),K&&K.c(),n=x(),r=h("div"),a=h("button"),o=m("Accidents"),f=x(),g=h("button"),b=m("Killed"),v=x(),w=h("button"),S=m("Injured"),j=x(),k(_.$$.fragment),V=x(),A=h("div"),P=h("div"),H.c(),this.h()},l(e){t=s(e,"DIV",{class:!0});var i=l(t);K&&K.l(i),n=y(i),r=s(i,"DIV",{class:!0});var d=l(r);a=s(d,"BUTTON",{type:!0,class:!0});var u=l(a);o=p(u,"Accidents"),u.forEach(c),f=y(d),g=s(d,"BUTTON",{type:!0,class:!0});var h=l(g);b=p(h,"Killed"),h.forEach(c),v=y(d),w=s(d,"BUTTON",{type:!0,class:!0});var m=l(w);S=p(m,"Injured"),m.forEach(c),d.forEach(c),j=y(i),N(_.$$.fragment,i),V=y(i),A=s(i,"DIV",{class:!0});var x=l(A);P=s(x,"DIV",{class:!0});var $=l(P);H.l($),$.forEach(c),x.forEach(c),i.forEach(c),this.h()},h(){i(a,"type","button"),i(a,"class","\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-t-md\n        sm:rounded-l-md\n        sm:rounded-tr-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(a,"selected","accidents"===e[0]),i(g,"type","button"),i(g,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(g,"selected","killed"===e[0]),i(w,"type","button"),i(w,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-b-md\n        sm:rounded-r-md\n        sm:rounded-bl-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(w,"selected","injured"===e[0]),i(r,"class","absolute z-10 flex flex-col sm:flex-row shadow-sm rounded-md top-2 left-2"),i(P,"class","p-4 sm:px-6"),i(A,"class","z-10 bg-white shadow overflow-hidden rounded-md absolute top-2 right-0 mr-2 w-1/2 lg:w-1/3 pb-2"),i(t,"class","flex-grow z-0 h-full")},m(s,l){d(s,t,l),K&&K.m(t,null),u(t,n),u(t,r),u(r,a),u(a,o),u(r,f),u(r,g),u(g,b),u(r,v),u(r,w),u(w,S),u(t,j),I(_,t,null),u(t,V),u(t,A),u(A,P),H.m(P,null),e[12](t),L=!0,R||(B=[z(a,"click",e[9]),z(g,"click",e[10]),z(w,"click",e[11])],R=!0)},p(e,[r]){e[2]?K?(K.p(e,r),4&r&&$(K,1)):(K=st(e),K.c(),$(K,1),K.m(t,n)):K&&(C(),E(K,1,1,(()=>{K=null})),D()),1&r&&O(a,"selected","accidents"===e[0]),1&r&&O(g,"selected","killed"===e[0]),1&r&&O(w,"selected","injured"===e[0]);const o={};32&r&&(o.scale=e[5]),16&r&&(o.title=e[4]),_.$set(o),q===(q=U(e))&&H?H.p(e,r):(H.d(1),H=q(e),H&&(H.c(),H.m(P,null)))},i(e){L||($(K),$(_.$$.fragment,e),L=!0)},o(e){E(K),E(_.$$.fragment,e),L=!1},d(n){n&&c(t),K&&K.d(),T(_),H.d(),e[12](null),R=!1,M(B)}}}function dt(e,t,n){let r,a,o;S(e,X,(e=>n(14,o=e)));let s,l,c,{$$slots:i={},$$scope:d}=t,u="accidents",f=null;const h={accidents:"Number of accidents",injured:"Number of accidents with injuries",killed:"Number of accidents with fatalities"},m={accidents:[[0,"#fcde9c"],[500,"#faa476"],[1e3,"#f0746e"],[2e3,"#e34f6f"],[4e3,"#dc3977"],[8e3,"#b9257a"],[16e3,"#7c1d6f"]],injured:[[0,"#fcde9c"],[250,"#faa476"],[500,"#f0746e"],[750,"#e34f6f"],[1e3,"#dc3977"],[1250,"#b9257a"],[1500,"#7c1d6f"]],killed:[[0,"#fcde9c"],[825,"#faa476"],[1750,"#f0746e"],[2625,"#e34f6f"],[3500,"#dc3977"],[4375,"#b9257a"],[6175,"#7c1d6f"]]};function p(e){console.log("prop",e),n(0,u=e);const t=a;l.setPaintProperty("state_totals","fill-color",{property:u,stops:t})}j(F,{getMap:()=>l}),j(Q,{getMapbox:()=>c}),_((async()=>{c=window.mapboxgl,c.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(2,l=new c.Map({container:s,style:"mapbox://styles/mapbox/light-v10",center:o.lngLat,zoom:o.zoom,minZoom:0,maxZoom:8}));return l.addControl(new class{onAdd(e){return this.map=e,this.container=document.createElement("div"),this.container.style.display="block",this.container.style.height="2.75rem",this.container.style.width="2.75rem",this.container}onRemove(){this.container.parentNode.removeChild(this.container),this.map=void 0}},"top-left"),l.addControl(new c.NavigationControl,"top-left"),l.on("load",(()=>{l.resize(),l.addSource("state_totals",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incident-totals/states/{z}/{x}/{y}.pbf"]}),l.addLayer({id:"state_totals",type:"fill",source:"state_totals","source-layer":"state_totals",layout:{},paint:{"fill-color":{property:u,stops:[[0,"#fcde9c"],[500,"#faa476"],[1e3,"#f0746e"],[2e3,"#e34f6f"],[4e3,"#dc3977"],[8e3,"#b9257a"],[16e3,"#7c1d6f"]]},"fill-opacity":["case",["boolean",["feature-state","hover"],!1],1,.8]}}),l.addLayer({id:"state_totals_lines",type:"line",source:"state_totals","source-layer":"state_totals",layout:{},paint:{"line-color":"#444","line-width":2}})})),l.on("mouseenter","state_totals",(function(e){l.getCanvas().style.cursor="pointer"})),l.on("mouseleave","state_totals",(function(){l.getCanvas().style.cursor=""})),l.on("click",(async function(e){const t=l.queryRenderedFeatures(e.point);n(3,f=t.find((e=>"state_totals"===e.layer.id)))})),()=>{n(2,l=null)}}));return e.$$set=e=>{"$$scope"in e&&n(7,d=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&n(4,r=h[u]),1&e.$$.dirty&&n(5,a=m[u])},[u,s,l,f,r,a,p,d,i,()=>{p("accidents")},()=>{p("killed")},()=>{p("injured")},function(e){A[e?"unshift":"push"]((()=>{s=e,n(1,s)}))}]}class ut extends n{constructor(e){super(),r(this,e,dt,it,a,{})}}function ft(e){let t;const n=e[8].default,r=V(n,e,e[7],null);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,n){r&&r.m(e,n),t=!0},p(e,a){r&&r.p&&(!t||128&a)&&w(r,n,e,e[7],a,null,null)},i(e){t||($(r,e),t=!0)},o(e){E(r,e),t=!1},d(e){r&&r.d(e)}}}function ht(e){let t,n,r,a,o;return{c(){t=h("h3"),n=m("Railroad crossing accidents in New Jersey counties"),r=x(),a=h("p"),o=m("Click counties to see the total accidents and the number of accidents with injuries and fatalities."),this.h()},l(e){t=s(e,"H3",{class:!0});var i=l(t);n=p(i,"Railroad crossing accidents in New Jersey counties"),i.forEach(c),r=y(e),a=s(e,"P",{class:!0});var d=l(a);o=p(d,"Click counties to see the total accidents and the number of accidents with injuries and fatalities."),d.forEach(c),this.h()},h(){i(t,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),i(a,"class","font-medium my-0 py0 max-w-2xl text-lg text-gray-600")},m(e,s){d(e,t,s),u(t,n),d(e,r,s),d(e,a,s),u(a,o)},p:f,d(e){e&&c(t),e&&c(r),e&&c(a)}}}function mt(e){let t,n,r,a,o,f,b,v,w,$,E,k,N,I,C,D,T,S,j,_,V=e[3].properties.name+"",A=e[3].properties.accidents+"",P=e[3].properties.killed+"",z=e[3].properties.injured+"";return{c(){t=h("h3"),n=m(V),r=x(),a=h("p"),o=m(A),f=x(),b=h("span"),v=m("Accidents"),w=x(),$=h("p"),E=m(P),k=x(),N=h("span"),I=m("Killed"),C=x(),D=h("p"),T=m(z),S=x(),j=h("span"),_=m("Injured"),this.h()},l(e){t=s(e,"H3",{class:!0});var i=l(t);n=p(i,V),i.forEach(c),r=y(e),a=s(e,"P",{class:!0});var d=l(a);o=p(d,A),f=y(d),b=s(d,"SPAN",{class:!0});var u=l(b);v=p(u,"Accidents"),u.forEach(c),d.forEach(c),w=y(e),$=s(e,"P",{class:!0});var h=l($);E=p(h,P),k=y(h),N=s(h,"SPAN",{class:!0});var m=l(N);I=p(m,"Killed"),m.forEach(c),h.forEach(c),C=y(e),D=s(e,"P",{class:!0});var g=l(D);T=p(g,z),S=y(g),j=s(g,"SPAN",{class:!0});var x=l(j);_=p(x,"Injured"),x.forEach(c),g.forEach(c),this.h()},h(){i(t,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),i(b,"class","font-normal"),i(a,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(N,"class","font-normal"),i($,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(j,"class","font-normal"),i(D,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600")},m(e,s){d(e,t,s),u(t,n),d(e,r,s),d(e,a,s),u(a,o),u(a,f),u(a,b),u(b,v),d(e,w,s),d(e,$,s),u($,E),u($,k),u($,N),u(N,I),d(e,C,s),d(e,D,s),u(D,T),u(D,S),u(D,j),u(j,_)},p(e,t){8&t&&V!==(V=e[3].properties.name+"")&&g(n,V),8&t&&A!==(A=e[3].properties.accidents+"")&&g(o,A),8&t&&P!==(P=e[3].properties.killed+"")&&g(E,P),8&t&&z!==(z=e[3].properties.injured+"")&&g(T,z)},d(e){e&&c(t),e&&c(r),e&&c(a),e&&c(w),e&&c($),e&&c(C),e&&c(D)}}}function pt(e){let t,n,r,a,o,f,g,b,v,w,S,j,_,V,A,P,L,R,B,K=e[2]&&ft(e);function U(e,t){return e[3]?mt:ht}_=new ot({props:{scale:e[5],title:e[4]}});let q=U(e),H=q(e);return{c(){t=h("div"),K&&K.c(),n=x(),r=h("div"),a=h("button"),o=m("Accidents"),f=x(),g=h("button"),b=m("Killed"),v=x(),w=h("button"),S=m("Injured"),j=x(),k(_.$$.fragment),V=x(),A=h("div"),P=h("div"),H.c(),this.h()},l(e){t=s(e,"DIV",{class:!0});var i=l(t);K&&K.l(i),n=y(i),r=s(i,"DIV",{class:!0});var d=l(r);a=s(d,"BUTTON",{type:!0,class:!0});var u=l(a);o=p(u,"Accidents"),u.forEach(c),f=y(d),g=s(d,"BUTTON",{type:!0,class:!0});var h=l(g);b=p(h,"Killed"),h.forEach(c),v=y(d),w=s(d,"BUTTON",{type:!0,class:!0});var m=l(w);S=p(m,"Injured"),m.forEach(c),d.forEach(c),j=y(i),N(_.$$.fragment,i),V=y(i),A=s(i,"DIV",{class:!0});var x=l(A);P=s(x,"DIV",{class:!0});var $=l(P);H.l($),$.forEach(c),x.forEach(c),i.forEach(c),this.h()},h(){i(a,"type","button"),i(a,"class","\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-t-md\n        sm:rounded-l-md\n        sm:rounded-tr-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(a,"selected","accidents"===e[0]),i(g,"type","button"),i(g,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(g,"selected","killed"===e[0]),i(w,"type","button"),i(w,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-b-md\n        sm:rounded-r-md\n        sm:rounded-bl-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(w,"selected","injured"===e[0]),i(r,"class","absolute z-10 flex flex-col sm:flex-row shadow-sm rounded-md top-2 left-2"),i(P,"class","p-4 sm:px-6"),i(A,"class","z-10 bg-white shadow overflow-hidden rounded-md absolute top-2 right-0 mr-2 w-1/2 lg:w-1/3 pb-2"),i(t,"class","flex-grow z-0 h-full")},m(s,l){d(s,t,l),K&&K.m(t,null),u(t,n),u(t,r),u(r,a),u(a,o),u(r,f),u(r,g),u(g,b),u(r,v),u(r,w),u(w,S),u(t,j),I(_,t,null),u(t,V),u(t,A),u(A,P),H.m(P,null),e[12](t),L=!0,R||(B=[z(a,"click",e[9]),z(g,"click",e[10]),z(w,"click",e[11])],R=!0)},p(e,[r]){e[2]?K?(K.p(e,r),4&r&&$(K,1)):(K=ft(e),K.c(),$(K,1),K.m(t,n)):K&&(C(),E(K,1,1,(()=>{K=null})),D()),1&r&&O(a,"selected","accidents"===e[0]),1&r&&O(g,"selected","killed"===e[0]),1&r&&O(w,"selected","injured"===e[0]);const o={};16&r&&(o.title=e[4]),_.$set(o),q===(q=U(e))&&H?H.p(e,r):(H.d(1),H=q(e),H&&(H.c(),H.m(P,null)))},i(e){L||($(K),$(_.$$.fragment,e),L=!0)},o(e){E(K),E(_.$$.fragment,e),L=!1},d(n){n&&c(t),K&&K.d(),T(_),H.d(),e[12](null),R=!1,M(B)}}}function gt(e,t,n){let r,a;S(e,W,(e=>n(14,a=e)));let o,s,l,c,{$$slots:i={},$$scope:d}=t,u="accidents";const f={accidents:"Number of accidents",injured:"Number of accidents with injuries",killed:"Number of accidents with fatalities"};j(F,{getMap:()=>s}),j(Q,{getMapbox:()=>l});const h=[[0,"#fcde9c"],[15,"#faa476"],[30,"#f0746e"],[45,"#e34f6f"],[60,"#dc3977"],[75,"#b9257a"],[90,"#7c1d6f"]];function m(e){n(0,u=e),s.setPaintProperty("county_totals","fill-color",{property:u,stops:h})}_((async()=>{l=window.mapboxgl,l.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(2,s=new l.Map({container:o,style:"mapbox://styles/mapbox/light-v10",center:a.lngLat,zoom:a.zoom,minZoom:7,maxZoom:14}));return s.addControl(new class{onAdd(e){return this.map=e,this.container=document.createElement("div"),this.container.style.display="block",this.container.style.height="2.75rem",this.container.style.width="2.75rem",this.container}onRemove(){this.container.parentNode.removeChild(this.container),this.map=void 0}},"top-left"),s.addControl(new l.NavigationControl,"top-left"),s.on("load",(()=>{s.resize(),s.addSource("county_totals",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incident-totals/counties/{z}/{x}/{y}.pbf"]}),s.addLayer({id:"county_totals",type:"fill",source:"county_totals","source-layer":"county_totals",layout:{},paint:{"fill-color":{property:u,stops:[[0,"#fcde9c"],[15,"#faa476"],[30,"#f0746e"],[45,"#e34f6f"],[60,"#dc3977"],[75,"#b9257a"],[90,"#7c1d6f"]]},"fill-opacity":["case",["boolean",["feature-state","hover"],!1],1,.8]}}),s.addLayer({id:"county_totals_lines",type:"line",source:"county_totals","source-layer":"county_totals",layout:{},paint:{"line-color":"#444","line-width":2}})})),s.on("mousemove","county_totals",(function(e){s.getCanvas().style.cursor="pointer"})),s.on("mouseleave","county_totals",(function(){s.getCanvas().style.cursor=""})),s.on("click",(async function(e){const t=s.queryRenderedFeatures(e.point);n(3,c=t.find((e=>"county_totals"===e.layer.id)))})),()=>{n(2,s=null)}}));return e.$$set=e=>{"$$scope"in e&&n(7,d=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&n(4,r=f[u])},[u,o,s,c,r,h,m,d,i,()=>{m("accidents")},()=>{m("killed")},()=>{m("injured")},function(e){A[e?"unshift":"push"]((()=>{o=e,n(1,o)}))}]}class xt extends n{constructor(e){super(),r(this,e,gt,pt,a,{})}}function yt(e){let t,n,r,a;return r=new xt({}),{c(){t=h("div"),n=h("div"),k(r.$$.fragment),this.h()},l(e){t=s(e,"DIV",{class:!0});var a=l(t);n=s(a,"DIV",{class:!0});var o=l(n);N(r.$$.fragment,o),o.forEach(c),a.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,o){d(e,t,o),u(t,n),I(r,n,null),a=!0},p:f,i(e){a||($(r.$$.fragment,e),a=!0)},o(e){E(r.$$.fragment,e),a=!1},d(e){e&&c(t),T(r)}}}function bt(e){let t,n,r,a;return r=new ut({}),{c(){t=h("div"),n=h("div"),k(r.$$.fragment),this.h()},l(e){t=s(e,"DIV",{class:!0});var a=l(t);n=s(a,"DIV",{class:!0});var o=l(n);N(r.$$.fragment,o),o.forEach(c),a.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,o){d(e,t,o),u(t,n),I(r,n,null),a=!0},p:f,i(e){a||($(r.$$.fragment,e),a=!0)},o(e){E(r.$$.fragment,e),a=!1},d(e){e&&c(t),T(r)}}}function vt(e){let t,n,r,a;return r=new We({props:{rows:e[0],columns:e[1],next:e[2],rowsCount:e[3],loaded:e[5],currentPage:e[6]}}),r.$on("query",e[9]),r.$on("nextPage",e[10]),r.$on("previousPage",e[11]),r.$on("viewLocation",e[12]),{c(){t=h("div"),n=h("div"),k(r.$$.fragment),this.h()},l(e){t=s(e,"DIV",{class:!0});var a=l(t);n=s(a,"DIV",{class:!0});var o=l(n);N(r.$$.fragment,o),o.forEach(c),a.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 pb-12 h-full bg-gray-50")},m(e,o){d(e,t,o),u(t,n),I(r,n,null),a=!0},p(e,t){const n={};1&t&&(n.rows=e[0]),2&t&&(n.columns=e[1]),4&t&&(n.next=e[2]),8&t&&(n.rowsCount=e[3]),32&t&&(n.loaded=e[5]),64&t&&(n.currentPage=e[6]),r.$set(n)},i(e){a||($(r.$$.fragment,e),a=!0)},o(e){E(r.$$.fragment,e),a=!1},d(e){e&&c(t),T(r)}}}function wt(e){let t,n,r,a;return r=new Ee({props:{center:e[7]}}),{c(){t=h("div"),n=h("div"),k(r.$$.fragment),this.h()},l(e){t=s(e,"DIV",{class:!0});var a=l(t);n=s(a,"DIV",{class:!0});var o=l(n);N(r.$$.fragment,o),o.forEach(c),a.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,o){d(e,t,o),u(t,n),I(r,n,null),a=!0},p(e,t){const n={};128&t&&(n.center=e[7]),r.$set(n)},i(e){a||($(r.$$.fragment,e),a=!0)},o(e){E(r.$$.fragment,e),a=!1},d(e){e&&c(t),T(r)}}}function $t(e){let t,n,r,a,o,f,g,b,v,w,k,N,I,T,S,j,_,V,A,P,L,R,O,K,U,q,H,G,Y,J,F,Q,W,X,Z,ee,te,ne,re,ae,oe,se,le,ce,ie,de,ue,fe,he,me,pe,ge,xe,ye,be,ve,we,$e,Ee,ke,Ne,Ie,Ce,De,Te,Se;const je=[wt,vt,bt,yt],_e=[];function Ve(e,t){return"map"===e[4]?0:"list"===e[4]?1:"us-totals"===e[4]?2:"nj-totals"===e[4]?3:-1}return~(fe=Ve(e))&&(he=_e[fe]=je[fe](e)),{c(){t=h("script"),r=h("link"),a=h("script"),f=h("link"),g=x(),b=h("div"),v=h("div"),w=h("h1"),k=m("Railroad Crossing Incidents"),N=x(),I=h("div"),T=h("nav"),S=h("button"),j=h("span"),_=m("Map"),V=x(),A=h("span"),R=x(),O=h("button"),K=h("span"),U=m("Locations"),q=x(),H=h("span"),J=x(),F=h("button"),Q=h("span"),W=m("N.J. Totals"),X=x(),Z=h("span"),ne=x(),re=h("button"),ae=h("span"),oe=m("U.S. Totals"),se=x(),le=h("span"),de=x(),ue=h("div"),he&&he.c(),me=x(),pe=h("div"),ge=m("Story by "),xe=h("a"),ye=m("Payton Guion"),be=m(". Graphics by "),ve=h("a"),we=m("Seth Vincent"),$e=m(". "),Ee=h("br"),ke=m("Data from the "),Ne=h("a"),Ie=m("Federal Railroad Administration"),Ce=m("."),this.h()},l(e){const n=B('[data-svelte="svelte-hlw6vs"]',document.head);t=s(n,"SCRIPT",{src:!0}),l(t).forEach(c),r=s(n,"LINK",{href:!0,rel:!0}),a=s(n,"SCRIPT",{src:!0}),l(a).forEach(c),f=s(n,"LINK",{rel:!0,href:!0,type:!0}),n.forEach(c),g=y(e),b=s(e,"DIV",{class:!0});var o=l(b);v=s(o,"DIV",{class:!0});var i=l(v);w=s(i,"H1",{class:!0});var d=l(w);k=p(d,"Railroad Crossing Incidents"),d.forEach(c),i.forEach(c),N=y(o),I=s(o,"DIV",{class:!0});var u=l(I);T=s(u,"NAV",{class:!0,"aria-label":!0});var h=l(T);S=s(h,"BUTTON",{class:!0,"aria-current":!0});var m=l(S);j=s(m,"SPAN",{});var x=l(j);_=p(x,"Map"),x.forEach(c),V=y(m),A=s(m,"SPAN",{"aria-hidden":!0,class:!0}),l(A).forEach(c),m.forEach(c),R=y(h),O=s(h,"BUTTON",{class:!0,"aria-current":!0});var $=l(O);K=s($,"SPAN",{});var E=l(K);U=p(E,"Locations"),E.forEach(c),q=y($),H=s($,"SPAN",{"aria-hidden":!0,class:!0}),l(H).forEach(c),$.forEach(c),J=y(h),F=s(h,"BUTTON",{class:!0,"aria-current":!0});var C=l(F);Q=s(C,"SPAN",{});var D=l(Q);W=p(D,"N.J. Totals"),D.forEach(c),X=y(C),Z=s(C,"SPAN",{"aria-hidden":!0,class:!0}),l(Z).forEach(c),C.forEach(c),ne=y(h),re=s(h,"BUTTON",{class:!0,"aria-current":!0});var P=l(re);ae=s(P,"SPAN",{});var z=l(ae);oe=p(z,"U.S. Totals"),z.forEach(c),se=y(P),le=s(P,"SPAN",{"aria-hidden":!0,class:!0}),l(le).forEach(c),P.forEach(c),h.forEach(c),u.forEach(c),de=y(o),ue=s(o,"DIV",{class:!0});var M=l(ue);he&&he.l(M),M.forEach(c),me=y(o),pe=s(o,"DIV",{class:!0});var L=l(pe);ge=p(L,"Story by "),xe=s(L,"A",{href:!0,target:!0,class:!0});var G=l(xe);ye=p(G,"Payton Guion"),G.forEach(c),be=p(L,". Graphics by "),ve=s(L,"A",{href:!0,target:!0,class:!0});var Y=l(ve);we=p(Y,"Seth Vincent"),Y.forEach(c),$e=p(L,". "),Ee=s(L,"BR",{class:!0}),ke=p(L,"Data from the "),Ne=s(L,"A",{href:!0,target:!0,class:!0});var ee=l(Ne);Ie=p(ee,"Federal Railroad Administration"),ee.forEach(c),Ce=p(L,"."),L.forEach(c),o.forEach(c),this.h()},h(){document.title="Railroad Crossing Incidents",t.src!==(n="https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js")&&i(t,"src","https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js"),i(r,"href","https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.css"),i(r,"rel","stylesheet"),a.src!==(o="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js")&&i(a,"src","https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js"),i(f,"rel","stylesheet"),i(f,"href","https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.css"),i(f,"type","text/css"),i(w,"class","font-bold text-gray-600"),i(v,"class","flex-none p-4"),i(A,"aria-hidden","true"),i(A,"class",P="\n          "+("map"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n          absolute inset-x-0 bottom-0 h-0.5\n        "),i(S,"class",L="\n        "+("map"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n        group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n      "),i(S,"aria-current","page"),i(H,"aria-hidden","true"),i(H,"class",G="\n          "+("list"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n          absolute inset-x-0 bottom-0 h-0.5\n        "),i(O,"class",Y="\n        "+("list"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n        group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n      "),i(O,"aria-current","page"),i(Z,"aria-hidden","true"),i(Z,"class",ee="\n            "+("nj-totals"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),i(F,"class",te="\n          "+("nj-totals"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),i(F,"aria-current","page"),i(le,"aria-hidden","true"),i(le,"class",ce="\n            "+("us-totals"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),i(re,"class",ie="\n          "+("us-totals"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),i(re,"aria-current","page"),i(T,"class","relative z-0 shadow flex divide-x divide-gray-200 border-t border-gray-100 border-"),i(T,"aria-label","Tabs"),i(I,"class","flex-none block"),i(ue,"class","flex-grow border-t border-gray-200 overflow-hidden"),i(xe,"href","https://twitter.com/PaytonGuion"),i(xe,"target","_blank"),i(xe,"class","underline"),i(ve,"href","https://twitter.com/sethdvincent"),i(ve,"target","_blank"),i(ve,"class","underline"),i(Ee,"class","sm:hidden"),i(Ne,"href","https://railroads.dot.gov"),i(Ne,"target","_blank"),i(Ne,"class","underline"),i(pe,"class","flex-none p-4 text-xs text-gray-500 border-t border-gray-200"),i(b,"class","flex flex-col h-screen border border-gray-100  max-w-screen-lg mx-auto")},m(n,o){u(document.head,t),u(document.head,r),u(document.head,a),u(document.head,f),d(n,g,o),d(n,b,o),u(b,v),u(v,w),u(w,k),u(b,N),u(b,I),u(I,T),u(T,S),u(S,j),u(j,_),u(S,V),u(S,A),u(T,R),u(T,O),u(O,K),u(K,U),u(O,q),u(O,H),u(T,J),u(T,F),u(F,Q),u(Q,W),u(F,X),u(F,Z),u(T,ne),u(T,re),u(re,ae),u(ae,oe),u(re,se),u(re,le),u(b,de),u(b,ue),~fe&&_e[fe].m(ue,null),u(b,me),u(b,pe),u(pe,ge),u(pe,xe),u(xe,ye),u(pe,be),u(pe,ve),u(ve,we),u(pe,$e),u(pe,Ee),u(pe,ke),u(pe,Ne),u(Ne,Ie),u(pe,Ce),De=!0,Te||(Se=[z(S,"click",e[16]),z(O,"click",e[17]),z(F,"click",e[18]),z(re,"click",e[19])],Te=!0)},p(e,[t]){(!De||16&t&&P!==(P="\n          "+("map"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n          absolute inset-x-0 bottom-0 h-0.5\n        "))&&i(A,"class",P),(!De||16&t&&L!==(L="\n        "+("map"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n        group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n      "))&&i(S,"class",L),(!De||16&t&&G!==(G="\n          "+("list"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n          absolute inset-x-0 bottom-0 h-0.5\n        "))&&i(H,"class",G),(!De||16&t&&Y!==(Y="\n        "+("list"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n        group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n      "))&&i(O,"class",Y),(!De||16&t&&ee!==(ee="\n            "+("nj-totals"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&i(Z,"class",ee),(!De||16&t&&te!==(te="\n          "+("nj-totals"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&i(F,"class",te),(!De||16&t&&ce!==(ce="\n            "+("us-totals"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&i(le,"class",ce),(!De||16&t&&ie!==(ie="\n          "+("us-totals"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&i(re,"class",ie);let n=fe;fe=Ve(e),fe===n?~fe&&_e[fe].p(e,t):(he&&(C(),E(_e[n],1,1,(()=>{_e[n]=null})),D()),~fe?(he=_e[fe],he?he.p(e,t):(he=_e[fe]=je[fe](e),he.c()),$(he,1),he.m(ue,null)):he=null)},i(e){De||($(he),De=!0)},o(e){E(he),De=!1},d(e){c(t),c(r),c(a),c(f),e&&c(g),e&&c(b),~fe&&_e[fe].d(),Te=!1,M(Se)}}}async function Et({fetch:e,page:t}){const n=await e("https://railroad-crossing-data.vercel.app/railroad_crossing_data/RRData.json?&_sort=StateName"),r=await n.json();if(n.ok){const{rows:e,columns:t}=G(r),n=r.filtered_table_rows_count;let a=null;return a=r.next&&r.next.includes(",")?r.next.split(",")[1]:r.next,console.log("next",a),{props:{rows:e,columns:t,next:a,rowsCount:n}}}return{status:n.status,error:new Error("Could not load data")}}function kt(e,t,n){let r,a,o,s;S(e,Y,(e=>n(13,s=e)));let{rows:l}=t,{columns:c}=t,{next:i}=t,{rowsCount:d}=t,u=!0,f=1,h=s.query.get("view")||"map";async function m(e){n(5,u=!1);const{sort:t,filters:r}=e,a=i?`_next=${i}`:"";let o="";t.column&&(o=`_sort${"DESC"===t.order?"_desc":""}=${t.column}`);const s=[];if(r.length)for(const n of r)"StateName"===n.column?s.push(`StateName__exact=${n.value}`):"CountyName"===n.column?s.push(`CountyName__like=${n.value}`):"CityName"===n.column&&s.push(`CityName__like=${n.value}`);const f=`https://railroad-crossing-data.vercel.app/railroad_crossing_data/RRData.json?${[a,...s,o].join("&")}`,h=await fetch(f),m=await h.json(),p=G(m);n(0,l=[...p.rows]),n(1,c=[...p.columns]),n(3,d=m.filtered_table_rows_count),m.rows[0][0],m.next&&m.next.includes(",")?n(2,i=m.next.split(",")[1]):n(2,i=m.next),n(5,u=!0)}async function p(e){s.query.set("view",e),n(4,h=e);const t=s.query.toString();await J(`${H}?${t}`)}K(1e3),U(150);return e.$$set=e=>{"rows"in e&&n(0,l=e.rows),"columns"in e&&n(1,c=e.columns),"next"in e&&n(2,i=e.next),"rowsCount"in e&&n(3,d=e.rowsCount)},e.$$.update=()=>{if(8192&e.$$.dirty&&n(14,r=s.query.get("lng")),8192&e.$$.dirty&&n(15,a=s.query.get("lat")),49152&e.$$.dirty&&n(7,o=r&a?[r,a]:null),8208&e.$$.dirty&&"map"!==h&&(s.query.has("lng")||s.query.has("lat"))){s.query.delete("lng"),s.query.delete("lat");const e=s.query.toString();J(`${H}?${e}`)}},[l,c,i,d,h,u,f,o,p,async function(e){n(2,i=null),n(6,f=1),await m(e.detail)},async function(e){console.log("next"),n(6,f+=1),await m(e.detail)},async function(e){console.log("previous"),n(2,i-=200),i<0&&(n(2,i=null),n(6,f=1)),n(6,f-=1),await m(e.detail)},function(e){const[t,r]=e.detail;s.query.set("lng",t),s.query.set("lat",r),n(7,o=[t,r]),p("map")},s,r,a,()=>{p("map")},()=>{p("list")},()=>{p("nj-totals")},()=>{p("us-totals")}]}export default class extends n{constructor(e){super(),r(this,e,kt,$t,a,{rows:0,columns:1,next:2,rowsCount:3})}}export{Et as load};

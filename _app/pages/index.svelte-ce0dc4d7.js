import{H as e,C as t,S as n,i as s,s as r,I as a,c as o,a as l,d as c,b as i,f as d,F as u,G as f,E as m,v as p,r as g,e as h,k as y,n as x,B as b,u as v,J as w,x as $,z as E,D as k,K as I,t as j,g as N,l as _,h as T,L as z,j as D,m as V,o as C,w as S,M as L,N as M,O as A,P,Q as R,R as B,T as q}from"../chunks/vendor-6cd040f5.js";import{r as K,b as O}from"../chunks/paths-7dc55c62.js";const U={subscribe:t=>(()=>{const t=e("__svelte__");return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:t.navigating.subscribe}},session:t.session}})().page.subscribe(t)},G=async function(e,t){return K.goto(e,t,[])};const Y={},F={},H=t({zoom:7.5,lngLat:["-74.558333","40.16"]}),J=t({zoom:2,lngLat:["-98.5556","39.8097"]});function Q(e){let t,n;return{c(){t=a("svg"),n=a("path"),this.h()},l(e){t=o(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var s=l(t);n=o(s,"path",{d:!0},1),l(n).forEach(c),s.forEach(c),this.h()},h(){i(n,"d","M50,5C25.147,5,5,25.148,5,50c0,24.852,20.147,45,45,45c24.854,0,45-20.148,45-45C95,25.148,74.854,5,50,5z M74.675,38.917  l-23.75,29.511c-1.109,1.379-2.756,2.252-4.517,2.396c-0.173,0.015-0.347,0.021-0.52,0.021c-1.585,0-3.138-0.589-4.326-1.652  L25.985,55.17c-2.463-2.217-2.661-6.01-0.444-8.473c2.218-2.463,6.012-2.662,8.474-0.444l11.223,10.103l20.088-24.961  c2.078-2.582,5.855-2.989,8.438-0.913C76.344,32.558,76.752,36.335,74.675,38.917z"),i(t,"height","20px"),i(t,"width","20px"),i(t,"class","align-top inline"),i(t,"fill","#4CE600"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),i(t,"version","1.1"),i(t,"x","0px"),i(t,"y","0px"),i(t,"viewBox","0 0 100 100"),i(t,"enable-background","new 0 0 100 100"),i(t,"xml:space","preserve")},m(e,s){d(e,t,s),u(t,n)},p:f,i:f,o:f,d(e){e&&c(t)}}}class Z extends n{constructor(e){super(),s(this,e,null,Q,r,{})}}function X(e){let t,n;return{c(){t=a("svg"),n=a("path"),this.h()},l(e){t=o(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var s=l(t);n=o(s,"path",{d:!0},1),l(n).forEach(c),s.forEach(c),this.h()},h(){i(n,"d","M50,5C25.147,5,5,25.147,5,50c0,24.854,20.147,45,45,45c24.854,0,45-20.146,45-45C95,25.147,74.854,5,50,5z M49.999,76.75  c-3.342,0-6.061-2.717-6.061-6.057c0-3.346,2.719-6.066,6.061-6.066c3.343,0,6.063,2.723,6.063,6.066  C56.063,74.033,53.342,76.75,49.999,76.75z M66.238,43.808c-1.174,1.827-2.795,4.01-6.028,6.531  c-3.213,2.461-4.185,3.724-4.478,4.259c-0.166,0.299-0.402,0.895-0.59,2.004c-0.065,0.39-0.119,0.812-0.162,1.265l-0.254,2.714  l-9.771,0.023l0.124-3.127c0.017-0.4,0.06-1.185,0.168-1.918c0.324-2.229,1.085-4.209,2.261-5.882  c1.104-1.573,3.247-3.563,6.549-6.079c2.442-1.863,3.396-2.928,3.764-3.492c0.47-0.717,0.697-1.472,0.697-2.305  c0-1.931-0.705-3.46-2.094-4.545c-1.474-1.151-3.518-1.735-6.073-1.735c-2.265,0-4.176,0.599-5.682,1.778  c-1.594,1.239-2.713,2.953-3.245,4.964l-0.66,2.492l-9.563-1.037l0.676-3.238c0.88-4.218,2.865-7.474,5.902-9.677  c3.934-2.855,8.156-4.303,12.552-4.303c4.856,0,8.831,1.249,12.508,3.931c3.399,2.482,5.349,6.492,5.349,11.002  C68.188,39.642,67.55,41.727,66.238,43.808z"),i(t,"height","20px"),i(t,"width","20px"),i(t,"class","align-top inline"),i(t,"fill","#A2A2A2"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),i(t,"version","1.1"),i(t,"x","0px"),i(t,"y","0px"),i(t,"viewBox","0 0 100 100"),i(t,"enable-background","new 0 0 100 100"),i(t,"xml:space","preserve")},m(e,s){d(e,t,s),u(t,n)},p:f,i:f,o:f,d(e){e&&c(t)}}}class W extends n{constructor(e){super(),s(this,e,null,X,r,{})}}function ee(e){let t,n;return{c(){t=a("svg"),n=a("path"),this.h()},l(e){t=o(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var s=l(t);n=o(s,"path",{d:!0},1),l(n).forEach(c),s.forEach(c),this.h()},h(){i(n,"d","M50,5C25.147,5,5,25.147,5,50c0,24.852,20.147,45,45,45c24.854,0,45-20.148,45-45C95,25.147,74.854,5,50,5z M70.243,70.24  c-1.173,1.172-2.708,1.758-4.243,1.758s-3.07-0.586-4.242-1.757L50,58.484L38.243,70.242C37.071,71.414,35.536,72,34,72  s-3.071-0.586-4.243-1.757c-2.343-2.345-2.343-6.144,0-8.485L41.515,50L29.757,38.242c-2.343-2.343-2.343-6.142,0-8.485  c2.343-2.343,6.142-2.343,8.485,0L50,41.514l11.756-11.757c2.344-2.343,6.145-2.343,8.485,0c2.344,2.343,2.344,6.142,0.001,8.485  L58.486,49.999l11.756,11.756C72.586,64.1,72.586,67.898,70.243,70.24z"),i(t,"height","20px"),i(t,"width","20px"),i(t,"class","align-top inline"),i(t,"fill","#FF0000"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),i(t,"version","1.1"),i(t,"x","0px"),i(t,"y","0px"),i(t,"viewBox","0 0 100 100"),i(t,"enable-background","new 0 0 100 100"),i(t,"xml:space","preserve")},m(e,s){d(e,t,s),u(t,n)},p:f,i:f,o:f,d(e){e&&c(t)}}}class te extends n{constructor(e){super(),s(this,e,null,ee,r,{})}}function ne(e,t,n){const s=e.slice();return s[12]=t[n],s}function se(e){let t;const n=e[7].default,s=k(n,e,e[6],null);return{c(){s&&s.c()},l(e){s&&s.l(e)},m(e,n){s&&s.m(e,n),t=!0},p(e,r){s&&s.p&&(!t||64&r)&&m(s,n,e,e[6],r,null,null)},i(e){t||(p(s,e),t=!0)},o(e){g(s,e),t=!1},d(e){s&&s.d(e)}}}function re(e){let t,n,s,r,a;return{c(){t=h("div"),n=h("h1"),s=j("Click a point to learn "),r=h("br"),a=j("about accidents and other information at that railroad crossing."),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"H1",{class:!0});var d=l(n);s=N(d,"Click a point to learn "),r=o(d,"BR",{}),a=N(d,"about accidents and other information at that railroad crossing."),d.forEach(c),i.forEach(c),this.h()},h(){i(n,"class","block self-center w-[220px] font-medium text-gray-500 text-xl mx-auto align-middle"),i(t,"class","px-4 py-4 sm:px-6 flex items center h-full")},m(e,o){d(e,t,o),u(t,n),u(n,s),u(n,r),u(n,a)},p:f,i:f,o:f,d(e){e&&c(t)}}}function ae(e){let t,n,s,r,a,f,m,w,$,E,k,I,_,z,D,V,C,S,L,M,A,P,R,B,q,K,O,U,G,Y,F=e[0].properties.Street+"",H=e[0].properties.CityName+"",J=e[0].properties.CountyName+"",Q=e[0].properties.StateName+"",Z=e[0].properties["Number of accidents"]+"",X=e[0].properties["Total Killed"]+"",W=e[0].properties["Total injured"]+"";const ee=[ce,le,oe],te=[];function ne(e,t){return"Yes"===e[0].properties["Meets minimum safety guidelines"]?0:"No"===e[0].properties["Meets minimum safety guidelines"]?1:2}_=ne(e),z=te[_]=ee[_](e);let se=e[3]&&ie(e);return{c(){t=h("div"),n=h("h3"),s=j(F),r=y(),a=h("h3"),f=j(H),m=j(", "),w=j(J),$=j(", "),E=j(Q),k=y(),I=h("p"),z.c(),D=y(),V=h("p"),C=j(Z),S=j(" Accidents"),L=y(),M=h("p"),A=j(X),P=j(" Killed"),R=y(),B=h("p"),q=j(W),K=j(" Injured"),O=y(),U=h("div"),G=h("dl"),se&&se.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"H3",{class:!0});var d=l(n);s=N(d,F),d.forEach(c),r=x(i),a=o(i,"H3",{class:!0});var u=l(a);f=N(u,H),m=N(u,", "),w=N(u,J),$=N(u,", "),E=N(u,Q),u.forEach(c),k=x(i),I=o(i,"P",{class:!0});var p=l(I);z.l(p),p.forEach(c),D=x(i),V=o(i,"P",{class:!0});var g=l(V);C=N(g,Z),S=N(g," Accidents"),g.forEach(c),L=x(i),M=o(i,"P",{class:!0});var h=l(M);A=N(h,X),P=N(h," Killed"),h.forEach(c),R=x(i),B=o(i,"P",{class:!0});var y=l(B);q=N(y,W),K=N(y," Injured"),y.forEach(c),i.forEach(c),O=x(e),U=o(e,"DIV",{class:!0});var b=l(U);G=o(b,"DL",{class:!0});var v=l(G);se&&se.l(v),v.forEach(c),b.forEach(c),this.h()},h(){i(n,"class","text-lg leading-6 font-medium text-gray-900"),i(a,"class","text-md leading-6 font-medium text-gray-600 mb-2"),i(I,"class","font-bold my-0 pt-1 pb-3 max-w-2xl text-sm text-gray-600"),i(V,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(M,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(B,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(t,"class","px-4 py-4 sm:px-6"),i(G,"class","divide-y divide-gray-200"),i(U,"class","border-t border-gray-200 px-4 py-2 sm:py-4 sm:p-0")},m(e,o){d(e,t,o),u(t,n),u(n,s),u(t,r),u(t,a),u(a,f),u(a,m),u(a,w),u(a,$),u(a,E),u(t,k),u(t,I),te[_].m(I,null),u(t,D),u(t,V),u(V,C),u(V,S),u(t,L),u(t,M),u(M,A),u(M,P),u(t,R),u(t,B),u(B,q),u(B,K),d(e,O,o),d(e,U,o),u(U,G),se&&se.m(G,null),Y=!0},p(e,t){(!Y||1&t)&&F!==(F=e[0].properties.Street+"")&&T(s,F),(!Y||1&t)&&H!==(H=e[0].properties.CityName+"")&&T(f,H),(!Y||1&t)&&J!==(J=e[0].properties.CountyName+"")&&T(w,J),(!Y||1&t)&&Q!==(Q=e[0].properties.StateName+"")&&T(E,Q);let n=_;_=ne(e),_!==n&&(b(),g(te[n],1,1,(()=>{te[n]=null})),v(),z=te[_],z||(z=te[_]=ee[_](e),z.c()),p(z,1),z.m(I,null)),(!Y||1&t)&&Z!==(Z=e[0].properties["Number of accidents"]+"")&&T(C,Z),(!Y||1&t)&&X!==(X=e[0].properties["Total Killed"]+"")&&T(A,X),(!Y||1&t)&&W!==(W=e[0].properties["Total injured"]+"")&&T(q,W),e[3]?se?se.p(e,t):(se=ie(e),se.c(),se.m(G,null)):se&&(se.d(1),se=null)},i(e){Y||(p(z),Y=!0)},o(e){g(z),Y=!1},d(e){e&&c(t),te[_].d(),e&&c(O),e&&c(U),se&&se.d()}}}function oe(e){let t,n,s;return t=new W({}),{c(){D(t.$$.fragment),n=j(" May or may not meet minimum safety guidelines")},l(e){V(t.$$.fragment,e),n=N(e," May or may not meet minimum safety guidelines")},m(e,r){C(t,e,r),d(e,n,r),s=!0},i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){g(t.$$.fragment,e),s=!1},d(e){S(t,e),e&&c(n)}}}function le(e){let t,n,s;return t=new te({}),{c(){D(t.$$.fragment),n=j(" Does not meet minimum safety guidelines")},l(e){V(t.$$.fragment,e),n=N(e," Does not meet minimum safety guidelines")},m(e,r){C(t,e,r),d(e,n,r),s=!0},i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){g(t.$$.fragment,e),s=!1},d(e){S(t,e),e&&c(n)}}}function ce(e){let t,n,s;return t=new Z({}),{c(){D(t.$$.fragment),n=j(" Meets minimum safety guidelines")},l(e){V(t.$$.fragment,e),n=N(e," Meets minimum safety guidelines")},m(e,r){C(t,e,r),d(e,n,r),s=!0},i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){g(t.$$.fragment,e),s=!1},d(e){S(t,e),e&&c(n)}}}function ie(e){let t,n=e[3],s=[];for(let r=0;r<n.length;r+=1)s[r]=de(ne(e,n,r));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=_()},l(e){for(let t=0;t<s.length;t+=1)s[t].l(e);t=_()},m(e,n){for(let t=0;t<s.length;t+=1)s[t].m(e,n);d(e,t,n)},p(e,r){if(24&r){let a;for(n=e[3],a=0;a<n.length;a+=1){const o=ne(e,n,a);s[a]?s[a].p(o,r):(s[a]=de(o),s[a].c(),s[a].m(t.parentNode,t))}for(;a<s.length;a+=1)s[a].d(1);s.length=n.length}},d(e){z(s,e),e&&c(t)}}}function de(e){let t,n,s,r,a,f,m,p=(e[4][e[12].key]||e[12].key)+"",g=e[12].value+"";return{c(){t=h("div"),n=h("dt"),s=j(p),r=y(),a=h("dd"),f=j(g),m=y(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"DT",{class:!0});var d=l(n);s=N(d,p),d.forEach(c),r=x(i),a=o(i,"DD",{class:!0});var u=l(a);f=N(u,g),u.forEach(c),m=x(i),i.forEach(c),this.h()},h(){i(n,"class","text-sm font-medium text-gray-500"),i(a,"class","text-sm text-gray-900 mt-0 col-span-1"),i(t,"class","py-1 sm:py-2 grid grid-cols-2 gap-2 sm:px-6")},m(e,o){d(e,t,o),u(t,n),u(n,s),u(t,r),u(t,a),u(a,f),u(t,m)},p(e,t){8&t&&p!==(p=(e[4][e[12].key]||e[12].key)+"")&&T(s,p),8&t&&g!==(g=e[12].value+"")&&T(f,g)},d(e){e&&c(t)}}}function ue(e){let t,n,s,r,a,f,m,w,$=e[2]&&se(e);const E=[ae,re],k=[];function I(e,t){return e[0]?0:1}return f=I(e),m=k[f]=E[f](e),{c(){t=h("div"),n=h("div"),$&&$.c(),s=y(),r=h("div"),a=h("div"),m.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"DIV",{class:!0});var d=l(n);$&&$.l(d),d.forEach(c),s=x(i),r=o(i,"DIV",{class:!0});var u=l(r);a=o(u,"DIV",{class:!0});var f=l(a);m.l(f),f.forEach(c),u.forEach(c),i.forEach(c),this.h()},h(){i(n,"class","flex-grow z-0 h-full"),i(a,"class","h-full overflow-y-scroll"),i(r,"class","bg-white h-1/2 sm:w-1/2 sm:h-full md:w-96 border-gray-200 border-t sm:border-t-0 sm:border-l"),i(t,"class","flex flex-col sm:flex-row h-full")},m(o,l){d(o,t,l),u(t,n),$&&$.m(n,null),e[8](n),u(t,s),u(t,r),u(r,a),k[f].m(a,null),w=!0},p(e,[t]){e[2]?$?($.p(e,t),4&t&&p($,1)):($=se(e),$.c(),p($,1),$.m(n,null)):$&&(b(),g($,1,1,(()=>{$=null})),v());let s=f;f=I(e),f===s?k[f].p(e,t):(b(),g(k[s],1,1,(()=>{k[s]=null})),v(),m=k[f],m?m.p(e,t):(m=k[f]=E[f](e),m.c()),p(m,1),m.m(a,null))},i(e){w||(p($),p(m),w=!0)},o(e){g($),g(m),w=!1},d(n){n&&c(t),$&&$.d(),e[8](null),k[f].d()}}}function fe(e,t,n){let s;w(e,H,(e=>n(10,s=e)));let r,a,o,l,{$$slots:c={},$$scope:i}=t,{center:d}=t,u=null;const f=["id","CrossingID","Total Killed","Total injured","Number of accidents","Latitude","Longitude","Street","CityName","CountyName","StateName","Meets minimum safety guidelines"];return $(Y,{getMap:()=>a}),$(F,{getMapbox:()=>o}),E((async()=>{o=window.mapboxgl,o.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(2,a=new o.Map({container:r,style:"mapbox://styles/mapbox/light-v10",center:d||s.lngLat,zoom:d?15:s.zoom,minZoom:3,maxZoom:20})),a.addControl(new MapboxGeocoder({accessToken:o.accessToken,mapboxgl:o}),"top-right"),a.on("load",(()=>{a.resize(),a.addSource("railroad_crossing_incidents",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incidents/{z}/{x}/{y}.pbf"]}),a.addLayer({id:"railroad_crossing_incidents",type:"circle",source:"railroad_crossing_incidents","source-layer":"railroad_crossing_incidents",layout:{},paint:{"circle-radius":["case",["has","sqrt_point_count"],["+",["*",["get","sqrt_point_count"],1.3],5],5],"circle-color":["case",["==",["get","Number of accidents"],0],"blue","red"],"circle-opacity":["case",["boolean",["feature-state","hover"],!1],1,.3],"circle-stroke-color":"white","circle-stroke-width":["case",["boolean",["feature-state","hover"],!1],3,0]}})})),d&&setTimeout((()=>{const e=a.project(d),t=a.queryRenderedFeatures([[e.x-5,e.y-5],[e.x+5,e.y+5]],{layers:["railroad_crossing_incidents"]});1===t.length&&n(0,u=t[0])}),1100);let e=null;function t({featureId:e,state:t}){a.setFeatureState({id:e,source:"railroad_crossing_incidents",sourceLayer:"railroad_crossing_incidents"},{hover:t})}let l=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1});return a.on("mousemove",(n=>{const s=a.queryRenderedFeatures(n.point,{layers:["railroad_crossing_incidents"]})[0];if(!s)return a.getCanvas().style.cursor="",l.remove(),void(e&&(t({featureId:e,state:!1}),e=null));if(a.getCanvas().style.cursor="pointer",s&&s.id===e)return;e&&t({featureId:e,state:!1}),e=s.id,t({featureId:s.id,state:!0});const r=s.properties,o=s.geometry.coordinates.slice();for(e=s.id;Math.abs(n.lngLat.lng-o[0])>180;)o[0]+=n.lngLat.lng>o[0]?360:-360;if(r.point_count&&r.point_count>-2){const e=`${r.point_count} locations`;l.setLngLat(o).setHTML(e).addTo(a)}})),a.on("click","railroad_crossing_incidents",(async function(e){const t=e.features[0],{point_count:s}=t.properties;if(a.resize(),s){const e=a.getZoom()+2;a.flyTo({center:t.geometry.coordinates,zoom:e}),n(0,u=null)}else n(0,u=e.features[0])})),()=>{n(2,a=null)}})),e.$$set=e=>{"center"in e&&n(5,d=e.center),"$$scope"in e&&n(6,i=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&u&&n(3,l=Object.keys(u.properties).filter((e=>!f.find((t=>t.includes(e))))).map((e=>({key:e,value:u.properties[e]}))))},[u,r,a,l,{CountyName:"County",CityName:"City",StateName:"State"},d,i,c,function(e){I[e?"unshift":"push"]((()=>{r=e,n(1,r)}))}]}class me extends n{constructor(e){super(),s(this,e,fe,ue,r,{center:5})}}function pe(e,t,n){const s=e.slice();return s[10]=t[n],s}function ge(e,t,n){const s=e.slice();return s[13]=t[n],s}function he(e,t,n){const s=e.slice();return s[16]=t[n],s}function ye(e){let t,n,s,r,a,f=e[16]+"";function m(){return e[4](e[16])}return{c(){t=h("th"),n=j(f),s=y(),this.h()},l(e){t=o(e,"TH",{scope:!0,class:!0});var r=l(t);n=N(r,f),s=x(r),r.forEach(c),this.h()},h(){i(t,"scope","col"),i(t,"class","px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider")},m(e,o){d(e,t,o),u(t,n),u(t,s),r||(a=L(t,"click",m),r=!0)},p(t,n){e=t},d(e){e&&c(t),r=!1,a()}}}function xe(e){let t,n=e[13].value+"";return{c(){t=j(n)},l(e){t=N(e,n)},m(e,n){d(e,t,n)},p(e,s){1&s&&n!==(n=e[13].value+"")&&T(t,n)},i:f,o:f,d(e){e&&c(t)}}}function be(e){let t,n,s,r;const a=[Ee,$e,we],o=[];function l(e,t){return"Yes"===e[13].value?0:"No"===e[13].value?1:2}return t=l(e),n=o[t]=a[t](e),{c(){n.c(),s=_()},l(e){n.l(e),s=_()},m(e,n){o[t].m(e,n),d(e,s,n),r=!0},p(e,r){let c=t;t=l(e),t!==c&&(b(),g(o[c],1,1,(()=>{o[c]=null})),v(),n=o[t],n||(n=o[t]=a[t](e),n.c()),p(n,1),n.m(s.parentNode,s))},i(e){r||(p(n),r=!0)},o(e){g(n),r=!1},d(e){o[t].d(e),e&&c(s)}}}function ve(e){let t,n,s,r;function a(){return e[5](e[13])}return{c(){t=h("button"),n=j("View on map"),this.h()},l(e){t=o(e,"BUTTON",{class:!0});var s=l(t);n=N(s,"View on map"),s.forEach(c),this.h()},h(){i(t,"class","text-gray-600 hover:text-blue-600 hover:shadow-sm bg-gray-50 hover:bg-gray-100 p-2")},m(e,o){d(e,t,o),u(t,n),s||(r=L(t,"click",a),s=!0)},p(t,n){e=t},i:f,o:f,d(e){e&&c(t),s=!1,r()}}}function we(e){let t,n,s;return t=new W({}),{c(){D(t.$$.fragment),n=j(" Info unavailable")},l(e){V(t.$$.fragment,e),n=N(e," Info unavailable")},m(e,r){C(t,e,r),d(e,n,r),s=!0},i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){g(t.$$.fragment,e),s=!1},d(e){S(t,e),e&&c(n)}}}function $e(e){let t,n,s;return t=new te({}),{c(){D(t.$$.fragment),n=j(" No")},l(e){V(t.$$.fragment,e),n=N(e," No")},m(e,r){C(t,e,r),d(e,n,r),s=!0},i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){g(t.$$.fragment,e),s=!1},d(e){S(t,e),e&&c(n)}}}function Ee(e){let t,n,s;return t=new Z({}),{c(){D(t.$$.fragment),n=j(" Yes")},l(e){V(t.$$.fragment,e),n=N(e," Yes")},m(e,r){C(t,e,r),d(e,n,r),s=!0},i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){g(t.$$.fragment,e),s=!1},d(e){S(t,e),e&&c(n)}}}function ke(e){let t,n,s,r;const a=[ve,be,xe],u=[];function f(e,t){return"Map view"===e[13].key?0:"Meets minimum safety guidelines"===e[13].key?1:2}return n=f(e),s=u[n]=a[n](e),{c(){t=h("td"),s.c(),this.h()},l(e){t=o(e,"TD",{class:!0});var n=l(t);s.l(n),n.forEach(c),this.h()},h(){i(t,"class","px-6 py-4 text-left whitespace-nowrap text-sm font-medium text-gray-900")},m(e,s){d(e,t,s),u[n].m(t,null),r=!0},p(e,r){let o=n;n=f(e),n===o?u[n].p(e,r):(b(),g(u[o],1,1,(()=>{u[o]=null})),v(),s=u[n],s?s.p(e,r):(s=u[n]=a[n](e),s.c()),p(s,1),s.m(t,null))},i(e){r||(p(s),r=!0)},o(e){g(s),r=!1},d(e){e&&c(t),u[n].d()}}}function Ie(e){let t,n,s,r=e[10],a=[];for(let o=0;o<r.length;o+=1)a[o]=ke(ge(e,r,o));const i=e=>g(a[e],1,1,(()=>{a[e]=null}));return{c(){t=h("tr");for(let e=0;e<a.length;e+=1)a[e].c();n=y()},l(e){t=o(e,"TR",{});var s=l(t);for(let t=0;t<a.length;t+=1)a[t].l(s);n=x(s),s.forEach(c)},m(e,r){d(e,t,r);for(let n=0;n<a.length;n+=1)a[n].m(t,null);u(t,n),s=!0},p(e,s){if(9&s){let o;for(r=e[10],o=0;o<r.length;o+=1){const l=ge(e,r,o);a[o]?(a[o].p(l,s),p(a[o],1)):(a[o]=ke(l),a[o].c(),p(a[o],1),a[o].m(t,n))}for(b(),o=r.length;o<a.length;o+=1)i(o);v()}},i(e){if(!s){for(let e=0;e<r.length;e+=1)p(a[e]);s=!0}},o(e){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)g(a[t]);s=!1},d(e){e&&c(t),z(a,e)}}}function je(e){let t,n,s,r,a,f,m,w,$,E,k=e[1],I=[];for(let o=0;o<k.length;o+=1)I[o]=ye(he(e,k,o));let j=e[0],N=[];for(let o=0;o<j.length;o+=1)N[o]=Ie(pe(e,j,o));const _=e=>g(N[e],1,1,(()=>{N[e]=null}));return{c(){t=h("div"),n=h("div"),s=h("div"),r=h("div"),a=h("table"),f=h("thead"),m=h("tr");for(let e=0;e<I.length;e+=1)I[e].c();w=y(),$=h("tbody");for(let e=0;e<N.length;e+=1)N[e].c();this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"DIV",{class:!0});var d=l(n);s=o(d,"DIV",{class:!0});var u=l(s);r=o(u,"DIV",{class:!0});var p=l(r);a=o(p,"TABLE",{class:!0});var g=l(a);f=o(g,"THEAD",{class:!0});var h=l(f);m=o(h,"TR",{});var y=l(m);for(let t=0;t<I.length;t+=1)I[t].l(y);y.forEach(c),h.forEach(c),w=x(g),$=o(g,"TBODY",{class:!0});var b=l($);for(let t=0;t<N.length;t+=1)N[t].l(b);b.forEach(c),g.forEach(c),p.forEach(c),u.forEach(c),d.forEach(c),i.forEach(c),this.h()},h(){i(f,"class","bg-gray-50"),i($,"class","divide-y divide-gray-200"),i(a,"class","min-w-full divide-y divide-gray-200"),i(r,"class","shadow border-b border-gray-200 sm:rounded-lg"),i(s,"class","align-middle inline-block min-w-full"),i(n,"class",""),i(t,"class","flex flex-col h-full overflow-scroll")},m(e,o){d(e,t,o),u(t,n),u(n,s),u(s,r),u(r,a),u(a,f),u(f,m);for(let t=0;t<I.length;t+=1)I[t].m(m,null);u(a,w),u(a,$);for(let t=0;t<N.length;t+=1)N[t].m($,null);E=!0},p(e,[t]){if(6&t){let n;for(k=e[1],n=0;n<k.length;n+=1){const s=he(e,k,n);I[n]?I[n].p(s,t):(I[n]=ye(s),I[n].c(),I[n].m(m,null))}for(;n<I.length;n+=1)I[n].d(1);I.length=k.length}if(9&t){let n;for(j=e[0],n=0;n<j.length;n+=1){const s=pe(e,j,n);N[n]?(N[n].p(s,t),p(N[n],1)):(N[n]=Ie(s),N[n].c(),p(N[n],1),N[n].m($,null))}for(b(),n=j.length;n<N.length;n+=1)_(n);v()}},i(e){if(!E){for(let e=0;e<j.length;e+=1)p(N[e]);E=!0}},o(e){N=N.filter(Boolean);for(let t=0;t<N.length;t+=1)g(N[t]);E=!1},d(e){e&&c(t),z(I,e),z(N,e)}}}function Ne(e,t,n){let{rows:s}=t;const r=s[0].map((e=>e.key)),a=M();function o(e){a("sort",{column:e,direction:!0})}function l(e){console.log("huh"),a("viewLocation",e)}return e.$$set=e=>{"rows"in e&&n(0,s=e.rows)},[s,r,o,l,e=>{o(e)},e=>{console.log("what"),l(e.value)}]}class _e extends n{constructor(e){super(),s(this,e,Ne,je,r,{rows:0})}}function Te(e){let t;const n=e[6].default,s=k(n,e,e[5],null);return{c(){s&&s.c()},l(e){s&&s.l(e)},m(e,n){s&&s.m(e,n),t=!0},p(e,r){s&&s.p&&(!t||32&r)&&m(s,n,e,e[5],r,null,null)},i(e){t||(p(s,e),t=!0)},o(e){g(s,e),t=!1},d(e){s&&s.d(e)}}}function ze(e){let t,n,s,r,a,f,m,p,g,b,v,w,$,E,k,I,_,z,D,V,C,S,L=e[3].properties.name+"",M=e[3].properties.accidents+"",A=e[3].properties.killed+"",P=e[3].properties.injured+"";return{c(){t=h("div"),n=h("div"),s=h("h3"),r=j(L),a=y(),f=h("p"),m=j(M),p=y(),g=h("span"),b=j("Accidents"),v=y(),w=h("p"),$=j(A),E=y(),k=h("span"),I=j("Killed"),_=y(),z=h("p"),D=j(P),V=y(),C=h("span"),S=j("Injured"),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"DIV",{class:!0});var d=l(n);s=o(d,"H3",{class:!0});var u=l(s);r=N(u,L),u.forEach(c),a=x(d),f=o(d,"P",{class:!0});var h=l(f);m=N(h,M),p=x(h),g=o(h,"SPAN",{class:!0});var y=l(g);b=N(y,"Accidents"),y.forEach(c),h.forEach(c),v=x(d),w=o(d,"P",{class:!0});var j=l(w);$=N(j,A),E=x(j),k=o(j,"SPAN",{class:!0});var T=l(k);I=N(T,"Killed"),T.forEach(c),j.forEach(c),_=x(d),z=o(d,"P",{class:!0});var R=l(z);D=N(R,P),V=x(R),C=o(R,"SPAN",{class:!0});var B=l(C);S=N(B,"Injured"),B.forEach(c),R.forEach(c),d.forEach(c),i.forEach(c),this.h()},h(){i(s,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),i(g,"class","font-normal"),i(f,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(k,"class","font-normal"),i(w,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(C,"class","font-normal"),i(z,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(n,"class","px-4 py-4 sm:px-6"),i(t,"class","bg-white shadow overflow-hidden rounded-md absolute top-4 right-0 mr-4 w-1/2 lg:w-1/3 pb-2")},m(e,o){d(e,t,o),u(t,n),u(n,s),u(s,r),u(n,a),u(n,f),u(f,m),u(f,p),u(f,g),u(g,b),u(n,v),u(n,w),u(w,$),u(w,E),u(w,k),u(k,I),u(n,_),u(n,z),u(z,D),u(z,V),u(z,C),u(C,S)},p(e,t){8&t&&L!==(L=e[3].properties.name+"")&&T(r,L),8&t&&M!==(M=e[3].properties.accidents+"")&&T(m,M),8&t&&A!==(A=e[3].properties.killed+"")&&T($,A),8&t&&P!==(P=e[3].properties.injured+"")&&T(D,P)},d(e){e&&c(t)}}}function De(e){let t,n,s,r,a,f,m,w,$,E,k,I,_,T,z,D=e[1]&&Te(e),V=e[3]&&ze(e);return{c(){t=h("div"),D&&D.c(),n=y(),s=h("div"),r=h("button"),a=j("Accidents"),f=y(),m=h("button"),w=j("Killed"),$=y(),E=h("button"),k=j("Injured"),I=y(),V&&V.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);D&&D.l(i),n=x(i),s=o(i,"DIV",{class:!0});var d=l(s);r=o(d,"BUTTON",{type:!0,class:!0});var u=l(r);a=N(u,"Accidents"),u.forEach(c),f=x(d),m=o(d,"BUTTON",{type:!0,class:!0});var p=l(m);w=N(p,"Killed"),p.forEach(c),$=x(d),E=o(d,"BUTTON",{type:!0,class:!0});var g=l(E);k=N(g,"Injured"),g.forEach(c),d.forEach(c),I=x(i),V&&V.l(i),i.forEach(c),this.h()},h(){i(r,"type","button"),i(r,"class","\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-t-md\n        sm:rounded-l-md\n        sm:rounded-tr-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),A(r,"selected","accidents"===e[2]),i(m,"type","button"),i(m,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),A(m,"selected","killed"===e[2]),i(E,"type","button"),i(E,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-b-md\n        sm:rounded-r-md\n        sm:rounded-bl-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),A(E,"selected","injured"===e[2]),i(s,"class","absolute z-10 flex flex-col sm:flex-row shadow-sm rounded-md top-4 left-4"),i(t,"class","flex-grow z-0 h-full")},m(o,l){d(o,t,l),D&&D.m(t,null),u(t,n),u(t,s),u(s,r),u(r,a),u(s,f),u(s,m),u(m,w),u(s,$),u(s,E),u(E,k),u(t,I),V&&V.m(t,null),e[10](t),_=!0,T||(z=[L(r,"click",e[7]),L(m,"click",e[8]),L(E,"click",e[9])],T=!0)},p(e,[s]){e[1]?D?(D.p(e,s),2&s&&p(D,1)):(D=Te(e),D.c(),p(D,1),D.m(t,n)):D&&(b(),g(D,1,1,(()=>{D=null})),v()),4&s&&A(r,"selected","accidents"===e[2]),4&s&&A(m,"selected","killed"===e[2]),4&s&&A(E,"selected","injured"===e[2]),e[3]?V?V.p(e,s):(V=ze(e),V.c(),V.m(t,null)):V&&(V.d(1),V=null)},i(e){_||(p(D),_=!0)},o(e){g(D),_=!1},d(n){n&&c(t),D&&D.d(),V&&V.d(),e[10](null),T=!1,P(z)}}}function Ve(e,t,n){let s;w(e,J,(e=>n(12,s=e)));let r,a,o,{$$slots:l={},$$scope:c}=t,i="accidents",d=null;function u(e){let t;console.log("prop",e),n(2,i=e),"accidents"===e?t=[[0,"#fcde9c"],[500,"#faa476"],[1e3,"#f0746e"],[2e3,"#e34f6f"],[4e3,"#dc3977"],[8e3,"#b9257a"],[16e3,"#7c1d6f"]]:"killed"===e?t=[[0,"#fcde9c"],[250,"#faa476"],[500,"#f0746e"],[750,"#e34f6f"],[1e3,"#dc3977"],[1250,"#b9257a"],[1500,"#7c1d6f"]]:"injured"===e&&(t=[[0,"#fcde9c"],[825,"#faa476"],[1750,"#f0746e"],[2625,"#e34f6f"],[3500,"#dc3977"],[4375,"#b9257a"],[6175,"#7c1d6f"]]),a.setPaintProperty("state_totals","fill-color",{property:i,stops:t})}$(Y,{getMap:()=>a}),$(F,{getMapbox:()=>o}),E((async()=>(o=window.mapboxgl,o.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(1,a=new o.Map({container:r,style:"mapbox://styles/mapbox/light-v10",center:s.lngLat,zoom:s.zoom,minZoom:0,maxZoom:8})),a.on("load",(()=>{a.resize(),a.addSource("state_totals",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incident-totals/states/{z}/{x}/{y}.pbf"]}),a.addLayer({id:"state_totals",type:"fill",source:"state_totals","source-layer":"state_totals",layout:{},paint:{"fill-color":{property:i,stops:[[0,"#fcde9c"],[500,"#faa476"],[1e3,"#f0746e"],[2e3,"#e34f6f"],[4e3,"#dc3977"],[8e3,"#b9257a"],[16e3,"#7c1d6f"]]},"fill-opacity":["case",["boolean",["feature-state","hover"],!1],1,.8]}}),a.addLayer({id:"state_totals_lines",type:"line",source:"state_totals","source-layer":"state_totals",layout:{},paint:{"line-color":"#444","line-width":2}})})),a.on("mouseenter","state_totals",(function(e){a.getCanvas().style.cursor="pointer"})),a.on("mouseleave","state_totals",(function(){a.getCanvas().style.cursor=""})),a.on("click",(async function(e){const t=a.queryRenderedFeatures(e.point);n(3,d=t.find((e=>"state_totals"===e.layer.id)))})),()=>{n(1,a=null)})));return e.$$set=e=>{"$$scope"in e&&n(5,c=e.$$scope)},[r,a,i,d,u,c,l,()=>{u("accidents")},()=>{u("killed")},()=>{u("injured")},function(e){I[e?"unshift":"push"]((()=>{r=e,n(0,r)}))}]}class Ce extends n{constructor(e){super(),s(this,e,Ve,De,r,{})}}function Se(e){let t;const n=e[6].default,s=k(n,e,e[5],null);return{c(){s&&s.c()},l(e){s&&s.l(e)},m(e,n){s&&s.m(e,n),t=!0},p(e,r){s&&s.p&&(!t||32&r)&&m(s,n,e,e[5],r,null,null)},i(e){t||(p(s,e),t=!0)},o(e){g(s,e),t=!1},d(e){s&&s.d(e)}}}function Le(e){let t,n,s,r,a,f,m,p,g,b,v,w,$,E,k,I,_,z,D,V,C,S,L=e[3].properties.name+"",M=e[3].properties.accidents+"",A=e[3].properties.killed+"",P=e[3].properties.injured+"";return{c(){t=h("div"),n=h("div"),s=h("h3"),r=j(L),a=y(),f=h("p"),m=j(M),p=y(),g=h("span"),b=j("Accidents"),v=y(),w=h("p"),$=j(A),E=y(),k=h("span"),I=j("Killed"),_=y(),z=h("p"),D=j(P),V=y(),C=h("span"),S=j("Injured"),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"DIV",{class:!0});var d=l(n);s=o(d,"H3",{class:!0});var u=l(s);r=N(u,L),u.forEach(c),a=x(d),f=o(d,"P",{class:!0});var h=l(f);m=N(h,M),p=x(h),g=o(h,"SPAN",{class:!0});var y=l(g);b=N(y,"Accidents"),y.forEach(c),h.forEach(c),v=x(d),w=o(d,"P",{class:!0});var j=l(w);$=N(j,A),E=x(j),k=o(j,"SPAN",{class:!0});var T=l(k);I=N(T,"Killed"),T.forEach(c),j.forEach(c),_=x(d),z=o(d,"P",{class:!0});var R=l(z);D=N(R,P),V=x(R),C=o(R,"SPAN",{class:!0});var B=l(C);S=N(B,"Injured"),B.forEach(c),R.forEach(c),d.forEach(c),i.forEach(c),this.h()},h(){i(s,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),i(g,"class","font-normal"),i(f,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(k,"class","font-normal"),i(w,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(C,"class","font-normal"),i(z,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(n,"class","px-4 py-4 sm:px-6"),i(t,"class","bg-white shadow overflow-hidden rounded-md absolute top-4 right-0 mr-4 w-1/2 lg:w-1/3 pb-2")},m(e,o){d(e,t,o),u(t,n),u(n,s),u(s,r),u(n,a),u(n,f),u(f,m),u(f,p),u(f,g),u(g,b),u(n,v),u(n,w),u(w,$),u(w,E),u(w,k),u(k,I),u(n,_),u(n,z),u(z,D),u(z,V),u(z,C),u(C,S)},p(e,t){8&t&&L!==(L=e[3].properties.name+"")&&T(r,L),8&t&&M!==(M=e[3].properties.accidents+"")&&T(m,M),8&t&&A!==(A=e[3].properties.killed+"")&&T($,A),8&t&&P!==(P=e[3].properties.injured+"")&&T(D,P)},d(e){e&&c(t)}}}function Me(e){let t,n,s,r,a,f,m,w,$,E,k,I,_,T,z,D=e[1]&&Se(e),V=e[3]&&Le(e);return{c(){t=h("div"),D&&D.c(),n=y(),s=h("div"),r=h("button"),a=j("Accidents"),f=y(),m=h("button"),w=j("Killed"),$=y(),E=h("button"),k=j("Injured"),I=y(),V&&V.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);D&&D.l(i),n=x(i),s=o(i,"DIV",{class:!0});var d=l(s);r=o(d,"BUTTON",{type:!0,class:!0});var u=l(r);a=N(u,"Accidents"),u.forEach(c),f=x(d),m=o(d,"BUTTON",{type:!0,class:!0});var p=l(m);w=N(p,"Killed"),p.forEach(c),$=x(d),E=o(d,"BUTTON",{type:!0,class:!0});var g=l(E);k=N(g,"Injured"),g.forEach(c),d.forEach(c),I=x(i),V&&V.l(i),i.forEach(c),this.h()},h(){i(r,"type","button"),i(r,"class","\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-t-md\n        sm:rounded-l-md\n        sm:rounded-tr-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),A(r,"selected","accidents"===e[2]),i(m,"type","button"),i(m,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),A(m,"selected","killed"===e[2]),i(E,"type","button"),i(E,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-b-md\n        sm:rounded-r-md\n        sm:rounded-bl-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),A(E,"selected","injured"===e[2]),i(s,"class","absolute z-10 flex flex-col sm:flex-row shadow-sm rounded-md top-4 left-4"),i(t,"class","flex-grow z-0 h-full")},m(o,l){d(o,t,l),D&&D.m(t,null),u(t,n),u(t,s),u(s,r),u(r,a),u(s,f),u(s,m),u(m,w),u(s,$),u(s,E),u(E,k),u(t,I),V&&V.m(t,null),e[10](t),_=!0,T||(z=[L(r,"click",e[7]),L(m,"click",e[8]),L(E,"click",e[9])],T=!0)},p(e,[s]){e[1]?D?(D.p(e,s),2&s&&p(D,1)):(D=Se(e),D.c(),p(D,1),D.m(t,n)):D&&(b(),g(D,1,1,(()=>{D=null})),v()),4&s&&A(r,"selected","accidents"===e[2]),4&s&&A(m,"selected","killed"===e[2]),4&s&&A(E,"selected","injured"===e[2]),e[3]?V?V.p(e,s):(V=Le(e),V.c(),V.m(t,null)):V&&(V.d(1),V=null)},i(e){_||(p(D),_=!0)},o(e){g(D),_=!1},d(n){n&&c(t),D&&D.d(),V&&V.d(),e[10](null),T=!1,P(z)}}}function Ae(e,t,n){let s;w(e,H,(e=>n(12,s=e)));let r,a,o,{$$slots:l={},$$scope:c}=t,i="accidents",d=null;function u(e){n(2,i=e),a.setPaintProperty("county_totals","fill-color",{property:i,stops:[[0,"#fcde9c"],[15,"#faa476"],[30,"#f0746e"],[45,"#e34f6f"],[60,"#dc3977"],[75,"#b9257a"],[90,"#7c1d6f"]]})}$(Y,{getMap:()=>a}),$(F,{getMapbox:()=>o}),E((async()=>(o=window.mapboxgl,o.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(1,a=new o.Map({container:r,style:"mapbox://styles/mapbox/light-v10",center:s.lngLat,zoom:s.zoom,minZoom:7,maxZoom:14})),a.on("load",(()=>{a.resize(),a.addSource("county_totals",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incident-totals/counties/{z}/{x}/{y}.pbf"]}),a.addLayer({id:"county_totals",type:"fill",source:"county_totals","source-layer":"county_totals",layout:{},paint:{"fill-color":{property:i,stops:[[0,"#fcde9c"],[15,"#faa476"],[30,"#f0746e"],[45,"#e34f6f"],[60,"#dc3977"],[75,"#b9257a"],[90,"#7c1d6f"]]},"fill-opacity":["case",["boolean",["feature-state","hover"],!1],1,.8]}}),a.addLayer({id:"county_totals_lines",type:"line",source:"county_totals","source-layer":"county_totals",layout:{},paint:{"line-color":"#444","line-width":2}})})),a.on("mousemove","county_totals",(function(e){a.getCanvas().style.cursor="pointer"})),a.on("mouseleave","county_totals",(function(){a.getCanvas().style.cursor=""})),a.on("click",(async function(e){const t=a.queryRenderedFeatures(e.point);n(3,d=t.find((e=>"county_totals"===e.layer.id)))})),()=>{n(1,a=null)})));return e.$$set=e=>{"$$scope"in e&&n(5,c=e.$$scope)},[r,a,i,d,u,c,l,()=>{u("accidents")},()=>{u("killed")},()=>{u("injured")},function(e){I[e?"unshift":"push"]((()=>{r=e,n(0,r)}))}]}class Pe extends n{constructor(e){super(),s(this,e,Ae,Me,r,{})}}function Re(e){let t,n,s,r;return s=new Pe({}),{c(){t=h("div"),n=h("div"),D(s.$$.fragment),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=l(t);n=o(r,"DIV",{class:!0});var a=l(n);V(s.$$.fragment,a),a.forEach(c),r.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,a){d(e,t,a),u(t,n),C(s,n,null),r=!0},p:f,i(e){r||(p(s.$$.fragment,e),r=!0)},o(e){g(s.$$.fragment,e),r=!1},d(e){e&&c(t),S(s)}}}function Be(e){let t,n,s,r;return s=new Ce({}),{c(){t=h("div"),n=h("div"),D(s.$$.fragment),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=l(t);n=o(r,"DIV",{class:!0});var a=l(n);V(s.$$.fragment,a),a.forEach(c),r.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,a){d(e,t,a),u(t,n),C(s,n,null),r=!0},p:f,i(e){r||(p(s.$$.fragment,e),r=!0)},o(e){g(s.$$.fragment,e),r=!1},d(e){e&&c(t),S(s)}}}function qe(e){let t,n,s,r;return s=new _e({props:{rows:e[0],columns:e[1]}}),s.$on("filter",Ge),s.$on("sort",Ye),s.$on("search",Fe),s.$on("viewLocation",e[5]),{c(){t=h("div"),n=h("div"),D(s.$$.fragment),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=l(t);n=o(r,"DIV",{class:!0});var a=l(n);V(s.$$.fragment,a),a.forEach(c),r.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,a){d(e,t,a),u(t,n),C(s,n,null),r=!0},p(e,t){const n={};1&t&&(n.rows=e[0]),2&t&&(n.columns=e[1]),s.$set(n)},i(e){r||(p(s.$$.fragment,e),r=!0)},o(e){g(s.$$.fragment,e),r=!1},d(e){e&&c(t),S(s)}}}function Ke(e){let t,n,s,r;return s=new me({props:{center:e[3]}}),{c(){t=h("div"),n=h("div"),D(s.$$.fragment),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=l(t);n=o(r,"DIV",{class:!0});var a=l(n);V(s.$$.fragment,a),a.forEach(c),r.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,a){d(e,t,a),u(t,n),C(s,n,null),r=!0},p(e,t){const n={};8&t&&(n.center=e[3]),s.$set(n)},i(e){r||(p(s.$$.fragment,e),r=!0)},o(e){g(s.$$.fragment,e),r=!1},d(e){e&&c(t),S(s)}}}function Oe(e){let t,n,s,r,a,f,m,w,$,E,k,I,_,T,z,D,V,C,S,M,A,B,q,K,O,U,G,Y,F,H,J,Q,Z,X,W,ee,te,ne,se,re,ae,oe,le,ce,ie,de,ue,fe,me,pe,ge,he,ye,xe,be,ve,we,$e,Ee,ke,Ie,je,Ne,_e,Te,ze;const De=[Ke,qe,Be,Re],Ve=[];function Ce(e,t){return"map"===e[2]?0:"list"===e[2]?1:"us-totals"===e[2]?2:"nj-totals"===e[2]?3:-1}return~(fe=Ce(e))&&(me=Ve[fe]=De[fe](e)),{c(){t=h("script"),s=h("link"),r=h("script"),f=h("link"),m=y(),w=h("div"),$=h("div"),E=h("h1"),k=j("Railroad Crossing Incidents"),I=y(),_=h("div"),T=h("nav"),z=h("button"),D=h("span"),V=j("N.J. Totals"),C=y(),S=h("span"),B=y(),q=h("button"),K=h("span"),O=j("U.S. Totals"),U=y(),G=h("span"),H=y(),J=h("button"),Q=h("span"),Z=j("Map"),X=y(),W=h("span"),ne=y(),se=h("button"),re=h("span"),ae=j("List"),oe=y(),le=h("span"),de=y(),ue=h("div"),me&&me.c(),pe=y(),ge=h("div"),he=j("Story by "),ye=h("a"),xe=j("Payton Guion"),be=j(". Graphics by "),ve=h("a"),we=j("Seth Vincent"),$e=j(". "),Ee=h("br"),ke=j("Data from the "),Ie=h("a"),je=j("Federal Railroad Administration"),Ne=j("."),this.h()},l(e){const n=R('[data-svelte="svelte-hlw6vs"]',document.head);t=o(n,"SCRIPT",{src:!0}),l(t).forEach(c),s=o(n,"LINK",{href:!0,rel:!0}),r=o(n,"SCRIPT",{src:!0}),l(r).forEach(c),f=o(n,"LINK",{rel:!0,href:!0,type:!0}),n.forEach(c),m=x(e),w=o(e,"DIV",{class:!0});var a=l(w);$=o(a,"DIV",{class:!0});var i=l($);E=o(i,"H1",{class:!0});var d=l(E);k=N(d,"Railroad Crossing Incidents"),d.forEach(c),i.forEach(c),I=x(a),_=o(a,"DIV",{class:!0});var u=l(_);T=o(u,"NAV",{class:!0,"aria-label":!0});var p=l(T);z=o(p,"BUTTON",{class:!0,"aria-current":!0});var g=l(z);D=o(g,"SPAN",{});var h=l(D);V=N(h,"N.J. Totals"),h.forEach(c),C=x(g),S=o(g,"SPAN",{"aria-hidden":!0,class:!0}),l(S).forEach(c),g.forEach(c),B=x(p),q=o(p,"BUTTON",{class:!0,"aria-current":!0});var y=l(q);K=o(y,"SPAN",{});var b=l(K);O=N(b,"U.S. Totals"),b.forEach(c),U=x(y),G=o(y,"SPAN",{"aria-hidden":!0,class:!0}),l(G).forEach(c),y.forEach(c),H=x(p),J=o(p,"BUTTON",{class:!0,"aria-current":!0});var v=l(J);Q=o(v,"SPAN",{});var j=l(Q);Z=N(j,"Map"),j.forEach(c),X=x(v),W=o(v,"SPAN",{"aria-hidden":!0,class:!0}),l(W).forEach(c),v.forEach(c),ne=x(p),se=o(p,"BUTTON",{class:!0,"aria-current":!0});var L=l(se);re=o(L,"SPAN",{});var M=l(re);ae=N(M,"List"),M.forEach(c),oe=x(L),le=o(L,"SPAN",{"aria-hidden":!0,class:!0}),l(le).forEach(c),L.forEach(c),p.forEach(c),u.forEach(c),de=x(a),ue=o(a,"DIV",{class:!0});var A=l(ue);me&&me.l(A),A.forEach(c),pe=x(a),ge=o(a,"DIV",{class:!0});var P=l(ge);he=N(P,"Story by "),ye=o(P,"A",{href:!0,target:!0,class:!0});var Y=l(ye);xe=N(Y,"Payton Guion"),Y.forEach(c),be=N(P,". Graphics by "),ve=o(P,"A",{href:!0,target:!0,class:!0});var F=l(ve);we=N(F,"Seth Vincent"),F.forEach(c),$e=N(P,". "),Ee=o(P,"BR",{class:!0}),ke=N(P,"Data from the "),Ie=o(P,"A",{href:!0,target:!0,class:!0});var ee=l(Ie);je=N(ee,"Federal Railroad Administration"),ee.forEach(c),Ne=N(P,"."),P.forEach(c),a.forEach(c),this.h()},h(){document.title="Railroad Crossing Incidents",t.src!==(n="https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js")&&i(t,"src","https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js"),i(s,"href","https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.css"),i(s,"rel","stylesheet"),r.src!==(a="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js")&&i(r,"src","https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js"),i(f,"rel","stylesheet"),i(f,"href","https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.css"),i(f,"type","text/css"),i(E,"class","font-bold text-gray-600"),i($,"class","flex-none p-4"),i(S,"aria-hidden","true"),i(S,"class",M="\n            "+("nj-totals"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),i(z,"class",A="\n          "+("nj-totals"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),i(z,"aria-current","page"),i(G,"aria-hidden","true"),i(G,"class",Y="\n            "+("us-totals"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),i(q,"class",F="\n          "+("us-totals"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),i(q,"aria-current","page"),i(W,"aria-hidden","true"),i(W,"class",ee="\n            "+("map"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),i(J,"class",te="\n          "+("map"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),i(J,"aria-current","page"),i(le,"aria-hidden","true"),i(le,"class",ce="\n            "+("list"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),i(se,"class",ie="\n          "+("list"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),i(se,"aria-current","page"),i(T,"class","relative z-0 shadow flex divide-x divide-gray-200 border-t border-gray-100 border-"),i(T,"aria-label","Tabs"),i(_,"class","flex-none block"),i(ue,"class","flex-grow border-t border-gray-200 overflow-hidden"),i(ye,"href","https://twitter.com/PaytonGuion"),i(ye,"target","_blank"),i(ye,"class","underline"),i(ve,"href","https://twitter.com/sethdvincent"),i(ve,"target","_blank"),i(ve,"class","underline"),i(Ee,"class","sm:hidden"),i(Ie,"href","https://railroads.dot.gov"),i(Ie,"target","_blank"),i(Ie,"class","underline"),i(ge,"class","flex-none p-4 text-xs text-gray-500 border-t border-gray-200"),i(w,"class","flex flex-col h-screen border border-gray-100  max-w-screen-lg mx-auto")},m(n,a){u(document.head,t),u(document.head,s),u(document.head,r),u(document.head,f),d(n,m,a),d(n,w,a),u(w,$),u($,E),u(E,k),u(w,I),u(w,_),u(_,T),u(T,z),u(z,D),u(D,V),u(z,C),u(z,S),u(T,B),u(T,q),u(q,K),u(K,O),u(q,U),u(q,G),u(T,H),u(T,J),u(J,Q),u(Q,Z),u(J,X),u(J,W),u(T,ne),u(T,se),u(se,re),u(re,ae),u(se,oe),u(se,le),u(w,de),u(w,ue),~fe&&Ve[fe].m(ue,null),u(w,pe),u(w,ge),u(ge,he),u(ge,ye),u(ye,xe),u(ge,be),u(ge,ve),u(ve,we),u(ge,$e),u(ge,Ee),u(ge,ke),u(ge,Ie),u(Ie,je),u(ge,Ne),_e=!0,Te||(ze=[L(z,"click",e[9]),L(q,"click",e[10]),L(J,"click",e[11]),L(se,"click",e[12])],Te=!0)},p(e,[t]){(!_e||4&t&&M!==(M="\n            "+("nj-totals"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&i(S,"class",M),(!_e||4&t&&A!==(A="\n          "+("nj-totals"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&i(z,"class",A),(!_e||4&t&&Y!==(Y="\n            "+("us-totals"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&i(G,"class",Y),(!_e||4&t&&F!==(F="\n          "+("us-totals"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&i(q,"class",F),(!_e||4&t&&ee!==(ee="\n            "+("map"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&i(W,"class",ee),(!_e||4&t&&te!==(te="\n          "+("map"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&i(J,"class",te),(!_e||4&t&&ce!==(ce="\n            "+("list"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&i(le,"class",ce),(!_e||4&t&&ie!==(ie="\n          "+("list"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&i(se,"class",ie);let n=fe;fe=Ce(e),fe===n?~fe&&Ve[fe].p(e,t):(me&&(b(),g(Ve[n],1,1,(()=>{Ve[n]=null})),v()),~fe?(me=Ve[fe],me?me.p(e,t):(me=Ve[fe]=De[fe](e),me.c()),p(me,1),me.m(ue,null)):me=null)},i(e){_e||(p(me),_e=!0)},o(e){g(me),_e=!1},d(e){c(t),c(s),c(r),c(f),e&&c(m),e&&c(w),~fe&&Ve[fe].d(),Te=!1,P(ze)}}}async function Ue({fetch:e,page:t}){const n=await e("https://railroad-crossing-data.vercel.app/railroad_crossing_data/RRData.json?StateName__exact=NJ&_sort=CountyName"),s=await n.json();console.log("json",s);const r=["rowid","Latitude","Longitude"],a=["Meets minimum safety guidelines","Total Killed","Total injured","Number of accidents","Street","CityName","CountyName","StateName","Active or Passive?","Distance from highway (feet)","Daily trains","Max train speed","Gates","Lights","Daily traffic","Last time traffic counted","School buses","Bus count","Railroad","CrossingID"];if(n.ok){const e=["link",...s.columns];return{props:{rows:s.rows.map((t=>e.map(((e,n)=>{if(!r.find((t=>t.includes(e))))return"link"===e?{key:"Map view",value:[t[12],t[11]]}:{key:e,value:t[n-1]}})).filter((e=>!!e)).sort(((e,t)=>a.indexOf(e.key)-a.indexOf(t.key))))),columns:e}}}return{status:n.status,error:new Error("Could not load data")}}function Ge(e){console.log("filter",e)}function Ye(e){console.log("sort",e)}function Fe(e){console.log("search",e)}function He(e,t,n){let s,r,a,o;w(e,U,(e=>n(6,o=e)));let{rows:l}=t,{columns:c}=t,i=o.query.get("view")||"nj-totals";async function d(e){o.query.set("view",e),n(2,i=e);const t=o.query.toString();await G(`${O}?${t}`)}B(1e3),q(150);return e.$$set=e=>{"rows"in e&&n(0,l=e.rows),"columns"in e&&n(1,c=e.columns)},e.$$.update=()=>{if(64&e.$$.dirty&&n(7,s=o.query.get("lng")),64&e.$$.dirty&&n(8,r=o.query.get("lat")),384&e.$$.dirty&&n(3,a=s&r?[s,r]:null),68&e.$$.dirty&&"map"!==i&&(o.query.has("lng")||o.query.has("lat"))){o.query.delete("lng"),o.query.delete("lat");const e=o.query.toString();G(`${O}?${e}`)}},[l,c,i,a,d,function(e){const[t,s]=e.detail;o.query.set("lng",t),o.query.set("lat",s),n(3,a=[t,s]),d("map")},o,s,r,()=>{d("nj-totals")},()=>{d("us-totals")},()=>{d("map")},()=>{d("list")}]}export default class extends n{constructor(e){super(),s(this,e,He,Oe,r,{rows:0,columns:1})}}export{Ue as load};

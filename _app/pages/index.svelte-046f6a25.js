import{H as e,C as t,S as n,i as a,s as r,I as s,c as o,a as l,d as c,b as i,f as d,F as u,G as m,E as f,v as p,r as h,e as g,k as y,n as x,B as v,u as b,J as w,x as $,z as E,D as k,K as N,t as I,g as D,l as T,h as j,L as _,j as S,m as C,o as V,w as A,M,N as z,O as L,P,Q as R,R as O,T as B,U as K}from"../chunks/vendor-fa07d76d.js";import{r as q,b as U}from"../chunks/paths-7dc55c62.js";function Y(e){const t=["rowid","Latitude","Longitude"],n=["Meets minimum safety guidelines","Total Killed","Total injured","Number of accidents","Street","CityName","CountyName","StateName","Active or Passive?","Distance from highway (feet)","Daily trains","Max train speed","Gates","Lights","Daily traffic","Last time traffic counted","School buses","Bus count","Railroad","CrossingID"],a=["link",...e.columns];return{rows:e.rows.map((e=>a.map(((n,a)=>{if(!t.find((e=>e.includes(n))))return"link"===n?{key:"Map view",value:[e[12],e[11]]}:{key:n,value:e[a-1]}})).filter((e=>!!e)).sort(((e,t)=>n.indexOf(e.key)-n.indexOf(t.key))))),columns:a}}const G={subscribe:t=>(()=>{const t=e("__svelte__");return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:t.navigating.subscribe}},session:t.session}})().page.subscribe(t)},H=async function(e,t){return q.goto(e,t,[])};const J={},F={},Q=t({zoom:7.5,lngLat:["-74.558333","40.16"]}),W=t({zoom:2,lngLat:["-98.5556","39.8097"]});function X(e){let t,n;return{c(){t=s("svg"),n=s("path"),this.h()},l(e){t=o(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var a=l(t);n=o(a,"path",{d:!0},1),l(n).forEach(c),a.forEach(c),this.h()},h(){i(n,"d","M50,5C25.147,5,5,25.148,5,50c0,24.852,20.147,45,45,45c24.854,0,45-20.148,45-45C95,25.148,74.854,5,50,5z M74.675,38.917  l-23.75,29.511c-1.109,1.379-2.756,2.252-4.517,2.396c-0.173,0.015-0.347,0.021-0.52,0.021c-1.585,0-3.138-0.589-4.326-1.652  L25.985,55.17c-2.463-2.217-2.661-6.01-0.444-8.473c2.218-2.463,6.012-2.662,8.474-0.444l11.223,10.103l20.088-24.961  c2.078-2.582,5.855-2.989,8.438-0.913C76.344,32.558,76.752,36.335,74.675,38.917z"),i(t,"height","20px"),i(t,"width","20px"),i(t,"class","align-top inline"),i(t,"fill","#4CE600"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),i(t,"version","1.1"),i(t,"x","0px"),i(t,"y","0px"),i(t,"viewBox","0 0 100 100"),i(t,"enable-background","new 0 0 100 100"),i(t,"xml:space","preserve")},m(e,a){d(e,t,a),u(t,n)},p:m,i:m,o:m,d(e){e&&c(t)}}}class Z extends n{constructor(e){super(),a(this,e,null,X,r,{})}}function ee(e){let t,n;return{c(){t=s("svg"),n=s("path"),this.h()},l(e){t=o(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var a=l(t);n=o(a,"path",{d:!0},1),l(n).forEach(c),a.forEach(c),this.h()},h(){i(n,"d","M50,5C25.147,5,5,25.147,5,50c0,24.854,20.147,45,45,45c24.854,0,45-20.146,45-45C95,25.147,74.854,5,50,5z M49.999,76.75  c-3.342,0-6.061-2.717-6.061-6.057c0-3.346,2.719-6.066,6.061-6.066c3.343,0,6.063,2.723,6.063,6.066  C56.063,74.033,53.342,76.75,49.999,76.75z M66.238,43.808c-1.174,1.827-2.795,4.01-6.028,6.531  c-3.213,2.461-4.185,3.724-4.478,4.259c-0.166,0.299-0.402,0.895-0.59,2.004c-0.065,0.39-0.119,0.812-0.162,1.265l-0.254,2.714  l-9.771,0.023l0.124-3.127c0.017-0.4,0.06-1.185,0.168-1.918c0.324-2.229,1.085-4.209,2.261-5.882  c1.104-1.573,3.247-3.563,6.549-6.079c2.442-1.863,3.396-2.928,3.764-3.492c0.47-0.717,0.697-1.472,0.697-2.305  c0-1.931-0.705-3.46-2.094-4.545c-1.474-1.151-3.518-1.735-6.073-1.735c-2.265,0-4.176,0.599-5.682,1.778  c-1.594,1.239-2.713,2.953-3.245,4.964l-0.66,2.492l-9.563-1.037l0.676-3.238c0.88-4.218,2.865-7.474,5.902-9.677  c3.934-2.855,8.156-4.303,12.552-4.303c4.856,0,8.831,1.249,12.508,3.931c3.399,2.482,5.349,6.492,5.349,11.002  C68.188,39.642,67.55,41.727,66.238,43.808z"),i(t,"height","20px"),i(t,"width","20px"),i(t,"class","align-top inline"),i(t,"fill","#A2A2A2"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),i(t,"version","1.1"),i(t,"x","0px"),i(t,"y","0px"),i(t,"viewBox","0 0 100 100"),i(t,"enable-background","new 0 0 100 100"),i(t,"xml:space","preserve")},m(e,a){d(e,t,a),u(t,n)},p:m,i:m,o:m,d(e){e&&c(t)}}}class te extends n{constructor(e){super(),a(this,e,null,ee,r,{})}}function ne(e){let t,n;return{c(){t=s("svg"),n=s("path"),this.h()},l(e){t=o(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var a=l(t);n=o(a,"path",{d:!0},1),l(n).forEach(c),a.forEach(c),this.h()},h(){i(n,"d","M50,5C25.147,5,5,25.147,5,50c0,24.852,20.147,45,45,45c24.854,0,45-20.148,45-45C95,25.147,74.854,5,50,5z M70.243,70.24  c-1.173,1.172-2.708,1.758-4.243,1.758s-3.07-0.586-4.242-1.757L50,58.484L38.243,70.242C37.071,71.414,35.536,72,34,72  s-3.071-0.586-4.243-1.757c-2.343-2.345-2.343-6.144,0-8.485L41.515,50L29.757,38.242c-2.343-2.343-2.343-6.142,0-8.485  c2.343-2.343,6.142-2.343,8.485,0L50,41.514l11.756-11.757c2.344-2.343,6.145-2.343,8.485,0c2.344,2.343,2.344,6.142,0.001,8.485  L58.486,49.999l11.756,11.756C72.586,64.1,72.586,67.898,70.243,70.24z"),i(t,"height","20px"),i(t,"width","20px"),i(t,"class","align-top inline"),i(t,"fill","#FF0000"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),i(t,"version","1.1"),i(t,"x","0px"),i(t,"y","0px"),i(t,"viewBox","0 0 100 100"),i(t,"enable-background","new 0 0 100 100"),i(t,"xml:space","preserve")},m(e,a){d(e,t,a),u(t,n)},p:m,i:m,o:m,d(e){e&&c(t)}}}class ae extends n{constructor(e){super(),a(this,e,null,ne,r,{})}}function re(e,t,n){const a=e.slice();return a[12]=t[n],a}function se(e){let t;const n=e[7].default,a=k(n,e,e[6],null);return{c(){a&&a.c()},l(e){a&&a.l(e)},m(e,n){a&&a.m(e,n),t=!0},p(e,r){a&&a.p&&(!t||64&r)&&f(a,n,e,e[6],r,null,null)},i(e){t||(p(a,e),t=!0)},o(e){h(a,e),t=!1},d(e){a&&a.d(e)}}}function oe(e){let t,n,a,r,s;return{c(){t=g("div"),n=g("h1"),a=I("Click a point to learn "),r=g("br"),s=I("about accidents and other information at that railroad crossing."),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"H1",{class:!0});var d=l(n);a=D(d,"Click a point to learn "),r=o(d,"BR",{}),s=D(d,"about accidents and other information at that railroad crossing."),d.forEach(c),i.forEach(c),this.h()},h(){i(n,"class","block self-center w-[220px] font-medium text-gray-500 text-xl mx-auto align-middle"),i(t,"class","px-4 py-4 sm:px-6 flex items center h-full")},m(e,o){d(e,t,o),u(t,n),u(n,a),u(n,r),u(n,s)},p:m,i:m,o:m,d(e){e&&c(t)}}}function le(e){let t,n,a,r,s,m,f,w,$,E,k,N,T,_,S,C,V,A,M,z,L,P,R,O,B,K,q,U,Y,G,H=e[0].properties.Street+"",J=e[0].properties.CityName+"",F=e[0].properties.CountyName+"",Q=e[0].properties.StateName+"",W=e[0].properties["Number of accidents"]+"",X=e[0].properties["Total Killed"]+"",Z=e[0].properties["Total injured"]+"";const ee=[de,ie,ce],te=[];function ne(e,t){return"Yes"===e[0].properties["Meets minimum safety guidelines"]?0:"No"===e[0].properties["Meets minimum safety guidelines"]?1:2}T=ne(e),_=te[T]=ee[T](e);let ae=e[3]&&ue(e);return{c(){t=g("div"),n=g("h3"),a=I(H),r=y(),s=g("h3"),m=I(J),f=I(", "),w=I(F),$=I(", "),E=I(Q),k=y(),N=g("p"),_.c(),S=y(),C=g("p"),V=I(W),A=I(" Accidents"),M=y(),z=g("p"),L=I(X),P=I(" Killed"),R=y(),O=g("p"),B=I(Z),K=I(" Injured"),q=y(),U=g("div"),Y=g("dl"),ae&&ae.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"H3",{class:!0});var d=l(n);a=D(d,H),d.forEach(c),r=x(i),s=o(i,"H3",{class:!0});var u=l(s);m=D(u,J),f=D(u,", "),w=D(u,F),$=D(u,", "),E=D(u,Q),u.forEach(c),k=x(i),N=o(i,"P",{class:!0});var p=l(N);_.l(p),p.forEach(c),S=x(i),C=o(i,"P",{class:!0});var h=l(C);V=D(h,W),A=D(h," Accidents"),h.forEach(c),M=x(i),z=o(i,"P",{class:!0});var g=l(z);L=D(g,X),P=D(g," Killed"),g.forEach(c),R=x(i),O=o(i,"P",{class:!0});var y=l(O);B=D(y,Z),K=D(y," Injured"),y.forEach(c),i.forEach(c),q=x(e),U=o(e,"DIV",{class:!0});var v=l(U);Y=o(v,"DL",{class:!0});var b=l(Y);ae&&ae.l(b),b.forEach(c),v.forEach(c),this.h()},h(){i(n,"class","text-lg leading-6 font-medium text-gray-900"),i(s,"class","text-md leading-6 font-medium text-gray-600 mb-2"),i(N,"class","font-bold my-0 pt-1 pb-3 max-w-2xl text-sm text-gray-600"),i(C,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(z,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(O,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(t,"class","px-4 py-4 sm:px-6"),i(Y,"class","divide-y divide-gray-200"),i(U,"class","border-t border-gray-200 px-4 py-2 sm:py-4 sm:p-0")},m(e,o){d(e,t,o),u(t,n),u(n,a),u(t,r),u(t,s),u(s,m),u(s,f),u(s,w),u(s,$),u(s,E),u(t,k),u(t,N),te[T].m(N,null),u(t,S),u(t,C),u(C,V),u(C,A),u(t,M),u(t,z),u(z,L),u(z,P),u(t,R),u(t,O),u(O,B),u(O,K),d(e,q,o),d(e,U,o),u(U,Y),ae&&ae.m(Y,null),G=!0},p(e,t){(!G||1&t)&&H!==(H=e[0].properties.Street+"")&&j(a,H),(!G||1&t)&&J!==(J=e[0].properties.CityName+"")&&j(m,J),(!G||1&t)&&F!==(F=e[0].properties.CountyName+"")&&j(w,F),(!G||1&t)&&Q!==(Q=e[0].properties.StateName+"")&&j(E,Q);let n=T;T=ne(e),T!==n&&(v(),h(te[n],1,1,(()=>{te[n]=null})),b(),_=te[T],_||(_=te[T]=ee[T](e),_.c()),p(_,1),_.m(N,null)),(!G||1&t)&&W!==(W=e[0].properties["Number of accidents"]+"")&&j(V,W),(!G||1&t)&&X!==(X=e[0].properties["Total Killed"]+"")&&j(L,X),(!G||1&t)&&Z!==(Z=e[0].properties["Total injured"]+"")&&j(B,Z),e[3]?ae?ae.p(e,t):(ae=ue(e),ae.c(),ae.m(Y,null)):ae&&(ae.d(1),ae=null)},i(e){G||(p(_),G=!0)},o(e){h(_),G=!1},d(e){e&&c(t),te[T].d(),e&&c(q),e&&c(U),ae&&ae.d()}}}function ce(e){let t,n,a;return t=new te({}),{c(){S(t.$$.fragment),n=I(" May or may not meet minimum safety guidelines")},l(e){C(t.$$.fragment,e),n=D(e," May or may not meet minimum safety guidelines")},m(e,r){V(t,e,r),d(e,n,r),a=!0},i(e){a||(p(t.$$.fragment,e),a=!0)},o(e){h(t.$$.fragment,e),a=!1},d(e){A(t,e),e&&c(n)}}}function ie(e){let t,n,a;return t=new ae({}),{c(){S(t.$$.fragment),n=I(" Does not meet minimum safety guidelines")},l(e){C(t.$$.fragment,e),n=D(e," Does not meet minimum safety guidelines")},m(e,r){V(t,e,r),d(e,n,r),a=!0},i(e){a||(p(t.$$.fragment,e),a=!0)},o(e){h(t.$$.fragment,e),a=!1},d(e){A(t,e),e&&c(n)}}}function de(e){let t,n,a;return t=new Z({}),{c(){S(t.$$.fragment),n=I(" Meets minimum safety guidelines")},l(e){C(t.$$.fragment,e),n=D(e," Meets minimum safety guidelines")},m(e,r){V(t,e,r),d(e,n,r),a=!0},i(e){a||(p(t.$$.fragment,e),a=!0)},o(e){h(t.$$.fragment,e),a=!1},d(e){A(t,e),e&&c(n)}}}function ue(e){let t,n=e[3],a=[];for(let r=0;r<n.length;r+=1)a[r]=me(re(e,n,r));return{c(){for(let e=0;e<a.length;e+=1)a[e].c();t=T()},l(e){for(let t=0;t<a.length;t+=1)a[t].l(e);t=T()},m(e,n){for(let t=0;t<a.length;t+=1)a[t].m(e,n);d(e,t,n)},p(e,r){if(24&r){let s;for(n=e[3],s=0;s<n.length;s+=1){const o=re(e,n,s);a[s]?a[s].p(o,r):(a[s]=me(o),a[s].c(),a[s].m(t.parentNode,t))}for(;s<a.length;s+=1)a[s].d(1);a.length=n.length}},d(e){_(a,e),e&&c(t)}}}function me(e){let t,n,a,r,s,m,f,p=(e[4][e[12].key]||e[12].key)+"",h=e[12].value+"";return{c(){t=g("div"),n=g("dt"),a=I(p),r=y(),s=g("dd"),m=I(h),f=y(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"DT",{class:!0});var d=l(n);a=D(d,p),d.forEach(c),r=x(i),s=o(i,"DD",{class:!0});var u=l(s);m=D(u,h),u.forEach(c),f=x(i),i.forEach(c),this.h()},h(){i(n,"class","text-sm font-medium text-gray-500"),i(s,"class","text-sm text-gray-900 mt-0 col-span-1"),i(t,"class","py-1 sm:py-2 grid grid-cols-2 gap-2 sm:px-6")},m(e,o){d(e,t,o),u(t,n),u(n,a),u(t,r),u(t,s),u(s,m),u(t,f)},p(e,t){8&t&&p!==(p=(e[4][e[12].key]||e[12].key)+"")&&j(a,p),8&t&&h!==(h=e[12].value+"")&&j(m,h)},d(e){e&&c(t)}}}function fe(e){let t,n,a,r,s,m,f,w,$=e[2]&&se(e);const E=[le,oe],k=[];function N(e,t){return e[0]?0:1}return m=N(e),f=k[m]=E[m](e),{c(){t=g("div"),n=g("div"),$&&$.c(),a=y(),r=g("div"),s=g("div"),f.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"DIV",{class:!0});var d=l(n);$&&$.l(d),d.forEach(c),a=x(i),r=o(i,"DIV",{class:!0});var u=l(r);s=o(u,"DIV",{class:!0});var m=l(s);f.l(m),m.forEach(c),u.forEach(c),i.forEach(c),this.h()},h(){i(n,"class","flex-grow z-0 h-full"),i(s,"class","h-full overflow-y-scroll"),i(r,"class","bg-white h-1/2 sm:w-1/2 sm:h-full md:w-96 border-gray-200 border-t sm:border-t-0 sm:border-l"),i(t,"class","flex flex-col sm:flex-row h-full")},m(o,l){d(o,t,l),u(t,n),$&&$.m(n,null),e[8](n),u(t,a),u(t,r),u(r,s),k[m].m(s,null),w=!0},p(e,[t]){e[2]?$?($.p(e,t),4&t&&p($,1)):($=se(e),$.c(),p($,1),$.m(n,null)):$&&(v(),h($,1,1,(()=>{$=null})),b());let a=m;m=N(e),m===a?k[m].p(e,t):(v(),h(k[a],1,1,(()=>{k[a]=null})),b(),f=k[m],f?f.p(e,t):(f=k[m]=E[m](e),f.c()),p(f,1),f.m(s,null))},i(e){w||(p($),p(f),w=!0)},o(e){h($),h(f),w=!1},d(n){n&&c(t),$&&$.d(),e[8](null),k[m].d()}}}function pe(e,t,n){let a;w(e,Q,(e=>n(10,a=e)));let r,s,o,l,{$$slots:c={},$$scope:i}=t,{center:d}=t,u=null;const m=["id","CrossingID","Total Killed","Total injured","Number of accidents","Latitude","Longitude","Street","CityName","CountyName","StateName","Meets minimum safety guidelines"];return $(J,{getMap:()=>s}),$(F,{getMapbox:()=>o}),E((async()=>{o=window.mapboxgl,o.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(2,s=new o.Map({container:r,style:"mapbox://styles/mapbox/light-v10",center:d||a.lngLat,zoom:d?15:a.zoom,minZoom:3,maxZoom:20})),s.addControl(new MapboxGeocoder({accessToken:o.accessToken,mapboxgl:o}),"top-right"),s.on("load",(()=>{s.resize(),s.addSource("railroad_crossing_incidents",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incidents/{z}/{x}/{y}.pbf"]}),s.addLayer({id:"railroad_crossing_incidents",type:"circle",source:"railroad_crossing_incidents","source-layer":"railroad_crossing_incidents",layout:{},paint:{"circle-radius":["case",["has","sqrt_point_count"],["+",["*",["get","sqrt_point_count"],1.1],10],10],"circle-color":["case",["==",["get","Number of accidents"],0],"blue","red"],"circle-opacity":["case",["boolean",["feature-state","hover"],!1],1,.3],"circle-stroke-color":"white","circle-stroke-width":["case",["boolean",["feature-state","hover"],!1],3,0]}})})),d&&setTimeout((()=>{const e=s.project(d),t=s.queryRenderedFeatures([[e.x-5,e.y-5],[e.x+5,e.y+5]],{layers:["railroad_crossing_incidents"]});1===t.length&&n(0,u=t[0])}),1100);let e=null;function t({featureId:e,state:t}){s.setFeatureState({id:e,source:"railroad_crossing_incidents",sourceLayer:"railroad_crossing_incidents"},{hover:t})}let l=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1});return s.on("mousemove",(n=>{const a=s.queryRenderedFeatures(n.point,{layers:["railroad_crossing_incidents"]})[0];if(!a)return s.getCanvas().style.cursor="",l.remove(),void(e&&(t({featureId:e,state:!1}),e=null));if(s.getCanvas().style.cursor="pointer",a&&a.id===e)return;e&&t({featureId:e,state:!1}),e=a.id,t({featureId:a.id,state:!0});const r=a.properties,o=a.geometry.coordinates.slice();for(e=a.id;Math.abs(n.lngLat.lng-o[0])>180;)o[0]+=n.lngLat.lng>o[0]?360:-360;if(r.point_count&&r.point_count>-2){const e=`${r.point_count} locations`;l.setLngLat(o).setHTML(e).addTo(s)}})),s.on("click","railroad_crossing_incidents",(async function(e){const t=e.features[0],{point_count:a}=t.properties;if(s.resize(),a){const e=s.getZoom()+2;s.flyTo({center:t.geometry.coordinates,zoom:e}),n(0,u=null)}else n(0,u=e.features[0])})),()=>{n(2,s=null)}})),e.$$set=e=>{"center"in e&&n(5,d=e.center),"$$scope"in e&&n(6,i=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&u&&n(3,l=Object.keys(u.properties).filter((e=>!m.find((t=>t.includes(e))))).map((e=>({key:e,value:u.properties[e]}))))},[u,r,s,l,{CountyName:"County",CityName:"City",StateName:"State"},d,i,c,function(e){N[e?"unshift":"push"]((()=>{r=e,n(1,r)}))}]}class he extends n{constructor(e){super(),a(this,e,pe,fe,r,{center:5})}}const ge={Alabama:"AL",Alaska:"AK",Arizona:"AZ",Arkansas:"AR",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE","District of Columbia":"DC",Florida:"FL",Georgia:"GA",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Puerto Rico":"PR","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY"};function ye(e){const t=t=>{!e||e.contains(t.target)||t.defaultPrevented||e.dispatchEvent(new CustomEvent("click_outside",{detail:{event:t,node:e}}))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function xe(e,t,n){const a=e.slice();return a[18]=t[n],a}function ve(e,t,n){const a=e.slice();return a[21]=t[n],a}function be(e,t,n){const a=e.slice();return a[24]=t[n],a}function we(e){let t,n,a,r,s,m,f,p,h,v,b,w,$,E,k,N,T=e[1].column===e[24]&&"ASC"===e[1].order&&$e();function j(){return e[10](e[24])}let _=e[1].column===e[24]&&"DESC"===e[1].order&&Ee();function S(){return e[11](e[24])}function C(){return e[12](e[24])}function V(...t){return e[13](e[24],...t)}return{c(){t=g("div"),n=g("div"),a=g("button"),r=g("span"),T&&T.c(),s=I("\n                            Sort Ascending"),m=y(),f=g("button"),p=g("span"),_&&_.c(),h=I("\n                            Sort Descending"),v=y(),b=g("button"),w=g("span"),$=I("𐄂"),E=I("\n                            Remove Sort"),this.h()},l(e){t=o(e,"DIV",{class:!0,role:!0,"aria-orientation":!0,"aria-labelledby":!0,tabindex:!0});var i=l(t);n=o(i,"DIV",{class:!0,role:!0});var d=l(n);a=o(d,"BUTTON",{type:!0,class:!0,role:!0,tabindex:!0,id:!0});var u=l(a);r=o(u,"SPAN",{class:!0});var g=l(r);T&&T.l(g),g.forEach(c),s=D(u,"\n                            Sort Ascending"),u.forEach(c),m=x(d),f=o(d,"BUTTON",{type:!0,class:!0,role:!0,tabindex:!0,id:!0});var y=l(f);p=o(y,"SPAN",{class:!0});var k=l(p);_&&_.l(k),k.forEach(c),h=D(y,"\n                            Sort Descending"),y.forEach(c),v=x(d),b=o(d,"BUTTON",{type:!0,class:!0,role:!0,tabindex:!0,id:!0});var N=l(b);w=o(N,"SPAN",{class:!0});var I=l(w);$=D(I,"𐄂"),I.forEach(c),E=D(N,"\n                            Remove Sort"),N.forEach(c),d.forEach(c),i.forEach(c),this.h()},h(){i(r,"class","inline-block w-3 h-3"),i(a,"type","button"),i(a,"class","text-gray-700 hover:text-gray-900 hover:bg-gray-100 block px-2 py-2 text-xs"),i(a,"role","menuitem"),i(a,"tabindex","-1"),i(a,"id","menu-item-0"),i(p,"class","inline-block w-3 h-3"),i(f,"type","button"),i(f,"class","text-gray-700 hover:text-gray-900 hover:bg-gray-100 block px-2 py-2 text-xs"),i(f,"role","menuitem"),i(f,"tabindex","-1"),i(f,"id","menu-item-1"),i(w,"class","inline-block w-3 h-3"),i(b,"type","button"),i(b,"class","text-gray-700 hover:text-gray-900 hover:bg-gray-100 block px-2 py-2 text-xs"),i(b,"role","menuitem"),i(b,"tabindex","-1"),i(b,"id","menu-item-2"),i(n,"class",""),i(n,"role","none"),i(t,"class","origin-top-right absolute right-0 mt-2 w-40 rounded-md shadow bg-white ring-1 ring-black ring-opacity-5 focus:outline-none"),i(t,"role","menu"),i(t,"aria-orientation","vertical"),i(t,"aria-labelledby","menu-button"),i(t,"tabindex","-1")},m(e,o){d(e,t,o),u(t,n),u(n,a),u(a,r),T&&T.m(r,null),u(a,s),u(n,m),u(n,f),u(f,p),_&&_.m(p,null),u(f,h),u(n,v),u(n,b),u(b,w),u(w,$),u(b,E),k||(N=[z(a,"click",j),z(f,"click",S),z(b,"click",C),L(ye.call(null,t)),z(t,"click_outside",V)],k=!0)},p(t,n){(e=t)[1].column===e[24]&&"ASC"===e[1].order?T||(T=$e(),T.c(),T.m(r,null)):T&&(T.d(1),T=null),e[1].column===e[24]&&"DESC"===e[1].order?_||(_=Ee(),_.c(),_.m(p,null)):_&&(_.d(1),_=null)},d(e){e&&c(t),T&&T.d(),_&&_.d(),k=!1,P(N)}}}function $e(e){let t;return{c(){t=I("✓")},l(e){t=D(e,"✓")},m(e,n){d(e,t,n)},d(e){e&&c(t)}}}function Ee(e){let t;return{c(){t=I("✓")},l(e){t=D(e,"✓")},m(e,n){d(e,t,n)},d(e){e&&c(t)}}}function ke(e){let t,n,a,r,m,f,p=e[24]+"",h="Map view"!==e[24]&&function(e){let t,n,a,r,m,f,p,h;function v(){return e[9](e[24])}let b=e[2].open&&e[2].open===e[24]&&we(e);return{c(){t=g("div"),n=g("div"),a=g("button"),r=s("svg"),m=s("path"),f=y(),b&&b.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var s=l(t);n=o(s,"DIV",{});var i=l(n);a=o(i,"BUTTON",{type:!0,class:!0,id:!0,"aria-expanded":!0,"aria-haspopup":!0});var d=l(a);r=o(d,"svg",{class:!0,xmlns:!0,viewBox:!0,fill:!0,"aria-hidden":!0},1);var u=l(r);m=o(u,"path",{"fill-rule":!0,d:!0,"clip-rule":!0},1),l(m).forEach(c),u.forEach(c),d.forEach(c),i.forEach(c),f=x(s),b&&b.l(s),s.forEach(c),this.h()},h(){i(m,"fill-rule","evenodd"),i(m,"d","M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"),i(m,"clip-rule","evenodd"),i(r,"class","h-3 w-3"),i(r,"xmlns","http://www.w3.org/2000/svg"),i(r,"viewBox","0 0 20 20"),i(r,"fill","currentColor"),i(r,"aria-hidden","true"),i(a,"type","button"),i(a,"class","inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm p-1 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-indigo-500"),i(a,"id","menu-button"),i(a,"aria-expanded","true"),i(a,"aria-haspopup","true"),i(t,"class","relative inline-block text-left right-0 top-0 ml-4 self-center")},m(e,s){d(e,t,s),u(t,n),u(n,a),u(a,r),u(r,m),u(t,f),b&&b.m(t,null),p||(h=z(a,"click",v),p=!0)},p(n,a){(e=n)[2].open&&e[2].open===e[24]?b?b.p(e,a):(b=we(e),b.c(),b.m(t,null)):b&&(b.d(1),b=null)},d(e){e&&c(t),b&&b.d(),p=!1,h()}}}(e);return{c(){t=g("th"),n=g("div"),a=g("span"),r=I(p),m=y(),h&&h.c(),f=y(),this.h()},l(e){t=o(e,"TH",{scope:!0,class:!0});var s=l(t);n=o(s,"DIV",{class:!0});var i=l(n);a=o(i,"SPAN",{});var d=l(a);r=D(d,p),d.forEach(c),m=x(i),h&&h.l(i),i.forEach(c),f=x(s),s.forEach(c),this.h()},h(){i(n,"class","flex flex-row "),i(t,"scope","col"),i(t,"class","px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider")},m(e,s){d(e,t,s),u(t,n),u(n,a),u(a,r),u(n,m),h&&h.m(n,null),u(t,f)},p(e,t){"Map view"!==e[24]&&h.p(e,t)},d(e){e&&c(t),h&&h.d()}}}function Ne(e){let t,n=e[21].value+"";return{c(){t=I(n)},l(e){t=D(e,n)},m(e,n){d(e,t,n)},p(e,a){1&a&&n!==(n=e[21].value+"")&&j(t,n)},i:m,o:m,d(e){e&&c(t)}}}function Ie(e){let t,n,a,r;const s=[_e,je,Te],o=[];function l(e,t){return"Yes"===e[21].value?0:"No"===e[21].value?1:2}return t=l(e),n=o[t]=s[t](e),{c(){n.c(),a=T()},l(e){n.l(e),a=T()},m(e,n){o[t].m(e,n),d(e,a,n),r=!0},p(e,r){let c=t;t=l(e),t!==c&&(v(),h(o[c],1,1,(()=>{o[c]=null})),b(),n=o[t],n||(n=o[t]=s[t](e),n.c()),p(n,1),n.m(a.parentNode,a))},i(e){r||(p(n),r=!0)},o(e){h(n),r=!1},d(e){o[t].d(e),e&&c(a)}}}function De(e){let t,n,a,r;function s(){return e[14](e[21])}return{c(){t=g("button"),n=I("View on map"),this.h()},l(e){t=o(e,"BUTTON",{class:!0});var a=l(t);n=D(a,"View on map"),a.forEach(c),this.h()},h(){i(t,"class","text-gray-600 hover:text-blue-600 hover:shadow-sm bg-gray-50 hover:bg-gray-100 p-2")},m(e,o){d(e,t,o),u(t,n),a||(r=z(t,"click",s),a=!0)},p(t,n){e=t},i:m,o:m,d(e){e&&c(t),a=!1,r()}}}function Te(e){let t,n,a;return t=new te({}),{c(){S(t.$$.fragment),n=I(" Info unavailable")},l(e){C(t.$$.fragment,e),n=D(e," Info unavailable")},m(e,r){V(t,e,r),d(e,n,r),a=!0},i(e){a||(p(t.$$.fragment,e),a=!0)},o(e){h(t.$$.fragment,e),a=!1},d(e){A(t,e),e&&c(n)}}}function je(e){let t,n,a;return t=new ae({}),{c(){S(t.$$.fragment),n=I(" No")},l(e){C(t.$$.fragment,e),n=D(e," No")},m(e,r){V(t,e,r),d(e,n,r),a=!0},i(e){a||(p(t.$$.fragment,e),a=!0)},o(e){h(t.$$.fragment,e),a=!1},d(e){A(t,e),e&&c(n)}}}function _e(e){let t,n,a;return t=new Z({}),{c(){S(t.$$.fragment),n=I(" Yes")},l(e){C(t.$$.fragment,e),n=D(e," Yes")},m(e,r){V(t,e,r),d(e,n,r),a=!0},i(e){a||(p(t.$$.fragment,e),a=!0)},o(e){h(t.$$.fragment,e),a=!1},d(e){A(t,e),e&&c(n)}}}function Se(e){let t,n,a,r;const s=[De,Ie,Ne],u=[];function m(e,t){return"Map view"===e[21].key?0:"Meets minimum safety guidelines"===e[21].key?1:2}return n=m(e),a=u[n]=s[n](e),{c(){t=g("td"),a.c(),this.h()},l(e){t=o(e,"TD",{class:!0});var n=l(t);a.l(n),n.forEach(c),this.h()},h(){i(t,"class","px-12 py-4 text-left whitespace-nowrap text-sm font-medium text-gray-900")},m(e,a){d(e,t,a),u[n].m(t,null),r=!0},p(e,r){let o=n;n=m(e),n===o?u[n].p(e,r):(v(),h(u[o],1,1,(()=>{u[o]=null})),b(),a=u[n],a?a.p(e,r):(a=u[n]=s[n](e),a.c()),p(a,1),a.m(t,null))},i(e){r||(p(a),r=!0)},o(e){h(a),r=!1},d(e){e&&c(t),u[n].d()}}}function Ce(e){let t,n,a,r=e[18],s=[];for(let o=0;o<r.length;o+=1)s[o]=Se(ve(e,r,o));const i=e=>h(s[e],1,1,(()=>{s[e]=null}));return{c(){t=g("tr");for(let e=0;e<s.length;e+=1)s[e].c();n=y()},l(e){t=o(e,"TR",{});var a=l(t);for(let t=0;t<s.length;t+=1)s[t].l(a);n=x(a),a.forEach(c)},m(e,r){d(e,t,r);for(let n=0;n<s.length;n+=1)s[n].m(t,null);u(t,n),a=!0},p(e,a){if(257&a){let o;for(r=e[18],o=0;o<r.length;o+=1){const l=ve(e,r,o);s[o]?(s[o].p(l,a),p(s[o],1)):(s[o]=Se(l),s[o].c(),p(s[o],1),s[o].m(t,n))}for(v(),o=r.length;o<s.length;o+=1)i(o);b()}},i(e){if(!a){for(let e=0;e<r.length;e+=1)p(s[e]);a=!0}},o(e){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)h(s[t]);a=!1},d(e){e&&c(t),_(s,e)}}}function Ve(e){let t,n,a,r,s,m,f,w,$,E,k,N,I,D,T=e[3],j=[];for(let o=0;o<T.length;o+=1)j[o]=ke(be(e,T,o));let S=e[0],C=[];for(let o=0;o<S.length;o+=1)C[o]=Ce(xe(e,S,o));const V=e=>h(C[e],1,1,(()=>{C[e]=null}));return{c(){t=g("div"),n=g("div"),a=g("div"),r=g("div"),s=y(),m=g("div"),f=g("div"),w=g("div"),$=g("table"),E=g("thead"),k=g("tr");for(let e=0;e<j.length;e+=1)j[e].c();N=y(),I=g("tbody");for(let e=0;e<C.length;e+=1)C[e].c();this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"DIV",{class:!0});var d=l(n);a=o(d,"DIV",{class:!0});var u=l(a);r=o(u,"DIV",{id:!0}),l(r).forEach(c),u.forEach(c),d.forEach(c),s=x(i),m=o(i,"DIV",{class:!0});var p=l(m);f=o(p,"DIV",{class:!0});var h=l(f);w=o(h,"DIV",{class:!0});var g=l(w);$=o(g,"TABLE",{class:!0});var y=l($);E=o(y,"THEAD",{class:!0});var v=l(E);k=o(v,"TR",{class:!0});var b=l(k);for(let t=0;t<j.length;t+=1)j[t].l(b);b.forEach(c),v.forEach(c),N=x(y),I=o(y,"TBODY",{class:!0});var D=l(I);for(let t=0;t<C.length;t+=1)C[t].l(D);D.forEach(c),y.forEach(c),g.forEach(c),h.forEach(c),p.forEach(c),i.forEach(c),this.h()},h(){i(r,"id","geocoder"),i(a,"class",""),i(n,"class","w-full h-96 p-2"),i(k,"class","divide-x divide-gray-200"),i(E,"class","bg-gray-50"),i(I,"class","divide-y divide-gray-200"),i($,"class","min-w-full divide-y divide-gray-200 bg-white"),i(w,"class","shadow border-b border-t border-gray-200 sm:rounded-md"),i(f,"class","align-middle inline-block min-w-full"),i(m,"class",""),i(t,"class","flex flex-col h-full overflow-scroll bg-gray-50")},m(e,o){d(e,t,o),u(t,n),u(n,a),u(a,r),u(t,s),u(t,m),u(m,f),u(f,w),u(w,$),u($,E),u(E,k);for(let t=0;t<j.length;t+=1)j[t].m(k,null);u($,N),u($,I);for(let t=0;t<C.length;t+=1)C[t].m(I,null);D=!0},p(e,[t]){if(254&t){let n;for(T=e[3],n=0;n<T.length;n+=1){const a=be(e,T,n);j[n]?j[n].p(a,t):(j[n]=ke(a),j[n].c(),j[n].m(k,null))}for(;n<j.length;n+=1)j[n].d(1);j.length=T.length}if(257&t){let n;for(S=e[0],n=0;n<S.length;n+=1){const a=xe(e,S,n);C[n]?(C[n].p(a,t),p(C[n],1)):(C[n]=Ce(a),C[n].c(),p(C[n],1),C[n].m(I,null))}for(v(),n=S.length;n<C.length;n+=1)V(n);b()}},i(e){if(!D){for(let e=0;e<S.length;e+=1)p(C[e]);D=!0}},o(e){C=C.filter(Boolean);for(let t=0;t<C.length;t+=1)h(C[t]);D=!1},d(e){e&&c(t),_(j,e),_(C,e)}}}function Ae(e,t,n){let{rows:a}=t,r=[],s={column:null,order:null},o={open:null};const l=a[0].map((e=>e.key)),c=M();function i(e){o.open===e?n(2,o.open=null,o):setTimeout((()=>{n(2,o.open=e,o)}),2)}function d(e,t){console.log("e",t.detail),o.open===e&&setTimeout((()=>{n(2,o.open=null,o)}),1),n(2,o.open=e,o)}function u(e,t){n(1,s={column:e,order:t}),c("query",{sort:s,filters:r})}function m(e){n(1,s={column:null,order:null}),c("query",{sort:s,filters:r})}function f(e){console.log("huh"),c("viewLocation",e)}E((()=>{const e=window.mapboxgl;e.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJuR1ZmQ01vIn0.zyEdsIKM-4orPm-3Y0XWDQ";const t=new MapboxGeocoder({accessToken:e.accessToken,types:"region,district,place"});t.addTo("#geocoder"),t.on("result",(({result:e})=>{const t=e,{place_name:n,place_type:a}=t,o=n.split(", "),l=a[0];"place"===l?(r.push({column:"CityName",value:o[0]}),r.push({column:"StateName",value:ge[o[1]]})):"district"===l?(r.push({column:"CountyName",value:o[0].replace(" County","").toLowerCase()}),r.push({column:"StateName",value:ge[o[1]]})):"region"===l&&r.push({column:"StateName",value:ge[o[0]]}),c("query",{sort:s,filters:r})}))}));return e.$$set=e=>{"rows"in e&&n(0,a=e.rows)},e.$$.update=()=>{2&e.$$.dirty&&console.log("sort",s)},[a,s,o,l,i,d,u,m,f,e=>{i(e)},e=>u(e,"ASC"),e=>u(e,"DESC"),e=>m(),(e,t)=>{d(e,t)},e=>{f(e.value)}]}class Me extends n{constructor(e){super(),a(this,e,Ae,Ve,r,{rows:0})}}function ze(e){let t;const n=e[6].default,a=k(n,e,e[5],null);return{c(){a&&a.c()},l(e){a&&a.l(e)},m(e,n){a&&a.m(e,n),t=!0},p(e,r){a&&a.p&&(!t||32&r)&&f(a,n,e,e[5],r,null,null)},i(e){t||(p(a,e),t=!0)},o(e){h(a,e),t=!1},d(e){a&&a.d(e)}}}function Le(e){let t,n,a,r,s,m,f,p,h,v,b,w,$,E,k,N,T,_,S,C,V,A,M=e[3].properties.name+"",z=e[3].properties.accidents+"",L=e[3].properties.killed+"",P=e[3].properties.injured+"";return{c(){t=g("div"),n=g("div"),a=g("h3"),r=I(M),s=y(),m=g("p"),f=I(z),p=y(),h=g("span"),v=I("Accidents"),b=y(),w=g("p"),$=I(L),E=y(),k=g("span"),N=I("Killed"),T=y(),_=g("p"),S=I(P),C=y(),V=g("span"),A=I("Injured"),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"DIV",{class:!0});var d=l(n);a=o(d,"H3",{class:!0});var u=l(a);r=D(u,M),u.forEach(c),s=x(d),m=o(d,"P",{class:!0});var g=l(m);f=D(g,z),p=x(g),h=o(g,"SPAN",{class:!0});var y=l(h);v=D(y,"Accidents"),y.forEach(c),g.forEach(c),b=x(d),w=o(d,"P",{class:!0});var I=l(w);$=D(I,L),E=x(I),k=o(I,"SPAN",{class:!0});var j=l(k);N=D(j,"Killed"),j.forEach(c),I.forEach(c),T=x(d),_=o(d,"P",{class:!0});var R=l(_);S=D(R,P),C=x(R),V=o(R,"SPAN",{class:!0});var O=l(V);A=D(O,"Injured"),O.forEach(c),R.forEach(c),d.forEach(c),i.forEach(c),this.h()},h(){i(a,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),i(h,"class","font-normal"),i(m,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(k,"class","font-normal"),i(w,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(V,"class","font-normal"),i(_,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(n,"class","px-4 py-4 sm:px-6"),i(t,"class","bg-white shadow overflow-hidden rounded-md absolute top-4 right-0 mr-4 w-1/2 lg:w-1/3 pb-2")},m(e,o){d(e,t,o),u(t,n),u(n,a),u(a,r),u(n,s),u(n,m),u(m,f),u(m,p),u(m,h),u(h,v),u(n,b),u(n,w),u(w,$),u(w,E),u(w,k),u(k,N),u(n,T),u(n,_),u(_,S),u(_,C),u(_,V),u(V,A)},p(e,t){8&t&&M!==(M=e[3].properties.name+"")&&j(r,M),8&t&&z!==(z=e[3].properties.accidents+"")&&j(f,z),8&t&&L!==(L=e[3].properties.killed+"")&&j($,L),8&t&&P!==(P=e[3].properties.injured+"")&&j(S,P)},d(e){e&&c(t)}}}function Pe(e){let t,n,a,r,s,m,f,w,$,E,k,N,T,j,_,S=e[1]&&ze(e),C=e[3]&&Le(e);return{c(){t=g("div"),S&&S.c(),n=y(),a=g("div"),r=g("button"),s=I("Accidents"),m=y(),f=g("button"),w=I("Killed"),$=y(),E=g("button"),k=I("Injured"),N=y(),C&&C.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);S&&S.l(i),n=x(i),a=o(i,"DIV",{class:!0});var d=l(a);r=o(d,"BUTTON",{type:!0,class:!0});var u=l(r);s=D(u,"Accidents"),u.forEach(c),m=x(d),f=o(d,"BUTTON",{type:!0,class:!0});var p=l(f);w=D(p,"Killed"),p.forEach(c),$=x(d),E=o(d,"BUTTON",{type:!0,class:!0});var h=l(E);k=D(h,"Injured"),h.forEach(c),d.forEach(c),N=x(i),C&&C.l(i),i.forEach(c),this.h()},h(){i(r,"type","button"),i(r,"class","\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-t-md\n        sm:rounded-l-md\n        sm:rounded-tr-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),R(r,"selected","accidents"===e[2]),i(f,"type","button"),i(f,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),R(f,"selected","killed"===e[2]),i(E,"type","button"),i(E,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-b-md\n        sm:rounded-r-md\n        sm:rounded-bl-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),R(E,"selected","injured"===e[2]),i(a,"class","absolute z-10 flex flex-col sm:flex-row shadow-sm rounded-md top-4 left-4"),i(t,"class","flex-grow z-0 h-full")},m(o,l){d(o,t,l),S&&S.m(t,null),u(t,n),u(t,a),u(a,r),u(r,s),u(a,m),u(a,f),u(f,w),u(a,$),u(a,E),u(E,k),u(t,N),C&&C.m(t,null),e[10](t),T=!0,j||(_=[z(r,"click",e[7]),z(f,"click",e[8]),z(E,"click",e[9])],j=!0)},p(e,[a]){e[1]?S?(S.p(e,a),2&a&&p(S,1)):(S=ze(e),S.c(),p(S,1),S.m(t,n)):S&&(v(),h(S,1,1,(()=>{S=null})),b()),4&a&&R(r,"selected","accidents"===e[2]),4&a&&R(f,"selected","killed"===e[2]),4&a&&R(E,"selected","injured"===e[2]),e[3]?C?C.p(e,a):(C=Le(e),C.c(),C.m(t,null)):C&&(C.d(1),C=null)},i(e){T||(p(S),T=!0)},o(e){h(S),T=!1},d(n){n&&c(t),S&&S.d(),C&&C.d(),e[10](null),j=!1,P(_)}}}function Re(e,t,n){let a;w(e,W,(e=>n(12,a=e)));let r,s,o,{$$slots:l={},$$scope:c}=t,i="accidents",d=null;function u(e){let t;console.log("prop",e),n(2,i=e),"accidents"===e?t=[[0,"#fcde9c"],[500,"#faa476"],[1e3,"#f0746e"],[2e3,"#e34f6f"],[4e3,"#dc3977"],[8e3,"#b9257a"],[16e3,"#7c1d6f"]]:"killed"===e?t=[[0,"#fcde9c"],[250,"#faa476"],[500,"#f0746e"],[750,"#e34f6f"],[1e3,"#dc3977"],[1250,"#b9257a"],[1500,"#7c1d6f"]]:"injured"===e&&(t=[[0,"#fcde9c"],[825,"#faa476"],[1750,"#f0746e"],[2625,"#e34f6f"],[3500,"#dc3977"],[4375,"#b9257a"],[6175,"#7c1d6f"]]),s.setPaintProperty("state_totals","fill-color",{property:i,stops:t})}$(J,{getMap:()=>s}),$(F,{getMapbox:()=>o}),E((async()=>(o=window.mapboxgl,o.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(1,s=new o.Map({container:r,style:"mapbox://styles/mapbox/light-v10",center:a.lngLat,zoom:a.zoom,minZoom:0,maxZoom:8})),s.on("load",(()=>{s.resize(),s.addSource("state_totals",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incident-totals/states/{z}/{x}/{y}.pbf"]}),s.addLayer({id:"state_totals",type:"fill",source:"state_totals","source-layer":"state_totals",layout:{},paint:{"fill-color":{property:i,stops:[[0,"#fcde9c"],[500,"#faa476"],[1e3,"#f0746e"],[2e3,"#e34f6f"],[4e3,"#dc3977"],[8e3,"#b9257a"],[16e3,"#7c1d6f"]]},"fill-opacity":["case",["boolean",["feature-state","hover"],!1],1,.8]}}),s.addLayer({id:"state_totals_lines",type:"line",source:"state_totals","source-layer":"state_totals",layout:{},paint:{"line-color":"#444","line-width":2}})})),s.on("mouseenter","state_totals",(function(e){s.getCanvas().style.cursor="pointer"})),s.on("mouseleave","state_totals",(function(){s.getCanvas().style.cursor=""})),s.on("click",(async function(e){const t=s.queryRenderedFeatures(e.point);n(3,d=t.find((e=>"state_totals"===e.layer.id)))})),()=>{n(1,s=null)})));return e.$$set=e=>{"$$scope"in e&&n(5,c=e.$$scope)},[r,s,i,d,u,c,l,()=>{u("accidents")},()=>{u("killed")},()=>{u("injured")},function(e){N[e?"unshift":"push"]((()=>{r=e,n(0,r)}))}]}class Oe extends n{constructor(e){super(),a(this,e,Re,Pe,r,{})}}function Be(e){let t;const n=e[6].default,a=k(n,e,e[5],null);return{c(){a&&a.c()},l(e){a&&a.l(e)},m(e,n){a&&a.m(e,n),t=!0},p(e,r){a&&a.p&&(!t||32&r)&&f(a,n,e,e[5],r,null,null)},i(e){t||(p(a,e),t=!0)},o(e){h(a,e),t=!1},d(e){a&&a.d(e)}}}function Ke(e){let t,n,a,r,s,m,f,p,h,v,b,w,$,E,k,N,T,_,S,C,V,A,M=e[3].properties.name+"",z=e[3].properties.accidents+"",L=e[3].properties.killed+"",P=e[3].properties.injured+"";return{c(){t=g("div"),n=g("div"),a=g("h3"),r=I(M),s=y(),m=g("p"),f=I(z),p=y(),h=g("span"),v=I("Accidents"),b=y(),w=g("p"),$=I(L),E=y(),k=g("span"),N=I("Killed"),T=y(),_=g("p"),S=I(P),C=y(),V=g("span"),A=I("Injured"),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"DIV",{class:!0});var d=l(n);a=o(d,"H3",{class:!0});var u=l(a);r=D(u,M),u.forEach(c),s=x(d),m=o(d,"P",{class:!0});var g=l(m);f=D(g,z),p=x(g),h=o(g,"SPAN",{class:!0});var y=l(h);v=D(y,"Accidents"),y.forEach(c),g.forEach(c),b=x(d),w=o(d,"P",{class:!0});var I=l(w);$=D(I,L),E=x(I),k=o(I,"SPAN",{class:!0});var j=l(k);N=D(j,"Killed"),j.forEach(c),I.forEach(c),T=x(d),_=o(d,"P",{class:!0});var R=l(_);S=D(R,P),C=x(R),V=o(R,"SPAN",{class:!0});var O=l(V);A=D(O,"Injured"),O.forEach(c),R.forEach(c),d.forEach(c),i.forEach(c),this.h()},h(){i(a,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),i(h,"class","font-normal"),i(m,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(k,"class","font-normal"),i(w,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(V,"class","font-normal"),i(_,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(n,"class","px-4 py-4 sm:px-6"),i(t,"class","bg-white shadow overflow-hidden rounded-md absolute top-4 right-0 mr-4 w-1/2 lg:w-1/3 pb-2")},m(e,o){d(e,t,o),u(t,n),u(n,a),u(a,r),u(n,s),u(n,m),u(m,f),u(m,p),u(m,h),u(h,v),u(n,b),u(n,w),u(w,$),u(w,E),u(w,k),u(k,N),u(n,T),u(n,_),u(_,S),u(_,C),u(_,V),u(V,A)},p(e,t){8&t&&M!==(M=e[3].properties.name+"")&&j(r,M),8&t&&z!==(z=e[3].properties.accidents+"")&&j(f,z),8&t&&L!==(L=e[3].properties.killed+"")&&j($,L),8&t&&P!==(P=e[3].properties.injured+"")&&j(S,P)},d(e){e&&c(t)}}}function qe(e){let t,n,a,r,s,m,f,w,$,E,k,N,T,j,_,S=e[1]&&Be(e),C=e[3]&&Ke(e);return{c(){t=g("div"),S&&S.c(),n=y(),a=g("div"),r=g("button"),s=I("Accidents"),m=y(),f=g("button"),w=I("Killed"),$=y(),E=g("button"),k=I("Injured"),N=y(),C&&C.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);S&&S.l(i),n=x(i),a=o(i,"DIV",{class:!0});var d=l(a);r=o(d,"BUTTON",{type:!0,class:!0});var u=l(r);s=D(u,"Accidents"),u.forEach(c),m=x(d),f=o(d,"BUTTON",{type:!0,class:!0});var p=l(f);w=D(p,"Killed"),p.forEach(c),$=x(d),E=o(d,"BUTTON",{type:!0,class:!0});var h=l(E);k=D(h,"Injured"),h.forEach(c),d.forEach(c),N=x(i),C&&C.l(i),i.forEach(c),this.h()},h(){i(r,"type","button"),i(r,"class","\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-t-md\n        sm:rounded-l-md\n        sm:rounded-tr-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),R(r,"selected","accidents"===e[2]),i(f,"type","button"),i(f,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),R(f,"selected","killed"===e[2]),i(E,"type","button"),i(E,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-b-md\n        sm:rounded-r-md\n        sm:rounded-bl-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),R(E,"selected","injured"===e[2]),i(a,"class","absolute z-10 flex flex-col sm:flex-row shadow-sm rounded-md top-4 left-4"),i(t,"class","flex-grow z-0 h-full")},m(o,l){d(o,t,l),S&&S.m(t,null),u(t,n),u(t,a),u(a,r),u(r,s),u(a,m),u(a,f),u(f,w),u(a,$),u(a,E),u(E,k),u(t,N),C&&C.m(t,null),e[10](t),T=!0,j||(_=[z(r,"click",e[7]),z(f,"click",e[8]),z(E,"click",e[9])],j=!0)},p(e,[a]){e[1]?S?(S.p(e,a),2&a&&p(S,1)):(S=Be(e),S.c(),p(S,1),S.m(t,n)):S&&(v(),h(S,1,1,(()=>{S=null})),b()),4&a&&R(r,"selected","accidents"===e[2]),4&a&&R(f,"selected","killed"===e[2]),4&a&&R(E,"selected","injured"===e[2]),e[3]?C?C.p(e,a):(C=Ke(e),C.c(),C.m(t,null)):C&&(C.d(1),C=null)},i(e){T||(p(S),T=!0)},o(e){h(S),T=!1},d(n){n&&c(t),S&&S.d(),C&&C.d(),e[10](null),j=!1,P(_)}}}function Ue(e,t,n){let a;w(e,Q,(e=>n(12,a=e)));let r,s,o,{$$slots:l={},$$scope:c}=t,i="accidents",d=null;function u(e){n(2,i=e),s.setPaintProperty("county_totals","fill-color",{property:i,stops:[[0,"#fcde9c"],[15,"#faa476"],[30,"#f0746e"],[45,"#e34f6f"],[60,"#dc3977"],[75,"#b9257a"],[90,"#7c1d6f"]]})}$(J,{getMap:()=>s}),$(F,{getMapbox:()=>o}),E((async()=>(o=window.mapboxgl,o.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(1,s=new o.Map({container:r,style:"mapbox://styles/mapbox/light-v10",center:a.lngLat,zoom:a.zoom,minZoom:7,maxZoom:14})),s.on("load",(()=>{s.resize(),s.addSource("county_totals",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incident-totals/counties/{z}/{x}/{y}.pbf"]}),s.addLayer({id:"county_totals",type:"fill",source:"county_totals","source-layer":"county_totals",layout:{},paint:{"fill-color":{property:i,stops:[[0,"#fcde9c"],[15,"#faa476"],[30,"#f0746e"],[45,"#e34f6f"],[60,"#dc3977"],[75,"#b9257a"],[90,"#7c1d6f"]]},"fill-opacity":["case",["boolean",["feature-state","hover"],!1],1,.8]}}),s.addLayer({id:"county_totals_lines",type:"line",source:"county_totals","source-layer":"county_totals",layout:{},paint:{"line-color":"#444","line-width":2}})})),s.on("mousemove","county_totals",(function(e){s.getCanvas().style.cursor="pointer"})),s.on("mouseleave","county_totals",(function(){s.getCanvas().style.cursor=""})),s.on("click",(async function(e){const t=s.queryRenderedFeatures(e.point);n(3,d=t.find((e=>"county_totals"===e.layer.id)))})),()=>{n(1,s=null)})));return e.$$set=e=>{"$$scope"in e&&n(5,c=e.$$scope)},[r,s,i,d,u,c,l,()=>{u("accidents")},()=>{u("killed")},()=>{u("injured")},function(e){N[e?"unshift":"push"]((()=>{r=e,n(0,r)}))}]}class Ye extends n{constructor(e){super(),a(this,e,Ue,qe,r,{})}}function Ge(e){let t,n,a,r;return a=new Ye({}),{c(){t=g("div"),n=g("div"),S(a.$$.fragment),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=l(t);n=o(r,"DIV",{class:!0});var s=l(n);C(a.$$.fragment,s),s.forEach(c),r.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,s){d(e,t,s),u(t,n),V(a,n,null),r=!0},p:m,i(e){r||(p(a.$$.fragment,e),r=!0)},o(e){h(a.$$.fragment,e),r=!1},d(e){e&&c(t),A(a)}}}function He(e){let t,n,a,r;return a=new Oe({}),{c(){t=g("div"),n=g("div"),S(a.$$.fragment),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=l(t);n=o(r,"DIV",{class:!0});var s=l(n);C(a.$$.fragment,s),s.forEach(c),r.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,s){d(e,t,s),u(t,n),V(a,n,null),r=!0},p:m,i(e){r||(p(a.$$.fragment,e),r=!0)},o(e){h(a.$$.fragment,e),r=!1},d(e){e&&c(t),A(a)}}}function Je(e){let t,n,a,r;return a=new Me({props:{rows:e[0],columns:e[1]}}),a.$on("query",e[5]),a.$on("viewLocation",e[6]),{c(){t=g("div"),n=g("div"),S(a.$$.fragment),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=l(t);n=o(r,"DIV",{class:!0});var s=l(n);C(a.$$.fragment,s),s.forEach(c),r.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,s){d(e,t,s),u(t,n),V(a,n,null),r=!0},p(e,t){const n={};1&t&&(n.rows=e[0]),2&t&&(n.columns=e[1]),a.$set(n)},i(e){r||(p(a.$$.fragment,e),r=!0)},o(e){h(a.$$.fragment,e),r=!1},d(e){e&&c(t),A(a)}}}function Fe(e){let t,n,a,r;return a=new he({props:{center:e[3]}}),{c(){t=g("div"),n=g("div"),S(a.$$.fragment),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=l(t);n=o(r,"DIV",{class:!0});var s=l(n);C(a.$$.fragment,s),s.forEach(c),r.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,s){d(e,t,s),u(t,n),V(a,n,null),r=!0},p(e,t){const n={};8&t&&(n.center=e[3]),a.$set(n)},i(e){r||(p(a.$$.fragment,e),r=!0)},o(e){h(a.$$.fragment,e),r=!1},d(e){e&&c(t),A(a)}}}function Qe(e){let t,n,a,r,s,m,f,w,$,E,k,N,T,j,_,S,C,V,A,M,L,R,B,K,q,U,Y,G,H,J,F,Q,W,X,Z,ee,te,ne,ae,re,se,oe,le,ce,ie,de,ue,me,fe,pe,he,ge,ye,xe,ve,be,we,$e,Ee,ke,Ne,Ie,De,Te,je,_e;const Se=[Fe,Je,He,Ge],Ce=[];function Ve(e,t){return"map"===e[2]?0:"list"===e[2]?1:"us-totals"===e[2]?2:"nj-totals"===e[2]?3:-1}return~(me=Ve(e))&&(fe=Ce[me]=Se[me](e)),{c(){t=g("script"),a=g("link"),r=g("script"),m=g("link"),f=y(),w=g("div"),$=g("div"),E=g("h1"),k=I("Railroad Crossing Incidents"),N=y(),T=g("div"),j=g("nav"),_=g("button"),S=g("span"),C=I("N.J. Totals"),V=y(),A=g("span"),R=y(),B=g("button"),K=g("span"),q=I("U.S. Totals"),U=y(),Y=g("span"),J=y(),F=g("button"),Q=g("span"),W=I("Map"),X=y(),Z=g("span"),ne=y(),ae=g("button"),re=g("span"),se=I("List"),oe=y(),le=g("span"),de=y(),ue=g("div"),fe&&fe.c(),pe=y(),he=g("div"),ge=I("Story by "),ye=g("a"),xe=I("Payton Guion"),ve=I(". Graphics by "),be=g("a"),we=I("Seth Vincent"),$e=I(". "),Ee=g("br"),ke=I("Data from the "),Ne=g("a"),Ie=I("Federal Railroad Administration"),De=I("."),this.h()},l(e){const n=O('[data-svelte="svelte-hlw6vs"]',document.head);t=o(n,"SCRIPT",{src:!0}),l(t).forEach(c),a=o(n,"LINK",{href:!0,rel:!0}),r=o(n,"SCRIPT",{src:!0}),l(r).forEach(c),m=o(n,"LINK",{rel:!0,href:!0,type:!0}),n.forEach(c),f=x(e),w=o(e,"DIV",{class:!0});var s=l(w);$=o(s,"DIV",{class:!0});var i=l($);E=o(i,"H1",{class:!0});var d=l(E);k=D(d,"Railroad Crossing Incidents"),d.forEach(c),i.forEach(c),N=x(s),T=o(s,"DIV",{class:!0});var u=l(T);j=o(u,"NAV",{class:!0,"aria-label":!0});var p=l(j);_=o(p,"BUTTON",{class:!0,"aria-current":!0});var h=l(_);S=o(h,"SPAN",{});var g=l(S);C=D(g,"N.J. Totals"),g.forEach(c),V=x(h),A=o(h,"SPAN",{"aria-hidden":!0,class:!0}),l(A).forEach(c),h.forEach(c),R=x(p),B=o(p,"BUTTON",{class:!0,"aria-current":!0});var y=l(B);K=o(y,"SPAN",{});var v=l(K);q=D(v,"U.S. Totals"),v.forEach(c),U=x(y),Y=o(y,"SPAN",{"aria-hidden":!0,class:!0}),l(Y).forEach(c),y.forEach(c),J=x(p),F=o(p,"BUTTON",{class:!0,"aria-current":!0});var b=l(F);Q=o(b,"SPAN",{});var I=l(Q);W=D(I,"Map"),I.forEach(c),X=x(b),Z=o(b,"SPAN",{"aria-hidden":!0,class:!0}),l(Z).forEach(c),b.forEach(c),ne=x(p),ae=o(p,"BUTTON",{class:!0,"aria-current":!0});var M=l(ae);re=o(M,"SPAN",{});var z=l(re);se=D(z,"List"),z.forEach(c),oe=x(M),le=o(M,"SPAN",{"aria-hidden":!0,class:!0}),l(le).forEach(c),M.forEach(c),p.forEach(c),u.forEach(c),de=x(s),ue=o(s,"DIV",{class:!0});var L=l(ue);fe&&fe.l(L),L.forEach(c),pe=x(s),he=o(s,"DIV",{class:!0});var P=l(he);ge=D(P,"Story by "),ye=o(P,"A",{href:!0,target:!0,class:!0});var G=l(ye);xe=D(G,"Payton Guion"),G.forEach(c),ve=D(P,". Graphics by "),be=o(P,"A",{href:!0,target:!0,class:!0});var H=l(be);we=D(H,"Seth Vincent"),H.forEach(c),$e=D(P,". "),Ee=o(P,"BR",{class:!0}),ke=D(P,"Data from the "),Ne=o(P,"A",{href:!0,target:!0,class:!0});var ee=l(Ne);Ie=D(ee,"Federal Railroad Administration"),ee.forEach(c),De=D(P,"."),P.forEach(c),s.forEach(c),this.h()},h(){document.title="Railroad Crossing Incidents",t.src!==(n="https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js")&&i(t,"src","https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js"),i(a,"href","https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.css"),i(a,"rel","stylesheet"),r.src!==(s="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js")&&i(r,"src","https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js"),i(m,"rel","stylesheet"),i(m,"href","https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.css"),i(m,"type","text/css"),i(E,"class","font-bold text-gray-600"),i($,"class","flex-none p-4"),i(A,"aria-hidden","true"),i(A,"class",M="\n            "+("nj-totals"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),i(_,"class",L="\n          "+("nj-totals"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),i(_,"aria-current","page"),i(Y,"aria-hidden","true"),i(Y,"class",G="\n            "+("us-totals"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),i(B,"class",H="\n          "+("us-totals"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),i(B,"aria-current","page"),i(Z,"aria-hidden","true"),i(Z,"class",ee="\n            "+("map"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),i(F,"class",te="\n          "+("map"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),i(F,"aria-current","page"),i(le,"aria-hidden","true"),i(le,"class",ce="\n            "+("list"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),i(ae,"class",ie="\n          "+("list"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),i(ae,"aria-current","page"),i(j,"class","relative z-0 shadow flex divide-x divide-gray-200 border-t border-gray-100 border-"),i(j,"aria-label","Tabs"),i(T,"class","flex-none block"),i(ue,"class","flex-grow border-t border-gray-200 overflow-hidden"),i(ye,"href","https://twitter.com/PaytonGuion"),i(ye,"target","_blank"),i(ye,"class","underline"),i(be,"href","https://twitter.com/sethdvincent"),i(be,"target","_blank"),i(be,"class","underline"),i(Ee,"class","sm:hidden"),i(Ne,"href","https://railroads.dot.gov"),i(Ne,"target","_blank"),i(Ne,"class","underline"),i(he,"class","flex-none p-4 text-xs text-gray-500 border-t border-gray-200"),i(w,"class","flex flex-col h-screen border border-gray-100  max-w-screen-lg mx-auto")},m(n,s){u(document.head,t),u(document.head,a),u(document.head,r),u(document.head,m),d(n,f,s),d(n,w,s),u(w,$),u($,E),u(E,k),u(w,N),u(w,T),u(T,j),u(j,_),u(_,S),u(S,C),u(_,V),u(_,A),u(j,R),u(j,B),u(B,K),u(K,q),u(B,U),u(B,Y),u(j,J),u(j,F),u(F,Q),u(Q,W),u(F,X),u(F,Z),u(j,ne),u(j,ae),u(ae,re),u(re,se),u(ae,oe),u(ae,le),u(w,de),u(w,ue),~me&&Ce[me].m(ue,null),u(w,pe),u(w,he),u(he,ge),u(he,ye),u(ye,xe),u(he,ve),u(he,be),u(be,we),u(he,$e),u(he,Ee),u(he,ke),u(he,Ne),u(Ne,Ie),u(he,De),Te=!0,je||(_e=[z(_,"click",e[10]),z(B,"click",e[11]),z(F,"click",e[12]),z(ae,"click",e[13])],je=!0)},p(e,[t]){(!Te||4&t&&M!==(M="\n            "+("nj-totals"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&i(A,"class",M),(!Te||4&t&&L!==(L="\n          "+("nj-totals"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&i(_,"class",L),(!Te||4&t&&G!==(G="\n            "+("us-totals"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&i(Y,"class",G),(!Te||4&t&&H!==(H="\n          "+("us-totals"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&i(B,"class",H),(!Te||4&t&&ee!==(ee="\n            "+("map"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&i(Z,"class",ee),(!Te||4&t&&te!==(te="\n          "+("map"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&i(F,"class",te),(!Te||4&t&&ce!==(ce="\n            "+("list"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&i(le,"class",ce),(!Te||4&t&&ie!==(ie="\n          "+("list"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&i(ae,"class",ie);let n=me;me=Ve(e),me===n?~me&&Ce[me].p(e,t):(fe&&(v(),h(Ce[n],1,1,(()=>{Ce[n]=null})),b()),~me?(fe=Ce[me],fe?fe.p(e,t):(fe=Ce[me]=Se[me](e),fe.c()),p(fe,1),fe.m(ue,null)):fe=null)},i(e){Te||(p(fe),Te=!0)},o(e){h(fe),Te=!1},d(e){c(t),c(a),c(r),c(m),e&&c(f),e&&c(w),~me&&Ce[me].d(),je=!1,P(_e)}}}async function We({fetch:e,page:t}){const n=await e("https://railroad-crossing-data.vercel.app/railroad_crossing_data/RRData.json?&_sort=StateName"),a=await n.json();if(console.log("json",a),n.ok){const{rows:e,columns:t}=Y(a);return{props:{rows:e,columns:t}}}return{status:n.status,error:new Error("Could not load data")}}function Xe(e,t,n){let a,r,s,o;w(e,G,(e=>n(7,o=e)));let{rows:l}=t,{columns:c}=t,i=o.query.get("view")||"nj-totals";async function d(e){o.query.set("view",e),n(2,i=e);const t=o.query.toString();await H(`${U}?${t}`)}B(1e3),K(150);return e.$$set=e=>{"rows"in e&&n(0,l=e.rows),"columns"in e&&n(1,c=e.columns)},e.$$.update=()=>{if(128&e.$$.dirty&&n(8,a=o.query.get("lng")),128&e.$$.dirty&&n(9,r=o.query.get("lat")),768&e.$$.dirty&&n(3,s=a&r?[a,r]:null),132&e.$$.dirty&&"map"!==i&&(o.query.has("lng")||o.query.has("lat"))){o.query.delete("lng"),o.query.delete("lat");const e=o.query.toString();H(`${U}?${e}`)}},[l,c,i,s,d,async function(e){console.log("query",e.detail),await async function(e){const{sort:t,filters:a}=e;let r="";t.column&&(r=`_sort${"DESC"===t.order?"_desc":""}=${t.column}`);const s=[];if(a.length)for(const n of a)"StateName"===n.column?s.push(`StateName__exact=${n.value}`):"CountyName"===n.column?s.push(`CountyName__like=${n.value}`):"CityName"===n.column&&s.push(`CityName__like=${n.value}`);const o=`https://railroad-crossing-data.vercel.app/railroad_crossing_data/RRData.json?${[...s,r].join("&")}`;console.log("url",o);const i=await fetch(o),d=await i.json();console.log("json",d);const u=Y(d);n(0,l=[...u.rows]),n(1,c=[...u.columns])}(e.detail)},function(e){const[t,a]=e.detail;o.query.set("lng",t),o.query.set("lat",a),n(3,s=[t,a]),d("map")},o,a,r,()=>{d("nj-totals")},()=>{d("us-totals")},()=>{d("map")},()=>{d("list")}]}export default class extends n{constructor(e){super(),a(this,e,Xe,Qe,r,{rows:0,columns:1})}}export{We as load};

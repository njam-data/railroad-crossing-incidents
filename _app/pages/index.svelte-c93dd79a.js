import{H as e,C as t,S as n,i as s,s as a,I as o,c as r,a as l,d as c,b as i,f as u,F as d,G as g,E as f,v as m,r as p,e as h,t as y,k as x,g as v,n as b,h as w,B as $,u as E,l as k,J as _,K as j,x as T,z as N,D as I,j as z,m as L,o as C,w as D,L as M,M as S,N as V,O,P as B,Q as P,R as A,T as R,U as q}from"../chunks/vendor-411e03b8.js";import{r as K,b as U}from"../chunks/paths-7dc55c62.js";const J={subscribe:t=>(()=>{const t=e("__svelte__");return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:t.navigating.subscribe}},session:t.session}})().page.subscribe(t)},Y=async function(e,t){return K.goto(e,t,[])};const H={},Q={},Z=t({zoom:7.5,lngLat:["-74.558333","40.16"]}),G=t({zoom:2,lngLat:["-98.5556","39.8097"]});function X(e){let t,n;return{c(){t=o("svg"),n=o("path"),this.h()},l(e){t=r(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var s=l(t);n=r(s,"path",{d:!0},1),l(n).forEach(c),s.forEach(c),this.h()},h(){i(n,"d","M50,5C25.147,5,5,25.148,5,50c0,24.852,20.147,45,45,45c24.854,0,45-20.148,45-45C95,25.148,74.854,5,50,5z M74.675,38.917  l-23.75,29.511c-1.109,1.379-2.756,2.252-4.517,2.396c-0.173,0.015-0.347,0.021-0.52,0.021c-1.585,0-3.138-0.589-4.326-1.652  L25.985,55.17c-2.463-2.217-2.661-6.01-0.444-8.473c2.218-2.463,6.012-2.662,8.474-0.444l11.223,10.103l20.088-24.961  c2.078-2.582,5.855-2.989,8.438-0.913C76.344,32.558,76.752,36.335,74.675,38.917z"),i(t,"height","20px"),i(t,"width","20px"),i(t,"class","align-top inline"),i(t,"fill","#4CE600"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),i(t,"version","1.1"),i(t,"x","0px"),i(t,"y","0px"),i(t,"viewBox","0 0 100 100"),i(t,"enable-background","new 0 0 100 100"),i(t,"xml:space","preserve")},m(e,s){u(e,t,s),d(t,n)},p:g,i:g,o:g,d(e){e&&c(t)}}}class F extends n{constructor(e){super(),s(this,e,null,X,a,{})}}function W(e){let t,n;return{c(){t=o("svg"),n=o("path"),this.h()},l(e){t=r(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var s=l(t);n=r(s,"path",{d:!0},1),l(n).forEach(c),s.forEach(c),this.h()},h(){i(n,"d","M50,5C25.147,5,5,25.147,5,50c0,24.854,20.147,45,45,45c24.854,0,45-20.146,45-45C95,25.147,74.854,5,50,5z M49.999,76.75  c-3.342,0-6.061-2.717-6.061-6.057c0-3.346,2.719-6.066,6.061-6.066c3.343,0,6.063,2.723,6.063,6.066  C56.063,74.033,53.342,76.75,49.999,76.75z M66.238,43.808c-1.174,1.827-2.795,4.01-6.028,6.531  c-3.213,2.461-4.185,3.724-4.478,4.259c-0.166,0.299-0.402,0.895-0.59,2.004c-0.065,0.39-0.119,0.812-0.162,1.265l-0.254,2.714  l-9.771,0.023l0.124-3.127c0.017-0.4,0.06-1.185,0.168-1.918c0.324-2.229,1.085-4.209,2.261-5.882  c1.104-1.573,3.247-3.563,6.549-6.079c2.442-1.863,3.396-2.928,3.764-3.492c0.47-0.717,0.697-1.472,0.697-2.305  c0-1.931-0.705-3.46-2.094-4.545c-1.474-1.151-3.518-1.735-6.073-1.735c-2.265,0-4.176,0.599-5.682,1.778  c-1.594,1.239-2.713,2.953-3.245,4.964l-0.66,2.492l-9.563-1.037l0.676-3.238c0.88-4.218,2.865-7.474,5.902-9.677  c3.934-2.855,8.156-4.303,12.552-4.303c4.856,0,8.831,1.249,12.508,3.931c3.399,2.482,5.349,6.492,5.349,11.002  C68.188,39.642,67.55,41.727,66.238,43.808z"),i(t,"height","20px"),i(t,"width","20px"),i(t,"class","align-top inline"),i(t,"fill","#A2A2A2"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),i(t,"version","1.1"),i(t,"x","0px"),i(t,"y","0px"),i(t,"viewBox","0 0 100 100"),i(t,"enable-background","new 0 0 100 100"),i(t,"xml:space","preserve")},m(e,s){u(e,t,s),d(t,n)},p:g,i:g,o:g,d(e){e&&c(t)}}}class ee extends n{constructor(e){super(),s(this,e,null,W,a,{})}}function te(e){let t,n;return{c(){t=o("svg"),n=o("path"),this.h()},l(e){t=r(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var s=l(t);n=r(s,"path",{d:!0},1),l(n).forEach(c),s.forEach(c),this.h()},h(){i(n,"d","M50,5C25.147,5,5,25.147,5,50c0,24.852,20.147,45,45,45c24.854,0,45-20.148,45-45C95,25.147,74.854,5,50,5z M70.243,70.24  c-1.173,1.172-2.708,1.758-4.243,1.758s-3.07-0.586-4.242-1.757L50,58.484L38.243,70.242C37.071,71.414,35.536,72,34,72  s-3.071-0.586-4.243-1.757c-2.343-2.345-2.343-6.144,0-8.485L41.515,50L29.757,38.242c-2.343-2.343-2.343-6.142,0-8.485  c2.343-2.343,6.142-2.343,8.485,0L50,41.514l11.756-11.757c2.344-2.343,6.145-2.343,8.485,0c2.344,2.343,2.344,6.142,0.001,8.485  L58.486,49.999l11.756,11.756C72.586,64.1,72.586,67.898,70.243,70.24z"),i(t,"height","20px"),i(t,"width","20px"),i(t,"class","align-top inline"),i(t,"fill","#FF0000"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),i(t,"version","1.1"),i(t,"x","0px"),i(t,"y","0px"),i(t,"viewBox","0 0 100 100"),i(t,"enable-background","new 0 0 100 100"),i(t,"xml:space","preserve")},m(e,s){u(e,t,s),d(t,n)},p:g,i:g,o:g,d(e){e&&c(t)}}}class ne extends n{constructor(e){super(),s(this,e,null,te,a,{})}}function se(e,t,n){const s=e.slice();return s[12]=t[n],s}function ae(e){let t;const n=e[7].default,s=I(n,e,e[6],null);return{c(){s&&s.c()},l(e){s&&s.l(e)},m(e,n){s&&s.m(e,n),t=!0},p(e,a){s&&s.p&&(!t||64&a)&&f(s,n,e,e[6],a,null,null)},i(e){t||(m(s,e),t=!0)},o(e){p(s,e),t=!1},d(e){s&&s.d(e)}}}function oe(e){let t,n,s,a,o,g,f,k,_,j,T,N,I,z,L,C,D,M,S,V,O,B,P,A,R,q,K,U,J,Y,H,Q=e[0].properties.Street+"",Z=e[0].properties.CityName+"",G=e[0].properties.CountyName+"",X=e[0].properties.StateName+"",F=e[0].properties["Number of accidents"]+"",W=e[0].properties["Total Killed"]+"",ee=e[0].properties["Total injured"]+"";const te=[ce,le,re],ne=[];function se(e,t){return"Yes"===e[0].properties["Meets minimum safety guidelines"]?0:"No"===e[0].properties["Meets minimum safety guidelines"]?1:2}z=se(e),L=ne[z]=te[z](e);let ae=e[3]&&ie(e);return{c(){t=h("div"),n=h("div"),s=h("h3"),a=y(Q),o=x(),g=h("h3"),f=y(Z),k=y(", "),_=y(G),j=y(", "),T=y(X),N=x(),I=h("p"),L.c(),C=x(),D=h("p"),M=y(F),S=y(" Accidents"),V=x(),O=h("p"),B=y(W),P=y(" Killed"),A=x(),R=h("p"),q=y(ee),K=y(" Injured"),U=x(),J=h("div"),Y=h("dl"),ae&&ae.c(),this.h()},l(e){t=r(e,"DIV",{class:!0});var i=l(t);n=r(i,"DIV",{class:!0});var u=l(n);s=r(u,"H3",{class:!0});var d=l(s);a=v(d,Q),d.forEach(c),o=b(u),g=r(u,"H3",{class:!0});var m=l(g);f=v(m,Z),k=v(m,", "),_=v(m,G),j=v(m,", "),T=v(m,X),m.forEach(c),N=b(u),I=r(u,"P",{class:!0});var p=l(I);L.l(p),p.forEach(c),C=b(u),D=r(u,"P",{class:!0});var h=l(D);M=v(h,F),S=v(h," Accidents"),h.forEach(c),V=b(u),O=r(u,"P",{class:!0});var y=l(O);B=v(y,W),P=v(y," Killed"),y.forEach(c),A=b(u),R=r(u,"P",{class:!0});var x=l(R);q=v(x,ee),K=v(x," Injured"),x.forEach(c),u.forEach(c),U=b(i),J=r(i,"DIV",{class:!0});var w=l(J);Y=r(w,"DL",{class:!0});var $=l(Y);ae&&ae.l($),$.forEach(c),w.forEach(c),i.forEach(c),this.h()},h(){i(s,"class","text-lg leading-6 font-medium text-gray-900"),i(g,"class","text-md leading-6 font-medium text-gray-600 mb-2"),i(I,"class","font-bold my-0 pt-1 pb-3 max-w-2xl text-sm text-gray-600"),i(D,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(O,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(R,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(n,"class","px-4 py-4 sm:px-6"),i(Y,"class","divide-y divide-gray-200"),i(J,"class","border-t border-gray-200 px-4 py-2 sm:py-4 sm:p-0"),i(t,"class","bg-white shadow overflow-hidden sm:rounded-lg absolute top-16 right-0 mt-4 mr-4 w-1/2 lg:w-1/3 pb-2")},m(e,r){u(e,t,r),d(t,n),d(n,s),d(s,a),d(n,o),d(n,g),d(g,f),d(g,k),d(g,_),d(g,j),d(g,T),d(n,N),d(n,I),ne[z].m(I,null),d(n,C),d(n,D),d(D,M),d(D,S),d(n,V),d(n,O),d(O,B),d(O,P),d(n,A),d(n,R),d(R,q),d(R,K),d(t,U),d(t,J),d(J,Y),ae&&ae.m(Y,null),H=!0},p(e,t){(!H||1&t)&&Q!==(Q=e[0].properties.Street+"")&&w(a,Q),(!H||1&t)&&Z!==(Z=e[0].properties.CityName+"")&&w(f,Z),(!H||1&t)&&G!==(G=e[0].properties.CountyName+"")&&w(_,G),(!H||1&t)&&X!==(X=e[0].properties.StateName+"")&&w(T,X);let n=z;z=se(e),z!==n&&($(),p(ne[n],1,1,(()=>{ne[n]=null})),E(),L=ne[z],L||(L=ne[z]=te[z](e),L.c()),m(L,1),L.m(I,null)),(!H||1&t)&&F!==(F=e[0].properties["Number of accidents"]+"")&&w(M,F),(!H||1&t)&&W!==(W=e[0].properties["Total Killed"]+"")&&w(B,W),(!H||1&t)&&ee!==(ee=e[0].properties["Total injured"]+"")&&w(q,ee),e[3]?ae?ae.p(e,t):(ae=ie(e),ae.c(),ae.m(Y,null)):ae&&(ae.d(1),ae=null)},i(e){H||(m(L),H=!0)},o(e){p(L),H=!1},d(e){e&&c(t),ne[z].d(),ae&&ae.d()}}}function re(e){let t,n,s;return t=new ee({}),{c(){z(t.$$.fragment),n=y(" May or may not meet minimum safety guidelines")},l(e){L(t.$$.fragment,e),n=v(e," May or may not meet minimum safety guidelines")},m(e,a){C(t,e,a),u(e,n,a),s=!0},i(e){s||(m(t.$$.fragment,e),s=!0)},o(e){p(t.$$.fragment,e),s=!1},d(e){D(t,e),e&&c(n)}}}function le(e){let t,n,s;return t=new ne({}),{c(){z(t.$$.fragment),n=y(" Does not meet minimum safety guidelines")},l(e){L(t.$$.fragment,e),n=v(e," Does not meet minimum safety guidelines")},m(e,a){C(t,e,a),u(e,n,a),s=!0},i(e){s||(m(t.$$.fragment,e),s=!0)},o(e){p(t.$$.fragment,e),s=!1},d(e){D(t,e),e&&c(n)}}}function ce(e){let t,n,s;return t=new F({}),{c(){z(t.$$.fragment),n=y(" Meets minimum safety guidelines")},l(e){L(t.$$.fragment,e),n=v(e," Meets minimum safety guidelines")},m(e,a){C(t,e,a),u(e,n,a),s=!0},i(e){s||(m(t.$$.fragment,e),s=!0)},o(e){p(t.$$.fragment,e),s=!1},d(e){D(t,e),e&&c(n)}}}function ie(e){let t,n=e[3],s=[];for(let a=0;a<n.length;a+=1)s[a]=ue(se(e,n,a));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=k()},l(e){for(let t=0;t<s.length;t+=1)s[t].l(e);t=k()},m(e,n){for(let t=0;t<s.length;t+=1)s[t].m(e,n);u(e,t,n)},p(e,a){if(24&a){let o;for(n=e[3],o=0;o<n.length;o+=1){const r=se(e,n,o);s[o]?s[o].p(r,a):(s[o]=ue(r),s[o].c(),s[o].m(t.parentNode,t))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(e){_(s,e),e&&c(t)}}}function ue(e){let t,n,s,a,o,g,f,m=(e[4][e[12].key]||e[12].key)+"",p=e[12].value+"";return{c(){t=h("div"),n=h("dt"),s=y(m),a=x(),o=h("dd"),g=y(p),f=x(),this.h()},l(e){t=r(e,"DIV",{class:!0});var i=l(t);n=r(i,"DT",{class:!0});var u=l(n);s=v(u,m),u.forEach(c),a=b(i),o=r(i,"DD",{class:!0});var d=l(o);g=v(d,p),d.forEach(c),f=b(i),i.forEach(c),this.h()},h(){i(n,"class","text-sm font-medium text-gray-500"),i(o,"class","text-sm text-gray-900 mt-0 col-span-1"),i(t,"class","py-1 sm:py-2 grid grid-cols-2 gap-2 sm:px-6")},m(e,r){u(e,t,r),d(t,n),d(n,s),d(t,a),d(t,o),d(o,g),d(t,f)},p(e,t){8&t&&m!==(m=(e[4][e[12].key]||e[12].key)+"")&&w(s,m),8&t&&p!==(p=e[12].value+"")&&w(g,p)},d(e){e&&c(t)}}}function de(e){let t,n,s,a=e[2]&&ae(e),o=e[0]&&oe(e);return{c(){t=h("div"),a&&a.c(),n=x(),o&&o.c(),this.h()},l(e){t=r(e,"DIV",{class:!0});var s=l(t);a&&a.l(s),n=b(s),o&&o.l(s),s.forEach(c),this.h()},h(){i(t,"class","flex-grow z-0 h-full")},m(r,l){u(r,t,l),a&&a.m(t,null),d(t,n),o&&o.m(t,null),e[8](t),s=!0},p(e,[s]){e[2]?a?(a.p(e,s),4&s&&m(a,1)):(a=ae(e),a.c(),m(a,1),a.m(t,n)):a&&($(),p(a,1,1,(()=>{a=null})),E()),e[0]?o?(o.p(e,s),1&s&&m(o,1)):(o=oe(e),o.c(),m(o,1),o.m(t,null)):o&&($(),p(o,1,1,(()=>{o=null})),E())},i(e){s||(m(a),m(o),s=!0)},o(e){p(a),p(o),s=!1},d(n){n&&c(t),a&&a.d(),o&&o.d(),e[8](null)}}}function ge(e,t,n){let s;j(e,Z,(e=>n(10,s=e)));let a,o,r,l,{$$slots:c={},$$scope:i}=t,{center:u}=t,d=null;const g=["id","CrossingID","Total Killed","Total injured","Number of accidents","Latitude","Longitude","Street","CityName","CountyName","StateName","Meets minimum safety guidelines"];return T(H,{getMap:()=>o}),T(Q,{getMapbox:()=>r}),N((async()=>{r=window.mapboxgl,r.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(2,o=new r.Map({container:a,style:"mapbox://styles/mapbox/light-v10",center:u||s.lngLat,zoom:u?15:s.zoom,minZoom:3,maxZoom:20})),o.addControl(new MapboxGeocoder({accessToken:r.accessToken,mapboxgl:r}),"top-right"),o.on("load",(()=>{o.resize(),o.addSource("railroad_crossing_incidents",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incidents/{z}/{x}/{y}.pbf"]}),o.addLayer({id:"railroad_crossing_incidents",type:"circle",source:"railroad_crossing_incidents","source-layer":"railroad_crossing_incidents",layout:{},paint:{"circle-radius":["case",["has","sqrt_point_count"],["-",["get","sqrt_point_count"],10],5],"circle-color":["case",["==",["get","Number of accidents"],0],"blue","red"]}})})),u&&setTimeout((()=>{const e=o.project(u),t=o.queryRenderedFeatures([[e.x-5,e.y-5],[e.x+5,e.y+5]],{layers:["railroad_crossing_incidents"]});1===t.length&&n(0,d=t[0])}),1100);let e=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1});return o.on("mouseenter","railroad_crossing_incidents",(function(t){o.getCanvas().style.cursor="pointer";const n=t.features[0],s=n.properties,a=n.geometry.coordinates.slice();for(;Math.abs(t.lngLat.lng-a[0])>180;)a[0]+=t.lngLat.lng>a[0]?360:-360;if(s.point_count&&s.point_count>-2){const t=`${s.point_count} locations`;e.setLngLat(a).setHTML(t).addTo(o)}})),o.on("mouseleave","railroad_crossing_incidents",(function(){o.getCanvas().style.cursor="",e.remove()})),o.on("click","railroad_crossing_incidents",(async function(e){const t=e.features[0],{point_count:s}=t.properties;if(s){const e=o.getZoom()+2;o.flyTo({center:t.geometry.coordinates,zoom:e}),n(0,d=null)}else n(0,d=e.features[0])})),()=>{n(2,o=null)}})),e.$$set=e=>{"center"in e&&n(5,u=e.center),"$$scope"in e&&n(6,i=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&d&&n(3,l=Object.keys(d.properties).filter((e=>!g.find((t=>t.includes(e))))).map((e=>({key:e,value:d.properties[e]}))))},[d,a,o,l,{CountyName:"County",CityName:"City",StateName:"State"},u,i,c,function(e){M[e?"unshift":"push"]((()=>{a=e,n(1,a)}))}]}class fe extends n{constructor(e){super(),s(this,e,ge,de,a,{center:5})}}function me(e,t,n){const s=e.slice();return s[10]=t[n],s}function pe(e,t,n){const s=e.slice();return s[13]=t[n],s}function he(e,t,n){const s=e.slice();return s[16]=t[n],s}function ye(e){let t,n,s,a,o,g=e[16]+"";function f(){return e[4](e[16])}return{c(){t=h("th"),n=y(g),s=x(),this.h()},l(e){t=r(e,"TH",{scope:!0,class:!0});var a=l(t);n=v(a,g),s=b(a),a.forEach(c),this.h()},h(){i(t,"scope","col"),i(t,"class","px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider")},m(e,r){u(e,t,r),d(t,n),d(t,s),a||(o=S(t,"click",f),a=!0)},p(t,n){e=t},d(e){e&&c(t),a=!1,o()}}}function xe(e){let t,n=e[13].value+"";return{c(){t=y(n)},l(e){t=v(e,n)},m(e,n){u(e,t,n)},p(e,s){1&s&&n!==(n=e[13].value+"")&&w(t,n)},i:g,o:g,d(e){e&&c(t)}}}function ve(e){let t,n,s,a;const o=[Ee,$e,we],r=[];function l(e,t){return"Yes"===e[13].value?0:"No"===e[13].value?1:2}return t=l(e),n=r[t]=o[t](e),{c(){n.c(),s=k()},l(e){n.l(e),s=k()},m(e,n){r[t].m(e,n),u(e,s,n),a=!0},p(e,a){let c=t;t=l(e),t!==c&&($(),p(r[c],1,1,(()=>{r[c]=null})),E(),n=r[t],n||(n=r[t]=o[t](e),n.c()),m(n,1),n.m(s.parentNode,s))},i(e){a||(m(n),a=!0)},o(e){p(n),a=!1},d(e){r[t].d(e),e&&c(s)}}}function be(e){let t,n,s,a;function o(){return e[5](e[13])}return{c(){t=h("button"),n=y("View on map"),this.h()},l(e){t=r(e,"BUTTON",{class:!0});var s=l(t);n=v(s,"View on map"),s.forEach(c),this.h()},h(){i(t,"class","text-gray-600 hover:text-blue-600 hover:shadow-sm bg-gray-50 hover:bg-gray-100 p-2")},m(e,r){u(e,t,r),d(t,n),s||(a=S(t,"click",o),s=!0)},p(t,n){e=t},i:g,o:g,d(e){e&&c(t),s=!1,a()}}}function we(e){let t,n,s;return t=new ee({}),{c(){z(t.$$.fragment),n=y(" Info unavailable")},l(e){L(t.$$.fragment,e),n=v(e," Info unavailable")},m(e,a){C(t,e,a),u(e,n,a),s=!0},i(e){s||(m(t.$$.fragment,e),s=!0)},o(e){p(t.$$.fragment,e),s=!1},d(e){D(t,e),e&&c(n)}}}function $e(e){let t,n,s;return t=new ne({}),{c(){z(t.$$.fragment),n=y(" No")},l(e){L(t.$$.fragment,e),n=v(e," No")},m(e,a){C(t,e,a),u(e,n,a),s=!0},i(e){s||(m(t.$$.fragment,e),s=!0)},o(e){p(t.$$.fragment,e),s=!1},d(e){D(t,e),e&&c(n)}}}function Ee(e){let t,n,s;return t=new F({}),{c(){z(t.$$.fragment),n=y(" Yes")},l(e){L(t.$$.fragment,e),n=v(e," Yes")},m(e,a){C(t,e,a),u(e,n,a),s=!0},i(e){s||(m(t.$$.fragment,e),s=!0)},o(e){p(t.$$.fragment,e),s=!1},d(e){D(t,e),e&&c(n)}}}function ke(e){let t,n,s,a;const o=[be,ve,xe],d=[];function g(e,t){return"Map view"===e[13].key?0:"Meets minimum safety guidelines"===e[13].key?1:2}return n=g(e),s=d[n]=o[n](e),{c(){t=h("td"),s.c(),this.h()},l(e){t=r(e,"TD",{class:!0});var n=l(t);s.l(n),n.forEach(c),this.h()},h(){i(t,"class","px-6 py-4 text-left whitespace-nowrap text-sm font-medium text-gray-900")},m(e,s){u(e,t,s),d[n].m(t,null),a=!0},p(e,a){let r=n;n=g(e),n===r?d[n].p(e,a):($(),p(d[r],1,1,(()=>{d[r]=null})),E(),s=d[n],s?s.p(e,a):(s=d[n]=o[n](e),s.c()),m(s,1),s.m(t,null))},i(e){a||(m(s),a=!0)},o(e){p(s),a=!1},d(e){e&&c(t),d[n].d()}}}function _e(e){let t,n,s,a=e[10],o=[];for(let r=0;r<a.length;r+=1)o[r]=ke(pe(e,a,r));const i=e=>p(o[e],1,1,(()=>{o[e]=null}));return{c(){t=h("tr");for(let e=0;e<o.length;e+=1)o[e].c();n=x()},l(e){t=r(e,"TR",{});var s=l(t);for(let t=0;t<o.length;t+=1)o[t].l(s);n=b(s),s.forEach(c)},m(e,a){u(e,t,a);for(let n=0;n<o.length;n+=1)o[n].m(t,null);d(t,n),s=!0},p(e,s){if(9&s){let r;for(a=e[10],r=0;r<a.length;r+=1){const l=pe(e,a,r);o[r]?(o[r].p(l,s),m(o[r],1)):(o[r]=ke(l),o[r].c(),m(o[r],1),o[r].m(t,n))}for($(),r=a.length;r<o.length;r+=1)i(r);E()}},i(e){if(!s){for(let e=0;e<a.length;e+=1)m(o[e]);s=!0}},o(e){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)p(o[t]);s=!1},d(e){e&&c(t),_(o,e)}}}function je(e){let t,n,s,a,o,g,f,y,v,w,k=e[1],j=[];for(let r=0;r<k.length;r+=1)j[r]=ye(he(e,k,r));let T=e[0],N=[];for(let r=0;r<T.length;r+=1)N[r]=_e(me(e,T,r));const I=e=>p(N[e],1,1,(()=>{N[e]=null}));return{c(){t=h("div"),n=h("div"),s=h("div"),a=h("div"),o=h("table"),g=h("thead"),f=h("tr");for(let e=0;e<j.length;e+=1)j[e].c();y=x(),v=h("tbody");for(let e=0;e<N.length;e+=1)N[e].c();this.h()},l(e){t=r(e,"DIV",{class:!0});var i=l(t);n=r(i,"DIV",{class:!0});var u=l(n);s=r(u,"DIV",{class:!0});var d=l(s);a=r(d,"DIV",{class:!0});var m=l(a);o=r(m,"TABLE",{class:!0});var p=l(o);g=r(p,"THEAD",{class:!0});var h=l(g);f=r(h,"TR",{});var x=l(f);for(let t=0;t<j.length;t+=1)j[t].l(x);x.forEach(c),h.forEach(c),y=b(p),v=r(p,"TBODY",{class:!0});var w=l(v);for(let t=0;t<N.length;t+=1)N[t].l(w);w.forEach(c),p.forEach(c),m.forEach(c),d.forEach(c),u.forEach(c),i.forEach(c),this.h()},h(){i(g,"class","bg-gray-50"),i(v,"class","divide-y divide-gray-200"),i(o,"class","min-w-full divide-y divide-gray-200"),i(a,"class","shadow border-b border-gray-200 sm:rounded-lg"),i(s,"class","align-middle inline-block min-w-full"),i(n,"class",""),i(t,"class","flex flex-col h-full overflow-scroll")},m(e,r){u(e,t,r),d(t,n),d(n,s),d(s,a),d(a,o),d(o,g),d(g,f);for(let t=0;t<j.length;t+=1)j[t].m(f,null);d(o,y),d(o,v);for(let t=0;t<N.length;t+=1)N[t].m(v,null);w=!0},p(e,[t]){if(6&t){let n;for(k=e[1],n=0;n<k.length;n+=1){const s=he(e,k,n);j[n]?j[n].p(s,t):(j[n]=ye(s),j[n].c(),j[n].m(f,null))}for(;n<j.length;n+=1)j[n].d(1);j.length=k.length}if(9&t){let n;for(T=e[0],n=0;n<T.length;n+=1){const s=me(e,T,n);N[n]?(N[n].p(s,t),m(N[n],1)):(N[n]=_e(s),N[n].c(),m(N[n],1),N[n].m(v,null))}for($(),n=T.length;n<N.length;n+=1)I(n);E()}},i(e){if(!w){for(let e=0;e<T.length;e+=1)m(N[e]);w=!0}},o(e){N=N.filter(Boolean);for(let t=0;t<N.length;t+=1)p(N[t]);w=!1},d(e){e&&c(t),_(j,e),_(N,e)}}}function Te(e,t,n){let{rows:s}=t;const a=s[0].map((e=>e.key)),o=V();function r(e){o("sort",{column:e,direction:!0})}function l(e){console.log("huh"),o("viewLocation",e)}return e.$$set=e=>{"rows"in e&&n(0,s=e.rows)},[s,a,r,l,e=>{r(e)},e=>{console.log("what"),l(e.value)}]}class Ne extends n{constructor(e){super(),s(this,e,Te,je,a,{rows:0})}}function Ie(e){let t;const n=e[5].default,s=I(n,e,e[4],null);return{c(){s&&s.c()},l(e){s&&s.l(e)},m(e,n){s&&s.m(e,n),t=!0},p(e,a){s&&s.p&&(!t||16&a)&&f(s,n,e,e[4],a,null,null)},i(e){t||(m(s,e),t=!0)},o(e){p(s,e),t=!1},d(e){s&&s.d(e)}}}function ze(e){let t,n,s,a,o,g,f,w,k,_,j,T,N,I,z=e[1]&&Ie(e);return{c(){t=h("div"),z&&z.c(),n=x(),s=h("div"),a=h("button"),o=y("Accidents"),g=x(),f=h("button"),w=y("Killed"),k=x(),_=h("button"),j=y("Injured"),this.h()},l(e){t=r(e,"DIV",{class:!0});var i=l(t);z&&z.l(i),n=b(i),s=r(i,"DIV",{class:!0});var u=l(s);a=r(u,"BUTTON",{type:!0,class:!0});var d=l(a);o=v(d,"Accidents"),d.forEach(c),g=b(u),f=r(u,"BUTTON",{type:!0,class:!0});var m=l(f);w=v(m,"Killed"),m.forEach(c),k=b(u),_=r(u,"BUTTON",{type:!0,class:!0});var p=l(_);j=v(p,"Injured"),p.forEach(c),u.forEach(c),i.forEach(c),this.h()},h(){i(a,"type","button"),i(a,"class","\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-l-md\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(a,"selected","accidents"===e[2]),i(f,"type","button"),i(f,"class","\n        -ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(f,"selected","killed"===e[2]),i(_,"type","button"),i(_,"class","\n        -ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-r-md\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(_,"selected","injured"===e[2]),i(s,"class","relative z-10 inline-flex shadow-sm rounded-md top-2 left-2"),i(t,"class","flex-grow z-0 h-full")},m(r,l){u(r,t,l),z&&z.m(t,null),d(t,n),d(t,s),d(s,a),d(a,o),d(s,g),d(s,f),d(f,w),d(s,k),d(s,_),d(_,j),e[9](t),T=!0,N||(I=[S(a,"click",e[6]),S(f,"click",e[7]),S(_,"click",e[8])],N=!0)},p(e,[s]){e[1]?z?(z.p(e,s),2&s&&m(z,1)):(z=Ie(e),z.c(),m(z,1),z.m(t,n)):z&&($(),p(z,1,1,(()=>{z=null})),E()),4&s&&O(a,"selected","accidents"===e[2]),4&s&&O(f,"selected","killed"===e[2]),4&s&&O(_,"selected","injured"===e[2])},i(e){T||(m(z),T=!0)},o(e){p(z),T=!1},d(n){n&&c(t),z&&z.d(),e[9](null),N=!1,B(I)}}}function Le(e,t,n){let s;j(e,G,(e=>n(11,s=e)));let a,o,r,{$$slots:l={},$$scope:c}=t,i="accidents";function u(e){let t;console.log("prop",e),n(2,i=e),"accidents"===e?t=[[0,"#fcde9c"],[500,"#faa476"],[1e3,"#f0746e"],[2e3,"#e34f6f"],[4e3,"#dc3977"],[8e3,"#b9257a"],[16e3,"#7c1d6f"]]:"killed"===e?t=[[0,"#fcde9c"],[250,"#faa476"],[500,"#f0746e"],[750,"#e34f6f"],[1e3,"#dc3977"],[1250,"#b9257a"],[1500,"#7c1d6f"]]:"injured"===e&&(t=[[0,"#fcde9c"],[825,"#faa476"],[1750,"#f0746e"],[2625,"#e34f6f"],[3500,"#dc3977"],[4375,"#b9257a"],[6175,"#7c1d6f"]]),o.setPaintProperty("state_totals","fill-color",{property:i,stops:t})}T(H,{getMap:()=>o}),T(Q,{getMapbox:()=>r}),N((async()=>{r=window.mapboxgl,r.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(1,o=new r.Map({container:a,style:"mapbox://styles/mapbox/light-v10",center:s.lngLat,zoom:s.zoom,minZoom:0,maxZoom:8})),o.on("load",(()=>{o.resize(),o.addSource("state_totals",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incident-totals/states/{z}/{x}/{y}.pbf"]}),o.addLayer({id:"state_totals",type:"fill",source:"state_totals","source-layer":"state_totals",layout:{},paint:{"fill-color":{property:i,stops:[[0,"#fcde9c"],[500,"#faa476"],[1e3,"#f0746e"],[2e3,"#e34f6f"],[4e3,"#dc3977"],[8e3,"#b9257a"],[16e3,"#7c1d6f"]]},"fill-opacity":["case",["boolean",["feature-state","hover"],!1],1,.8]}}),o.addLayer({id:"state_totals_lines",type:"line",source:"state_totals","source-layer":"state_totals",layout:{},paint:{"line-color":"#444","line-width":2}})}));let e=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1});return o.on("mouseenter","state_totals",(function(e){o.getCanvas().style.cursor="pointer"})),o.on("mouseleave","state_totals",(function(){o.getCanvas().style.cursor="",e.remove()})),o.on("click","state_totals",(async function(t){const n=t.features[0],s=n.properties;console.log("feature",n,t);const a=t.lngLat;for(;Math.abs(t.lngLat.lng-a[0])>180;)a[0]+=t.lngLat.lng>a[0]?360:-360;const r=`<div class="pa-4 rounded">\n        <h1 class="font-bold text-xl">${s.name}</h1>\n        <ul class="text-lg">\n          <li>${s.accidents} accidents</li>\n          <li>${s.killed} killed</li>\n          <li>${s.injured} injured</li>\n        </ul>\n      </div>`;e.setLngLat(a).setHTML(r).addTo(o)})),()=>{n(1,o=null)}}));return e.$$set=e=>{"$$scope"in e&&n(4,c=e.$$scope)},[a,o,i,u,c,l,()=>{u("accidents")},()=>{u("killed")},()=>{u("injured")},function(e){M[e?"unshift":"push"]((()=>{a=e,n(0,a)}))}]}class Ce extends n{constructor(e){super(),s(this,e,Le,ze,a,{})}}function De(e){let t;const n=e[5].default,s=I(n,e,e[4],null);return{c(){s&&s.c()},l(e){s&&s.l(e)},m(e,n){s&&s.m(e,n),t=!0},p(e,a){s&&s.p&&(!t||16&a)&&f(s,n,e,e[4],a,null,null)},i(e){t||(m(s,e),t=!0)},o(e){p(s,e),t=!1},d(e){s&&s.d(e)}}}function Me(e){let t,n,s,a,o,g,f,w,k,_,j,T,N,I,z=e[1]&&De(e);return{c(){t=h("div"),z&&z.c(),n=x(),s=h("div"),a=h("button"),o=y("Accidents"),g=x(),f=h("button"),w=y("Killed"),k=x(),_=h("button"),j=y("Injured"),this.h()},l(e){t=r(e,"DIV",{class:!0});var i=l(t);z&&z.l(i),n=b(i),s=r(i,"DIV",{class:!0});var u=l(s);a=r(u,"BUTTON",{type:!0,class:!0});var d=l(a);o=v(d,"Accidents"),d.forEach(c),g=b(u),f=r(u,"BUTTON",{type:!0,class:!0});var m=l(f);w=v(m,"Killed"),m.forEach(c),k=b(u),_=r(u,"BUTTON",{type:!0,class:!0});var p=l(_);j=v(p,"Injured"),p.forEach(c),u.forEach(c),i.forEach(c),this.h()},h(){i(a,"type","button"),i(a,"class","\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-l-md\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(a,"selected","accidents"===e[2]),i(f,"type","button"),i(f,"class","\n        -ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(f,"selected","killed"===e[2]),i(_,"type","button"),i(_,"class","\n        -ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-r-md\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(_,"selected","injured"===e[2]),i(s,"class","relative z-10 inline-flex shadow-sm rounded-md top-2 left-2"),i(t,"class","flex-grow z-0 h-full")},m(r,l){u(r,t,l),z&&z.m(t,null),d(t,n),d(t,s),d(s,a),d(a,o),d(s,g),d(s,f),d(f,w),d(s,k),d(s,_),d(_,j),e[9](t),T=!0,N||(I=[S(a,"click",e[6]),S(f,"click",e[7]),S(_,"click",e[8])],N=!0)},p(e,[s]){e[1]?z?(z.p(e,s),2&s&&m(z,1)):(z=De(e),z.c(),m(z,1),z.m(t,n)):z&&($(),p(z,1,1,(()=>{z=null})),E()),4&s&&O(a,"selected","accidents"===e[2]),4&s&&O(f,"selected","killed"===e[2]),4&s&&O(_,"selected","injured"===e[2])},i(e){T||(m(z),T=!0)},o(e){p(z),T=!1},d(n){n&&c(t),z&&z.d(),e[9](null),N=!1,B(I)}}}function Se(e,t,n){let s;j(e,Z,(e=>n(11,s=e)));let a,o,r,{$$slots:l={},$$scope:c}=t,i="accidents";function u(e){n(2,i=e),o.setPaintProperty("county_totals","fill-color",{property:i,stops:[[0,"#fcde9c"],[15,"#faa476"],[30,"#f0746e"],[45,"#e34f6f"],[60,"#dc3977"],[75,"#b9257a"],[90,"#7c1d6f"]]})}T(H,{getMap:()=>o}),T(Q,{getMapbox:()=>r}),N((async()=>{r=window.mapboxgl,r.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(1,o=new r.Map({container:a,style:"mapbox://styles/mapbox/light-v10",center:s.lngLat,zoom:s.zoom,minZoom:7,maxZoom:14})),o.on("load",(()=>{o.resize(),o.addSource("county_totals",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incident-totals/counties/{z}/{x}/{y}.pbf"]}),o.addLayer({id:"county_totals",type:"fill",source:"county_totals","source-layer":"county_totals",layout:{},paint:{"fill-color":{property:i,stops:[[0,"#fcde9c"],[15,"#faa476"],[30,"#f0746e"],[45,"#e34f6f"],[60,"#dc3977"],[75,"#b9257a"],[90,"#7c1d6f"]]},"fill-opacity":["case",["boolean",["feature-state","hover"],!1],1,.8]}}),o.addLayer({id:"county_totals_lines",type:"line",source:"county_totals","source-layer":"county_totals",layout:{},paint:{"line-color":"#444","line-width":2}})}));let e=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1});return o.on("mouseenter","county_totals",(function(e){o.getCanvas().style.cursor="pointer"})),o.on("mouseleave","county_totals",(function(){o.getCanvas().style.cursor="",e.remove()})),o.on("click","county_totals",(async function(t){const n=t.features[0],s=n.properties;console.log("feature",n,t);const a=t.lngLat;for(;Math.abs(t.lngLat.lng-a[0])>180;)a[0]+=t.lngLat.lng>a[0]?360:-360;const r=`<div class="pa-4 rounded">\n        <h1 class="font-bold text-xl">${s.name}</h1>\n        <ul class="text-lg">\n          <li>${s.accidents} accidents</li>\n          <li>${s.killed} killed</li>\n          <li>${s.injured} injured</li>\n        </ul>\n      </div>`;e.setLngLat(a).setHTML(r).addTo(o)})),()=>{n(1,o=null)}}));return e.$$set=e=>{"$$scope"in e&&n(4,c=e.$$scope)},[a,o,i,u,c,l,()=>{u("accidents")},()=>{u("killed")},()=>{u("injured")},function(e){M[e?"unshift":"push"]((()=>{a=e,n(0,a)}))}]}class Ve extends n{constructor(e){super(),s(this,e,Se,Me,a,{})}}function Oe(e){let t,n,s,a;return s=new Ve({}),{c(){t=h("div"),n=h("div"),z(s.$$.fragment),this.h()},l(e){t=r(e,"DIV",{class:!0});var a=l(t);n=r(a,"DIV",{class:!0});var o=l(n);L(s.$$.fragment,o),o.forEach(c),a.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-300 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,o){u(e,t,o),d(t,n),C(s,n,null),a=!0},p:g,i(e){a||(m(s.$$.fragment,e),a=!0)},o(e){p(s.$$.fragment,e),a=!1},d(e){e&&c(t),D(s)}}}function Be(e){let t,n,s,a;return s=new Ce({}),{c(){t=h("div"),n=h("div"),z(s.$$.fragment),this.h()},l(e){t=r(e,"DIV",{class:!0});var a=l(t);n=r(a,"DIV",{class:!0});var o=l(n);L(s.$$.fragment,o),o.forEach(c),a.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-300 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,o){u(e,t,o),d(t,n),C(s,n,null),a=!0},p:g,i(e){a||(m(s.$$.fragment,e),a=!0)},o(e){p(s.$$.fragment,e),a=!1},d(e){e&&c(t),D(s)}}}function Pe(e){let t,n,s,a;return s=new Ne({props:{rows:e[0],columns:e[1]}}),s.$on("filter",Ke),s.$on("sort",Ue),s.$on("search",Je),s.$on("viewLocation",e[5]),{c(){t=h("div"),n=h("div"),z(s.$$.fragment),this.h()},l(e){t=r(e,"DIV",{class:!0});var a=l(t);n=r(a,"DIV",{class:!0});var o=l(n);L(s.$$.fragment,o),o.forEach(c),a.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-300 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,o){u(e,t,o),d(t,n),C(s,n,null),a=!0},p(e,t){const n={};1&t&&(n.rows=e[0]),2&t&&(n.columns=e[1]),s.$set(n)},i(e){a||(m(s.$$.fragment,e),a=!0)},o(e){p(s.$$.fragment,e),a=!1},d(e){e&&c(t),D(s)}}}function Ae(e){let t,n,s,a;return s=new fe({props:{center:e[3]}}),{c(){t=h("div"),n=h("div"),z(s.$$.fragment),this.h()},l(e){t=r(e,"DIV",{class:!0});var a=l(t);n=r(a,"DIV",{class:!0});var o=l(n);L(s.$$.fragment,o),o.forEach(c),a.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-300 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,o){u(e,t,o),d(t,n),C(s,n,null),a=!0},p(e,t){const n={};8&t&&(n.center=e[3]),s.$set(n)},i(e){a||(m(s.$$.fragment,e),a=!0)},o(e){p(s.$$.fragment,e),a=!1},d(e){e&&c(t),D(s)}}}function Re(e){let t,n,s,a,o,g,f,w,k,_,j,T,N,I,z,L,C,D,M,V,O,q,K,U,J,Y,H,Q,Z,G,X,F,W,ee,te,ne,se,ae,oe,re,le,ce,ie,ue,de,ge,fe,me,pe,he,ye,xe,ve,be,we,$e,Ee,ke,_e,je,Te,Ne,Ie,ze,Le,Ce,De,Me,Se;const Ve=[Ae,Pe,Be,Oe],Re=[];function qe(e,t){return"map"===e[2]?0:"list"===e[2]?1:"us-totals"===e[2]?2:"nj-totals"===e[2]?3:-1}return~(Ne=qe(e))&&(Ie=Re[Ne]=Ve[Ne](e)),{c(){t=h("script"),s=h("link"),a=h("script"),g=h("link"),f=x(),w=h("div"),k=h("div"),_=h("h1"),j=y("Railroad Crossing Incidents"),T=x(),N=h("div"),I=h("label"),z=y("Select a visualization"),L=x(),C=h("select"),D=h("option"),M=y("N.J. County totals"),V=h("option"),O=y("U.S. State totals"),q=h("option"),K=y("Map"),U=h("option"),J=y("List"),Y=x(),H=h("div"),Q=h("nav"),Z=h("button"),G=h("span"),X=y("N.J. Totals"),F=x(),W=h("span"),ne=x(),se=h("button"),ae=h("span"),oe=y("U.S. Totals"),re=x(),le=h("span"),ue=x(),de=h("button"),ge=h("span"),fe=y("Map"),me=x(),pe=h("span"),xe=x(),ve=h("button"),be=h("span"),we=y("List"),$e=x(),Ee=h("span"),je=x(),Te=h("div"),Ie&&Ie.c(),ze=x(),Le=h("div"),Ce=y("Credits"),this.h()},l(e){const n=P('[data-svelte="svelte-hlw6vs"]',document.head);t=r(n,"SCRIPT",{src:!0}),l(t).forEach(c),s=r(n,"LINK",{href:!0,rel:!0}),a=r(n,"SCRIPT",{src:!0}),l(a).forEach(c),g=r(n,"LINK",{rel:!0,href:!0,type:!0}),n.forEach(c),f=b(e),w=r(e,"DIV",{class:!0});var o=l(w);k=r(o,"DIV",{class:!0});var i=l(k);_=r(i,"H1",{class:!0});var u=l(_);j=v(u,"Railroad Crossing Incidents"),u.forEach(c),i.forEach(c),T=b(o),N=r(o,"DIV",{class:!0});var d=l(N);I=r(d,"LABEL",{for:!0,class:!0});var m=l(I);z=v(m,"Select a visualization"),m.forEach(c),L=b(d),C=r(d,"SELECT",{id:!0,name:!0,class:!0});var p=l(C);D=r(p,"OPTION",{value:!0});var h=l(D);M=v(h,"N.J. County totals"),h.forEach(c),V=r(p,"OPTION",{value:!0});var y=l(V);O=v(y,"U.S. State totals"),y.forEach(c),q=r(p,"OPTION",{value:!0,selected:!0});var x=l(q);K=v(x,"Map"),x.forEach(c),U=r(p,"OPTION",{value:!0});var $=l(U);J=v($,"List"),$.forEach(c),p.forEach(c),d.forEach(c),Y=b(o),H=r(o,"DIV",{class:!0});var E=l(H);Q=r(E,"NAV",{class:!0,"aria-label":!0});var S=l(Q);Z=r(S,"BUTTON",{class:!0,"aria-current":!0});var B=l(Z);G=r(B,"SPAN",{});var A=l(G);X=v(A,"N.J. Totals"),A.forEach(c),F=b(B),W=r(B,"SPAN",{"aria-hidden":!0,class:!0}),l(W).forEach(c),B.forEach(c),ne=b(S),se=r(S,"BUTTON",{class:!0,"aria-current":!0});var R=l(se);ae=r(R,"SPAN",{});var ee=l(ae);oe=v(ee,"U.S. Totals"),ee.forEach(c),re=b(R),le=r(R,"SPAN",{"aria-hidden":!0,class:!0}),l(le).forEach(c),R.forEach(c),ue=b(S),de=r(S,"BUTTON",{class:!0,"aria-current":!0});var te=l(de);ge=r(te,"SPAN",{});var ce=l(ge);fe=v(ce,"Map"),ce.forEach(c),me=b(te),pe=r(te,"SPAN",{"aria-hidden":!0,class:!0}),l(pe).forEach(c),te.forEach(c),xe=b(S),ve=r(S,"BUTTON",{class:!0,"aria-current":!0});var ie=l(ve);be=r(ie,"SPAN",{});var he=l(be);we=v(he,"List"),he.forEach(c),$e=b(ie),Ee=r(ie,"SPAN",{"aria-hidden":!0,class:!0}),l(Ee).forEach(c),ie.forEach(c),S.forEach(c),E.forEach(c),je=b(o),Te=r(o,"DIV",{class:!0});var ye=l(Te);Ie&&Ie.l(ye),ye.forEach(c),ze=b(o),Le=r(o,"DIV",{class:!0});var ke=l(Le);Ce=v(ke,"Credits"),ke.forEach(c),o.forEach(c),this.h()},h(){document.title="Railroad Crossing Incidents",t.src!==(n="https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js")&&i(t,"src","https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js"),i(s,"href","https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.css"),i(s,"rel","stylesheet"),a.src!==(o="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js")&&i(a,"src","https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js"),i(g,"rel","stylesheet"),i(g,"href","https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.css"),i(g,"type","text/css"),i(_,"class","font-bold text-gray-600"),i(k,"class","flex-none p-4"),i(I,"for","tabs"),i(I,"class","sr-only"),D.__value="nj-totals",D.value=D.__value,V.__value="us-totals",V.value=V.__value,q.__value="map",q.value=q.__value,q.selected=!0,U.__value="list",U.value=U.__value,i(C,"id","tabs"),i(C,"name","tabs"),i(C,"class","block w-full focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 rounded-md"),void 0===e[2]&&R((()=>e[9].call(C))),i(N,"class","flex-none sm:hidden p-4 pt-0"),i(W,"aria-hidden","true"),i(W,"class",ee="\n            "+("nj-totals"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),i(Z,"class",te="\n          "+("nj-totals"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),i(Z,"aria-current","page"),i(le,"aria-hidden","true"),i(le,"class",ce="\n            "+("us-totals"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),i(se,"class",ie="\n          "+("us-totals"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),i(se,"aria-current","page"),i(pe,"aria-hidden","true"),i(pe,"class",he="\n            "+("map"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),i(de,"class",ye="\n          "+("map"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),i(de,"aria-current","page"),i(Ee,"aria-hidden","true"),i(Ee,"class",ke="\n            "+("list"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),i(ve,"class",_e="\n          "+("list"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),i(ve,"aria-current","page"),i(Q,"class","relative z-0 shadow flex divide-x divide-gray-200 border-t border-gray-200 border-"),i(Q,"aria-label","Tabs"),i(H,"class","flex-none hidden sm:block"),i(Te,"class","flex-grow border-t border-gray-300 overflow-hidden"),i(Le,"class","flex-none p-4 text-sm text-gray-500 border border-gray-300"),i(w,"class","flex flex-col h-screen")},m(n,o){d(document.head,t),d(document.head,s),d(document.head,a),d(document.head,g),u(n,f,o),u(n,w,o),d(w,k),d(k,_),d(_,j),d(w,T),d(w,N),d(N,I),d(I,z),d(N,L),d(N,C),d(C,D),d(D,M),d(C,V),d(V,O),d(C,q),d(q,K),d(C,U),d(U,J),A(C,e[2]),d(w,Y),d(w,H),d(H,Q),d(Q,Z),d(Z,G),d(G,X),d(Z,F),d(Z,W),d(Q,ne),d(Q,se),d(se,ae),d(ae,oe),d(se,re),d(se,le),d(Q,ue),d(Q,de),d(de,ge),d(ge,fe),d(de,me),d(de,pe),d(Q,xe),d(Q,ve),d(ve,be),d(be,we),d(ve,$e),d(ve,Ee),d(w,je),d(w,Te),~Ne&&Re[Ne].m(Te,null),d(w,ze),d(w,Le),d(Le,Ce),De=!0,Me||(Se=[S(C,"change",e[9]),S(C,"change",e[10]),S(Z,"click",e[11]),S(se,"click",e[12]),S(de,"click",e[13]),S(ve,"click",e[14])],Me=!0)},p(e,[t]){4&t&&A(C,e[2]),(!De||4&t&&ee!==(ee="\n            "+("nj-totals"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&i(W,"class",ee),(!De||4&t&&te!==(te="\n          "+("nj-totals"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&i(Z,"class",te),(!De||4&t&&ce!==(ce="\n            "+("us-totals"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&i(le,"class",ce),(!De||4&t&&ie!==(ie="\n          "+("us-totals"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&i(se,"class",ie),(!De||4&t&&he!==(he="\n            "+("map"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&i(pe,"class",he),(!De||4&t&&ye!==(ye="\n          "+("map"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&i(de,"class",ye),(!De||4&t&&ke!==(ke="\n            "+("list"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&i(Ee,"class",ke),(!De||4&t&&_e!==(_e="\n          "+("list"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&i(ve,"class",_e);let n=Ne;Ne=qe(e),Ne===n?~Ne&&Re[Ne].p(e,t):(Ie&&($(),p(Re[n],1,1,(()=>{Re[n]=null})),E()),~Ne?(Ie=Re[Ne],Ie?Ie.p(e,t):(Ie=Re[Ne]=Ve[Ne](e),Ie.c()),m(Ie,1),Ie.m(Te,null)):Ie=null)},i(e){De||(m(Ie),De=!0)},o(e){p(Ie),De=!1},d(e){c(t),c(s),c(a),c(g),e&&c(f),e&&c(w),~Ne&&Re[Ne].d(),Me=!1,B(Se)}}}async function qe({fetch:e,page:t}){const n=await e("https://railroad-crossing-data.vercel.app/railroad_crossing_data/RRData.json?StateName__exact=NJ&_sort=CountyName"),s=await n.json();console.log("json",s);const a=["rowid","Latitude","Longitude"],o=["Meets minimum safety guidelines","Total Killed","Total injured","Number of accidents","Street","CityName","CountyName","StateName","Active or Passive?","Distance from highway (feet)","Daily trains","Max train speed","Gates","Lights","Daily traffic","Last time traffic counted","School buses","Bus count","Railroad","CrossingID"];if(n.ok){const e=["link",...s.columns];return{props:{rows:s.rows.map((t=>e.map(((e,n)=>{if(!a.find((t=>t.includes(e))))return"link"===e?{key:"Map view",value:[t[12],t[11]]}:{key:e,value:t[n-1]}})).filter((e=>!!e)).sort(((e,t)=>o.indexOf(e.key)-o.indexOf(t.key))))),columns:e}}}return{status:n.status,error:new Error("Could not load data")}}function Ke(e){console.log("filter",e)}function Ue(e){console.log("sort",e)}function Je(e){console.log("search",e)}function Ye(e,t,n){let s,a,o,r;j(e,J,(e=>n(6,r=e)));let{rows:l}=t,{columns:c}=t,i=r.query.get("view")||"nj-totals";async function u(e){r.query.set("view",e),n(2,i=e);const t=r.query.toString();console.log(`${U}/${r.path}?${t}`),await Y(`${U}?${t}`)}return e.$$set=e=>{"rows"in e&&n(0,l=e.rows),"columns"in e&&n(1,c=e.columns)},e.$$.update=()=>{if(64&e.$$.dirty&&n(7,s=r.query.get("lng")),64&e.$$.dirty&&n(8,a=r.query.get("lat")),384&e.$$.dirty&&n(3,o=s&a?[s,a]:null),68&e.$$.dirty&&"map"!==i&&(r.query.has("lng")||r.query.has("lat"))){r.query.delete("lng"),r.query.delete("lat");const e=r.query.toString();console.log("not the map",e),Y(`${U}?${e}`)}},[l,c,i,o,u,function(e){const[t,s]=e.detail;r.query.set("lng",t),r.query.set("lat",s),n(3,o=[t,s]),u("map")},r,s,a,function(){i=q(this),n(2,i)},e=>{u(e.target.value)},()=>{u("nj-totals")},()=>{u("us-totals")},()=>{u("map")},()=>{u("list")}]}export default class extends n{constructor(e){super(),s(this,e,Ye,Re,a,{rows:0,columns:1})}}export{qe as load};

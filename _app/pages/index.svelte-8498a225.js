import{H as e,C as t,S as n,i as s,s as r,I as a,c as o,a as l,d as i,b as c,f as d,F as u,G as f,e as m,t as h,g as p,h as g,k as x,n as y,J as b,K as v,E as w,v as $,r as E,j as k,m as N,o as I,B as C,u as T,w as _,L as S,x as D,z as j,D as V,M as A,l as P,N as z,O as M,P as L,Q as R,R as O,T as B,U,V as q,W as K}from"../chunks/vendor-4e4be06d.js";import{r as F,b as H}from"../chunks/paths-7dc55c62.js";function G(e){const t=["rowid","Latitude","Longitude","Active or Passive?","geometry","undefined"],n=["CityName","Street","Number of accidents","Total Killed","Total injured","Meets federal safety guidelines","StateName","CountyName","Distance from highway (feet)","Daily trains","Max train speed","Gates","Lights","Daily traffic","Last time traffic counted","School buses","Bus count","Railroad","CrossingID"],s=["link",...e.columns];return{rows:e.rows.map((e=>s.map(((n,s)=>{if(!t.find((e=>e.includes(n))))return"link"===n?{key:"Map view",value:[e[12],e[11]]}:{key:n,value:e[s-1]}})).filter((e=>!!e)).sort(((e,t)=>n.indexOf(e.key)-n.indexOf(t.key))))),columns:s}}const J={subscribe:t=>(()=>{const t=e("__svelte__");return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:t.navigating.subscribe}},session:t.session}})().page.subscribe(t)},Y=async function(e,t){return F.goto(e,t,[])};const W={},Q={},X=t({zoom:7.5,lngLat:["-74.558333","40.16"]}),Z=t({zoom:2,lngLat:["-98.5556","39.8097"]}),ee=t(!0);function te(e){let t,n;return{c(){t=a("svg"),n=a("path"),this.h()},l(e){t=o(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var s=l(t);n=o(s,"path",{d:!0},1),l(n).forEach(i),s.forEach(i),this.h()},h(){c(n,"d","M50,5C25.147,5,5,25.148,5,50c0,24.852,20.147,45,45,45c24.854,0,45-20.148,45-45C95,25.148,74.854,5,50,5z M74.675,38.917  l-23.75,29.511c-1.109,1.379-2.756,2.252-4.517,2.396c-0.173,0.015-0.347,0.021-0.52,0.021c-1.585,0-3.138-0.589-4.326-1.652  L25.985,55.17c-2.463-2.217-2.661-6.01-0.444-8.473c2.218-2.463,6.012-2.662,8.474-0.444l11.223,10.103l20.088-24.961  c2.078-2.582,5.855-2.989,8.438-0.913C76.344,32.558,76.752,36.335,74.675,38.917z"),c(t,"height","20px"),c(t,"width","20px"),c(t,"class","align-top inline"),c(t,"fill","#4CE600"),c(t,"xmlns","http://www.w3.org/2000/svg"),c(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),c(t,"version","1.1"),c(t,"x","0px"),c(t,"y","0px"),c(t,"viewBox","0 0 100 100"),c(t,"enable-background","new 0 0 100 100"),c(t,"xml:space","preserve")},m(e,s){d(e,t,s),u(t,n)},p:f,i:f,o:f,d(e){e&&i(t)}}}class ne extends n{constructor(e){super(),s(this,e,null,te,r,{})}}function se(e){let t,n;return{c(){t=a("svg"),n=a("path"),this.h()},l(e){t=o(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var s=l(t);n=o(s,"path",{d:!0},1),l(n).forEach(i),s.forEach(i),this.h()},h(){c(n,"d","M50,5C25.147,5,5,25.147,5,50c0,24.854,20.147,45,45,45c24.854,0,45-20.146,45-45C95,25.147,74.854,5,50,5z M49.999,76.75  c-3.342,0-6.061-2.717-6.061-6.057c0-3.346,2.719-6.066,6.061-6.066c3.343,0,6.063,2.723,6.063,6.066  C56.063,74.033,53.342,76.75,49.999,76.75z M66.238,43.808c-1.174,1.827-2.795,4.01-6.028,6.531  c-3.213,2.461-4.185,3.724-4.478,4.259c-0.166,0.299-0.402,0.895-0.59,2.004c-0.065,0.39-0.119,0.812-0.162,1.265l-0.254,2.714  l-9.771,0.023l0.124-3.127c0.017-0.4,0.06-1.185,0.168-1.918c0.324-2.229,1.085-4.209,2.261-5.882  c1.104-1.573,3.247-3.563,6.549-6.079c2.442-1.863,3.396-2.928,3.764-3.492c0.47-0.717,0.697-1.472,0.697-2.305  c0-1.931-0.705-3.46-2.094-4.545c-1.474-1.151-3.518-1.735-6.073-1.735c-2.265,0-4.176,0.599-5.682,1.778  c-1.594,1.239-2.713,2.953-3.245,4.964l-0.66,2.492l-9.563-1.037l0.676-3.238c0.88-4.218,2.865-7.474,5.902-9.677  c3.934-2.855,8.156-4.303,12.552-4.303c4.856,0,8.831,1.249,12.508,3.931c3.399,2.482,5.349,6.492,5.349,11.002  C68.188,39.642,67.55,41.727,66.238,43.808z"),c(t,"height","20px"),c(t,"width","20px"),c(t,"class","align-top inline"),c(t,"fill","#A2A2A2"),c(t,"xmlns","http://www.w3.org/2000/svg"),c(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),c(t,"version","1.1"),c(t,"x","0px"),c(t,"y","0px"),c(t,"viewBox","0 0 100 100"),c(t,"enable-background","new 0 0 100 100"),c(t,"xml:space","preserve")},m(e,s){d(e,t,s),u(t,n)},p:f,i:f,o:f,d(e){e&&i(t)}}}class re extends n{constructor(e){super(),s(this,e,null,se,r,{})}}function ae(e){let t,n;return{c(){t=a("svg"),n=a("path"),this.h()},l(e){t=o(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var s=l(t);n=o(s,"path",{d:!0},1),l(n).forEach(i),s.forEach(i),this.h()},h(){c(n,"d","M50,5C25.147,5,5,25.147,5,50c0,24.852,20.147,45,45,45c24.854,0,45-20.148,45-45C95,25.147,74.854,5,50,5z M70.243,70.24  c-1.173,1.172-2.708,1.758-4.243,1.758s-3.07-0.586-4.242-1.757L50,58.484L38.243,70.242C37.071,71.414,35.536,72,34,72  s-3.071-0.586-4.243-1.757c-2.343-2.345-2.343-6.144,0-8.485L41.515,50L29.757,38.242c-2.343-2.343-2.343-6.142,0-8.485  c2.343-2.343,6.142-2.343,8.485,0L50,41.514l11.756-11.757c2.344-2.343,6.145-2.343,8.485,0c2.344,2.343,2.344,6.142,0.001,8.485  L58.486,49.999l11.756,11.756C72.586,64.1,72.586,67.898,70.243,70.24z"),c(t,"height","20px"),c(t,"width","20px"),c(t,"class","align-top inline"),c(t,"fill","#FF0000"),c(t,"xmlns","http://www.w3.org/2000/svg"),c(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),c(t,"version","1.1"),c(t,"x","0px"),c(t,"y","0px"),c(t,"viewBox","0 0 100 100"),c(t,"enable-background","new 0 0 100 100"),c(t,"xml:space","preserve")},m(e,s){d(e,t,s),u(t,n)},p:f,i:f,o:f,d(e){e&&i(t)}}}class oe extends n{constructor(e){super(),s(this,e,null,ae,r,{})}}function le(e,t,n){const s=e.slice();return s[2]=t[n],s}function ie(e){let t,n;return{c(){t=m("h1"),n=h(e[1]),this.h()},l(s){t=o(s,"H1",{class:!0});var r=l(t);n=p(r,e[1]),r.forEach(i),this.h()},h(){c(t,"class","font-medium mb-2")},m(e,s){d(e,t,s),u(t,n)},p(e,t){2&t&&g(n,e[1])},d(e){e&&i(t)}}}function ce(e){let t,n,s,r,a,f,v=e[2].description+"";return{c(){t=m("div"),n=m("span"),s=x(),r=m("span"),a=h(v),f=x(),this.h()},l(e){t=o(e,"DIV",{class:!0});var c=l(t);n=o(c,"SPAN",{class:!0,style:!0}),l(n).forEach(i),s=y(c),r=o(c,"SPAN",{class:!0});var d=l(r);a=p(d,v),d.forEach(i),f=y(c),c.forEach(i),this.h()},h(){c(n,"class","w-4 h-4 inline-block rounded-full align-middle"),b(n,"background-color",e[2].color),c(r,"class","align-middle"),c(t,"class","")},m(e,o){d(e,t,o),u(t,n),u(t,s),u(t,r),u(r,a),u(t,f)},p(e,t){1&t&&b(n,"background-color",e[2].color),1&t&&v!==(v=e[2].description+"")&&g(a,v)},d(e){e&&i(t)}}}function de(e){let t,n,s=e[1]&&ie(e),r=e[0],a=[];for(let o=0;o<r.length;o+=1)a[o]=ce(le(e,r,o));return{c(){t=m("div"),s&&s.c(),n=x();for(let e=0;e<a.length;e+=1)a[e].c();this.h()},l(e){t=o(e,"DIV",{class:!0});var r=l(t);s&&s.l(r),n=y(r);for(let t=0;t<a.length;t+=1)a[t].l(r);r.forEach(i),this.h()},h(){c(t,"class","\n    absolute\n    z-10\n    flex\n    flex-col\n    bg-white\n    px-4\n    py-2\n    max-w-[150px]\n    shadow-sm\n    rounded-md\n    bottom-12\n    left-2\n  ")},m(e,r){d(e,t,r),s&&s.m(t,null),u(t,n);for(let n=0;n<a.length;n+=1)a[n].m(t,null)},p(e,[o]){if(e[1]?s?s.p(e,o):(s=ie(e),s.c(),s.m(t,n)):s&&(s.d(1),s=null),1&o){let n;for(r=e[0],n=0;n<r.length;n+=1){const s=le(e,r,n);a[n]?a[n].p(s,o):(a[n]=ce(s),a[n].c(),a[n].m(t,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=r.length}},i:f,o:f,d(e){e&&i(t),s&&s.d(),v(a,e)}}}function ue(e,t,n){let{points:s}=t,{title:r}=t;return e.$$set=e=>{"points"in e&&n(0,s=e.points),"title"in e&&n(1,r=e.title)},[s,r]}class fe extends n{constructor(e){super(),s(this,e,ue,de,r,{points:0,title:1})}}function me(e,t,n){const s=e.slice();return s[14]=t[n],s}function he(e){let t;const n=e[9].default,s=V(n,e,e[8],null);return{c(){s&&s.c()},l(e){s&&s.l(e)},m(e,n){s&&s.m(e,n),t=!0},p(e,r){s&&s.p&&(!t||256&r)&&w(s,n,e,e[8],r,null,null)},i(e){t||($(s,e),t=!0)},o(e){E(s,e),t=!1},d(e){s&&s.d(e)}}}function pe(e){let t,n,s,r,a,g,b,v,w,$;return{c(){t=m("div"),n=m("div"),s=m("h1"),r=h("Railroad crossing incidents"),a=x(),g=m("p"),b=h("Click a crossing to see its safety data and whether it meets safety guidelines."),v=x(),w=m("p"),$=h("This data was retrieved from the Federal Railroad Administration in early April 2021 and the agency acknowledges that it might not offer a complete or accurate picture of U.S. rail crossings."),this.h()},l(e){t=o(e,"DIV",{class:!0});var c=l(t);n=o(c,"DIV",{class:!0});var d=l(n);s=o(d,"H1",{class:!0});var u=l(s);r=p(u,"Railroad crossing incidents"),u.forEach(i),a=y(d),g=o(d,"P",{class:!0});var f=l(g);b=p(f,"Click a crossing to see its safety data and whether it meets safety guidelines."),f.forEach(i),v=y(d),w=o(d,"P",{class:!0});var m=l(w);$=p(m,"This data was retrieved from the Federal Railroad Administration in early April 2021 and the agency acknowledges that it might not offer a complete or accurate picture of U.S. rail crossings."),m.forEach(i),d.forEach(i),c.forEach(i),this.h()},h(){c(s,"class","text-lg sm:text-xl md:text-2xl leading-6 font-bold text-gray-900 pb-1 mb-1 sm:pb-2 sm:mb-2 border-b border-gray-100"),c(g,"class","font-medium text-gray-700 text-sm sm:text-xl"),c(w,"class","text-gray-500 mt-1 text-xs sm:text-base sm:mt-4"),c(n,"class","self-center"),c(t,"class","p-2 sm:px-6 flex items-center h-full")},m(e,o){d(e,t,o),u(t,n),u(n,s),u(s,r),u(n,a),u(n,g),u(g,b),u(n,v),u(n,w),u(w,$)},p:f,i:f,o:f,d(e){e&&i(t)}}}function ge(e){let t,n,s,r,a,f,b,v,w,k,N,I,_,S,D,j,V,A,P,z,M,L,R,O,B,U,q,K,F,H,G=e[0].properties.Street+"",J=e[0].properties.CityName+"",Y=e[0].properties.CountyName+"",W=e[0].properties.StateName+"",Q=e[0].properties["Number of accidents"]+"",X=e[0].properties["Total Killed"]+"",Z=e[0].properties["Total injured"]+"";const ee=[be,ye,xe],te=[];function ne(e,t){return"Yes"===e[0].properties["Meets federal safety guidelines"]?0:"No"===e[0].properties["Meets federal safety guidelines"]?1:2}_=ne(e),S=te[_]=ee[_](e);let se=e[3]&&ve(e);return{c(){t=m("div"),n=m("h3"),s=h(G),r=x(),a=m("h3"),f=h(J),b=h(", "),v=h(Y),w=h(", "),k=h(W),N=x(),I=m("p"),S.c(),D=x(),j=m("p"),V=h(Q),A=h(" Accidents"),P=x(),z=m("p"),M=h(X),L=h(" Killed"),R=x(),O=m("p"),B=h(Z),U=h(" Injured"),q=x(),K=m("div"),F=m("dl"),se&&se.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var c=l(t);n=o(c,"H3",{class:!0});var d=l(n);s=p(d,G),d.forEach(i),r=y(c),a=o(c,"H3",{class:!0});var u=l(a);f=p(u,J),b=p(u,", "),v=p(u,Y),w=p(u,", "),k=p(u,W),u.forEach(i),N=y(c),I=o(c,"P",{class:!0});var m=l(I);S.l(m),m.forEach(i),D=y(c),j=o(c,"P",{class:!0});var h=l(j);V=p(h,Q),A=p(h," Accidents"),h.forEach(i),P=y(c),z=o(c,"P",{class:!0});var g=l(z);M=p(g,X),L=p(g," Killed"),g.forEach(i),R=y(c),O=o(c,"P",{class:!0});var x=l(O);B=p(x,Z),U=p(x," Injured"),x.forEach(i),c.forEach(i),q=y(e),K=o(e,"DIV",{class:!0});var $=l(K);F=o($,"DL",{class:!0});var E=l(F);se&&se.l(E),E.forEach(i),$.forEach(i),this.h()},h(){c(n,"class","text-lg leading-6 font-medium text-gray-900"),c(a,"class","text-md leading-6 font-medium text-gray-600 mb-2"),c(I,"class","font-bold my-0 pt-1 pb-3 max-w-2xl text-sm text-gray-600"),c(j,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),c(z,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),c(O,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),c(t,"class","px-4 py-4 sm:px-6"),c(F,"class","divide-y divide-gray-200"),c(K,"class","border-t border-gray-200 px-4 py-2 sm:py-4 sm:p-0")},m(e,o){d(e,t,o),u(t,n),u(n,s),u(t,r),u(t,a),u(a,f),u(a,b),u(a,v),u(a,w),u(a,k),u(t,N),u(t,I),te[_].m(I,null),u(t,D),u(t,j),u(j,V),u(j,A),u(t,P),u(t,z),u(z,M),u(z,L),u(t,R),u(t,O),u(O,B),u(O,U),d(e,q,o),d(e,K,o),u(K,F),se&&se.m(F,null),H=!0},p(e,t){(!H||1&t)&&G!==(G=e[0].properties.Street+"")&&g(s,G),(!H||1&t)&&J!==(J=e[0].properties.CityName+"")&&g(f,J),(!H||1&t)&&Y!==(Y=e[0].properties.CountyName+"")&&g(v,Y),(!H||1&t)&&W!==(W=e[0].properties.StateName+"")&&g(k,W);let n=_;_=ne(e),_!==n&&(C(),E(te[n],1,1,(()=>{te[n]=null})),T(),S=te[_],S||(S=te[_]=ee[_](e),S.c()),$(S,1),S.m(I,null)),(!H||1&t)&&Q!==(Q=e[0].properties["Number of accidents"]+"")&&g(V,Q),(!H||1&t)&&X!==(X=e[0].properties["Total Killed"]+"")&&g(M,X),(!H||1&t)&&Z!==(Z=e[0].properties["Total injured"]+"")&&g(B,Z),e[3]?se?se.p(e,t):(se=ve(e),se.c(),se.m(F,null)):se&&(se.d(1),se=null)},i(e){H||($(S),H=!0)},o(e){E(S),H=!1},d(e){e&&i(t),te[_].d(),e&&i(q),e&&i(K),se&&se.d()}}}function xe(e){let t,n,s;return t=new re({}),{c(){k(t.$$.fragment),n=h(" May or may not meet federal safety guidelines")},l(e){N(t.$$.fragment,e),n=p(e," May or may not meet federal safety guidelines")},m(e,r){I(t,e,r),d(e,n,r),s=!0},i(e){s||($(t.$$.fragment,e),s=!0)},o(e){E(t.$$.fragment,e),s=!1},d(e){_(t,e),e&&i(n)}}}function ye(e){let t,n,s;return t=new oe({}),{c(){k(t.$$.fragment),n=h(" Does not meet federal safety guidelines")},l(e){N(t.$$.fragment,e),n=p(e," Does not meet federal safety guidelines")},m(e,r){I(t,e,r),d(e,n,r),s=!0},i(e){s||($(t.$$.fragment,e),s=!0)},o(e){E(t.$$.fragment,e),s=!1},d(e){_(t,e),e&&i(n)}}}function be(e){let t,n,s;return t=new ne({}),{c(){k(t.$$.fragment),n=h(" Meets federal safety guidelines")},l(e){N(t.$$.fragment,e),n=p(e," Meets federal safety guidelines")},m(e,r){I(t,e,r),d(e,n,r),s=!0},i(e){s||($(t.$$.fragment,e),s=!0)},o(e){E(t.$$.fragment,e),s=!1},d(e){_(t,e),e&&i(n)}}}function ve(e){let t,n=e[3],s=[];for(let r=0;r<n.length;r+=1)s[r]=we(me(e,n,r));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=P()},l(e){for(let t=0;t<s.length;t+=1)s[t].l(e);t=P()},m(e,n){for(let t=0;t<s.length;t+=1)s[t].m(e,n);d(e,t,n)},p(e,r){if(40&r){let a;for(n=e[3],a=0;a<n.length;a+=1){const o=me(e,n,a);s[a]?s[a].p(o,r):(s[a]=we(o),s[a].c(),s[a].m(t.parentNode,t))}for(;a<s.length;a+=1)s[a].d(1);s.length=n.length}},d(e){v(s,e),e&&i(t)}}}function we(e){let t,n,s,r,a,f,b,v=(e[5][e[14].key]||e[14].key)+"",w=e[14].value+"";return{c(){t=m("div"),n=m("dt"),s=h(v),r=x(),a=m("dd"),f=h(w),b=x(),this.h()},l(e){t=o(e,"DIV",{class:!0});var c=l(t);n=o(c,"DT",{class:!0});var d=l(n);s=p(d,v),d.forEach(i),r=y(c),a=o(c,"DD",{class:!0});var u=l(a);f=p(u,w),u.forEach(i),b=y(c),c.forEach(i),this.h()},h(){c(n,"class","text-sm font-medium text-gray-500"),c(a,"class","text-sm text-gray-900 mt-0 col-span-1"),c(t,"class","py-1 sm:py-2 grid grid-cols-2 gap-2 sm:px-6")},m(e,o){d(e,t,o),u(t,n),u(n,s),u(t,r),u(t,a),u(a,f),u(t,b)},p(e,t){8&t&&v!==(v=(e[5][e[14].key]||e[14].key)+"")&&g(s,v),8&t&&w!==(w=e[14].value+"")&&g(f,w)},d(e){e&&i(t)}}}function $e(e){let t,n,s,r,a,f,h,p,g,b,v=e[2]&&he(e);r=new fe({props:{points:e[4]}});const w=[ge,pe],S=[];function D(e,t){return e[0]?0:1}return p=D(e),g=S[p]=w[p](e),{c(){t=m("div"),n=m("div"),v&&v.c(),s=x(),k(r.$$.fragment),a=x(),f=m("div"),h=m("div"),g.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var c=l(t);n=o(c,"DIV",{class:!0});var d=l(n);v&&v.l(d),s=y(d),N(r.$$.fragment,d),d.forEach(i),a=y(c),f=o(c,"DIV",{class:!0});var u=l(f);h=o(u,"DIV",{class:!0});var m=l(h);g.l(m),m.forEach(i),u.forEach(i),c.forEach(i),this.h()},h(){c(n,"class","flex-grow z-0 h-full"),c(h,"class","h-full overflow-y-scroll"),c(f,"class","bg-white h-1/3 sm:w-1/2 sm:h-full md:w-96 border-gray-200 border-t sm:border-t-0 sm:border-l"),c(t,"class","flex flex-col sm:flex-row h-full")},m(o,l){d(o,t,l),u(t,n),v&&v.m(n,null),u(n,s),I(r,n,null),e[10](n),u(t,a),u(t,f),u(f,h),S[p].m(h,null),b=!0},p(e,[t]){e[2]?v?(v.p(e,t),4&t&&$(v,1)):(v=he(e),v.c(),$(v,1),v.m(n,s)):v&&(C(),E(v,1,1,(()=>{v=null})),T());let r=p;p=D(e),p===r?S[p].p(e,t):(C(),E(S[r],1,1,(()=>{S[r]=null})),T(),g=S[p],g?g.p(e,t):(g=S[p]=w[p](e),g.c()),$(g,1),g.m(h,null))},i(e){b||($(v),$(r.$$.fragment,e),$(g),b=!0)},o(e){E(v),E(r.$$.fragment,e),E(g),b=!1},d(n){n&&i(t),v&&v.d(),_(r),e[10](null),S[p].d()}}}function Ee(e,t,n){let s;S(e,X,(e=>n(12,s=e)));let r,a,o,l,{$$slots:i={},$$scope:c}=t,{center:d}=t,{bbox:u}=t,f=null;const m=["id","CrossingID","Total Killed","Total injured","Number of accidents","Latitude","Longitude","Street","CityName","CountyName","StateName","Meets federal safety guidelines"];return D(W,{getMap:()=>a}),D(Q,{getMapbox:()=>o}),j((async()=>{o=window.mapboxgl,o.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(2,a=new o.Map({container:r,style:"mapbox://styles/mapbox/light-v10",center:d||s.lngLat,zoom:d?15:s.zoom,minZoom:3,maxZoom:20})),a.addControl(new MapboxGeocoder({accessToken:o.accessToken,mapboxgl:o}),"top-left"),a.addControl(new o.NavigationControl,"top-left"),a.on("load",(()=>{a.resize(),a.addSource("railroad_crossing_incidents",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incidents/{z}/{x}/{y}.pbf"]}),a.addLayer({id:"railroad_crossing_incidents",type:"circle",source:"railroad_crossing_incidents","source-layer":"railroad_crossing_incidents",layout:{},paint:{"circle-radius":10,"circle-color":["case",["==",["get","Number of accidents"],0],"blue","red"],"circle-opacity":["case",["boolean",["feature-state","hover"],!1],1,.3],"circle-stroke-color":"white","circle-stroke-width":["case",["boolean",["feature-state","hover"],!1],3,0]}}),a.addLayer({id:"railroad_crossing_incidents_count",type:"symbol",source:"railroad_crossing_incidents","source-layer":"railroad_crossing_incidents",filter:["has","point_count"],layout:{"text-field":"{point_count}","text-size":10}})})),d&&setTimeout((()=>{const e=a.project(d),t=a.queryRenderedFeatures([[e.x-5,e.y-5],[e.x+5,e.y+5]],{layers:["railroad_crossing_incidents"]});1===t.length&&n(0,f=t[0])}),1100),u&&setTimeout((()=>{a.fitBounds(u)}),1100);let e=null;function t({featureId:e,state:t}){a.setFeatureState({id:e,source:"railroad_crossing_incidents",sourceLayer:"railroad_crossing_incidents"},{hover:t})}return a.on("mousemove",(n=>{const s=a.queryRenderedFeatures(n.point,{layers:["railroad_crossing_incidents"]})[0];if(!s)return a.getCanvas().style.cursor="",void(e&&(t({featureId:e,state:!1}),e=null));if(a.getCanvas().style.cursor="pointer",s&&s.id===e)return;e&&t({featureId:e,state:!1}),e=s.id,t({featureId:s.id,state:!0});const r=s.properties,o=s.geometry.coordinates.slice();for(;Math.abs(n.lngLat.lng-o[0])>180;)o[0]+=n.lngLat.lng>o[0]?360:-360;r.point_count&&r.point_count>-2&&r.point_count})),a.on("click","railroad_crossing_incidents",(async function(e){const t=e.features[0],{point_count:s}=t.properties;if(a.resize(),s){const e=a.getZoom()+2;a.flyTo({center:t.geometry.coordinates,zoom:e}),n(0,f=null)}else n(0,f=e.features[0])})),()=>{n(2,a=null)}})),e.$$set=e=>{"center"in e&&n(6,d=e.center),"bbox"in e&&n(7,u=e.bbox),"$$scope"in e&&n(8,c=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&f&&n(3,l=Object.keys(f.properties).filter((e=>!m.find((t=>t.includes(e))))).map((e=>({key:e,value:f.properties[e]}))))},[f,r,a,l,[{color:"red",description:"Accidents"},{color:"blue",description:"No accidents"}],{CountyName:"County",CityName:"City",StateName:"State"},d,u,c,i,function(e){A[e?"unshift":"push"]((()=>{r=e,n(1,r)}))}]}class ke extends n{constructor(e){super(),s(this,e,Ee,$e,r,{center:6,bbox:7})}}const Ne={Alabama:"AL",Alaska:"AK",Arizona:"AZ",Arkansas:"AR",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE","District of Columbia":"DC",Florida:"FL",Georgia:"GA",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Puerto Rico":"PR","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY"};function Ie(e){const t=t=>{!e||e.contains(t.target)||t.defaultPrevented||e.dispatchEvent(new CustomEvent("click_outside",{detail:{event:t,node:e}}))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function Ce(e,t,n){const s=e.slice();return s[25]=t[n],s}function Te(e,t,n){const s=e.slice();return s[28]=t[n],s}function _e(e,t,n){const s=e.slice();return s[31]=t[n],s}function Se(e){let t,n,s,r,a,g,b,v,w,$,E,k,N,I,C,T;return{c(){t=m("div"),n=m("div"),s=m("button"),r=h("x"),a=x(),g=m("div"),b=m("h3"),v=h("Locations table"),w=x(),$=m("p"),E=h("Search for railroad crossings near you using the search bar on the left. Sort by a column by selecting the drop down menu next to its name."),k=x(),N=m("button"),I=h("Get started"),this.h()},l(e){t=o(e,"DIV",{class:!0});var c=l(t);n=o(c,"DIV",{class:!0});var d=l(n);s=o(d,"BUTTON",{class:!0});var u=l(s);r=p(u,"x"),u.forEach(i),a=y(d),g=o(d,"DIV",{class:!0});var f=l(g);b=o(f,"H3",{class:!0});var m=l(b);v=p(m,"Locations table"),m.forEach(i),w=y(f),$=o(f,"P",{class:!0});var h=l($);E=p(h,"Search for railroad crossings near you using the search bar on the left. Sort by a column by selecting the drop down menu next to its name."),h.forEach(i),k=y(f),N=o(f,"BUTTON",{class:!0});var x=l(N);I=p(x,"Get started"),x.forEach(i),f.forEach(i),d.forEach(i),c.forEach(i),this.h()},h(){c(s,"class","\n        float-right\n        h-4\n        px-2\n        pb-5\n        rounded-sm\n        mt-2\n        mr-2\n        hover:bg-gray-100\n        text-gray-600\n        hover:text-gray-900\n      "),c(b,"class","sm:text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),c($,"class","text-sm sm:text-base font-medium my-0 py0 max-w-2xl text-gray-600"),c(N,"class","mt-2 float-right inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),c(g,"class","p-4 sm:px-6"),c(n,"class","z-10 bg-white shadow overflow-hidden absolute rounded-md mr-2 w-2/3 lg:w-1/3 pb-2"),c(t,"class","flex justify-center")},m(o,l){d(o,t,l),u(t,n),u(n,s),u(s,r),u(n,a),u(n,g),u(g,b),u(b,v),u(g,w),u(g,$),u($,E),u(g,k),u(g,N),u(N,I),C||(T=[z(s,"click",e[16]),z(N,"click",e[16])],C=!0)},p:f,d(e){e&&i(t),C=!1,M(T)}}}function De(e){let t,n,s,r,a,f,g,b,v,w,$,E,k,N,I,C,T=e[5].column===e[31]&&"ASC"===e[5].order&&je();function _(){return e[18](e[31])}let S=e[5].column===e[31]&&"DESC"===e[5].order&&Ve();function D(){return e[19](e[31])}function j(){return e[20](e[31])}function V(...t){return e[21](e[31],...t)}return{c(){t=m("div"),n=m("div"),s=m("button"),r=m("span"),T&&T.c(),a=h("\n                            Sort Ascending"),f=x(),g=m("button"),b=m("span"),S&&S.c(),v=h("\n                            Sort Descending"),w=x(),$=m("button"),E=m("span"),k=h("ð„‚"),N=h("\n                            Remove Sort"),this.h()},l(e){t=o(e,"DIV",{class:!0,role:!0,"aria-orientation":!0,"aria-labelledby":!0,tabindex:!0});var c=l(t);n=o(c,"DIV",{class:!0,role:!0});var d=l(n);s=o(d,"BUTTON",{type:!0,class:!0,role:!0,tabindex:!0,id:!0});var u=l(s);r=o(u,"SPAN",{class:!0});var m=l(r);T&&T.l(m),m.forEach(i),a=p(u,"\n                            Sort Ascending"),u.forEach(i),f=y(d),g=o(d,"BUTTON",{type:!0,class:!0,role:!0,tabindex:!0,id:!0});var h=l(g);b=o(h,"SPAN",{class:!0});var x=l(b);S&&S.l(x),x.forEach(i),v=p(h,"\n                            Sort Descending"),h.forEach(i),w=y(d),$=o(d,"BUTTON",{type:!0,class:!0,role:!0,tabindex:!0,id:!0});var I=l($);E=o(I,"SPAN",{class:!0});var C=l(E);k=p(C,"ð„‚"),C.forEach(i),N=p(I,"\n                            Remove Sort"),I.forEach(i),d.forEach(i),c.forEach(i),this.h()},h(){c(r,"class","inline-block w-3 h-3"),c(s,"type","button"),c(s,"class","w-full text-left text-gray-700 hover:text-gray-900 hover:bg-gray-100 block px-2 py-2 text-xs"),c(s,"role","menuitem"),c(s,"tabindex","-1"),c(s,"id","menu-item-0"),c(b,"class","inline-block w-3 h-3"),c(g,"type","button"),c(g,"class","w-full text-left text-gray-700 hover:text-gray-900 hover:bg-gray-100 block px-2 py-2 text-xs"),c(g,"role","menuitem"),c(g,"tabindex","-1"),c(g,"id","menu-item-1"),c(E,"class","inline-block w-3 h-3 invisible hover:visible"),c($,"type","button"),c($,"class","w-full text-left text-gray-700 hover:text-gray-900 hover:bg-gray-100 block px-2 py-2 text-xs"),c($,"role","menuitem"),c($,"tabindex","-1"),c($,"id","menu-item-2"),c(n,"class",""),c(n,"role","none"),c(t,"class","origin-top-right absolute right-0 mt-2 w-40 rounded-md shadow bg-white ring-1 ring-black ring-opacity-5 focus:outline-none"),c(t,"role","menu"),c(t,"aria-orientation","vertical"),c(t,"aria-labelledby","menu-button"),c(t,"tabindex","-1")},m(e,o){d(e,t,o),u(t,n),u(n,s),u(s,r),T&&T.m(r,null),u(s,a),u(n,f),u(n,g),u(g,b),S&&S.m(b,null),u(g,v),u(n,w),u(n,$),u($,E),u(E,k),u($,N),I||(C=[z(s,"click",_),z(g,"click",D),z($,"click",j),R(Ie.call(null,t)),z(t,"click_outside",V)],I=!0)},p(t,n){(e=t)[5].column===e[31]&&"ASC"===e[5].order?T||(T=je(),T.c(),T.m(r,null)):T&&(T.d(1),T=null),e[5].column===e[31]&&"DESC"===e[5].order?S||(S=Ve(),S.c(),S.m(b,null)):S&&(S.d(1),S=null)},d(e){e&&i(t),T&&T.d(),S&&S.d(),I=!1,M(C)}}}function je(e){let t;return{c(){t=h("âœ“")},l(e){t=p(e,"âœ“")},m(e,n){d(e,t,n)},d(e){e&&i(t)}}}function Ve(e){let t;return{c(){t=h("âœ“")},l(e){t=p(e,"âœ“")},m(e,n){d(e,t,n)},d(e){e&&i(t)}}}function Ae(e){let t,n,s,r,f,g,b=e[31]+"",v="Map view"!==e[31]&&function(e){let t,n,s,r,f,h,p,g;function b(){return e[17](e[31])}let v=e[6].open&&e[6].open===e[31]&&De(e);return{c(){t=m("div"),n=m("div"),s=m("button"),r=a("svg"),f=a("path"),h=x(),v&&v.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var a=l(t);n=o(a,"DIV",{});var c=l(n);s=o(c,"BUTTON",{type:!0,class:!0,id:!0,"aria-expanded":!0,"aria-haspopup":!0});var d=l(s);r=o(d,"svg",{class:!0,xmlns:!0,viewBox:!0,fill:!0,"aria-hidden":!0},1);var u=l(r);f=o(u,"path",{"fill-rule":!0,d:!0,"clip-rule":!0},1),l(f).forEach(i),u.forEach(i),d.forEach(i),c.forEach(i),h=y(a),v&&v.l(a),a.forEach(i),this.h()},h(){c(f,"fill-rule","evenodd"),c(f,"d","M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"),c(f,"clip-rule","evenodd"),c(r,"class","h-3 w-3"),c(r,"xmlns","http://www.w3.org/2000/svg"),c(r,"viewBox","0 0 20 20"),c(r,"fill","currentColor"),c(r,"aria-hidden","true"),c(s,"type","button"),c(s,"class","inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm p-1 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-indigo-500"),c(s,"id","menu-button"),c(s,"aria-expanded","true"),c(s,"aria-haspopup","true"),c(t,"class","relative inline-block text-left right-0 top-0 ml-4 self-center")},m(e,a){d(e,t,a),u(t,n),u(n,s),u(s,r),u(r,f),u(t,h),v&&v.m(t,null),p||(g=z(s,"click",b),p=!0)},p(n,s){(e=n)[6].open&&e[6].open===e[31]?v?v.p(e,s):(v=De(e),v.c(),v.m(t,null)):v&&(v.d(1),v=null)},d(e){e&&i(t),v&&v.d(),p=!1,g()}}}(e);return{c(){t=m("th"),n=m("div"),s=m("span"),r=h(b),f=x(),v&&v.c(),g=x(),this.h()},l(e){t=o(e,"TH",{scope:!0,class:!0});var a=l(t);n=o(a,"DIV",{class:!0});var c=l(n);s=o(c,"SPAN",{});var d=l(s);r=p(d,b),d.forEach(i),f=y(c),v&&v.l(c),c.forEach(i),g=y(a),a.forEach(i),this.h()},h(){c(n,"class","flex flex-row "),c(t,"scope","col"),c(t,"class","px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider")},m(e,a){d(e,t,a),u(t,n),u(n,s),u(s,r),u(n,f),v&&v.m(n,null),u(t,g)},p(e,t){"Map view"!==e[31]&&v.p(e,t)},d(e){e&&i(t),v&&v.d()}}}function Pe(e){let t,n=e[28].value+"";return{c(){t=h(n)},l(e){t=p(e,n)},m(e,n){d(e,t,n)},p(e,s){1&s[0]&&n!==(n=e[28].value+"")&&g(t,n)},i:f,o:f,d(e){e&&i(t)}}}function ze(e){let t,n,s,r;const a=[Oe,Re,Le],o=[];function l(e,t){return"Yes"===e[28].value?0:"No"===e[28].value?1:2}return t=l(e),n=o[t]=a[t](e),{c(){n.c(),s=P()},l(e){n.l(e),s=P()},m(e,n){o[t].m(e,n),d(e,s,n),r=!0},p(e,r){let i=t;t=l(e),t!==i&&(C(),E(o[i],1,1,(()=>{o[i]=null})),T(),n=o[t],n||(n=o[t]=a[t](e),n.c()),$(n,1),n.m(s.parentNode,s))},i(e){r||($(n),r=!0)},o(e){E(n),r=!1},d(e){o[t].d(e),e&&i(s)}}}function Me(e){let t,n,s,r;function a(){return e[22](e[28])}return{c(){t=m("button"),n=h("View on map"),this.h()},l(e){t=o(e,"BUTTON",{class:!0});var s=l(t);n=p(s,"View on map"),s.forEach(i),this.h()},h(){c(t,"class","text-gray-600 hover:text-blue-600 hover:shadow-sm bg-gray-50 hover:bg-gray-100 p-2")},m(e,o){d(e,t,o),u(t,n),s||(r=z(t,"click",a),s=!0)},p(t,n){e=t},i:f,o:f,d(e){e&&i(t),s=!1,r()}}}function Le(e){let t,n,s;return t=new re({}),{c(){k(t.$$.fragment),n=h(" Info unavailable")},l(e){N(t.$$.fragment,e),n=p(e," Info unavailable")},m(e,r){I(t,e,r),d(e,n,r),s=!0},i(e){s||($(t.$$.fragment,e),s=!0)},o(e){E(t.$$.fragment,e),s=!1},d(e){_(t,e),e&&i(n)}}}function Re(e){let t,n,s;return t=new oe({}),{c(){k(t.$$.fragment),n=h(" No")},l(e){N(t.$$.fragment,e),n=p(e," No")},m(e,r){I(t,e,r),d(e,n,r),s=!0},i(e){s||($(t.$$.fragment,e),s=!0)},o(e){E(t.$$.fragment,e),s=!1},d(e){_(t,e),e&&i(n)}}}function Oe(e){let t,n,s;return t=new ne({}),{c(){k(t.$$.fragment),n=h(" Yes")},l(e){N(t.$$.fragment,e),n=p(e," Yes")},m(e,r){I(t,e,r),d(e,n,r),s=!0},i(e){s||($(t.$$.fragment,e),s=!0)},o(e){E(t.$$.fragment,e),s=!1},d(e){_(t,e),e&&i(n)}}}function Be(e){let t,n,s,r;const a=[Me,ze,Pe],u=[];function f(e,t){return"Map view"===e[28].key?0:"Meets federal safety guidelines"===e[28].key?1:null!==e[28].value?2:-1}return~(n=f(e))&&(s=u[n]=a[n](e)),{c(){t=m("td"),s&&s.c(),this.h()},l(e){t=o(e,"TD",{class:!0});var n=l(t);s&&s.l(n),n.forEach(i),this.h()},h(){c(t,"class","px-4 py-4 text-left whitespace-nowrap text-xs font-medium text-gray-900")},m(e,s){d(e,t,s),~n&&u[n].m(t,null),r=!0},p(e,r){let o=n;n=f(e),n===o?~n&&u[n].p(e,r):(s&&(C(),E(u[o],1,1,(()=>{u[o]=null})),T()),~n?(s=u[n],s?s.p(e,r):(s=u[n]=a[n](e),s.c()),$(s,1),s.m(t,null)):s=null)},i(e){r||($(s),r=!0)},o(e){E(s),r=!1},d(e){e&&i(t),~n&&u[n].d()}}}function Ue(e){let t,n,s,r=e[25],a=[];for(let o=0;o<r.length;o+=1)a[o]=Be(Te(e,r,o));const c=e=>E(a[e],1,1,(()=>{a[e]=null}));return{c(){t=m("tr");for(let e=0;e<a.length;e+=1)a[e].c();n=x()},l(e){t=o(e,"TR",{});var s=l(t);for(let t=0;t<a.length;t+=1)a[t].l(s);n=y(s),s.forEach(i)},m(e,r){d(e,t,r);for(let n=0;n<a.length;n+=1)a[n].m(t,null);u(t,n),s=!0},p(e,s){if(32769&s[0]){let o;for(r=e[25],o=0;o<r.length;o+=1){const l=Te(e,r,o);a[o]?(a[o].p(l,s),$(a[o],1)):(a[o]=Be(l),a[o].c(),$(a[o],1),a[o].m(t,n))}for(C(),o=r.length;o<a.length;o+=1)c(o);T()}},i(e){if(!s){for(let e=0;e<r.length;e+=1)$(a[e]);s=!0}},o(e){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)E(a[t]);s=!1},d(e){e&&i(t),v(a,e)}}}function qe(e){let t,n,s,r;function a(e,t){return e[4]>1?Fe:Ke}let f=a(e),x=f(e);return{c(){t=m("p"),x.c(),n=h("\n\n    of "),s=h(e[2]),r=h(" total rows."),this.h()},l(a){t=o(a,"P",{class:!0});var c=l(t);x.l(c),n=p(c,"\n\n    of "),s=p(c,e[2]),r=p(c," total rows."),c.forEach(i),this.h()},h(){c(t,"class","float-left py-1.5 mt-2 text-xs text-gray-700")},m(e,a){d(e,t,a),x.m(t,null),u(t,n),u(t,s),u(t,r)},p(e,r){f===(f=a(e))&&x?x.p(e,r):(x.d(1),x=f(e),x&&(x.c(),x.m(t,n))),4&r[0]&&g(s,e[2])},d(e){e&&i(t),x.d()}}}function Ke(e){let t;return{c(){t=h("1 to 100")},l(e){t=p(e,"1 to 100")},m(e,n){d(e,t,n)},p:f,d(e){e&&i(t)}}}function Fe(e){let t,n,s,r=100*e[4]-100+1+"";function a(e,t){return 100*e[4]>e[2]?Ge:He}let o=a(e),l=o(e);return{c(){t=h(r),n=h("\n      to\n      "),l.c(),s=P()},l(e){t=p(e,r),n=p(e,"\n      to\n      "),l.l(e),s=P()},m(e,r){d(e,t,r),d(e,n,r),l.m(e,r),d(e,s,r)},p(e,n){16&n[0]&&r!==(r=100*e[4]-100+1+"")&&g(t,r),o===(o=a(e))&&l?l.p(e,n):(l.d(1),l=o(e),l&&(l.c(),l.m(s.parentNode,s)))},d(e){e&&i(t),e&&i(n),l.d(e),e&&i(s)}}}function He(e){let t,n=100*e[4]+"";return{c(){t=h(n)},l(e){t=p(e,n)},m(e,n){d(e,t,n)},p(e,s){16&s[0]&&n!==(n=100*e[4]+"")&&g(t,n)},d(e){e&&i(t)}}}function Ge(e){let t;return{c(){t=h(e[2])},l(n){t=p(n,e[2])},m(e,n){d(e,t,n)},p(e,n){4&n[0]&&g(t,e[2])},d(e){e&&i(t)}}}function Je(e){let t,n,s,r;return{c(){t=m("button"),n=h("Next page"),this.h()},l(e){t=o(e,"BUTTON",{class:!0});var s=l(t);n=p(s,"Next page"),s.forEach(i),this.h()},h(){c(t,"class","mt-2 float-right inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},m(a,o){d(a,t,o),u(t,n),s||(r=z(t,"click",e[13]),s=!0)},p:f,d(e){e&&i(t),s=!1,r()}}}function Ye(e){let t,n,s,r;return{c(){t=m("button"),n=h("Previous page"),this.h()},l(e){t=o(e,"BUTTON",{class:!0});var s=l(t);n=p(s,"Previous page"),s.forEach(i),this.h()},h(){c(t,"class","mt-2 mr-2 float-right inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},m(a,o){d(a,t,o),u(t,n),s||(r=z(t,"click",e[14]),s=!0)},p:f,d(e){e&&i(t),s=!1,r()}}}function We(e){let t,n,s,r,a,f,h,p,g,b,w,k,N,I,_,S,D,j,V,A=e[7]&&Se(e),P=e[8],z=[];for(let o=0;o<P.length;o+=1)z[o]=Ae(_e(e,P,o));let M=e[0],L=[];for(let o=0;o<M.length;o+=1)L[o]=Ue(Ce(e,M,o));const R=e=>E(L[e],1,1,(()=>{L[e]=null}));let O=e[3]&&qe(e),B=e[1]&&Je(e),U=e[4]>1&&Ye(e);return{c(){A&&A.c(),t=x(),n=m("div"),s=m("div"),r=m("div"),a=m("div"),f=x(),h=m("div"),p=m("div"),g=m("div"),b=m("table"),w=m("thead"),k=m("tr");for(let e=0;e<z.length;e+=1)z[e].c();N=x(),I=m("tbody");for(let e=0;e<L.length;e+=1)L[e].c();_=x(),S=m("div"),O&&O.c(),D=x(),B&&B.c(),j=x(),U&&U.c(),this.h()},l(e){A&&A.l(e),t=y(e),n=o(e,"DIV",{class:!0});var c=l(n);s=o(c,"DIV",{class:!0});var d=l(s);r=o(d,"DIV",{});var u=l(r);a=o(u,"DIV",{id:!0}),l(a).forEach(i),u.forEach(i),d.forEach(i),f=y(c),h=o(c,"DIV",{});var m=l(h);p=o(m,"DIV",{class:!0});var x=l(p);g=o(x,"DIV",{class:!0});var v=l(g);b=o(v,"TABLE",{class:!0});var $=l(b);w=o($,"THEAD",{class:!0});var E=l(w);k=o(E,"TR",{class:!0});var C=l(k);for(let t=0;t<z.length;t+=1)z[t].l(C);C.forEach(i),E.forEach(i),N=y($),I=o($,"TBODY",{class:!0});var T=l(I);for(let t=0;t<L.length;t+=1)L[t].l(T);T.forEach(i),$.forEach(i),v.forEach(i),x.forEach(i),m.forEach(i),c.forEach(i),_=y(e),S=o(e,"DIV",{class:!0});var V=l(S);O&&O.l(V),D=y(V),B&&B.l(V),j=y(V),U&&U.l(V),V.forEach(i),this.h()},h(){c(a,"id","geocoder"),c(s,"class","w-full h-96 p-2"),c(k,"class","divide-x divide-gray-200"),c(w,"class","bg-gray-50"),c(I,"class","divide-y divide-gray-200"),c(b,"class","min-w-full divide-y divide-gray-200 bg-white"),c(g,"class","shadow border-b border-t border-gray-200 sm:rounded-md"),c(p,"class","align-middle inline-block min-w-full"),c(n,"class","flex flex-col h-full overflow-scroll bg-gray-50"),c(S,"class","")},m(e,o){A&&A.m(e,o),d(e,t,o),d(e,n,o),u(n,s),u(s,r),u(r,a),u(n,f),u(n,h),u(h,p),u(p,g),u(g,b),u(b,w),u(w,k);for(let t=0;t<z.length;t+=1)z[t].m(k,null);u(b,N),u(b,I);for(let t=0;t<L.length;t+=1)L[t].m(I,null);d(e,_,o),d(e,S,o),O&&O.m(S,null),u(S,D),B&&B.m(S,null),u(S,j),U&&U.m(S,null),V=!0},p(e,n){if(e[7]?A?A.p(e,n):(A=Se(e),A.c(),A.m(t.parentNode,t)):A&&(A.d(1),A=null),8032&n[0]){let t;for(P=e[8],t=0;t<P.length;t+=1){const s=_e(e,P,t);z[t]?z[t].p(s,n):(z[t]=Ae(s),z[t].c(),z[t].m(k,null))}for(;t<z.length;t+=1)z[t].d(1);z.length=P.length}if(32769&n[0]){let t;for(M=e[0],t=0;t<M.length;t+=1){const s=Ce(e,M,t);L[t]?(L[t].p(s,n),$(L[t],1)):(L[t]=Ue(s),L[t].c(),$(L[t],1),L[t].m(I,null))}for(C(),t=M.length;t<L.length;t+=1)R(t);T()}e[3]?O?O.p(e,n):(O=qe(e),O.c(),O.m(S,D)):O&&(O.d(1),O=null),e[1]?B?B.p(e,n):(B=Je(e),B.c(),B.m(S,j)):B&&(B.d(1),B=null),e[4]>1?U?U.p(e,n):(U=Ye(e),U.c(),U.m(S,null)):U&&(U.d(1),U=null)},i(e){if(!V){for(let e=0;e<M.length;e+=1)$(L[e]);V=!0}},o(e){L=L.filter(Boolean);for(let t=0;t<L.length;t+=1)E(L[t]);V=!1},d(e){A&&A.d(e),e&&i(t),e&&i(n),v(z,e),v(L,e),e&&i(_),e&&i(S),O&&O.d(),B&&B.d(),U&&U.d()}}}function Qe(e,t,n){let s;S(e,ee,(e=>n(7,s=e)));let{rows:r}=t,{next:a}=t,{rowsCount:o}=t,{loaded:l}=t,{currentPage:i}=t,c=[],d={column:null,order:null},u={open:null};const f=r[0].map((e=>e.key)),m=L();function h(e){u.open===e?n(6,u.open=null,u):setTimeout((()=>{n(6,u.open=e,u)}),2)}function p(e,t){u.open===e&&setTimeout((()=>{n(6,u.open=null,u)}),1),n(6,u.open=e,u)}function g(e,t){n(5,d={column:e,order:t}),m("query",{sort:d,filters:c})}function x(e){n(5,d={column:null,order:null}),m("query",{sort:d,filters:c})}function y(e){m("viewLocation",e)}j((()=>{const e=window.mapboxgl;e.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJuR1ZmQ01vIn0.zyEdsIKM-4orPm-3Y0XWDQ";const t=new MapboxGeocoder({accessToken:e.accessToken,types:"region,district,place"});t.addTo("#geocoder"),t.on("result",(({result:e})=>{const t=e,{place_name:n,place_type:s}=t,r=n.split(", "),a=s[0];"place"===a?(c.push({column:"CityName",value:r[0]}),c.push({column:"StateName",value:Ne[r[1]]})):"district"===a?(c.push({column:"CountyName",value:r[0].replace(" County","").toLowerCase()}),c.push({column:"StateName",value:Ne[r[1]]})):"region"===a&&c.push({column:"StateName",value:Ne[r[0]]}),m("query",{sort:d,filters:c})}))}));return e.$$set=e=>{"rows"in e&&n(0,r=e.rows),"next"in e&&n(1,a=e.next),"rowsCount"in e&&n(2,o=e.rowsCount),"loaded"in e&&n(3,l=e.loaded),"currentPage"in e&&n(4,i=e.currentPage)},[r,a,o,l,i,d,u,s,f,h,p,g,x,function(e){m("nextPage",{sort:d,filters:c})},function(e){m("previousPage",{sort:d,filters:c})},y,function(){ee.update((()=>!1))},e=>{h(e)},e=>g(e,"ASC"),e=>g(e,"DESC"),e=>x(),(e,t)=>{p(e)},e=>{y(e.value)}]}class Xe extends n{constructor(e){super(),s(this,e,Qe,We,r,{rows:0,next:1,rowsCount:2,loaded:3,currentPage:4},[-1,-1])}}function Ze(e,t,n){const s=e.slice();return s[2]=t[n],s[4]=n,s}function et(e){let t,n;return{c(){t=m("h1"),n=h(e[1]),this.h()},l(s){t=o(s,"H1",{class:!0});var r=l(t);n=p(r,e[1]),r.forEach(i),this.h()},h(){c(t,"class","text-xs sm:text-base font-medium mb-2")},m(e,s){d(e,t,s),u(t,n)},p(e,t){2&t&&g(n,e[1])},d(e){e&&i(t)}}}function tt(e){let t;return{c(){t=h("+")},l(e){t=p(e,"+")},m(e,n){d(e,t,n)},p:f,d(e){e&&i(t)}}}function nt(e){let t,n,s=e[0][e[4]+1][0]-1+"";return{c(){t=h("-"),n=h(s)},l(e){t=p(e,"-"),n=p(e,s)},m(e,s){d(e,t,s),d(e,n,s)},p(e,t){1&t&&s!==(s=e[0][e[4]+1][0]-1+"")&&g(n,s)},d(e){e&&i(t),e&&i(n)}}}function st(e){let t,n,s,r,a,f,v=e[2][0]+"";function w(e,t){return e[0][e[4]+1]?nt:tt}let $=w(e),E=$(e);return{c(){t=m("div"),n=m("span"),s=x(),r=m("span"),a=h(v),E.c(),f=x(),this.h()},l(e){t=o(e,"DIV",{class:!0});var c=l(t);n=o(c,"SPAN",{class:!0,style:!0}),l(n).forEach(i),s=y(c),r=o(c,"SPAN",{});var d=l(r);a=p(d,v),E.l(d),d.forEach(i),f=y(c),c.forEach(i),this.h()},h(){c(n,"class","w-2 h-2 sm:w-4 sm:h-4 inline-block"),b(n,"background-color",e[2][1]),c(t,"class","text-xs")},m(e,o){d(e,t,o),u(t,n),u(t,s),u(t,r),u(r,a),E.m(r,null),u(t,f)},p(e,t){1&t&&b(n,"background-color",e[2][1]),1&t&&v!==(v=e[2][0]+"")&&g(a,v),$===($=w(e))&&E?E.p(e,t):(E.d(1),E=$(e),E&&(E.c(),E.m(r,null)))},d(e){e&&i(t),E.d()}}}function rt(e){let t,n,s=e[1]&&et(e),r=e[0],a=[];for(let o=0;o<r.length;o+=1)a[o]=st(Ze(e,r,o));return{c(){t=m("div"),s&&s.c(),n=x();for(let e=0;e<a.length;e+=1)a[e].c();this.h()},l(e){t=o(e,"DIV",{class:!0});var r=l(t);s&&s.l(r),n=y(r);for(let t=0;t<a.length;t+=1)a[t].l(r);r.forEach(i),this.h()},h(){c(t,"class","\n    absolute\n    z-10\n    flex\n    flex-col\n    bg-white\n    px-2\n    py-1\n    sm:px-4\n    sm:py-2\n    max-w-[95px]\n    sm:max-w-[150px]\n    shadow-sm\n    rounded-md\n    top-56\n    sm:top-60\n    left-2\n  ")},m(e,r){d(e,t,r),s&&s.m(t,null),u(t,n);for(let n=0;n<a.length;n+=1)a[n].m(t,null)},p(e,[o]){if(e[1]?s?s.p(e,o):(s=et(e),s.c(),s.m(t,n)):s&&(s.d(1),s=null),1&o){let n;for(r=e[0],n=0;n<r.length;n+=1){const s=Ze(e,r,n);a[n]?a[n].p(s,o):(a[n]=st(s),a[n].c(),a[n].m(t,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=r.length}},i:f,o:f,d(e){e&&i(t),s&&s.d(),v(a,e)}}}function at(e,t,n){let{scale:s}=t,{title:r}=t;return e.$$set=e=>{"scale"in e&&n(0,s=e.scale),"title"in e&&n(1,r=e.title)},[s,r]}class ot extends n{constructor(e){super(),s(this,e,at,rt,r,{scale:0,title:1})}}function lt(e){let t;const n=e[11].default,s=V(n,e,e[10],null);return{c(){s&&s.c()},l(e){s&&s.l(e)},m(e,n){s&&s.m(e,n),t=!0},p(e,r){s&&s.p&&(!t||1024&r)&&w(s,n,e,e[10],r,null,null)},i(e){t||($(s,e),t=!0)},o(e){E(s,e),t=!1},d(e){s&&s.d(e)}}}function it(e){let t,n,s,r,a,f,g;function b(e,t){return e[3]?dt:ct}let v=b(e),w=v(e);return{c(){t=m("div"),n=m("button"),s=h("x"),r=x(),a=m("div"),w.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var c=l(t);n=o(c,"BUTTON",{class:!0});var d=l(n);s=p(d,"x"),d.forEach(i),r=y(c),a=o(c,"DIV",{class:!0});var u=l(a);w.l(u),u.forEach(i),c.forEach(i),this.h()},h(){c(n,"class","\n        float-right\n        h-4\n        px-2\n        pb-5\n        rounded-sm\n        mt-2\n        mr-2\n        hover:bg-gray-100\n        text-gray-600\n        hover:text-gray-900\n      "),c(a,"class","p-4 sm:px-6"),c(t,"class","z-10 bg-white shadow overflow-hidden rounded-md absolute top-2 right-0 mr-2 w-1/2 lg:w-1/3 pb-2")},m(o,l){d(o,t,l),u(t,n),u(n,s),u(t,r),u(t,a),w.m(a,null),f||(g=z(n,"click",e[9]),f=!0)},p(e,t){v===(v=b(e))&&w?w.p(e,t):(w.d(1),w=v(e),w&&(w.c(),w.m(a,null)))},d(e){e&&i(t),w.d(),f=!1,g()}}}function ct(e){let t,n,s,r,a;return{c(){t=m("h3"),n=h("Railroad crossing accidents in U.S. states"),s=x(),r=m("p"),a=h("Click states to see the total railroad crossing crashes, deaths and injuries. For information on specific crossings, see the database and interactive map."),this.h()},l(e){t=o(e,"H3",{class:!0});var c=l(t);n=p(c,"Railroad crossing accidents in U.S. states"),c.forEach(i),s=y(e),r=o(e,"P",{class:!0});var d=l(r);a=p(d,"Click states to see the total railroad crossing crashes, deaths and injuries. For information on specific crossings, see the database and interactive map."),d.forEach(i),this.h()},h(){c(t,"class","sm:text-xl md:text-2xl sm:leading-6 font-bold text-gray-900 sm:pb-2 mb-1 sm:mb-2 border-b border-gray-100"),c(r,"class","font-medium my-0 py0 max-w-2xl text-xs sm:text-base md:text-lg text-gray-600")},m(e,o){d(e,t,o),u(t,n),d(e,s,o),d(e,r,o),u(r,a)},p:f,d(e){e&&i(t),e&&i(s),e&&i(r)}}}function dt(e){let t,n,s,r,a,f,b,v,w,$,E,k,N,I,C,T,_,S,D,j,V,A,P,M,L,R,O=e[3].properties.name+"",B=e[3].properties.accidents+"",U=e[3].properties.killed+"",q=e[3].properties.injured+"",K=e[3].properties.name+"";return{c(){t=m("h3"),n=h(O),s=x(),r=m("p"),a=h(B),f=x(),b=m("span"),v=h("Accidents"),w=x(),$=m("p"),E=h(U),k=x(),N=m("span"),I=h("Killed"),C=x(),T=m("p"),_=h(q),S=x(),D=m("span"),j=h("Injured"),V=x(),A=m("button"),P=h("View crossings in "),M=h(K),this.h()},l(e){t=o(e,"H3",{class:!0});var c=l(t);n=p(c,O),c.forEach(i),s=y(e),r=o(e,"P",{class:!0});var d=l(r);a=p(d,B),f=y(d),b=o(d,"SPAN",{class:!0});var u=l(b);v=p(u,"Accidents"),u.forEach(i),d.forEach(i),w=y(e),$=o(e,"P",{class:!0});var m=l($);E=p(m,U),k=y(m),N=o(m,"SPAN",{class:!0});var h=l(N);I=p(h,"Killed"),h.forEach(i),m.forEach(i),C=y(e),T=o(e,"P",{class:!0});var g=l(T);_=p(g,q),S=y(g),D=o(g,"SPAN",{class:!0});var x=l(D);j=p(x,"Injured"),x.forEach(i),g.forEach(i),V=y(e),A=o(e,"BUTTON",{class:!0});var z=l(A);P=p(z,"View crossings in "),M=p(z,K),z.forEach(i),this.h()},h(){c(t,"class","sm:text-lg sm:text-xl md:text-2xl sm:leading-6 font-bold text-gray-900 sm:pb-2 mb-1 sm:mb-2 border-b border-gray-100"),c(b,"class","font-normal"),c(r,"class","font-bold my-0 py0 max-w-2xl sm:text-lg text-gray-600"),c(N,"class","font-normal"),c($,"class","font-bold my-0 py0 max-w-2xl sm:text-lg text-gray-600"),c(D,"class","font-normal"),c(T,"class","font-bold my-0 py0 max-w-2xl sm:text-lg text-gray-600"),c(A,"class","mt-2 mr-2 inline-flex items-center p-1 sm:px-2.5 sm:py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},m(o,l){d(o,t,l),u(t,n),d(o,s,l),d(o,r,l),u(r,a),u(r,f),u(r,b),u(b,v),d(o,w,l),d(o,$,l),u($,E),u($,k),u($,N),u(N,I),d(o,C,l),d(o,T,l),u(T,_),u(T,S),u(T,D),u(D,j),d(o,V,l),d(o,A,l),u(A,P),u(A,M),L||(R=z(A,"click",e[8]),L=!0)},p(e,t){8&t&&O!==(O=e[3].properties.name+"")&&g(n,O),8&t&&B!==(B=e[3].properties.accidents+"")&&g(a,B),8&t&&U!==(U=e[3].properties.killed+"")&&g(E,U),8&t&&q!==(q=e[3].properties.injured+"")&&g(_,q),8&t&&K!==(K=e[3].properties.name+"")&&g(M,K)},d(e){e&&i(t),e&&i(s),e&&i(r),e&&i(w),e&&i($),e&&i(C),e&&i(T),e&&i(V),e&&i(A),L=!1,R()}}}function ut(e){let t,n,s,r,a,f,g,b,v,w,S,D,j,V,A,P,L,R=e[2]&&lt(e);j=new ot({props:{scale:e[6],title:e[5]}});let B=e[4]&&it(e);return{c(){t=m("div"),R&&R.c(),n=x(),s=m("div"),r=m("button"),a=h("Accidents"),f=x(),g=m("button"),b=h("Killed"),v=x(),w=m("button"),S=h("Injured"),D=x(),k(j.$$.fragment),V=x(),B&&B.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var c=l(t);R&&R.l(c),n=y(c),s=o(c,"DIV",{class:!0});var d=l(s);r=o(d,"BUTTON",{type:!0,class:!0});var u=l(r);a=p(u,"Accidents"),u.forEach(i),f=y(d),g=o(d,"BUTTON",{type:!0,class:!0});var m=l(g);b=p(m,"Killed"),m.forEach(i),v=y(d),w=o(d,"BUTTON",{type:!0,class:!0});var h=l(w);S=p(h,"Injured"),h.forEach(i),d.forEach(i),D=y(c),N(j.$$.fragment,c),V=y(c),B&&B.l(c),c.forEach(i),this.h()},h(){c(r,"type","button"),c(r,"class","\n        relative\n        inline-flex\n        items-center\n        p-2\n        sm:px-4\n        rounded-t-md\n        border\n        border-gray-300\n        bg-white\n        text-xs\n        sm:text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(r,"selected","accidents"===e[0]),c(g,"type","button"),c(g,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        p-2\n        sm:px-4\n        border\n        border-gray-300\n        bg-white\n        text-xs\n        sm:text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(g,"selected","killed"===e[0]),c(w,"type","button"),c(w,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        p-2\n        sm:px-4\n        rounded-b-md\n        border\n        border-gray-300\n        bg-white\n        text-xs\n        sm:text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(w,"selected","injured"===e[0]),c(s,"class","absolute z-10 flex flex-col shadow-sm rounded-md top-28 left-2"),c(t,"class","flex-grow z-0 h-full")},m(o,l){d(o,t,l),R&&R.m(t,null),u(t,n),u(t,s),u(s,r),u(r,a),u(s,f),u(s,g),u(g,b),u(s,v),u(s,w),u(w,S),u(t,D),I(j,t,null),u(t,V),B&&B.m(t,null),e[15](t),A=!0,P||(L=[z(r,"click",e[12]),z(g,"click",e[13]),z(w,"click",e[14])],P=!0)},p(e,[s]){e[2]?R?(R.p(e,s),4&s&&$(R,1)):(R=lt(e),R.c(),$(R,1),R.m(t,n)):R&&(C(),E(R,1,1,(()=>{R=null})),T()),1&s&&O(r,"selected","accidents"===e[0]),1&s&&O(g,"selected","killed"===e[0]),1&s&&O(w,"selected","injured"===e[0]);const a={};64&s&&(a.scale=e[6]),32&s&&(a.title=e[5]),j.$set(a),e[4]?B?B.p(e,s):(B=it(e),B.c(),B.m(t,null)):B&&(B.d(1),B=null)},i(e){A||($(R),$(j.$$.fragment,e),A=!0)},o(e){E(R),E(j.$$.fragment,e),A=!1},d(n){n&&i(t),R&&R.d(),_(j),B&&B.d(),e[15](null),P=!1,M(L)}}}function ft(e,t,n){let s,r,a;S(e,Z,(e=>n(17,a=e)));let{$$slots:o={},$$scope:l}=t;const i=L();let c,d,u,f="accidents",m=null,h=!0;const p={accidents:"Number of accidents",injured:"Number of accidents with injuries",killed:"Number of accidents with fatalities"},g={accidents:[[0,"#fcde9c"],[500,"#faa476"],[1e3,"#f0746e"],[2e3,"#e34f6f"],[4e3,"#dc3977"],[8e3,"#b9257a"],[16e3,"#7c1d6f"]],injured:[[0,"#fcde9c"],[250,"#faa476"],[500,"#f0746e"],[750,"#e34f6f"],[1e3,"#dc3977"],[1250,"#b9257a"],[1500,"#7c1d6f"]],killed:[[0,"#fcde9c"],[825,"#faa476"],[1750,"#f0746e"],[2625,"#e34f6f"],[3500,"#dc3977"],[4375,"#b9257a"],[6175,"#7c1d6f"]]};function x(e){n(0,f=e);const t=r;d.setPaintProperty("state_totals","fill-color",{property:f,stops:t})}D(W,{getMap:()=>d}),D(Q,{getMapbox:()=>u}),j((async()=>{u=window.mapboxgl,u.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(2,d=new u.Map({container:c,style:"mapbox://styles/mapbox/light-v10",center:a.lngLat,zoom:a.zoom,minZoom:0,maxZoom:8})),d.addControl(new u.NavigationControl,"top-left"),d.on("load",(()=>{d.resize(),d.addSource("state_totals",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incident-totals/states/{z}/{x}/{y}.pbf"]}),d.addLayer({id:"state_totals",type:"fill",source:"state_totals","source-layer":"state_totals",layout:{},paint:{"fill-color":{property:f,stops:[[0,"#fcde9c"],[500,"#faa476"],[1e3,"#f0746e"],[2e3,"#e34f6f"],[4e3,"#dc3977"],[8e3,"#b9257a"],[16e3,"#7c1d6f"]]},"fill-opacity":["case",["boolean",["feature-state","hover"],!1],1,.7]}}),d.addLayer({id:"state_totals_lines",type:"line",source:"state_totals","source-layer":"state_totals",layout:{},paint:{"line-color":"#444","line-width":["case",["boolean",["feature-state","hover"],!1],3,1]}})}));let e=null;function t({featureId:e,state:t}){d.setFeatureState({id:e,source:"state_totals",sourceLayer:"state_totals"},{hover:t})}return d.on("mousemove",(function(n){const s=d.queryRenderedFeatures(n.point,{layers:["state_totals"]})[0];if(!s)return d.getCanvas().style.cursor="",void(e&&(t({featureId:e,state:!1}),e=null));d.getCanvas().style.cursor="pointer",s&&s.id===e||(e&&t({featureId:e,state:!1}),e=s.id,t({featureId:s.id,state:!0}))})),d.on("mouseleave","state_totals",(function(){d.getCanvas().style.cursor=""})),d.on("click",(async function(e){const t=d.queryRenderedFeatures(e.point);n(3,m=t.find((e=>"state_totals"===e.layer.id)))})),()=>{n(2,d=null)}}));return e.$$set=e=>{"$$scope"in e&&n(10,l=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&n(5,s=p[f]),1&e.$$.dirty&&n(6,r=g[f])},[f,c,d,m,h,s,r,x,function(){const e=B(m);i("viewLocation",{bbox:e})},function(){n(4,h=!1)},l,o,()=>{x("accidents")},()=>{x("killed")},()=>{x("injured")},function(e){A[e?"unshift":"push"]((()=>{c=e,n(1,c)}))}]}class mt extends n{constructor(e){super(),s(this,e,ft,ut,r,{})}}function ht(e){let t;const n=e[11].default,s=V(n,e,e[10],null);return{c(){s&&s.c()},l(e){s&&s.l(e)},m(e,n){s&&s.m(e,n),t=!0},p(e,r){s&&s.p&&(!t||1024&r)&&w(s,n,e,e[10],r,null,null)},i(e){t||($(s,e),t=!0)},o(e){E(s,e),t=!1},d(e){s&&s.d(e)}}}function pt(e){let t,n,s,r,a,f,g;function b(e,t){return e[3]?xt:gt}let v=b(e),w=v(e);return{c(){t=m("div"),n=m("button"),s=h("x"),r=x(),a=m("div"),w.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var c=l(t);n=o(c,"BUTTON",{class:!0});var d=l(n);s=p(d,"x"),d.forEach(i),r=y(c),a=o(c,"DIV",{class:!0});var u=l(a);w.l(u),u.forEach(i),c.forEach(i),this.h()},h(){c(n,"class","\n        float-right\n        h-4\n        px-2\n        pb-5\n        rounded-sm\n        mt-2\n        mr-2\n        hover:bg-gray-100\n        text-gray-600\n        hover:text-gray-900\n      "),c(a,"class","p-4 sm:px-6"),c(t,"class","z-10 bg-white shadow overflow-hidden rounded-md absolute top-2 right-0 mr-2 w-1/2 lg:w-1/3 pb-2")},m(o,l){d(o,t,l),u(t,n),u(n,s),u(t,r),u(t,a),w.m(a,null),f||(g=z(n,"click",e[9]),f=!0)},p(e,t){v===(v=b(e))&&w?w.p(e,t):(w.d(1),w=v(e),w&&(w.c(),w.m(a,null)))},d(e){e&&i(t),w.d(),f=!1,g()}}}function gt(e){let t,n,s,r,a;return{c(){t=m("h3"),n=h("Railroad crossing accidents in New Jersey counties"),s=x(),r=m("p"),a=h("Click counties to see the total railroad crossing crashes, deaths and injuries. For information on specific crossings, see the database and interactive map."),this.h()},l(e){t=o(e,"H3",{class:!0});var c=l(t);n=p(c,"Railroad crossing accidents in New Jersey counties"),c.forEach(i),s=y(e),r=o(e,"P",{class:!0});var d=l(r);a=p(d,"Click counties to see the total railroad crossing crashes, deaths and injuries. For information on specific crossings, see the database and interactive map."),d.forEach(i),this.h()},h(){c(t,"class","sm:text-xl md:text-2xl sm:leading-6 font-bold text-gray-900 sm:pb-2 mb-1 sm:mb-2 border-b border-gray-100"),c(r,"class","font-medium my-0 py0 max-w-2xl text-xs sm:text-base md:text-lg text-gray-600")},m(e,o){d(e,t,o),u(t,n),d(e,s,o),d(e,r,o),u(r,a)},p:f,d(e){e&&i(t),e&&i(s),e&&i(r)}}}function xt(e){let t,n,s,r,a,f,b,v,w,$,E,k,N,I,C,T,_,S,D,j,V,A,P,M,L,R,O=e[3].properties.name+"",B=e[3].properties.accidents+"",U=e[3].properties.killed+"",q=e[3].properties.injured+"",K=e[3].properties.name+"";return{c(){t=m("h3"),n=h(O),s=x(),r=m("p"),a=h(B),f=x(),b=m("span"),v=h("Accidents"),w=x(),$=m("p"),E=h(U),k=x(),N=m("span"),I=h("Killed"),C=x(),T=m("p"),_=h(q),S=x(),D=m("span"),j=h("Injured"),V=x(),A=m("button"),P=h("View crossings in "),M=h(K),this.h()},l(e){t=o(e,"H3",{class:!0});var c=l(t);n=p(c,O),c.forEach(i),s=y(e),r=o(e,"P",{class:!0});var d=l(r);a=p(d,B),f=y(d),b=o(d,"SPAN",{class:!0});var u=l(b);v=p(u,"Accidents"),u.forEach(i),d.forEach(i),w=y(e),$=o(e,"P",{class:!0});var m=l($);E=p(m,U),k=y(m),N=o(m,"SPAN",{class:!0});var h=l(N);I=p(h,"Killed"),h.forEach(i),m.forEach(i),C=y(e),T=o(e,"P",{class:!0});var g=l(T);_=p(g,q),S=y(g),D=o(g,"SPAN",{class:!0});var x=l(D);j=p(x,"Injured"),x.forEach(i),g.forEach(i),V=y(e),A=o(e,"BUTTON",{class:!0});var z=l(A);P=p(z,"View crossings in "),M=p(z,K),z.forEach(i),this.h()},h(){c(t,"class","sm:text-lg sm:text-xl md:text-2xl sm:leading-6 font-bold text-gray-900 sm:pb-2 mb-1 sm:mb-2 border-b border-gray-100"),c(b,"class","font-normal"),c(r,"class","font-bold my-0 py0 max-w-2xl sm:text-lg text-gray-600"),c(N,"class","font-normal"),c($,"class","font-bold my-0 py0 max-w-2xl sm:text-lg text-gray-600"),c(D,"class","font-normal"),c(T,"class","font-bold my-0 py0 max-w-2xl sm:text-lg text-gray-600"),c(A,"class","mt-2 mr-2 inline-flex items-center p-1 sm:px-2.5 sm:py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},m(o,l){d(o,t,l),u(t,n),d(o,s,l),d(o,r,l),u(r,a),u(r,f),u(r,b),u(b,v),d(o,w,l),d(o,$,l),u($,E),u($,k),u($,N),u(N,I),d(o,C,l),d(o,T,l),u(T,_),u(T,S),u(T,D),u(D,j),d(o,V,l),d(o,A,l),u(A,P),u(A,M),L||(R=z(A,"click",e[8]),L=!0)},p(e,t){8&t&&O!==(O=e[3].properties.name+"")&&g(n,O),8&t&&B!==(B=e[3].properties.accidents+"")&&g(a,B),8&t&&U!==(U=e[3].properties.killed+"")&&g(E,U),8&t&&q!==(q=e[3].properties.injured+"")&&g(_,q),8&t&&K!==(K=e[3].properties.name+"")&&g(M,K)},d(e){e&&i(t),e&&i(s),e&&i(r),e&&i(w),e&&i($),e&&i(C),e&&i(T),e&&i(V),e&&i(A),L=!1,R()}}}function yt(e){let t,n,s,r,a,f,g,b,v,w,S,D,j,V,A,P,L,R=e[2]&&ht(e);j=new ot({props:{scale:e[6],title:e[5]}});let B=e[4]&&pt(e);return{c(){t=m("div"),R&&R.c(),n=x(),s=m("div"),r=m("button"),a=h("Accidents"),f=x(),g=m("button"),b=h("Killed"),v=x(),w=m("button"),S=h("Injured"),D=x(),k(j.$$.fragment),V=x(),B&&B.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var c=l(t);R&&R.l(c),n=y(c),s=o(c,"DIV",{class:!0});var d=l(s);r=o(d,"BUTTON",{type:!0,class:!0});var u=l(r);a=p(u,"Accidents"),u.forEach(i),f=y(d),g=o(d,"BUTTON",{type:!0,class:!0});var m=l(g);b=p(m,"Killed"),m.forEach(i),v=y(d),w=o(d,"BUTTON",{type:!0,class:!0});var h=l(w);S=p(h,"Injured"),h.forEach(i),d.forEach(i),D=y(c),N(j.$$.fragment,c),V=y(c),B&&B.l(c),c.forEach(i),this.h()},h(){c(r,"type","button"),c(r,"class","\n        relative\n        inline-flex\n        items-center\n        p-2\n        sm:px-4\n        rounded-t-md\n        border\n        border-gray-300\n        bg-white\n        text-xs\n        sm:text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(r,"selected","accidents"===e[0]),c(g,"type","button"),c(g,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        p-2\n        sm:px-4\n        border\n        border-gray-300\n        bg-white\n        text-xs\n        sm:text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(g,"selected","killed"===e[0]),c(w,"type","button"),c(w,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        p-2\n        sm:px-4\n        rounded-b-md\n        border\n        border-gray-300\n        bg-white\n        text-xs\n        sm:text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(w,"selected","injured"===e[0]),c(s,"class","absolute z-10 flex flex-col shadow-sm rounded-md top-28 left-2"),c(t,"class","flex-grow z-0 h-full")},m(o,l){d(o,t,l),R&&R.m(t,null),u(t,n),u(t,s),u(s,r),u(r,a),u(s,f),u(s,g),u(g,b),u(s,v),u(s,w),u(w,S),u(t,D),I(j,t,null),u(t,V),B&&B.m(t,null),e[15](t),A=!0,P||(L=[z(r,"click",e[12]),z(g,"click",e[13]),z(w,"click",e[14])],P=!0)},p(e,[s]){e[2]?R?(R.p(e,s),4&s&&$(R,1)):(R=ht(e),R.c(),$(R,1),R.m(t,n)):R&&(C(),E(R,1,1,(()=>{R=null})),T()),1&s&&O(r,"selected","accidents"===e[0]),1&s&&O(g,"selected","killed"===e[0]),1&s&&O(w,"selected","injured"===e[0]);const a={};32&s&&(a.title=e[5]),j.$set(a),e[4]?B?B.p(e,s):(B=pt(e),B.c(),B.m(t,null)):B&&(B.d(1),B=null)},i(e){A||($(R),$(j.$$.fragment,e),A=!0)},o(e){E(R),E(j.$$.fragment,e),A=!1},d(n){n&&i(t),R&&R.d(),_(j),B&&B.d(),e[15](null),P=!1,M(L)}}}function bt(e,t,n){let s,r;S(e,X,(e=>n(17,r=e)));let{$$slots:a={},$$scope:o}=t;const l=L();let i,c,d,u,f="accidents",m=!0;const h={accidents:"Number of accidents",injured:"Number of accidents with injuries",killed:"Number of accidents with fatalities"};D(W,{getMap:()=>c}),D(Q,{getMapbox:()=>d});const p=[[0,"#fcde9c"],[15,"#faa476"],[30,"#f0746e"],[45,"#e34f6f"],[60,"#dc3977"],[75,"#b9257a"],[90,"#7c1d6f"]];function g(e){n(0,f=e),c.setPaintProperty("county_totals","fill-color",{property:f,stops:p})}j((async()=>{d=window.mapboxgl,d.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(2,c=new d.Map({container:i,style:"mapbox://styles/mapbox/light-v10",center:r.lngLat,zoom:r.zoom,minZoom:7,maxZoom:14})),c.addControl(new d.NavigationControl,"top-left"),c.on("load",(()=>{c.resize(),c.addSource("county_totals",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incident-totals/counties/{z}/{x}/{y}.pbf"]}),c.addLayer({id:"county_totals",type:"fill",source:"county_totals","source-layer":"county_totals",layout:{},paint:{"fill-color":{property:f,stops:[[0,"#fcde9c"],[15,"#faa476"],[30,"#f0746e"],[45,"#e34f6f"],[60,"#dc3977"],[75,"#b9257a"],[90,"#7c1d6f"]]},"fill-opacity":["case",["boolean",["feature-state","hover"],!1],1,.7]}}),c.addLayer({id:"county_totals_lines",type:"line",source:"county_totals","source-layer":"county_totals",layout:{},paint:{"line-color":"#444","line-width":["case",["boolean",["feature-state","hover"],!1],3,1]}})}));let e=null;function t({featureId:e,state:t}){c.setFeatureState({id:e,source:"county_totals",sourceLayer:"county_totals"},{hover:t})}return c.on("mousemove",(function(n){const s=c.queryRenderedFeatures(n.point,{layers:["county_totals"]})[0];if(!s)return c.getCanvas().style.cursor="",void(e&&(t({featureId:e,state:!1}),e=null));c.getCanvas().style.cursor="pointer",s&&s.id===e||(e&&t({featureId:e,state:!1}),e=s.id,t({featureId:s.id,state:!0}))})),c.on("mouseleave","county_totals",(function(){c.getCanvas().style.cursor=""})),c.on("click",(async function(e){const t=c.queryRenderedFeatures(e.point);n(3,u=t.find((e=>"county_totals"===e.layer.id))),n(4,m=!0)})),()=>{n(2,c=null)}}));return e.$$set=e=>{"$$scope"in e&&n(10,o=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&n(5,s=h[f])},[f,i,c,u,m,s,p,g,function(){const e=B(u);l("viewLocation",{bbox:e})},function(){n(4,m=!1)},o,a,()=>{g("accidents")},()=>{g("killed")},()=>{g("injured")},function(e){A[e?"unshift":"push"]((()=>{i=e,n(1,i)}))}]}class vt extends n{constructor(e){super(),s(this,e,bt,yt,r,{})}}function wt(e){let t,n,s,r;return s=new vt({}),s.$on("viewLocation",e[13]),{c(){t=m("div"),n=m("div"),k(s.$$.fragment),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=l(t);n=o(r,"DIV",{class:!0});var a=l(n);N(s.$$.fragment,a),a.forEach(i),r.forEach(i),this.h()},h(){c(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),c(t,"class","p-1 sm:p-4 h-full bg-gray-50")},m(e,a){d(e,t,a),u(t,n),I(s,n,null),r=!0},p:f,i(e){r||($(s.$$.fragment,e),r=!0)},o(e){E(s.$$.fragment,e),r=!1},d(e){e&&i(t),_(s)}}}function $t(e){let t,n,s,r;return s=new mt({}),s.$on("viewLocation",e[13]),{c(){t=m("div"),n=m("div"),k(s.$$.fragment),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=l(t);n=o(r,"DIV",{class:!0});var a=l(n);N(s.$$.fragment,a),a.forEach(i),r.forEach(i),this.h()},h(){c(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),c(t,"class","p-1 sm:p-4 h-full bg-gray-50")},m(e,a){d(e,t,a),u(t,n),I(s,n,null),r=!0},p:f,i(e){r||($(s.$$.fragment,e),r=!0)},o(e){E(s.$$.fragment,e),r=!1},d(e){e&&i(t),_(s)}}}function Et(e){let t,n,s,r;return s=new Xe({props:{rows:e[0],columns:e[1],next:e[2],rowsCount:e[3],loaded:e[5],currentPage:e[6]}}),s.$on("query",e[10]),s.$on("nextPage",e[11]),s.$on("previousPage",e[12]),s.$on("viewLocation",e[13]),{c(){t=m("div"),n=m("div"),k(s.$$.fragment),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=l(t);n=o(r,"DIV",{class:!0});var a=l(n);N(s.$$.fragment,a),a.forEach(i),r.forEach(i),this.h()},h(){c(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),c(t,"class","p-1 sm:p-4 pb-12 h-full bg-gray-50")},m(e,a){d(e,t,a),u(t,n),I(s,n,null),r=!0},p(e,t){const n={};1&t&&(n.rows=e[0]),2&t&&(n.columns=e[1]),4&t&&(n.next=e[2]),8&t&&(n.rowsCount=e[3]),32&t&&(n.loaded=e[5]),64&t&&(n.currentPage=e[6]),s.$set(n)},i(e){r||($(s.$$.fragment,e),r=!0)},o(e){E(s.$$.fragment,e),r=!1},d(e){e&&i(t),_(s)}}}function kt(e){let t,n,s,r;return s=new ke({props:{center:e[7],bbox:e[8]}}),{c(){t=m("div"),n=m("div"),k(s.$$.fragment),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=l(t);n=o(r,"DIV",{class:!0});var a=l(n);N(s.$$.fragment,a),a.forEach(i),r.forEach(i),this.h()},h(){c(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),c(t,"class","p-1 sm:p-4 h-full bg-gray-50")},m(e,a){d(e,t,a),u(t,n),I(s,n,null),r=!0},p(e,t){const n={};128&t&&(n.center=e[7]),256&t&&(n.bbox=e[8]),s.$set(n)},i(e){r||($(s.$$.fragment,e),r=!0)},o(e){E(s.$$.fragment,e),r=!1},d(e){e&&i(t),_(s)}}}function Nt(e){let t,n,s,r,a,f,g,b,v,w,k,N,I,_,S,D,j,V,A,P,L,R,O,B,q,K,F,H,G,J,Y,W,Q,X,Z,ee,te,ne,se,re,ae,oe,le,ie,ce,de,ue,fe,me,he,pe,ge,xe,ye,be,ve,we,$e,Ee,ke,Ne,Ie,Ce,Te,_e,Se;const De=[kt,Et,$t,wt],je=[];function Ve(e,t){return"map"===e[4]?0:"list"===e[4]?1:"us-totals"===e[4]?2:"nj-totals"===e[4]?3:-1}return~(fe=Ve(e))&&(me=je[fe]=De[fe](e)),{c(){t=m("script"),s=m("link"),r=m("script"),f=m("link"),g=x(),b=m("div"),v=m("div"),w=m("h1"),k=h("Railroad Crossing Incidents"),N=x(),I=m("div"),_=m("nav"),S=m("button"),D=m("span"),j=h("Map"),V=x(),A=m("span"),R=x(),O=m("button"),B=m("span"),q=h("Locations"),K=x(),F=m("span"),J=x(),Y=m("button"),W=m("span"),Q=h("N.J. Totals"),X=x(),Z=m("span"),ne=x(),se=m("button"),re=m("span"),ae=h("U.S. Totals"),oe=x(),le=m("span"),de=x(),ue=m("div"),me&&me.c(),he=x(),pe=m("div"),ge=h("Story by "),xe=m("a"),ye=h("Payton Guion"),be=h(". Graphics by "),ve=m("a"),we=h("Seth Vincent"),$e=h(". "),Ee=m("br"),ke=h("Data from the "),Ne=m("a"),Ie=h("Federal Railroad Administration"),Ce=h("."),this.h()},l(e){const n=U('[data-svelte="svelte-hlw6vs"]',document.head);t=o(n,"SCRIPT",{src:!0}),l(t).forEach(i),s=o(n,"LINK",{href:!0,rel:!0}),r=o(n,"SCRIPT",{src:!0}),l(r).forEach(i),f=o(n,"LINK",{rel:!0,href:!0,type:!0}),n.forEach(i),g=y(e),b=o(e,"DIV",{class:!0});var a=l(b);v=o(a,"DIV",{class:!0});var c=l(v);w=o(c,"H1",{class:!0});var d=l(w);k=p(d,"Railroad Crossing Incidents"),d.forEach(i),c.forEach(i),N=y(a),I=o(a,"DIV",{class:!0});var u=l(I);_=o(u,"NAV",{class:!0,"aria-label":!0});var m=l(_);S=o(m,"BUTTON",{class:!0,"aria-current":!0});var h=l(S);D=o(h,"SPAN",{});var x=l(D);j=p(x,"Map"),x.forEach(i),V=y(h),A=o(h,"SPAN",{"aria-hidden":!0,class:!0}),l(A).forEach(i),h.forEach(i),R=y(m),O=o(m,"BUTTON",{class:!0,"aria-current":!0});var $=l(O);B=o($,"SPAN",{});var E=l(B);q=p(E,"Locations"),E.forEach(i),K=y($),F=o($,"SPAN",{"aria-hidden":!0,class:!0}),l(F).forEach(i),$.forEach(i),J=y(m),Y=o(m,"BUTTON",{class:!0,"aria-current":!0});var C=l(Y);W=o(C,"SPAN",{});var T=l(W);Q=p(T,"N.J. Totals"),T.forEach(i),X=y(C),Z=o(C,"SPAN",{"aria-hidden":!0,class:!0}),l(Z).forEach(i),C.forEach(i),ne=y(m),se=o(m,"BUTTON",{class:!0,"aria-current":!0});var P=l(se);re=o(P,"SPAN",{});var z=l(re);ae=p(z,"U.S. Totals"),z.forEach(i),oe=y(P),le=o(P,"SPAN",{"aria-hidden":!0,class:!0}),l(le).forEach(i),P.forEach(i),m.forEach(i),u.forEach(i),de=y(a),ue=o(a,"DIV",{class:!0});var M=l(ue);me&&me.l(M),M.forEach(i),he=y(a),pe=o(a,"DIV",{class:!0});var L=l(pe);ge=p(L,"Story by "),xe=o(L,"A",{href:!0,target:!0,class:!0});var H=l(xe);ye=p(H,"Payton Guion"),H.forEach(i),be=p(L,". Graphics by "),ve=o(L,"A",{href:!0,target:!0,class:!0});var G=l(ve);we=p(G,"Seth Vincent"),G.forEach(i),$e=p(L,". "),Ee=o(L,"BR",{class:!0}),ke=p(L,"Data from the "),Ne=o(L,"A",{href:!0,target:!0,class:!0});var ee=l(Ne);Ie=p(ee,"Federal Railroad Administration"),ee.forEach(i),Ce=p(L,"."),L.forEach(i),a.forEach(i),this.h()},h(){document.title="Railroad Crossing Incidents",t.src!==(n="https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js")&&c(t,"src","https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js"),c(s,"href","https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.css"),c(s,"rel","stylesheet"),r.src!==(a="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js")&&c(r,"src","https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js"),c(f,"rel","stylesheet"),c(f,"href","https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.css"),c(f,"type","text/css"),c(w,"class","font-bold text-gray-600"),c(v,"class","flex-none p-1 sm:p-4"),c(A,"aria-hidden","true"),c(A,"class",P="\n          "+("map"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n          absolute inset-x-0 bottom-0 h-0.5\n        "),c(S,"class",L="\n        "+("map"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n        group relative min-w-0 flex-1 overflow-hidden bg-white py-3 px-2 sm:p-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n      "),c(S,"aria-current","page"),c(F,"aria-hidden","true"),c(F,"class",H="\n          "+("list"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n          absolute inset-x-0 bottom-0 h-0.5\n        "),c(O,"class",G="\n        "+("list"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n        group relative min-w-0 flex-1 overflow-hidden bg-white py-3 px-2 sm:p-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n      "),c(O,"aria-current","page"),c(Z,"aria-hidden","true"),c(Z,"class",ee="\n            "+("nj-totals"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),c(Y,"class",te="\n          "+("nj-totals"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-3 px-2 sm:p-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),c(Y,"aria-current","page"),c(le,"aria-hidden","true"),c(le,"class",ie="\n            "+("us-totals"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),c(se,"class",ce="\n          "+("us-totals"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-3 px-2 sm:p-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),c(se,"aria-current","page"),c(_,"class","relative z-0 shadow flex divide-x divide-gray-200 border-t border-gray-100 border-"),c(_,"aria-label","Tabs"),c(I,"class","flex-none block"),c(ue,"class","flex-grow border-t border-gray-200 overflow-hidden h-screen"),c(xe,"href","https://twitter.com/PaytonGuion"),c(xe,"target","_blank"),c(xe,"class","underline"),c(ve,"href","https://twitter.com/sethdvincent"),c(ve,"target","_blank"),c(ve,"class","underline"),c(Ee,"class","sm:hidden"),c(Ne,"href","https://railroads.dot.gov"),c(Ne,"target","_blank"),c(Ne,"class","underline"),c(pe,"class","flex-none p-2 sm:p-4 text-xs text-gray-500 border-t border-gray-200"),c(b,"class","flex flex-col absolute inset-0 border border-gray-100 max-w-screen-lg mx-auto")},m(n,a){u(document.head,t),u(document.head,s),u(document.head,r),u(document.head,f),d(n,g,a),d(n,b,a),u(b,v),u(v,w),u(w,k),u(b,N),u(b,I),u(I,_),u(_,S),u(S,D),u(D,j),u(S,V),u(S,A),u(_,R),u(_,O),u(O,B),u(B,q),u(O,K),u(O,F),u(_,J),u(_,Y),u(Y,W),u(W,Q),u(Y,X),u(Y,Z),u(_,ne),u(_,se),u(se,re),u(re,ae),u(se,oe),u(se,le),u(b,de),u(b,ue),~fe&&je[fe].m(ue,null),u(b,he),u(b,pe),u(pe,ge),u(pe,xe),u(xe,ye),u(pe,be),u(pe,ve),u(ve,we),u(pe,$e),u(pe,Ee),u(pe,ke),u(pe,Ne),u(Ne,Ie),u(pe,Ce),Te=!0,_e||(Se=[z(S,"click",e[17]),z(O,"click",e[18]),z(Y,"click",e[19]),z(se,"click",e[20])],_e=!0)},p(e,[t]){(!Te||16&t&&P!==(P="\n          "+("map"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n          absolute inset-x-0 bottom-0 h-0.5\n        "))&&c(A,"class",P),(!Te||16&t&&L!==(L="\n        "+("map"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n        group relative min-w-0 flex-1 overflow-hidden bg-white py-3 px-2 sm:p-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n      "))&&c(S,"class",L),(!Te||16&t&&H!==(H="\n          "+("list"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n          absolute inset-x-0 bottom-0 h-0.5\n        "))&&c(F,"class",H),(!Te||16&t&&G!==(G="\n        "+("list"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n        group relative min-w-0 flex-1 overflow-hidden bg-white py-3 px-2 sm:p-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n      "))&&c(O,"class",G),(!Te||16&t&&ee!==(ee="\n            "+("nj-totals"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&c(Z,"class",ee),(!Te||16&t&&te!==(te="\n          "+("nj-totals"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-3 px-2 sm:p-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&c(Y,"class",te),(!Te||16&t&&ie!==(ie="\n            "+("us-totals"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&c(le,"class",ie),(!Te||16&t&&ce!==(ce="\n          "+("us-totals"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-3 px-2 sm:p-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&c(se,"class",ce);let n=fe;fe=Ve(e),fe===n?~fe&&je[fe].p(e,t):(me&&(C(),E(je[n],1,1,(()=>{je[n]=null})),T()),~fe?(me=je[fe],me?me.p(e,t):(me=je[fe]=De[fe](e),me.c()),$(me,1),me.m(ue,null)):me=null)},i(e){Te||($(me),Te=!0)},o(e){E(me),Te=!1},d(e){i(t),i(s),i(r),i(f),e&&i(g),e&&i(b),~fe&&je[fe].d(),_e=!1,M(Se)}}}async function It({fetch:e,page:t}){const n=await e("https://railroad-crossing-incidents.vercel.app/railroad_crossing_incidents/railroad_crossing_incidents.json"),s=await n.json();if(n.ok){const{rows:e,columns:t}=G(s),n=s.filtered_table_rows_count;let r=null;return r=s.next&&s.next.includes(",")?s.next.split(",")[1]:s.next,{props:{rows:e,columns:t,next:r,rowsCount:n}}}return{status:n.status,error:new Error("Could not load data")}}function Ct(e,t,n){let s,r,a,o,l;S(e,J,(e=>n(14,l=e)));let{rows:i}=t,{columns:c}=t,{next:d}=t,{rowsCount:u}=t,f=!0,m=1,h=l.query.get("view")||"map";async function p(e){n(5,f=!1);const{sort:t,filters:s}=e,r=d?`_next=${d}`:"";let a="";t.column&&(a=`_sort${"DESC"===t.order?"_desc":""}=${t.column}`);const o=[];if(s.length)for(const n of s)"StateName"===n.column?o.push(`StateName__exact=${n.value}`):"CountyName"===n.column?o.push(`CountyName__like=${n.value}`):"CityName"===n.column&&o.push(`CityName__like=${n.value}`);const l=`https://railroad-crossing-incidents.vercel.app/railroad_crossing_incidents/railroad_crossing_incidents.json?${[r,...o,a].join("&")}`,m=await fetch(l),h=await m.json(),p=G(h);n(0,i=[...p.rows]),n(1,c=[...p.columns]),n(3,u=h.filtered_table_rows_count),h.next&&h.next.includes(",")?n(2,d=h.next.split(",")[1]):n(2,d=h.next),n(5,f=!0)}async function g(e){l.query.set("view",e),n(4,h=e);const t=l.query.toString();await Y(`${H}?${t}`)}q(1e3),K(150);return e.$$set=e=>{"rows"in e&&n(0,i=e.rows),"columns"in e&&n(1,c=e.columns),"next"in e&&n(2,d=e.next),"rowsCount"in e&&n(3,u=e.rowsCount)},e.$$.update=()=>{if(16384&e.$$.dirty&&n(15,s=l.query.get("lng")),16384&e.$$.dirty&&n(16,r=l.query.get("lat")),98304&e.$$.dirty&&n(7,a=s&r?[s,r]:null),16384&e.$$.dirty&&n(8,o=JSON.parse(l.query.get("bbox"))),16400&e.$$.dirty&&"map"!==h&&(l.query.has("lng")||l.query.has("lat"))){l.query.delete("lng"),l.query.delete("lat");const e=l.query.toString();Y(`${H}?${e}`)}},[i,c,d,u,h,f,m,a,o,g,async function(e){n(2,d=null),n(6,m=1),await p(e.detail)},async function(e){n(6,m+=1),await p(e.detail)},async function(e){n(2,d-=200),d<0&&(n(2,d=null),n(6,m=1)),n(6,m-=1),await p(e.detail)},function(e){if(e.detail.bbox)n(8,o=e.detail.bbox),l.query.set("bbox",JSON.stringify(o));else{const[t,s]=e.detail;l.query.set("lng",t),l.query.set("lat",s),n(7,a=[t,s])}g("map")},l,s,r,()=>{g("map")},()=>{g("list")},()=>{g("nj-totals")},()=>{g("us-totals")}]}export default class extends n{constructor(e){super(),s(this,e,Ct,Nt,r,{rows:0,columns:1,next:2,rowsCount:3})}}export{It as load};

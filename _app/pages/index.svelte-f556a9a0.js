import{C as t,S as e,i as a,s,E as o,v as l,r,e as n,t as c,k as i,c as u,a as d,g as h,d as g,n as p,b as f,f as m,F as v,h as y,l as x,H as b,B as w,u as $,I as E,x as _,z as I,D as j,J as T,K as N,L as z,G as L,M as k,N as D,O as V,P as S,Q as C,j as M,m as O,o as P,w as R}from"../chunks/vendor-ebd09b4d.js";const A={},J={},B=t({zoom:7.5,lngLat:["-74.558333","40.16"]}),K=t({zoom:2,lngLat:["-98.5556","39.8097"]});function H(t,e,a){const s=t.slice();return s[11]=e[a],s}function U(t){let e;const a=t[5].default,s=j(a,t,t[4],null);return{c(){s&&s.c()},l(t){s&&s.l(t)},m(t,a){s&&s.m(t,a),e=!0},p(t,l){s&&s.p&&(!e||16&l)&&o(s,a,t,t[4],l,null,null)},i(t){e||(l(s,t),e=!0)},o(t){r(s,t),e=!1},d(t){s&&s.d(t)}}}function Q(t){let e,a,s,o,l,r,x,b,w,$,E,_,I,j,T,N,z,L,k,D,V,S,C,M,O,P,R=t[0].properties.Street+"",A=t[0].properties.CityName+"",J=t[0].properties.CountyName+"",B=t[0].properties.StateName+"",K=t[0].properties["Number of accidents"]+"",H=t[0].properties["Total Killed"]+"",U=t[0].properties["Total injured"]+"",Q=t[1]&&Y(t);return{c(){e=n("div"),a=n("div"),s=n("h3"),o=c(R),l=i(),r=n("h3"),x=c(A),b=c(", "),w=c(J),$=c(", "),E=c(B),_=i(),I=n("p"),j=c(K),T=c(" Accidents"),N=i(),z=n("p"),L=c(H),k=c(" Killed"),D=i(),V=n("p"),S=c(U),C=c(" Injured"),M=i(),O=n("div"),P=n("dl"),Q&&Q.c(),this.h()},l(t){e=u(t,"DIV",{class:!0});var n=d(e);a=u(n,"DIV",{class:!0});var c=d(a);s=u(c,"H3",{class:!0});var i=d(s);o=h(i,R),i.forEach(g),l=p(c),r=u(c,"H3",{class:!0});var f=d(r);x=h(f,A),b=h(f,", "),w=h(f,J),$=h(f,", "),E=h(f,B),f.forEach(g),_=p(c),I=u(c,"P",{class:!0});var m=d(I);j=h(m,K),T=h(m," Accidents"),m.forEach(g),N=p(c),z=u(c,"P",{class:!0});var v=d(z);L=h(v,H),k=h(v," Killed"),v.forEach(g),D=p(c),V=u(c,"P",{class:!0});var y=d(V);S=h(y,U),C=h(y," Injured"),y.forEach(g),c.forEach(g),M=p(n),O=u(n,"DIV",{class:!0});var Y=d(O);P=u(Y,"DL",{class:!0});var Z=d(P);Q&&Q.l(Z),Z.forEach(g),Y.forEach(g),n.forEach(g),this.h()},h(){f(s,"class","text-lg leading-6 font-medium text-gray-900"),f(r,"class","text-md leading-6 font-medium text-gray-600 mb-2"),f(I,"class","font-bold my-0 py0 max-w-2xl text-sm text-gray-600"),f(z,"class","font-bold my-0 py0 max-w-2xl text-sm text-gray-600"),f(V,"class","font-bold my-0 py0 max-w-2xl text-sm text-gray-600"),f(a,"class","px-4 py-4 sm:px-6"),f(P,"class","divide-y divide-gray-200"),f(O,"class","border-t border-gray-200 px-4 py-2 sm:py-4 sm:p-0"),f(e,"class","bg-white shadow overflow-hidden sm:rounded-lg absolute right-0 mt-4 mr-4 w-1/2 lg:w-1/3 z-10 pb-2")},m(t,n){m(t,e,n),v(e,a),v(a,s),v(s,o),v(a,l),v(a,r),v(r,x),v(r,b),v(r,w),v(r,$),v(r,E),v(a,_),v(a,I),v(I,j),v(I,T),v(a,N),v(a,z),v(z,L),v(z,k),v(a,D),v(a,V),v(V,S),v(V,C),v(e,M),v(e,O),v(O,P),Q&&Q.m(P,null)},p(t,e){1&e&&R!==(R=t[0].properties.Street+"")&&y(o,R),1&e&&A!==(A=t[0].properties.CityName+"")&&y(x,A),1&e&&J!==(J=t[0].properties.CountyName+"")&&y(w,J),1&e&&B!==(B=t[0].properties.StateName+"")&&y(E,B),1&e&&K!==(K=t[0].properties["Number of accidents"]+"")&&y(j,K),1&e&&H!==(H=t[0].properties["Total Killed"]+"")&&y(L,H),1&e&&U!==(U=t[0].properties["Total injured"]+"")&&y(S,U),t[1]?Q?Q.p(t,e):(Q=Y(t),Q.c(),Q.m(P,null)):Q&&(Q.d(1),Q=null)},d(t){t&&g(e),Q&&Q.d()}}}function Y(t){let e,a=t[1],s=[];for(let o=0;o<a.length;o+=1)s[o]=Z(H(t,a,o));return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=x()},l(t){for(let e=0;e<s.length;e+=1)s[e].l(t);e=x()},m(t,a){for(let e=0;e<s.length;e+=1)s[e].m(t,a);m(t,e,a)},p(t,o){if(2&o){let l;for(a=t[1],l=0;l<a.length;l+=1){const r=H(t,a,l);s[l]?s[l].p(r,o):(s[l]=Z(r),s[l].c(),s[l].m(e.parentNode,e))}for(;l<s.length;l+=1)s[l].d(1);s.length=a.length}},d(t){b(s,t),t&&g(e)}}}function Z(t){let e,a,s,o,l,r,x,b=t[11].key+"",w=t[11].value+"";return{c(){e=n("div"),a=n("dt"),s=c(b),o=i(),l=n("dd"),r=c(w),x=i(),this.h()},l(t){e=u(t,"DIV",{class:!0});var n=d(e);a=u(n,"DT",{class:!0});var c=d(a);s=h(c,b),c.forEach(g),o=p(n),l=u(n,"DD",{class:!0});var i=d(l);r=h(i,w),i.forEach(g),x=p(n),n.forEach(g),this.h()},h(){f(a,"class","text-sm font-medium text-gray-500"),f(l,"class","text-sm text-gray-900 mt-0 col-span-1"),f(e,"class","py-1 sm:py-2 grid grid-cols-2 gap-2 sm:px-6")},m(t,n){m(t,e,n),v(e,a),v(a,s),v(e,o),v(e,l),v(l,r),v(e,x)},p(t,e){2&e&&b!==(b=t[11].key+"")&&y(s,b),2&e&&w!==(w=t[11].value+"")&&y(r,w)},d(t){t&&g(e)}}}function q(t){let e,a,s,o=t[3]&&U(t),c=t[0]&&Q(t);return{c(){e=n("div"),o&&o.c(),a=i(),c&&c.c(),this.h()},l(t){e=u(t,"DIV",{class:!0});var s=d(e);o&&o.l(s),a=p(s),c&&c.l(s),s.forEach(g),this.h()},h(){f(e,"class","flex-grow z-0 h-full")},m(l,r){m(l,e,r),o&&o.m(e,null),v(e,a),c&&c.m(e,null),t[6](e),s=!0},p(t,[s]){t[3]?o?(o.p(t,s),8&s&&l(o,1)):(o=U(t),o.c(),l(o,1),o.m(e,a)):o&&(w(),r(o,1,1,(()=>{o=null})),$()),t[0]?c?c.p(t,s):(c=Q(t),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(t){s||(l(o),s=!0)},o(t){r(o),s=!1},d(a){a&&g(e),o&&o.d(),c&&c.d(),t[6](null)}}}function X(t,e,a){let s;E(t,B,(t=>a(8,s=t)));let o,l,r,n,{$$slots:c={},$$scope:i}=e,u=null;const d=["id","CrossingID","Total Killed","Total injured","Number of accidents","Latitude","Longitude","Street","CityName","CountyName","StateName"];return _(A,{getMap:()=>l}),_(J,{getMapbox:()=>r}),I((async()=>{r=window.mapboxgl,r.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",a(3,l=new r.Map({container:o,style:"mapbox://styles/mapbox/light-v10",center:s.lngLat,zoom:s.zoom,minZoom:5,maxZoom:20})),l.on("load",(()=>{l.resize(),l.addSource("railroad_crossing_incidents",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incidents/{z}/{x}/{y}.pbf"]}),l.addLayer({id:"railroad_crossing_incidents",type:"circle",source:"railroad_crossing_incidents","source-layer":"railroad_crossing_incidents",layout:{},paint:{"circle-radius":["case",["has","sqrt_point_count"],["-",["get","sqrt_point_count"],10],5],"circle-color":"red"}})}));let t=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1});return l.on("mouseenter","railroad_crossing_incidents",(function(e){l.getCanvas().style.cursor="pointer";const a=e.features[0],s=a.properties,o=a.geometry.coordinates.slice();for(;Math.abs(e.lngLat.lng-o[0])>180;)o[0]+=e.lngLat.lng>o[0]?360:-360;if(s.point_count&&s.point_count>-2){const e=`${s.point_count} locations`;t.setLngLat(o).setHTML(e).addTo(l)}})),l.on("mouseleave","railroad_crossing_incidents",(function(){l.getCanvas().style.cursor="",t.remove()})),l.on("click","railroad_crossing_incidents",(async function(t){const e=t.features[0],{point_count:s}=e.properties;if(s){const t=l.getZoom()+2;l.flyTo({center:e.geometry.coordinates,zoom:t}),a(0,u=null)}else a(0,u=t.features[0])})),()=>{a(3,l=null)}})),t.$$set=t=>{"$$scope"in t&&a(4,i=t.$$scope)},t.$$.update=()=>{3&t.$$.dirty&&u&&(console.log("well hey there",Object.keys(u.properties).length),a(1,n=Object.keys(u.properties).filter((t=>!d.find((e=>e.includes(t))))).map((t=>({key:t,value:u.properties[t]})))),console.log("properties",n,n.length))},[u,n,o,l,i,c,function(t){T[t?"unshift":"push"]((()=>{o=t,a(2,o)}))}]}class G extends e{constructor(t){super(),a(this,t,X,q,s,{})}}function F(t,e,a){const s=t.slice();return s[4]=e[a],s}function W(t,e,a){const s=t.slice();return s[7]=e[a],s}function tt(t,e,a){const s=t.slice();return s[10]=e[a],s}function et(t){let e,a,s,o,l,r=t[10]+"";return{c(){e=n("th"),a=c(r),s=i(),this.h()},l(t){e=u(t,"TH",{scope:!0,class:!0});var o=d(e);a=h(o,r),s=p(o),o.forEach(g),this.h()},h(){f(e,"scope","col"),f(e,"class","px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider")},m(r,n){m(r,e,n),v(e,a),v(e,s),o||(l=N(e,"click",(function(){z(t[2](t[10]))&&t[2](t[10]).apply(this,arguments)})),o=!0)},p(e,s){t=e,2&s&&r!==(r=t[10]+"")&&y(a,r)},d(t){t&&g(e),o=!1,l()}}}function at(t){let e,a,s=t[7].value+"";return{c(){e=n("td"),a=c(s),this.h()},l(t){e=u(t,"TD",{class:!0});var o=d(e);a=h(o,s),o.forEach(g),this.h()},h(){f(e,"class","px-6 py-4 text-left whitespace-nowrap text-sm font-medium text-gray-900")},m(t,s){m(t,e,s),v(e,a)},p(t,e){1&e&&s!==(s=t[7].value+"")&&y(a,s)},d(t){t&&g(e)}}}function st(t){let e,a,s=t[4],o=[];for(let l=0;l<s.length;l+=1)o[l]=at(W(t,s,l));return{c(){e=n("tr");for(let t=0;t<o.length;t+=1)o[t].c();a=i()},l(t){e=u(t,"TR",{});var s=d(e);for(let e=0;e<o.length;e+=1)o[e].l(s);a=p(s),s.forEach(g)},m(t,s){m(t,e,s);for(let a=0;a<o.length;a+=1)o[a].m(e,null);v(e,a)},p(t,l){if(1&l){let r;for(s=t[4],r=0;r<s.length;r+=1){const n=W(t,s,r);o[r]?o[r].p(n,l):(o[r]=at(n),o[r].c(),o[r].m(e,a))}for(;r<o.length;r+=1)o[r].d(1);o.length=s.length}},d(t){t&&g(e),b(o,t)}}}function ot(t){let e,a,s,o,l,r,c,h,y,x=t[1],w=[];for(let n=0;n<x.length;n+=1)w[n]=et(tt(t,x,n));let $=t[0],E=[];for(let n=0;n<$.length;n+=1)E[n]=st(F(t,$,n));return{c(){e=n("div"),a=n("div"),s=n("div"),o=n("div"),l=n("table"),r=n("thead"),c=n("tr");for(let t=0;t<w.length;t+=1)w[t].c();h=i(),y=n("tbody");for(let t=0;t<E.length;t+=1)E[t].c();this.h()},l(t){e=u(t,"DIV",{class:!0});var n=d(e);a=u(n,"DIV",{class:!0});var i=d(a);s=u(i,"DIV",{class:!0});var f=d(s);o=u(f,"DIV",{class:!0});var m=d(o);l=u(m,"TABLE",{class:!0});var v=d(l);r=u(v,"THEAD",{class:!0});var x=d(r);c=u(x,"TR",{});var b=d(c);for(let e=0;e<w.length;e+=1)w[e].l(b);b.forEach(g),x.forEach(g),h=p(v),y=u(v,"TBODY",{class:!0});var $=d(y);for(let e=0;e<E.length;e+=1)E[e].l($);$.forEach(g),v.forEach(g),m.forEach(g),f.forEach(g),i.forEach(g),n.forEach(g),this.h()},h(){f(r,"class","bg-gray-50"),f(y,"class","divide-y divide-gray-200"),f(l,"class","min-w-full divide-y divide-gray-200"),f(o,"class","shadow border-b border-gray-200 sm:rounded-lg"),f(s,"class","align-middle inline-block min-w-full"),f(a,"class",""),f(e,"class","flex flex-col h-full overflow-scroll")},m(t,n){m(t,e,n),v(e,a),v(a,s),v(s,o),v(o,l),v(l,r),v(r,c);for(let e=0;e<w.length;e+=1)w[e].m(c,null);v(l,h),v(l,y);for(let e=0;e<E.length;e+=1)E[e].m(y,null)},p(t,[e]){if(6&e){let a;for(x=t[1],a=0;a<x.length;a+=1){const s=tt(t,x,a);w[a]?w[a].p(s,e):(w[a]=et(s),w[a].c(),w[a].m(c,null))}for(;a<w.length;a+=1)w[a].d(1);w.length=x.length}if(1&e){let a;for($=t[0],a=0;a<$.length;a+=1){const s=F(t,$,a);E[a]?E[a].p(s,e):(E[a]=st(s),E[a].c(),E[a].m(y,null))}for(;a<E.length;a+=1)E[a].d(1);E.length=$.length}},i:L,o:L,d(t){t&&g(e),b(w,t),b(E,t)}}}function lt(t,e,a){let s,{rows:o}=e,{columns:l}=e,r={col:"id",ascending:!0};return t.$$set=t=>{"rows"in t&&a(0,o=t.rows),"columns"in t&&a(1,l=t.columns)},t.$$.update=()=>{9&t.$$.dirty&&a(2,s=t=>{r.col==t?a(3,r.ascending=!r.ascending,r):(a(3,r.col=t,r),a(3,r.ascending=!0,r));let e=r.ascending?1:-1;a(0,o=o.sort(((a,s)=>a[t]<s[t]?-1*e:a[t]>s[t]?1*e:0)))})},[o,l,s,r]}class rt extends e{constructor(t){super(),a(this,t,lt,ot,s,{rows:0,columns:1})}}function nt(t){let e;const a=t[3].default,s=j(a,t,t[2],null);return{c(){s&&s.c()},l(t){s&&s.l(t)},m(t,a){s&&s.m(t,a),e=!0},p(t,l){s&&s.p&&(!e||4&l)&&o(s,a,t,t[2],l,null,null)},i(t){e||(l(s,t),e=!0)},o(t){r(s,t),e=!1},d(t){s&&s.d(t)}}}function ct(t){let e,a,s=t[1]&&nt(t);return{c(){e=n("div"),s&&s.c(),this.h()},l(t){e=u(t,"DIV",{class:!0});var a=d(e);s&&s.l(a),a.forEach(g),this.h()},h(){f(e,"class","flex-grow z-0 h-full")},m(o,l){m(o,e,l),s&&s.m(e,null),t[4](e),a=!0},p(t,[a]){t[1]?s?(s.p(t,a),2&a&&l(s,1)):(s=nt(t),s.c(),l(s,1),s.m(e,null)):s&&(w(),r(s,1,1,(()=>{s=null})),$())},i(t){a||(l(s),a=!0)},o(t){r(s),a=!1},d(a){a&&g(e),s&&s.d(),t[4](null)}}}function it(t,e,a){let s;E(t,K,(t=>a(6,s=t)));let o,l,r,{$$slots:n={},$$scope:c}=e;return _(A,{getMap:()=>l}),_(J,{getMapbox:()=>r}),I((async()=>{r=window.mapboxgl,r.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",a(1,l=new r.Map({container:o,style:"mapbox://styles/mapbox/light-v10",center:s.lngLat,zoom:s.zoom,minZoom:0,maxZoom:8})),l.on("load",(()=>{l.resize(),l.addSource("state_totals",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incident-totals/states/{z}/{x}/{y}.pbf"]}),l.addLayer({id:"state_totals",type:"fill",source:"state_totals","source-layer":"state_totals",layout:{},paint:{"fill-color":"red","fill-opacity":.3,"fill-opacity":["case",["boolean",["feature-state","hover"],!1],1,.5]}}),l.addLayer({id:"state_totals_lines",type:"line",source:"state_totals","source-layer":"state_totals",layout:{},paint:{"line-color":"#444","line-width":2}})}));let t=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1});return l.on("mouseenter","state_totals",(function(t){l.getCanvas().style.cursor="pointer"})),l.on("mouseleave","state_totals",(function(){l.getCanvas().style.cursor="",t.remove()})),l.on("click","state_totals",(async function(e){const a=e.features[0],s=a.properties;console.log("feature",a,e);const o=e.lngLat;for(;Math.abs(e.lngLat.lng-o[0])>180;)o[0]+=e.lngLat.lng>o[0]?360:-360;const r=`<div class="pa-4 rounded">\n        <h1 class="font-bold text-xl">${s.name}</h1>\n        <ul class="text-lg">\n          <li>${s.accidents} accidents</li>\n          <li>${s.killed} killed</li>\n          <li>${s.injured} injured</li>\n        </ul>\n      </div>`;t.setLngLat(o).setHTML(r).addTo(l)})),()=>{a(1,l=null)}})),t.$$set=t=>{"$$scope"in t&&a(2,c=t.$$scope)},[o,l,c,n,function(t){T[t?"unshift":"push"]((()=>{o=t,a(0,o)}))}]}class ut extends e{constructor(t){super(),a(this,t,it,ct,s,{})}}function dt(t){let e;const a=t[3].default,s=j(a,t,t[2],null);return{c(){s&&s.c()},l(t){s&&s.l(t)},m(t,a){s&&s.m(t,a),e=!0},p(t,l){s&&s.p&&(!e||4&l)&&o(s,a,t,t[2],l,null,null)},i(t){e||(l(s,t),e=!0)},o(t){r(s,t),e=!1},d(t){s&&s.d(t)}}}function ht(t){let e,a,s=t[1]&&dt(t);return{c(){e=n("div"),s&&s.c(),this.h()},l(t){e=u(t,"DIV",{class:!0});var a=d(e);s&&s.l(a),a.forEach(g),this.h()},h(){f(e,"class","flex-grow z-0 h-full")},m(o,l){m(o,e,l),s&&s.m(e,null),t[4](e),a=!0},p(t,[a]){t[1]?s?(s.p(t,a),2&a&&l(s,1)):(s=dt(t),s.c(),l(s,1),s.m(e,null)):s&&(w(),r(s,1,1,(()=>{s=null})),$())},i(t){a||(l(s),a=!0)},o(t){r(s),a=!1},d(a){a&&g(e),s&&s.d(),t[4](null)}}}function gt(t,e,a){let s;E(t,B,(t=>a(6,s=t)));let o,l,r,{$$slots:n={},$$scope:c}=e;return _(A,{getMap:()=>l}),_(J,{getMapbox:()=>r}),I((async()=>{r=window.mapboxgl,r.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",a(1,l=new r.Map({container:o,style:"mapbox://styles/mapbox/light-v10",center:s.lngLat,zoom:s.zoom,minZoom:8,maxZoom:14})),l.on("load",(()=>{l.resize(),l.addSource("county_totals",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incident-totals/counties/{z}/{x}/{y}.pbf"]}),l.addLayer({id:"county_totals",type:"fill",source:"county_totals","source-layer":"county_totals",layout:{},paint:{"fill-color":"red","fill-opacity":.3,"fill-opacity":["case",["boolean",["feature-state","hover"],!1],1,.5]}}),l.addLayer({id:"county_totals_lines",type:"line",source:"county_totals","source-layer":"county_totals",layout:{},paint:{"line-color":"#444","line-width":2}})}));let t=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1});return l.on("mouseenter","county_totals",(function(t){l.getCanvas().style.cursor="pointer"})),l.on("mouseleave","county_totals",(function(){l.getCanvas().style.cursor="",t.remove()})),l.on("click","county_totals",(async function(e){const a=e.features[0],s=a.properties;console.log("feature",a,e);const o=e.lngLat;for(;Math.abs(e.lngLat.lng-o[0])>180;)o[0]+=e.lngLat.lng>o[0]?360:-360;const r=`<div class="pa-4 rounded">\n        <h1 class="font-bold text-xl">${s.name}</h1>\n        <ul class="text-lg">\n          <li>${s.accidents} accidents</li>\n          <li>${s.killed} killed</li>\n          <li>${s.injured} injured</li>\n        </ul>\n      </div>`;t.setLngLat(o).setHTML(r).addTo(l)})),()=>{a(1,l=null)}})),t.$$set=t=>{"$$scope"in t&&a(2,c=t.$$scope)},[o,l,c,n,function(t){T[t?"unshift":"push"]((()=>{o=t,a(0,o)}))}]}class pt extends e{constructor(t){super(),a(this,t,gt,ht,s,{})}}function ft(t){let e,a,s,o;return s=new pt({}),{c(){e=n("div"),a=n("div"),M(s.$$.fragment),this.h()},l(t){e=u(t,"DIV",{class:!0});var o=d(e);a=u(o,"DIV",{class:!0});var l=d(a);O(s.$$.fragment,l),l.forEach(g),o.forEach(g),this.h()},h(){f(a,"class","bg-white border h-full border-gray-300 rounded-md shadow"),f(e,"class","p-4 h-full bg-gray-50")},m(t,l){m(t,e,l),v(e,a),P(s,a,null),o=!0},p:L,i(t){o||(l(s.$$.fragment,t),o=!0)},o(t){r(s.$$.fragment,t),o=!1},d(t){t&&g(e),R(s)}}}function mt(t){let e,a,s,o;return s=new ut({}),{c(){e=n("div"),a=n("div"),M(s.$$.fragment),this.h()},l(t){e=u(t,"DIV",{class:!0});var o=d(e);a=u(o,"DIV",{class:!0});var l=d(a);O(s.$$.fragment,l),l.forEach(g),o.forEach(g),this.h()},h(){f(a,"class","bg-white border h-full border-gray-300 rounded-md shadow"),f(e,"class","p-4 h-full bg-gray-50")},m(t,l){m(t,e,l),v(e,a),P(s,a,null),o=!0},p:L,i(t){o||(l(s.$$.fragment,t),o=!0)},o(t){r(s.$$.fragment,t),o=!1},d(t){t&&g(e),R(s)}}}function vt(t){let e,a,s,o;return s=new rt({props:{rows:t[0],columns:t[1]}}),{c(){e=n("div"),a=n("div"),M(s.$$.fragment),this.h()},l(t){e=u(t,"DIV",{class:!0});var o=d(e);a=u(o,"DIV",{class:!0});var l=d(a);O(s.$$.fragment,l),l.forEach(g),o.forEach(g),this.h()},h(){f(a,"class","bg-white border h-full border-gray-300 rounded-md shadow"),f(e,"class","p-4 h-full bg-gray-50")},m(t,l){m(t,e,l),v(e,a),P(s,a,null),o=!0},p(t,e){const a={};1&e&&(a.rows=t[0]),2&e&&(a.columns=t[1]),s.$set(a)},i(t){o||(l(s.$$.fragment,t),o=!0)},o(t){r(s.$$.fragment,t),o=!1},d(t){t&&g(e),R(s)}}}function yt(t){let e,a,s,o;return s=new G({}),{c(){e=n("div"),a=n("div"),M(s.$$.fragment),this.h()},l(t){e=u(t,"DIV",{class:!0});var o=d(e);a=u(o,"DIV",{class:!0});var l=d(a);O(s.$$.fragment,l),l.forEach(g),o.forEach(g),this.h()},h(){f(a,"class","bg-white border h-full border-gray-300 rounded-md shadow"),f(e,"class","p-4 h-full bg-gray-50")},m(t,l){m(t,e,l),v(e,a),P(s,a,null),o=!0},p:L,i(t){o||(l(s.$$.fragment,t),o=!0)},o(t){r(s.$$.fragment,t),o=!1},d(t){t&&g(e),R(s)}}}function xt(t){let e,a,s,o,y,x,b,E,_,I,j,T,z,L,C,M,O,P,R,A,J,B,K,H,U,Q,Y,Z,q,X,G,F,W,tt,et,at,st,ot,lt,rt,nt,ct,it,ut,dt,ht,gt,pt,xt,bt,wt,$t,Et,_t,It,jt,Tt,Nt,zt,Lt,kt,Dt,Vt,St,Ct,Mt;const Ot=[yt,vt,mt,ft],Pt=[];function Rt(t,e){return"map"===t[2]?0:"list"===t[2]?1:"us-totals"===t[2]?2:"nj-totals"===t[2]?3:-1}return~(zt=Rt(t))&&(Lt=Pt[zt]=Ot[zt](t)),{c(){e=n("script"),s=n("link"),o=i(),y=n("div"),x=n("div"),b=n("h1"),E=c("Railroad Crossing Incidents"),_=i(),I=n("div"),j=n("label"),T=c("Select a visualization"),z=i(),L=n("select"),C=n("option"),M=c("N.J. County totals"),O=n("option"),P=c("U.S. State totals"),R=n("option"),A=c("Map"),J=n("option"),B=c("List"),K=i(),H=n("div"),U=n("nav"),Q=n("button"),Y=n("span"),Z=c("N.J. Totals"),q=i(),X=n("span"),W=i(),tt=n("button"),et=n("span"),at=c("U.S. Totals"),st=i(),ot=n("span"),nt=i(),ct=n("button"),it=n("span"),ut=c("Map"),dt=i(),ht=n("span"),xt=i(),bt=n("button"),wt=n("span"),$t=c("List"),Et=i(),_t=n("span"),Tt=i(),Nt=n("div"),Lt&&Lt.c(),kt=i(),Dt=n("div"),Vt=c("Credits"),this.h()},l(t){const a=k('[data-svelte="svelte-1qwex9c"]',document.head);e=u(a,"SCRIPT",{src:!0}),d(e).forEach(g),s=u(a,"LINK",{href:!0,rel:!0}),a.forEach(g),o=p(t),y=u(t,"DIV",{class:!0});var l=d(y);x=u(l,"DIV",{class:!0});var r=d(x);b=u(r,"H1",{class:!0});var n=d(b);E=h(n,"Railroad Crossing Incidents"),n.forEach(g),r.forEach(g),_=p(l),I=u(l,"DIV",{class:!0});var c=d(I);j=u(c,"LABEL",{for:!0,class:!0});var i=d(j);T=h(i,"Select a visualization"),i.forEach(g),z=p(c),L=u(c,"SELECT",{id:!0,name:!0,class:!0});var f=d(L);C=u(f,"OPTION",{value:!0,selected:!0});var m=d(C);M=h(m,"N.J. County totals"),m.forEach(g),O=u(f,"OPTION",{value:!0});var v=d(O);P=h(v,"U.S. State totals"),v.forEach(g),R=u(f,"OPTION",{value:!0});var w=d(R);A=h(w,"Map"),w.forEach(g),J=u(f,"OPTION",{value:!0});var $=d(J);B=h($,"List"),$.forEach(g),f.forEach(g),c.forEach(g),K=p(l),H=u(l,"DIV",{class:!0});var N=d(H);U=u(N,"NAV",{class:!0,"aria-label":!0});var D=d(U);Q=u(D,"BUTTON",{class:!0,"aria-current":!0});var V=d(Q);Y=u(V,"SPAN",{});var S=d(Y);Z=h(S,"N.J. Totals"),S.forEach(g),q=p(V),X=u(V,"SPAN",{"aria-hidden":!0,class:!0}),d(X).forEach(g),V.forEach(g),W=p(D),tt=u(D,"BUTTON",{class:!0,"aria-current":!0});var G=d(tt);et=u(G,"SPAN",{});var F=d(et);at=h(F,"U.S. Totals"),F.forEach(g),st=p(G),ot=u(G,"SPAN",{"aria-hidden":!0,class:!0}),d(ot).forEach(g),G.forEach(g),nt=p(D),ct=u(D,"BUTTON",{class:!0,"aria-current":!0});var lt=d(ct);it=u(lt,"SPAN",{});var rt=d(it);ut=h(rt,"Map"),rt.forEach(g),dt=p(lt),ht=u(lt,"SPAN",{"aria-hidden":!0,class:!0}),d(ht).forEach(g),lt.forEach(g),xt=p(D),bt=u(D,"BUTTON",{class:!0,"aria-current":!0});var gt=d(bt);wt=u(gt,"SPAN",{});var pt=d(wt);$t=h(pt,"List"),pt.forEach(g),Et=p(gt),_t=u(gt,"SPAN",{"aria-hidden":!0,class:!0}),d(_t).forEach(g),gt.forEach(g),D.forEach(g),N.forEach(g),Tt=p(l),Nt=u(l,"DIV",{class:!0});var ft=d(Nt);Lt&&Lt.l(ft),ft.forEach(g),kt=p(l),Dt=u(l,"DIV",{class:!0});var mt=d(Dt);Vt=h(mt,"Credits"),mt.forEach(g),l.forEach(g),this.h()},h(){document.title="Railroad Crossing Incidents",e.src!==(a="https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js")&&f(e,"src","https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js"),f(s,"href","https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.css"),f(s,"rel","stylesheet"),f(b,"class","font-bold text-gray-600"),f(x,"class","flex-none p-4"),f(j,"for","tabs"),f(j,"class","sr-only"),C.__value="nj-totals",C.value=C.__value,C.selected=!0,O.__value="us-totals",O.value=O.__value,R.__value="map",R.value=R.__value,J.__value="list",J.value=J.__value,f(L,"id","tabs"),f(L,"name","tabs"),f(L,"class","block w-full focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 rounded-md"),void 0===t[2]&&S((()=>t[3].call(L))),f(I,"class","flex-none sm:hidden p-4 pt-0"),f(X,"aria-hidden","true"),f(X,"class",G="\n            "+("nj-totals"===t[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),f(Q,"class",F="\n          "+("nj-totals"===t[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),f(Q,"aria-current","page"),f(ot,"aria-hidden","true"),f(ot,"class",lt="\n            "+("us-totals"===t[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),f(tt,"class",rt="\n          "+("us-totals"===t[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),f(tt,"aria-current","page"),f(ht,"aria-hidden","true"),f(ht,"class",gt="\n            "+("map"===t[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),f(ct,"class",pt="\n          "+("map"===t[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),f(ct,"aria-current","page"),f(_t,"aria-hidden","true"),f(_t,"class",It="\n            "+("list"===t[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),f(bt,"class",jt="\n          "+("list"===t[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),f(bt,"aria-current","page"),f(U,"class","relative z-0 shadow flex divide-x divide-gray-200 border-t border-gray-200 border-"),f(U,"aria-label","Tabs"),f(H,"class","flex-none hidden sm:block"),f(Nt,"class","flex-grow border-t border-gray-300 overflow-hidden"),f(Dt,"class","flex-none p-4 text-sm text-gray-500 border border-gray-300"),f(y,"class","flex flex-col h-screen")},m(a,l){v(document.head,e),v(document.head,s),m(a,o,l),m(a,y,l),v(y,x),v(x,b),v(b,E),v(y,_),v(y,I),v(I,j),v(j,T),v(I,z),v(I,L),v(L,C),v(C,M),v(L,O),v(O,P),v(L,R),v(R,A),v(L,J),v(J,B),D(L,t[2]),v(y,K),v(y,H),v(H,U),v(U,Q),v(Q,Y),v(Y,Z),v(Q,q),v(Q,X),v(U,W),v(U,tt),v(tt,et),v(et,at),v(tt,st),v(tt,ot),v(U,nt),v(U,ct),v(ct,it),v(it,ut),v(ct,dt),v(ct,ht),v(U,xt),v(U,bt),v(bt,wt),v(wt,$t),v(bt,Et),v(bt,_t),v(y,Tt),v(y,Nt),~zt&&Pt[zt].m(Nt,null),v(y,kt),v(y,Dt),v(Dt,Vt),St=!0,Ct||(Mt=[N(L,"change",t[3]),N(Q,"click",t[4]),N(tt,"click",t[5]),N(ct,"click",t[6]),N(bt,"click",t[7])],Ct=!0)},p(t,[e]){4&e&&D(L,t[2]),(!St||4&e&&G!==(G="\n            "+("nj-totals"===t[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&f(X,"class",G),(!St||4&e&&F!==(F="\n          "+("nj-totals"===t[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&f(Q,"class",F),(!St||4&e&&lt!==(lt="\n            "+("us-totals"===t[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&f(ot,"class",lt),(!St||4&e&&rt!==(rt="\n          "+("us-totals"===t[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&f(tt,"class",rt),(!St||4&e&&gt!==(gt="\n            "+("map"===t[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&f(ht,"class",gt),(!St||4&e&&pt!==(pt="\n          "+("map"===t[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&f(ct,"class",pt),(!St||4&e&&It!==(It="\n            "+("list"===t[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&f(_t,"class",It),(!St||4&e&&jt!==(jt="\n          "+("list"===t[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&f(bt,"class",jt);let a=zt;zt=Rt(t),zt===a?~zt&&Pt[zt].p(t,e):(Lt&&(w(),r(Pt[a],1,1,(()=>{Pt[a]=null})),$()),~zt?(Lt=Pt[zt],Lt?Lt.p(t,e):(Lt=Pt[zt]=Ot[zt](t),Lt.c()),l(Lt,1),Lt.m(Nt,null)):Lt=null)},i(t){St||(l(Lt),St=!0)},o(t){r(Lt),St=!1},d(t){g(e),g(s),t&&g(o),t&&g(y),~zt&&Pt[zt].d(),Ct=!1,V(Mt)}}}async function bt({fetch:t}){const e=await t("https://railroad-crossing-data.vercel.app/railroad_crossing_data/RRData.json?StateName__exact=NJ&_sort=CountyName"),a=await e.json();console.log("json",a);const s=a.columns,o=a.rows.map((t=>t.reduce(((t,e,a)=>(t.push({key:s[a],value:e}),t)),[])));return e.ok?{props:{rows:o,columns:s}}:{status:e.status,error:new Error("Could not load data")}}function wt(t,e,a){let s,{rows:o}=e,{columns:l}=e;return t.$$set=t=>{"rows"in t&&a(0,o=t.rows),"columns"in t&&a(1,l=t.columns)},[o,l,s,function(){s=C(this),a(2,s)},()=>{a(2,s="nj-totals")},()=>{a(2,s="us-totals")},()=>{a(2,s="map")},()=>{a(2,s="list")}]}export default class extends e{constructor(t){super(),a(this,t,wt,xt,s,{rows:0,columns:1})}}export{bt as load};

import{H as e,C as t,S as n,i as s,s as a,I as o,c as r,a as l,d as c,b as i,f as d,F as u,G as f,E as m,v as p,r as g,e as h,t as y,k as x,g as v,n as b,h as w,B as $,u as E,l as k,J as _,K as j,x as I,z as N,D as T,j as z,m as S,o as D,w as V,L as C,M as L,N as M,O as P,P as A,Q as O,R as B,T as R,U as K,V as q,W as U}from"../chunks/vendor-9d74b117.js";import{r as J,b as Y}from"../chunks/paths-7dc55c62.js";const G={subscribe:t=>(()=>{const t=e("__svelte__");return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:t.navigating.subscribe}},session:t.session}})().page.subscribe(t)},H=async function(e,t){return J.goto(e,t,[])};const Q={},Z={},F=t({zoom:7.5,lngLat:["-74.558333","40.16"]}),X=t({zoom:2,lngLat:["-98.5556","39.8097"]});function W(e){let t,n;return{c(){t=o("svg"),n=o("path"),this.h()},l(e){t=r(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var s=l(t);n=r(s,"path",{d:!0},1),l(n).forEach(c),s.forEach(c),this.h()},h(){i(n,"d","M50,5C25.147,5,5,25.148,5,50c0,24.852,20.147,45,45,45c24.854,0,45-20.148,45-45C95,25.148,74.854,5,50,5z M74.675,38.917  l-23.75,29.511c-1.109,1.379-2.756,2.252-4.517,2.396c-0.173,0.015-0.347,0.021-0.52,0.021c-1.585,0-3.138-0.589-4.326-1.652  L25.985,55.17c-2.463-2.217-2.661-6.01-0.444-8.473c2.218-2.463,6.012-2.662,8.474-0.444l11.223,10.103l20.088-24.961  c2.078-2.582,5.855-2.989,8.438-0.913C76.344,32.558,76.752,36.335,74.675,38.917z"),i(t,"height","20px"),i(t,"width","20px"),i(t,"class","align-top inline"),i(t,"fill","#4CE600"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),i(t,"version","1.1"),i(t,"x","0px"),i(t,"y","0px"),i(t,"viewBox","0 0 100 100"),i(t,"enable-background","new 0 0 100 100"),i(t,"xml:space","preserve")},m(e,s){d(e,t,s),u(t,n)},p:f,i:f,o:f,d(e){e&&c(t)}}}class ee extends n{constructor(e){super(),s(this,e,null,W,a,{})}}function te(e){let t,n;return{c(){t=o("svg"),n=o("path"),this.h()},l(e){t=r(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var s=l(t);n=r(s,"path",{d:!0},1),l(n).forEach(c),s.forEach(c),this.h()},h(){i(n,"d","M50,5C25.147,5,5,25.147,5,50c0,24.854,20.147,45,45,45c24.854,0,45-20.146,45-45C95,25.147,74.854,5,50,5z M49.999,76.75  c-3.342,0-6.061-2.717-6.061-6.057c0-3.346,2.719-6.066,6.061-6.066c3.343,0,6.063,2.723,6.063,6.066  C56.063,74.033,53.342,76.75,49.999,76.75z M66.238,43.808c-1.174,1.827-2.795,4.01-6.028,6.531  c-3.213,2.461-4.185,3.724-4.478,4.259c-0.166,0.299-0.402,0.895-0.59,2.004c-0.065,0.39-0.119,0.812-0.162,1.265l-0.254,2.714  l-9.771,0.023l0.124-3.127c0.017-0.4,0.06-1.185,0.168-1.918c0.324-2.229,1.085-4.209,2.261-5.882  c1.104-1.573,3.247-3.563,6.549-6.079c2.442-1.863,3.396-2.928,3.764-3.492c0.47-0.717,0.697-1.472,0.697-2.305  c0-1.931-0.705-3.46-2.094-4.545c-1.474-1.151-3.518-1.735-6.073-1.735c-2.265,0-4.176,0.599-5.682,1.778  c-1.594,1.239-2.713,2.953-3.245,4.964l-0.66,2.492l-9.563-1.037l0.676-3.238c0.88-4.218,2.865-7.474,5.902-9.677  c3.934-2.855,8.156-4.303,12.552-4.303c4.856,0,8.831,1.249,12.508,3.931c3.399,2.482,5.349,6.492,5.349,11.002  C68.188,39.642,67.55,41.727,66.238,43.808z"),i(t,"height","20px"),i(t,"width","20px"),i(t,"class","align-top inline"),i(t,"fill","#A2A2A2"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),i(t,"version","1.1"),i(t,"x","0px"),i(t,"y","0px"),i(t,"viewBox","0 0 100 100"),i(t,"enable-background","new 0 0 100 100"),i(t,"xml:space","preserve")},m(e,s){d(e,t,s),u(t,n)},p:f,i:f,o:f,d(e){e&&c(t)}}}class ne extends n{constructor(e){super(),s(this,e,null,te,a,{})}}function se(e){let t,n;return{c(){t=o("svg"),n=o("path"),this.h()},l(e){t=r(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var s=l(t);n=r(s,"path",{d:!0},1),l(n).forEach(c),s.forEach(c),this.h()},h(){i(n,"d","M50,5C25.147,5,5,25.147,5,50c0,24.852,20.147,45,45,45c24.854,0,45-20.148,45-45C95,25.147,74.854,5,50,5z M70.243,70.24  c-1.173,1.172-2.708,1.758-4.243,1.758s-3.07-0.586-4.242-1.757L50,58.484L38.243,70.242C37.071,71.414,35.536,72,34,72  s-3.071-0.586-4.243-1.757c-2.343-2.345-2.343-6.144,0-8.485L41.515,50L29.757,38.242c-2.343-2.343-2.343-6.142,0-8.485  c2.343-2.343,6.142-2.343,8.485,0L50,41.514l11.756-11.757c2.344-2.343,6.145-2.343,8.485,0c2.344,2.343,2.344,6.142,0.001,8.485  L58.486,49.999l11.756,11.756C72.586,64.1,72.586,67.898,70.243,70.24z"),i(t,"height","20px"),i(t,"width","20px"),i(t,"class","align-top inline"),i(t,"fill","#FF0000"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),i(t,"version","1.1"),i(t,"x","0px"),i(t,"y","0px"),i(t,"viewBox","0 0 100 100"),i(t,"enable-background","new 0 0 100 100"),i(t,"xml:space","preserve")},m(e,s){d(e,t,s),u(t,n)},p:f,i:f,o:f,d(e){e&&c(t)}}}class ae extends n{constructor(e){super(),s(this,e,null,se,a,{})}}function oe(e,t,n){const s=e.slice();return s[12]=t[n],s}function re(e){let t;const n=e[7].default,s=T(n,e,e[6],null);return{c(){s&&s.c()},l(e){s&&s.l(e)},m(e,n){s&&s.m(e,n),t=!0},p(e,a){s&&s.p&&(!t||64&a)&&m(s,n,e,e[6],a,null,null)},i(e){t||(p(s,e),t=!0)},o(e){g(s,e),t=!1},d(e){s&&s.d(e)}}}function le(e){let t,n,s,a,o,f,m,k,_,j,I,N,T,z,S,D,V,C,L,M,P,A,O,B,R,K,q,U,J,Y,G,H=e[0].properties.Street+"",Q=e[0].properties.CityName+"",Z=e[0].properties.CountyName+"",F=e[0].properties.StateName+"",X=e[0].properties["Number of accidents"]+"",W=e[0].properties["Total Killed"]+"",ee=e[0].properties["Total injured"]+"";const te=[de,ie,ce],ne=[];function se(e,t){return"Yes"===e[0].properties["Meets minimum safety guidelines"]?0:"No"===e[0].properties["Meets minimum safety guidelines"]?1:2}z=se(e),S=ne[z]=te[z](e);let ae=e[3]&&ue(e);return{c(){t=h("div"),n=h("div"),s=h("h3"),a=y(H),o=x(),f=h("h3"),m=y(Q),k=y(", "),_=y(Z),j=y(", "),I=y(F),N=x(),T=h("p"),S.c(),D=x(),V=h("p"),C=y(X),L=y(" Accidents"),M=x(),P=h("p"),A=y(W),O=y(" Killed"),B=x(),R=h("p"),K=y(ee),q=y(" Injured"),U=x(),J=h("div"),Y=h("dl"),ae&&ae.c(),this.h()},l(e){t=r(e,"DIV",{class:!0});var i=l(t);n=r(i,"DIV",{class:!0});var d=l(n);s=r(d,"H3",{class:!0});var u=l(s);a=v(u,H),u.forEach(c),o=b(d),f=r(d,"H3",{class:!0});var p=l(f);m=v(p,Q),k=v(p,", "),_=v(p,Z),j=v(p,", "),I=v(p,F),p.forEach(c),N=b(d),T=r(d,"P",{class:!0});var g=l(T);S.l(g),g.forEach(c),D=b(d),V=r(d,"P",{class:!0});var h=l(V);C=v(h,X),L=v(h," Accidents"),h.forEach(c),M=b(d),P=r(d,"P",{class:!0});var y=l(P);A=v(y,W),O=v(y," Killed"),y.forEach(c),B=b(d),R=r(d,"P",{class:!0});var x=l(R);K=v(x,ee),q=v(x," Injured"),x.forEach(c),d.forEach(c),U=b(i),J=r(i,"DIV",{class:!0});var w=l(J);Y=r(w,"DL",{class:!0});var $=l(Y);ae&&ae.l($),$.forEach(c),w.forEach(c),i.forEach(c),this.h()},h(){i(s,"class","text-lg leading-6 font-medium text-gray-900"),i(f,"class","text-md leading-6 font-medium text-gray-600 mb-2"),i(T,"class","font-bold my-0 pt-1 pb-3 max-w-2xl text-sm text-gray-600"),i(V,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(P,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(R,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(n,"class","px-4 py-4 sm:px-6"),i(Y,"class","divide-y divide-gray-200"),i(J,"class","border-t border-gray-200 px-4 py-2 sm:py-4 sm:p-0"),i(t,"class","bg-white shadow overflow-hidden sm:rounded-lg absolute top-16 right-0 mt-4 mr-4 w-1/2 lg:w-1/3 pb-2")},m(e,r){d(e,t,r),u(t,n),u(n,s),u(s,a),u(n,o),u(n,f),u(f,m),u(f,k),u(f,_),u(f,j),u(f,I),u(n,N),u(n,T),ne[z].m(T,null),u(n,D),u(n,V),u(V,C),u(V,L),u(n,M),u(n,P),u(P,A),u(P,O),u(n,B),u(n,R),u(R,K),u(R,q),u(t,U),u(t,J),u(J,Y),ae&&ae.m(Y,null),G=!0},p(e,t){(!G||1&t)&&H!==(H=e[0].properties.Street+"")&&w(a,H),(!G||1&t)&&Q!==(Q=e[0].properties.CityName+"")&&w(m,Q),(!G||1&t)&&Z!==(Z=e[0].properties.CountyName+"")&&w(_,Z),(!G||1&t)&&F!==(F=e[0].properties.StateName+"")&&w(I,F);let n=z;z=se(e),z!==n&&($(),g(ne[n],1,1,(()=>{ne[n]=null})),E(),S=ne[z],S||(S=ne[z]=te[z](e),S.c()),p(S,1),S.m(T,null)),(!G||1&t)&&X!==(X=e[0].properties["Number of accidents"]+"")&&w(C,X),(!G||1&t)&&W!==(W=e[0].properties["Total Killed"]+"")&&w(A,W),(!G||1&t)&&ee!==(ee=e[0].properties["Total injured"]+"")&&w(K,ee),e[3]?ae?ae.p(e,t):(ae=ue(e),ae.c(),ae.m(Y,null)):ae&&(ae.d(1),ae=null)},i(e){G||(p(S),G=!0)},o(e){g(S),G=!1},d(e){e&&c(t),ne[z].d(),ae&&ae.d()}}}function ce(e){let t,n,s;return t=new ne({}),{c(){z(t.$$.fragment),n=y(" May or may not meet minimum safety guidelines")},l(e){S(t.$$.fragment,e),n=v(e," May or may not meet minimum safety guidelines")},m(e,a){D(t,e,a),d(e,n,a),s=!0},i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){g(t.$$.fragment,e),s=!1},d(e){V(t,e),e&&c(n)}}}function ie(e){let t,n,s;return t=new ae({}),{c(){z(t.$$.fragment),n=y(" Does not meet minimum safety guidelines")},l(e){S(t.$$.fragment,e),n=v(e," Does not meet minimum safety guidelines")},m(e,a){D(t,e,a),d(e,n,a),s=!0},i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){g(t.$$.fragment,e),s=!1},d(e){V(t,e),e&&c(n)}}}function de(e){let t,n,s;return t=new ee({}),{c(){z(t.$$.fragment),n=y(" Meets minimum safety guidelines")},l(e){S(t.$$.fragment,e),n=v(e," Meets minimum safety guidelines")},m(e,a){D(t,e,a),d(e,n,a),s=!0},i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){g(t.$$.fragment,e),s=!1},d(e){V(t,e),e&&c(n)}}}function ue(e){let t,n=e[3],s=[];for(let a=0;a<n.length;a+=1)s[a]=fe(oe(e,n,a));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=k()},l(e){for(let t=0;t<s.length;t+=1)s[t].l(e);t=k()},m(e,n){for(let t=0;t<s.length;t+=1)s[t].m(e,n);d(e,t,n)},p(e,a){if(24&a){let o;for(n=e[3],o=0;o<n.length;o+=1){const r=oe(e,n,o);s[o]?s[o].p(r,a):(s[o]=fe(r),s[o].c(),s[o].m(t.parentNode,t))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(e){_(s,e),e&&c(t)}}}function fe(e){let t,n,s,a,o,f,m,p=(e[4][e[12].key]||e[12].key)+"",g=e[12].value+"";return{c(){t=h("div"),n=h("dt"),s=y(p),a=x(),o=h("dd"),f=y(g),m=x(),this.h()},l(e){t=r(e,"DIV",{class:!0});var i=l(t);n=r(i,"DT",{class:!0});var d=l(n);s=v(d,p),d.forEach(c),a=b(i),o=r(i,"DD",{class:!0});var u=l(o);f=v(u,g),u.forEach(c),m=b(i),i.forEach(c),this.h()},h(){i(n,"class","text-sm font-medium text-gray-500"),i(o,"class","text-sm text-gray-900 mt-0 col-span-1"),i(t,"class","py-1 sm:py-2 grid grid-cols-2 gap-2 sm:px-6")},m(e,r){d(e,t,r),u(t,n),u(n,s),u(t,a),u(t,o),u(o,f),u(t,m)},p(e,t){8&t&&p!==(p=(e[4][e[12].key]||e[12].key)+"")&&w(s,p),8&t&&g!==(g=e[12].value+"")&&w(f,g)},d(e){e&&c(t)}}}function me(e){let t,n,s,a=e[2]&&re(e),o=e[0]&&le(e);return{c(){t=h("div"),a&&a.c(),n=x(),o&&o.c(),this.h()},l(e){t=r(e,"DIV",{class:!0});var s=l(t);a&&a.l(s),n=b(s),o&&o.l(s),s.forEach(c),this.h()},h(){i(t,"class","flex-grow z-0 h-full")},m(r,l){d(r,t,l),a&&a.m(t,null),u(t,n),o&&o.m(t,null),e[8](t),s=!0},p(e,[s]){e[2]?a?(a.p(e,s),4&s&&p(a,1)):(a=re(e),a.c(),p(a,1),a.m(t,n)):a&&($(),g(a,1,1,(()=>{a=null})),E()),e[0]?o?(o.p(e,s),1&s&&p(o,1)):(o=le(e),o.c(),p(o,1),o.m(t,null)):o&&($(),g(o,1,1,(()=>{o=null})),E())},i(e){s||(p(a),p(o),s=!0)},o(e){g(a),g(o),s=!1},d(n){n&&c(t),a&&a.d(),o&&o.d(),e[8](null)}}}function pe(e,t,n){let s;j(e,F,(e=>n(10,s=e)));let a,o,r,l,{$$slots:c={},$$scope:i}=t,{center:d}=t,u=null;const f=["id","CrossingID","Total Killed","Total injured","Number of accidents","Latitude","Longitude","Street","CityName","CountyName","StateName","Meets minimum safety guidelines"];return I(Q,{getMap:()=>o}),I(Z,{getMapbox:()=>r}),N((async()=>{r=window.mapboxgl,r.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(2,o=new r.Map({container:a,style:"mapbox://styles/mapbox/light-v10",center:d||s.lngLat,zoom:d?15:s.zoom,minZoom:3,maxZoom:20})),o.addControl(new MapboxGeocoder({accessToken:r.accessToken,mapboxgl:r}),"top-right"),o.on("load",(()=>{o.resize(),o.addSource("railroad_crossing_incidents",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incidents/{z}/{x}/{y}.pbf"]}),o.addLayer({id:"railroad_crossing_incidents",type:"circle",source:"railroad_crossing_incidents","source-layer":"railroad_crossing_incidents",layout:{},paint:{"circle-radius":["case",["has","sqrt_point_count"],["-",["get","sqrt_point_count"],10],5],"circle-color":["case",["==",["get","Number of accidents"],0],"blue","red"]}})})),d&&setTimeout((()=>{const e=o.project(d),t=o.queryRenderedFeatures([[e.x-5,e.y-5],[e.x+5,e.y+5]],{layers:["railroad_crossing_incidents"]});1===t.length&&n(0,u=t[0])}),1100);let e=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1});return o.on("mouseenter","railroad_crossing_incidents",(function(t){o.getCanvas().style.cursor="pointer";const n=t.features[0],s=n.properties,a=n.geometry.coordinates.slice();for(;Math.abs(t.lngLat.lng-a[0])>180;)a[0]+=t.lngLat.lng>a[0]?360:-360;if(s.point_count&&s.point_count>-2){const t=`${s.point_count} locations`;e.setLngLat(a).setHTML(t).addTo(o)}})),o.on("mouseleave","railroad_crossing_incidents",(function(){o.getCanvas().style.cursor="",e.remove()})),o.on("click","railroad_crossing_incidents",(async function(e){const t=e.features[0],{point_count:s}=t.properties;if(s){const e=o.getZoom()+2;o.flyTo({center:t.geometry.coordinates,zoom:e}),n(0,u=null)}else n(0,u=e.features[0])})),()=>{n(2,o=null)}})),e.$$set=e=>{"center"in e&&n(5,d=e.center),"$$scope"in e&&n(6,i=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&u&&n(3,l=Object.keys(u.properties).filter((e=>!f.find((t=>t.includes(e))))).map((e=>({key:e,value:u.properties[e]}))))},[u,a,o,l,{CountyName:"County",CityName:"City",StateName:"State"},d,i,c,function(e){C[e?"unshift":"push"]((()=>{a=e,n(1,a)}))}]}class ge extends n{constructor(e){super(),s(this,e,pe,me,a,{center:5})}}function he(e,t,n){const s=e.slice();return s[10]=t[n],s}function ye(e,t,n){const s=e.slice();return s[13]=t[n],s}function xe(e,t,n){const s=e.slice();return s[16]=t[n],s}function ve(e){let t,n,s,a,o,f=e[16]+"";function m(){return e[4](e[16])}return{c(){t=h("th"),n=y(f),s=x(),this.h()},l(e){t=r(e,"TH",{scope:!0,class:!0});var a=l(t);n=v(a,f),s=b(a),a.forEach(c),this.h()},h(){i(t,"scope","col"),i(t,"class","px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider")},m(e,r){d(e,t,r),u(t,n),u(t,s),a||(o=L(t,"click",m),a=!0)},p(t,n){e=t},d(e){e&&c(t),a=!1,o()}}}function be(e){let t,n=e[13].value+"";return{c(){t=y(n)},l(e){t=v(e,n)},m(e,n){d(e,t,n)},p(e,s){1&s&&n!==(n=e[13].value+"")&&w(t,n)},i:f,o:f,d(e){e&&c(t)}}}function we(e){let t,n,s,a;const o=[_e,ke,Ee],r=[];function l(e,t){return"Yes"===e[13].value?0:"No"===e[13].value?1:2}return t=l(e),n=r[t]=o[t](e),{c(){n.c(),s=k()},l(e){n.l(e),s=k()},m(e,n){r[t].m(e,n),d(e,s,n),a=!0},p(e,a){let c=t;t=l(e),t!==c&&($(),g(r[c],1,1,(()=>{r[c]=null})),E(),n=r[t],n||(n=r[t]=o[t](e),n.c()),p(n,1),n.m(s.parentNode,s))},i(e){a||(p(n),a=!0)},o(e){g(n),a=!1},d(e){r[t].d(e),e&&c(s)}}}function $e(e){let t,n,s,a;function o(){return e[5](e[13])}return{c(){t=h("button"),n=y("View on map"),this.h()},l(e){t=r(e,"BUTTON",{class:!0});var s=l(t);n=v(s,"View on map"),s.forEach(c),this.h()},h(){i(t,"class","text-gray-600 hover:text-blue-600 hover:shadow-sm bg-gray-50 hover:bg-gray-100 p-2")},m(e,r){d(e,t,r),u(t,n),s||(a=L(t,"click",o),s=!0)},p(t,n){e=t},i:f,o:f,d(e){e&&c(t),s=!1,a()}}}function Ee(e){let t,n,s;return t=new ne({}),{c(){z(t.$$.fragment),n=y(" Info unavailable")},l(e){S(t.$$.fragment,e),n=v(e," Info unavailable")},m(e,a){D(t,e,a),d(e,n,a),s=!0},i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){g(t.$$.fragment,e),s=!1},d(e){V(t,e),e&&c(n)}}}function ke(e){let t,n,s;return t=new ae({}),{c(){z(t.$$.fragment),n=y(" No")},l(e){S(t.$$.fragment,e),n=v(e," No")},m(e,a){D(t,e,a),d(e,n,a),s=!0},i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){g(t.$$.fragment,e),s=!1},d(e){V(t,e),e&&c(n)}}}function _e(e){let t,n,s;return t=new ee({}),{c(){z(t.$$.fragment),n=y(" Yes")},l(e){S(t.$$.fragment,e),n=v(e," Yes")},m(e,a){D(t,e,a),d(e,n,a),s=!0},i(e){s||(p(t.$$.fragment,e),s=!0)},o(e){g(t.$$.fragment,e),s=!1},d(e){V(t,e),e&&c(n)}}}function je(e){let t,n,s,a;const o=[$e,we,be],u=[];function f(e,t){return"Map view"===e[13].key?0:"Meets minimum safety guidelines"===e[13].key?1:2}return n=f(e),s=u[n]=o[n](e),{c(){t=h("td"),s.c(),this.h()},l(e){t=r(e,"TD",{class:!0});var n=l(t);s.l(n),n.forEach(c),this.h()},h(){i(t,"class","px-6 py-4 text-left whitespace-nowrap text-sm font-medium text-gray-900")},m(e,s){d(e,t,s),u[n].m(t,null),a=!0},p(e,a){let r=n;n=f(e),n===r?u[n].p(e,a):($(),g(u[r],1,1,(()=>{u[r]=null})),E(),s=u[n],s?s.p(e,a):(s=u[n]=o[n](e),s.c()),p(s,1),s.m(t,null))},i(e){a||(p(s),a=!0)},o(e){g(s),a=!1},d(e){e&&c(t),u[n].d()}}}function Ie(e){let t,n,s,a=e[10],o=[];for(let r=0;r<a.length;r+=1)o[r]=je(ye(e,a,r));const i=e=>g(o[e],1,1,(()=>{o[e]=null}));return{c(){t=h("tr");for(let e=0;e<o.length;e+=1)o[e].c();n=x()},l(e){t=r(e,"TR",{});var s=l(t);for(let t=0;t<o.length;t+=1)o[t].l(s);n=b(s),s.forEach(c)},m(e,a){d(e,t,a);for(let n=0;n<o.length;n+=1)o[n].m(t,null);u(t,n),s=!0},p(e,s){if(9&s){let r;for(a=e[10],r=0;r<a.length;r+=1){const l=ye(e,a,r);o[r]?(o[r].p(l,s),p(o[r],1)):(o[r]=je(l),o[r].c(),p(o[r],1),o[r].m(t,n))}for($(),r=a.length;r<o.length;r+=1)i(r);E()}},i(e){if(!s){for(let e=0;e<a.length;e+=1)p(o[e]);s=!0}},o(e){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)g(o[t]);s=!1},d(e){e&&c(t),_(o,e)}}}function Ne(e){let t,n,s,a,o,f,m,y,v,w,k=e[1],j=[];for(let r=0;r<k.length;r+=1)j[r]=ve(xe(e,k,r));let I=e[0],N=[];for(let r=0;r<I.length;r+=1)N[r]=Ie(he(e,I,r));const T=e=>g(N[e],1,1,(()=>{N[e]=null}));return{c(){t=h("div"),n=h("div"),s=h("div"),a=h("div"),o=h("table"),f=h("thead"),m=h("tr");for(let e=0;e<j.length;e+=1)j[e].c();y=x(),v=h("tbody");for(let e=0;e<N.length;e+=1)N[e].c();this.h()},l(e){t=r(e,"DIV",{class:!0});var i=l(t);n=r(i,"DIV",{class:!0});var d=l(n);s=r(d,"DIV",{class:!0});var u=l(s);a=r(u,"DIV",{class:!0});var p=l(a);o=r(p,"TABLE",{class:!0});var g=l(o);f=r(g,"THEAD",{class:!0});var h=l(f);m=r(h,"TR",{});var x=l(m);for(let t=0;t<j.length;t+=1)j[t].l(x);x.forEach(c),h.forEach(c),y=b(g),v=r(g,"TBODY",{class:!0});var w=l(v);for(let t=0;t<N.length;t+=1)N[t].l(w);w.forEach(c),g.forEach(c),p.forEach(c),u.forEach(c),d.forEach(c),i.forEach(c),this.h()},h(){i(f,"class","bg-gray-50"),i(v,"class","divide-y divide-gray-200"),i(o,"class","min-w-full divide-y divide-gray-200"),i(a,"class","shadow border-b border-gray-200 sm:rounded-lg"),i(s,"class","align-middle inline-block min-w-full"),i(n,"class",""),i(t,"class","flex flex-col h-full overflow-scroll")},m(e,r){d(e,t,r),u(t,n),u(n,s),u(s,a),u(a,o),u(o,f),u(f,m);for(let t=0;t<j.length;t+=1)j[t].m(m,null);u(o,y),u(o,v);for(let t=0;t<N.length;t+=1)N[t].m(v,null);w=!0},p(e,[t]){if(6&t){let n;for(k=e[1],n=0;n<k.length;n+=1){const s=xe(e,k,n);j[n]?j[n].p(s,t):(j[n]=ve(s),j[n].c(),j[n].m(m,null))}for(;n<j.length;n+=1)j[n].d(1);j.length=k.length}if(9&t){let n;for(I=e[0],n=0;n<I.length;n+=1){const s=he(e,I,n);N[n]?(N[n].p(s,t),p(N[n],1)):(N[n]=Ie(s),N[n].c(),p(N[n],1),N[n].m(v,null))}for($(),n=I.length;n<N.length;n+=1)T(n);E()}},i(e){if(!w){for(let e=0;e<I.length;e+=1)p(N[e]);w=!0}},o(e){N=N.filter(Boolean);for(let t=0;t<N.length;t+=1)g(N[t]);w=!1},d(e){e&&c(t),_(j,e),_(N,e)}}}function Te(e,t,n){let{rows:s}=t;const a=s[0].map((e=>e.key)),o=M();function r(e){o("sort",{column:e,direction:!0})}function l(e){console.log("huh"),o("viewLocation",e)}return e.$$set=e=>{"rows"in e&&n(0,s=e.rows)},[s,a,r,l,e=>{r(e)},e=>{console.log("what"),l(e.value)}]}class ze extends n{constructor(e){super(),s(this,e,Te,Ne,a,{rows:0})}}function Se(e){let t;const n=e[6].default,s=T(n,e,e[5],null);return{c(){s&&s.c()},l(e){s&&s.l(e)},m(e,n){s&&s.m(e,n),t=!0},p(e,a){s&&s.p&&(!t||32&a)&&m(s,n,e,e[5],a,null,null)},i(e){t||(p(s,e),t=!0)},o(e){g(s,e),t=!1},d(e){s&&s.d(e)}}}function De(e){let t,n,s,a,o,f,m,p,g,$,E,k,_,j,I,N,T,z,S,D,V,C,L=e[3].properties.name+"",M=e[3].properties.accidents+"",P=e[3].properties.killed+"",A=e[3].properties.injured+"";return{c(){t=h("div"),n=h("div"),s=h("h3"),a=y(L),o=x(),f=h("p"),m=y(M),p=x(),g=h("span"),$=y("Accidents"),E=x(),k=h("p"),_=y(P),j=x(),I=h("span"),N=y("Killed"),T=x(),z=h("p"),S=y(A),D=x(),V=h("span"),C=y("Injured"),this.h()},l(e){t=r(e,"DIV",{class:!0});var i=l(t);n=r(i,"DIV",{class:!0});var d=l(n);s=r(d,"H3",{class:!0});var u=l(s);a=v(u,L),u.forEach(c),o=b(d),f=r(d,"P",{class:!0});var h=l(f);m=v(h,M),p=b(h),g=r(h,"SPAN",{class:!0});var y=l(g);$=v(y,"Accidents"),y.forEach(c),h.forEach(c),E=b(d),k=r(d,"P",{class:!0});var x=l(k);_=v(x,P),j=b(x),I=r(x,"SPAN",{class:!0});var w=l(I);N=v(w,"Killed"),w.forEach(c),x.forEach(c),T=b(d),z=r(d,"P",{class:!0});var O=l(z);S=v(O,A),D=b(O),V=r(O,"SPAN",{class:!0});var B=l(V);C=v(B,"Injured"),B.forEach(c),O.forEach(c),d.forEach(c),i.forEach(c),this.h()},h(){i(s,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),i(g,"class","font-normal"),i(f,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(I,"class","font-normal"),i(k,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(V,"class","font-normal"),i(z,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(n,"class","px-4 py-4 sm:px-6"),i(t,"class","bg-white shadow overflow-hidden rounded-md absolute top-4 right-0 mr-4 w-1/2 lg:w-1/3 pb-2")},m(e,r){d(e,t,r),u(t,n),u(n,s),u(s,a),u(n,o),u(n,f),u(f,m),u(f,p),u(f,g),u(g,$),u(n,E),u(n,k),u(k,_),u(k,j),u(k,I),u(I,N),u(n,T),u(n,z),u(z,S),u(z,D),u(z,V),u(V,C)},p(e,t){8&t&&L!==(L=e[3].properties.name+"")&&w(a,L),8&t&&M!==(M=e[3].properties.accidents+"")&&w(m,M),8&t&&P!==(P=e[3].properties.killed+"")&&w(_,P),8&t&&A!==(A=e[3].properties.injured+"")&&w(S,A)},d(e){e&&c(t)}}}function Ve(e){let t,n,s,a,o,f,m,w,k,_,j,I,N,T,z,S=e[1]&&Se(e),D=e[3]&&De(e);return{c(){t=h("div"),S&&S.c(),n=x(),s=h("div"),a=h("button"),o=y("Accidents"),f=x(),m=h("button"),w=y("Killed"),k=x(),_=h("button"),j=y("Injured"),I=x(),D&&D.c(),this.h()},l(e){t=r(e,"DIV",{class:!0});var i=l(t);S&&S.l(i),n=b(i),s=r(i,"DIV",{class:!0});var d=l(s);a=r(d,"BUTTON",{type:!0,class:!0});var u=l(a);o=v(u,"Accidents"),u.forEach(c),f=b(d),m=r(d,"BUTTON",{type:!0,class:!0});var p=l(m);w=v(p,"Killed"),p.forEach(c),k=b(d),_=r(d,"BUTTON",{type:!0,class:!0});var g=l(_);j=v(g,"Injured"),g.forEach(c),d.forEach(c),I=b(i),D&&D.l(i),i.forEach(c),this.h()},h(){i(a,"type","button"),i(a,"class","\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-t-md\n        sm:rounded-l-md\n        sm:rounded-tr-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),P(a,"selected","accidents"===e[2]),i(m,"type","button"),i(m,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),P(m,"selected","killed"===e[2]),i(_,"type","button"),i(_,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-b-md\n        sm:rounded-r-md\n        sm:rounded-bl-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),P(_,"selected","injured"===e[2]),i(s,"class","absolute z-10 flex flex-col sm:flex-row shadow-sm rounded-md top-4 left-4"),i(t,"class","flex-grow z-0 h-full")},m(r,l){d(r,t,l),S&&S.m(t,null),u(t,n),u(t,s),u(s,a),u(a,o),u(s,f),u(s,m),u(m,w),u(s,k),u(s,_),u(_,j),u(t,I),D&&D.m(t,null),e[10](t),N=!0,T||(z=[L(a,"click",e[7]),L(m,"click",e[8]),L(_,"click",e[9])],T=!0)},p(e,[s]){e[1]?S?(S.p(e,s),2&s&&p(S,1)):(S=Se(e),S.c(),p(S,1),S.m(t,n)):S&&($(),g(S,1,1,(()=>{S=null})),E()),4&s&&P(a,"selected","accidents"===e[2]),4&s&&P(m,"selected","killed"===e[2]),4&s&&P(_,"selected","injured"===e[2]),e[3]?D?D.p(e,s):(D=De(e),D.c(),D.m(t,null)):D&&(D.d(1),D=null)},i(e){N||(p(S),N=!0)},o(e){g(S),N=!1},d(n){n&&c(t),S&&S.d(),D&&D.d(),e[10](null),T=!1,A(z)}}}function Ce(e,t,n){let s;j(e,X,(e=>n(12,s=e)));let a,o,r,{$$slots:l={},$$scope:c}=t,i="accidents",d=null;function u(e){let t;console.log("prop",e),n(2,i=e),"accidents"===e?t=[[0,"#fcde9c"],[500,"#faa476"],[1e3,"#f0746e"],[2e3,"#e34f6f"],[4e3,"#dc3977"],[8e3,"#b9257a"],[16e3,"#7c1d6f"]]:"killed"===e?t=[[0,"#fcde9c"],[250,"#faa476"],[500,"#f0746e"],[750,"#e34f6f"],[1e3,"#dc3977"],[1250,"#b9257a"],[1500,"#7c1d6f"]]:"injured"===e&&(t=[[0,"#fcde9c"],[825,"#faa476"],[1750,"#f0746e"],[2625,"#e34f6f"],[3500,"#dc3977"],[4375,"#b9257a"],[6175,"#7c1d6f"]]),o.setPaintProperty("state_totals","fill-color",{property:i,stops:t})}I(Q,{getMap:()=>o}),I(Z,{getMapbox:()=>r}),N((async()=>(r=window.mapboxgl,r.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(1,o=new r.Map({container:a,style:"mapbox://styles/mapbox/light-v10",center:s.lngLat,zoom:s.zoom,minZoom:0,maxZoom:8})),o.on("load",(()=>{o.resize(),o.addSource("state_totals",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incident-totals/states/{z}/{x}/{y}.pbf"]}),o.addLayer({id:"state_totals",type:"fill",source:"state_totals","source-layer":"state_totals",layout:{},paint:{"fill-color":{property:i,stops:[[0,"#fcde9c"],[500,"#faa476"],[1e3,"#f0746e"],[2e3,"#e34f6f"],[4e3,"#dc3977"],[8e3,"#b9257a"],[16e3,"#7c1d6f"]]},"fill-opacity":["case",["boolean",["feature-state","hover"],!1],1,.8]}}),o.addLayer({id:"state_totals_lines",type:"line",source:"state_totals","source-layer":"state_totals",layout:{},paint:{"line-color":"#444","line-width":2}})})),o.on("mouseenter","state_totals",(function(e){o.getCanvas().style.cursor="pointer"})),o.on("mouseleave","state_totals",(function(){o.getCanvas().style.cursor=""})),o.on("click","state_totals",(async function(e){n(3,d=e.features[0])})),()=>{n(1,o=null)})));return e.$$set=e=>{"$$scope"in e&&n(5,c=e.$$scope)},[a,o,i,d,u,c,l,()=>{u("accidents")},()=>{u("killed")},()=>{u("injured")},function(e){C[e?"unshift":"push"]((()=>{a=e,n(0,a)}))}]}class Le extends n{constructor(e){super(),s(this,e,Ce,Ve,a,{})}}function Me(e){let t;const n=e[6].default,s=T(n,e,e[5],null);return{c(){s&&s.c()},l(e){s&&s.l(e)},m(e,n){s&&s.m(e,n),t=!0},p(e,a){s&&s.p&&(!t||32&a)&&m(s,n,e,e[5],a,null,null)},i(e){t||(p(s,e),t=!0)},o(e){g(s,e),t=!1},d(e){s&&s.d(e)}}}function Pe(e){let t,n,s,a,o,f,m,p,g,$,E,k,_,j,I,N,T,z,S,D,V,C,L=e[3].properties.name+"",M=e[3].properties.accidents+"",P=e[3].properties.killed+"",A=e[3].properties.injured+"";return{c(){t=h("div"),n=h("div"),s=h("h3"),a=y(L),o=x(),f=h("p"),m=y(M),p=x(),g=h("span"),$=y("Accidents"),E=x(),k=h("p"),_=y(P),j=x(),I=h("span"),N=y("Killed"),T=x(),z=h("p"),S=y(A),D=x(),V=h("span"),C=y("Injured"),this.h()},l(e){t=r(e,"DIV",{class:!0});var i=l(t);n=r(i,"DIV",{class:!0});var d=l(n);s=r(d,"H3",{class:!0});var u=l(s);a=v(u,L),u.forEach(c),o=b(d),f=r(d,"P",{class:!0});var h=l(f);m=v(h,M),p=b(h),g=r(h,"SPAN",{class:!0});var y=l(g);$=v(y,"Accidents"),y.forEach(c),h.forEach(c),E=b(d),k=r(d,"P",{class:!0});var x=l(k);_=v(x,P),j=b(x),I=r(x,"SPAN",{class:!0});var w=l(I);N=v(w,"Killed"),w.forEach(c),x.forEach(c),T=b(d),z=r(d,"P",{class:!0});var O=l(z);S=v(O,A),D=b(O),V=r(O,"SPAN",{class:!0});var B=l(V);C=v(B,"Injured"),B.forEach(c),O.forEach(c),d.forEach(c),i.forEach(c),this.h()},h(){i(s,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),i(g,"class","font-normal"),i(f,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(I,"class","font-normal"),i(k,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(V,"class","font-normal"),i(z,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(n,"class","px-4 py-4 sm:px-6"),i(t,"class","bg-white shadow overflow-hidden rounded-md absolute top-4 right-0 mr-4 w-1/2 lg:w-1/3 pb-2")},m(e,r){d(e,t,r),u(t,n),u(n,s),u(s,a),u(n,o),u(n,f),u(f,m),u(f,p),u(f,g),u(g,$),u(n,E),u(n,k),u(k,_),u(k,j),u(k,I),u(I,N),u(n,T),u(n,z),u(z,S),u(z,D),u(z,V),u(V,C)},p(e,t){8&t&&L!==(L=e[3].properties.name+"")&&w(a,L),8&t&&M!==(M=e[3].properties.accidents+"")&&w(m,M),8&t&&P!==(P=e[3].properties.killed+"")&&w(_,P),8&t&&A!==(A=e[3].properties.injured+"")&&w(S,A)},d(e){e&&c(t)}}}function Ae(e){let t,n,s,a,o,f,m,w,k,_,j,I,N,T,z,S=e[1]&&Me(e),D=e[3]&&Pe(e);return{c(){t=h("div"),S&&S.c(),n=x(),s=h("div"),a=h("button"),o=y("Accidents"),f=x(),m=h("button"),w=y("Killed"),k=x(),_=h("button"),j=y("Injured"),I=x(),D&&D.c(),this.h()},l(e){t=r(e,"DIV",{class:!0});var i=l(t);S&&S.l(i),n=b(i),s=r(i,"DIV",{class:!0});var d=l(s);a=r(d,"BUTTON",{type:!0,class:!0});var u=l(a);o=v(u,"Accidents"),u.forEach(c),f=b(d),m=r(d,"BUTTON",{type:!0,class:!0});var p=l(m);w=v(p,"Killed"),p.forEach(c),k=b(d),_=r(d,"BUTTON",{type:!0,class:!0});var g=l(_);j=v(g,"Injured"),g.forEach(c),d.forEach(c),I=b(i),D&&D.l(i),i.forEach(c),this.h()},h(){i(a,"type","button"),i(a,"class","\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-t-md\n        sm:rounded-l-md\n        sm:rounded-tr-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),P(a,"selected","accidents"===e[2]),i(m,"type","button"),i(m,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),P(m,"selected","killed"===e[2]),i(_,"type","button"),i(_,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-b-md\n        sm:rounded-r-md\n        sm:rounded-bl-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),P(_,"selected","injured"===e[2]),i(s,"class","absolute z-10 flex flex-col sm:flex-row shadow-sm rounded-md top-4 left-4"),i(t,"class","flex-grow z-0 h-full")},m(r,l){d(r,t,l),S&&S.m(t,null),u(t,n),u(t,s),u(s,a),u(a,o),u(s,f),u(s,m),u(m,w),u(s,k),u(s,_),u(_,j),u(t,I),D&&D.m(t,null),e[10](t),N=!0,T||(z=[L(a,"click",e[7]),L(m,"click",e[8]),L(_,"click",e[9])],T=!0)},p(e,[s]){e[1]?S?(S.p(e,s),2&s&&p(S,1)):(S=Me(e),S.c(),p(S,1),S.m(t,n)):S&&($(),g(S,1,1,(()=>{S=null})),E()),4&s&&P(a,"selected","accidents"===e[2]),4&s&&P(m,"selected","killed"===e[2]),4&s&&P(_,"selected","injured"===e[2]),e[3]?D?D.p(e,s):(D=Pe(e),D.c(),D.m(t,null)):D&&(D.d(1),D=null)},i(e){N||(p(S),N=!0)},o(e){g(S),N=!1},d(n){n&&c(t),S&&S.d(),D&&D.d(),e[10](null),T=!1,A(z)}}}function Oe(e,t,n){let s;j(e,F,(e=>n(12,s=e)));let a,o,r,{$$slots:l={},$$scope:c}=t,i="accidents",d=null;function u(e){n(2,i=e),o.setPaintProperty("county_totals","fill-color",{property:i,stops:[[0,"#fcde9c"],[15,"#faa476"],[30,"#f0746e"],[45,"#e34f6f"],[60,"#dc3977"],[75,"#b9257a"],[90,"#7c1d6f"]]})}I(Q,{getMap:()=>o}),I(Z,{getMapbox:()=>r}),N((async()=>(r=window.mapboxgl,r.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(1,o=new r.Map({container:a,style:"mapbox://styles/mapbox/light-v10",center:s.lngLat,zoom:s.zoom,minZoom:7,maxZoom:14})),o.on("load",(()=>{o.resize(),o.addSource("county_totals",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incident-totals/counties/{z}/{x}/{y}.pbf"]}),o.addLayer({id:"county_totals",type:"fill",source:"county_totals","source-layer":"county_totals",layout:{},paint:{"fill-color":{property:i,stops:[[0,"#fcde9c"],[15,"#faa476"],[30,"#f0746e"],[45,"#e34f6f"],[60,"#dc3977"],[75,"#b9257a"],[90,"#7c1d6f"]]},"fill-opacity":["case",["boolean",["feature-state","hover"],!1],1,.8]}}),o.addLayer({id:"county_totals_lines",type:"line",source:"county_totals","source-layer":"county_totals",layout:{},paint:{"line-color":"#444","line-width":2}})})),o.on("mousemove","county_totals",(function(e){o.getCanvas().style.cursor="pointer"})),o.on("mouseleave","county_totals",(function(){o.getCanvas().style.cursor=""})),o.on("click","county_totals",(async function(e){n(3,d=e.features[0])})),()=>{n(1,o=null)})));return e.$$set=e=>{"$$scope"in e&&n(5,c=e.$$scope)},[a,o,i,d,u,c,l,()=>{u("accidents")},()=>{u("killed")},()=>{u("injured")},function(e){C[e?"unshift":"push"]((()=>{a=e,n(0,a)}))}]}class Be extends n{constructor(e){super(),s(this,e,Oe,Ae,a,{})}}function Re(e){let t,n,s,a;return s=new Be({}),{c(){t=h("div"),n=h("div"),z(s.$$.fragment),this.h()},l(e){t=r(e,"DIV",{class:!0});var a=l(t);n=r(a,"DIV",{class:!0});var o=l(n);S(s.$$.fragment,o),o.forEach(c),a.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,o){d(e,t,o),u(t,n),D(s,n,null),a=!0},p:f,i(e){a||(p(s.$$.fragment,e),a=!0)},o(e){g(s.$$.fragment,e),a=!1},d(e){e&&c(t),V(s)}}}function Ke(e){let t,n,s,a;return s=new Le({}),{c(){t=h("div"),n=h("div"),z(s.$$.fragment),this.h()},l(e){t=r(e,"DIV",{class:!0});var a=l(t);n=r(a,"DIV",{class:!0});var o=l(n);S(s.$$.fragment,o),o.forEach(c),a.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,o){d(e,t,o),u(t,n),D(s,n,null),a=!0},p:f,i(e){a||(p(s.$$.fragment,e),a=!0)},o(e){g(s.$$.fragment,e),a=!1},d(e){e&&c(t),V(s)}}}function qe(e){let t,n,s,a;return s=new ze({props:{rows:e[0],columns:e[1]}}),s.$on("filter",Ge),s.$on("sort",He),s.$on("search",Qe),s.$on("viewLocation",e[5]),{c(){t=h("div"),n=h("div"),z(s.$$.fragment),this.h()},l(e){t=r(e,"DIV",{class:!0});var a=l(t);n=r(a,"DIV",{class:!0});var o=l(n);S(s.$$.fragment,o),o.forEach(c),a.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,o){d(e,t,o),u(t,n),D(s,n,null),a=!0},p(e,t){const n={};1&t&&(n.rows=e[0]),2&t&&(n.columns=e[1]),s.$set(n)},i(e){a||(p(s.$$.fragment,e),a=!0)},o(e){g(s.$$.fragment,e),a=!1},d(e){e&&c(t),V(s)}}}function Ue(e){let t,n,s,a;return s=new ge({props:{center:e[3]}}),{c(){t=h("div"),n=h("div"),z(s.$$.fragment),this.h()},l(e){t=r(e,"DIV",{class:!0});var a=l(t);n=r(a,"DIV",{class:!0});var o=l(n);S(s.$$.fragment,o),o.forEach(c),a.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,o){d(e,t,o),u(t,n),D(s,n,null),a=!0},p(e,t){const n={};8&t&&(n.center=e[3]),s.$set(n)},i(e){a||(p(s.$$.fragment,e),a=!0)},o(e){g(s.$$.fragment,e),a=!1},d(e){e&&c(t),V(s)}}}function Je(e){let t,n,s,a,o,f,m,w,k,_,j,I,N,T,z,S,D,V,C,M,P,R,K,U,J,Y,G,H,Q,Z,F,X,W,ee,te,ne,se,ae,oe,re,le,ce,ie,de,ue,fe,me,pe,ge,he,ye,xe,ve,be,we,$e,Ee,ke,_e,je,Ie,Ne,Te,ze,Se,De,Ve,Ce,Le,Me,Pe;const Ae=[Ue,qe,Ke,Re],Oe=[];function Be(e,t){return"map"===e[2]?0:"list"===e[2]?1:"us-totals"===e[2]?2:"nj-totals"===e[2]?3:-1}return~(Ne=Be(e))&&(Te=Oe[Ne]=Ae[Ne](e)),{c(){t=h("script"),s=h("link"),a=h("script"),f=h("link"),m=x(),w=h("div"),k=h("div"),_=h("h1"),j=y("Railroad Crossing Incidents"),I=x(),N=h("div"),T=h("label"),z=y("Select a visualization"),S=x(),D=h("select"),V=h("option"),C=y("N.J. County totals"),M=h("option"),P=y("U.S. State totals"),R=h("option"),K=y("Map"),U=h("option"),J=y("List"),Y=x(),G=h("div"),H=h("nav"),Q=h("button"),Z=h("span"),F=y("N.J. Totals"),X=x(),W=h("span"),ne=x(),se=h("button"),ae=h("span"),oe=y("U.S. Totals"),re=x(),le=h("span"),de=x(),ue=h("button"),fe=h("span"),me=y("Map"),pe=x(),ge=h("span"),xe=x(),ve=h("button"),be=h("span"),we=y("List"),$e=x(),Ee=h("span"),je=x(),Ie=h("div"),Te&&Te.c(),ze=x(),Se=h("div"),De=y("Story by Payton Guion. Graphics by Seth Vincent. "),Ve=h("br"),Ce=y("Data from the Federal Railroad Administration."),this.h()},l(e){const n=O('[data-svelte="svelte-1huuubw"]',document.head);t=r(n,"SCRIPT",{src:!0}),l(t).forEach(c),s=r(n,"LINK",{href:!0,rel:!0}),a=r(n,"SCRIPT",{src:!0}),l(a).forEach(c),f=r(n,"LINK",{rel:!0,href:!0,type:!0}),n.forEach(c),m=b(e),w=r(e,"DIV",{class:!0});var o=l(w);k=r(o,"DIV",{class:!0});var i=l(k);_=r(i,"H1",{class:!0});var d=l(_);j=v(d,"Railroad Crossing Incidents"),d.forEach(c),i.forEach(c),I=b(o),N=r(o,"DIV",{class:!0});var u=l(N);T=r(u,"LABEL",{for:!0,class:!0});var p=l(T);z=v(p,"Select a visualization"),p.forEach(c),S=b(u),D=r(u,"SELECT",{id:!0,name:!0,class:!0});var g=l(D);V=r(g,"OPTION",{value:!0});var h=l(V);C=v(h,"N.J. County totals"),h.forEach(c),M=r(g,"OPTION",{value:!0});var y=l(M);P=v(y,"U.S. State totals"),y.forEach(c),R=r(g,"OPTION",{value:!0,selected:!0});var x=l(R);K=v(x,"Map"),x.forEach(c),U=r(g,"OPTION",{value:!0});var $=l(U);J=v($,"List"),$.forEach(c),g.forEach(c),u.forEach(c),Y=b(o),G=r(o,"DIV",{class:!0});var E=l(G);H=r(E,"NAV",{class:!0,"aria-label":!0});var L=l(H);Q=r(L,"BUTTON",{class:!0,"aria-current":!0});var A=l(Q);Z=r(A,"SPAN",{});var B=l(Z);F=v(B,"N.J. Totals"),B.forEach(c),X=b(A),W=r(A,"SPAN",{"aria-hidden":!0,class:!0}),l(W).forEach(c),A.forEach(c),ne=b(L),se=r(L,"BUTTON",{class:!0,"aria-current":!0});var q=l(se);ae=r(q,"SPAN",{});var ee=l(ae);oe=v(ee,"U.S. Totals"),ee.forEach(c),re=b(q),le=r(q,"SPAN",{"aria-hidden":!0,class:!0}),l(le).forEach(c),q.forEach(c),de=b(L),ue=r(L,"BUTTON",{class:!0,"aria-current":!0});var te=l(ue);fe=r(te,"SPAN",{});var ce=l(fe);me=v(ce,"Map"),ce.forEach(c),pe=b(te),ge=r(te,"SPAN",{"aria-hidden":!0,class:!0}),l(ge).forEach(c),te.forEach(c),xe=b(L),ve=r(L,"BUTTON",{class:!0,"aria-current":!0});var ie=l(ve);be=r(ie,"SPAN",{});var he=l(be);we=v(he,"List"),he.forEach(c),$e=b(ie),Ee=r(ie,"SPAN",{"aria-hidden":!0,class:!0}),l(Ee).forEach(c),ie.forEach(c),L.forEach(c),E.forEach(c),je=b(o),Ie=r(o,"DIV",{class:!0});var ye=l(Ie);Te&&Te.l(ye),ye.forEach(c),ze=b(o),Se=r(o,"DIV",{class:!0});var ke=l(Se);De=v(ke,"Story by Payton Guion. Graphics by Seth Vincent. "),Ve=r(ke,"BR",{}),Ce=v(ke,"Data from the Federal Railroad Administration."),ke.forEach(c),o.forEach(c),this.h()},h(){document.title="Railroad Crossing Incidents",t.src!==(n="https://api.mapbox.com/mapbox-gl-js/v1.13.1/mapbox-gl.js")&&i(t,"src","https://api.mapbox.com/mapbox-gl-js/v1.13.1/mapbox-gl.js"),i(s,"href","https://api.mapbox.com/mapbox-gl-js/v1.13.1/mapbox-gl.css"),i(s,"rel","stylesheet"),a.src!==(o="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js")&&i(a,"src","https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js"),i(f,"rel","stylesheet"),i(f,"href","https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.css"),i(f,"type","text/css"),i(_,"class","font-bold text-gray-600"),i(k,"class","flex-none p-4"),i(T,"for","tabs"),i(T,"class","sr-only"),V.__value="nj-totals",V.value=V.__value,M.__value="us-totals",M.value=M.__value,R.__value="map",R.value=R.__value,R.selected=!0,U.__value="list",U.value=U.__value,i(D,"id","tabs"),i(D,"name","tabs"),i(D,"class","block w-full focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 rounded-md"),void 0===e[2]&&q((()=>e[9].call(D))),i(N,"class","flex-none sm:hidden p-4 pt-0"),i(W,"aria-hidden","true"),i(W,"class",ee="\n            "+("nj-totals"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),i(Q,"class",te="\n          "+("nj-totals"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),i(Q,"aria-current","page"),i(le,"aria-hidden","true"),i(le,"class",ce="\n            "+("us-totals"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),i(se,"class",ie="\n          "+("us-totals"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),i(se,"aria-current","page"),i(ge,"aria-hidden","true"),i(ge,"class",he="\n            "+("map"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),i(ue,"class",ye="\n          "+("map"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),i(ue,"aria-current","page"),i(Ee,"aria-hidden","true"),i(Ee,"class",ke="\n            "+("list"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),i(ve,"class",_e="\n          "+("list"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),i(ve,"aria-current","page"),i(H,"class","relative z-0 shadow flex divide-x divide-gray-200 border-t border-gray-100 border-"),i(H,"aria-label","Tabs"),i(G,"class","flex-none hidden sm:block"),i(Ie,"class","flex-grow border-t border-gray-200 overflow-hidden"),i(Se,"class","flex-none p-4 text-xs text-gray-500 border-t border-gray-200"),i(w,"class","flex flex-col h-screen border border-gray-100")},m(n,o){u(document.head,t),u(document.head,s),u(document.head,a),u(document.head,f),d(n,m,o),d(n,w,o),u(w,k),u(k,_),u(_,j),u(w,I),u(w,N),u(N,T),u(T,z),u(N,S),u(N,D),u(D,V),u(V,C),u(D,M),u(M,P),u(D,R),u(R,K),u(D,U),u(U,J),B(D,e[2]),u(w,Y),u(w,G),u(G,H),u(H,Q),u(Q,Z),u(Z,F),u(Q,X),u(Q,W),u(H,ne),u(H,se),u(se,ae),u(ae,oe),u(se,re),u(se,le),u(H,de),u(H,ue),u(ue,fe),u(fe,me),u(ue,pe),u(ue,ge),u(H,xe),u(H,ve),u(ve,be),u(be,we),u(ve,$e),u(ve,Ee),u(w,je),u(w,Ie),~Ne&&Oe[Ne].m(Ie,null),u(w,ze),u(w,Se),u(Se,De),u(Se,Ve),u(Se,Ce),Le=!0,Me||(Pe=[L(D,"change",e[9]),L(D,"change",e[10]),L(Q,"click",e[11]),L(se,"click",e[12]),L(ue,"click",e[13]),L(ve,"click",e[14])],Me=!0)},p(e,[t]){4&t&&B(D,e[2]),(!Le||4&t&&ee!==(ee="\n            "+("nj-totals"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&i(W,"class",ee),(!Le||4&t&&te!==(te="\n          "+("nj-totals"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&i(Q,"class",te),(!Le||4&t&&ce!==(ce="\n            "+("us-totals"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&i(le,"class",ce),(!Le||4&t&&ie!==(ie="\n          "+("us-totals"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&i(se,"class",ie),(!Le||4&t&&he!==(he="\n            "+("map"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&i(ge,"class",he),(!Le||4&t&&ye!==(ye="\n          "+("map"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&i(ue,"class",ye),(!Le||4&t&&ke!==(ke="\n            "+("list"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&i(Ee,"class",ke),(!Le||4&t&&_e!==(_e="\n          "+("list"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&i(ve,"class",_e);let n=Ne;Ne=Be(e),Ne===n?~Ne&&Oe[Ne].p(e,t):(Te&&($(),g(Oe[n],1,1,(()=>{Oe[n]=null})),E()),~Ne?(Te=Oe[Ne],Te?Te.p(e,t):(Te=Oe[Ne]=Ae[Ne](e),Te.c()),p(Te,1),Te.m(Ie,null)):Te=null)},i(e){Le||(p(Te),Le=!0)},o(e){g(Te),Le=!1},d(e){c(t),c(s),c(a),c(f),e&&c(m),e&&c(w),~Ne&&Oe[Ne].d(),Me=!1,A(Pe)}}}async function Ye({fetch:e,page:t}){const n=await e("https://railroad-crossing-data.vercel.app/railroad_crossing_data/RRData.json?StateName__exact=NJ&_sort=CountyName"),s=await n.json();console.log("json",s);const a=["rowid","Latitude","Longitude"],o=["Meets minimum safety guidelines","Total Killed","Total injured","Number of accidents","Street","CityName","CountyName","StateName","Active or Passive?","Distance from highway (feet)","Daily trains","Max train speed","Gates","Lights","Daily traffic","Last time traffic counted","School buses","Bus count","Railroad","CrossingID"];if(n.ok){const e=["link",...s.columns];return{props:{rows:s.rows.map((t=>e.map(((e,n)=>{if(!a.find((t=>t.includes(e))))return"link"===e?{key:"Map view",value:[t[12],t[11]]}:{key:e,value:t[n-1]}})).filter((e=>!!e)).sort(((e,t)=>o.indexOf(e.key)-o.indexOf(t.key))))),columns:e}}}return{status:n.status,error:new Error("Could not load data")}}function Ge(e){console.log("filter",e)}function He(e){console.log("sort",e)}function Qe(e){console.log("search",e)}function Ze(e,t,n){let s,a,o,r;j(e,G,(e=>n(6,r=e)));let{rows:l}=t,{columns:c}=t,i=r.query.get("view")||"nj-totals";async function d(e){r.query.set("view",e),n(2,i=e);const t=r.query.toString();await H(`${Y}?${t}`)}R(1e3),K(150);return e.$$set=e=>{"rows"in e&&n(0,l=e.rows),"columns"in e&&n(1,c=e.columns)},e.$$.update=()=>{if(64&e.$$.dirty&&n(7,s=r.query.get("lng")),64&e.$$.dirty&&n(8,a=r.query.get("lat")),384&e.$$.dirty&&n(3,o=s&a?[s,a]:null),68&e.$$.dirty&&"map"!==i&&(r.query.has("lng")||r.query.has("lat"))){r.query.delete("lng"),r.query.delete("lat");const e=r.query.toString();H(`${Y}?${e}`)}},[l,c,i,o,d,function(e){const[t,s]=e.detail;r.query.set("lng",t),r.query.set("lat",s),n(3,o=[t,s]),d("map")},r,s,a,function(){i=U(this),n(2,i)},e=>{d(e.target.value)},()=>{d("nj-totals")},()=>{d("us-totals")},()=>{d("map")},()=>{d("list")}]}export default class extends n{constructor(e){super(),s(this,e,Ze,Je,a,{rows:0,columns:1})}}export{Ye as load};

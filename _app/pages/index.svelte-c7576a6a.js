import{H as e,C as t,S as n,i as a,s as r,I as s,c as o,a as l,d as c,b as i,f as d,F as u,G as f,e as m,t as h,g as p,h as g,k as y,n as x,J as b,K as v,E as w,v as $,r as E,j as k,m as N,o as I,B as D,u as j,w as S,L as T,x as _,z as C,D as V,M as A,l as M,N as z,O as P,P as L,Q as R,R as O,T as B,U as K,V as q}from"../chunks/vendor-1e5fdf98.js";import{r as U,b as H}from"../chunks/paths-7dc55c62.js";function Y(e){const t=["rowid","Latitude","Longitude"],n=["Meets minimum safety guidelines","Total Killed","Total injured","Number of accidents","Street","CityName","CountyName","StateName","Active or Passive?","Distance from highway (feet)","Daily trains","Max train speed","Gates","Lights","Daily traffic","Last time traffic counted","School buses","Bus count","Railroad","CrossingID"],a=["link",...e.columns];return{rows:e.rows.map((e=>a.map(((n,a)=>{if(!t.find((e=>e.includes(n))))return"link"===n?{key:"Map view",value:[e[12],e[11]]}:{key:n,value:e[a-1]}})).filter((e=>!!e)).sort(((e,t)=>n.indexOf(e.key)-n.indexOf(t.key))))),columns:a}}const G={subscribe:t=>(()=>{const t=e("__svelte__");return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:t.navigating.subscribe}},session:t.session}})().page.subscribe(t)},J=async function(e,t){return U.goto(e,t,[])};const F={},Q={},W=t({zoom:7.5,lngLat:["-74.558333","40.16"]}),X=t({zoom:2,lngLat:["-98.5556","39.8097"]});function Z(e){let t,n;return{c(){t=s("svg"),n=s("path"),this.h()},l(e){t=o(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var a=l(t);n=o(a,"path",{d:!0},1),l(n).forEach(c),a.forEach(c),this.h()},h(){i(n,"d","M50,5C25.147,5,5,25.148,5,50c0,24.852,20.147,45,45,45c24.854,0,45-20.148,45-45C95,25.148,74.854,5,50,5z M74.675,38.917  l-23.75,29.511c-1.109,1.379-2.756,2.252-4.517,2.396c-0.173,0.015-0.347,0.021-0.52,0.021c-1.585,0-3.138-0.589-4.326-1.652  L25.985,55.17c-2.463-2.217-2.661-6.01-0.444-8.473c2.218-2.463,6.012-2.662,8.474-0.444l11.223,10.103l20.088-24.961  c2.078-2.582,5.855-2.989,8.438-0.913C76.344,32.558,76.752,36.335,74.675,38.917z"),i(t,"height","20px"),i(t,"width","20px"),i(t,"class","align-top inline"),i(t,"fill","#4CE600"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),i(t,"version","1.1"),i(t,"x","0px"),i(t,"y","0px"),i(t,"viewBox","0 0 100 100"),i(t,"enable-background","new 0 0 100 100"),i(t,"xml:space","preserve")},m(e,a){d(e,t,a),u(t,n)},p:f,i:f,o:f,d(e){e&&c(t)}}}class ee extends n{constructor(e){super(),a(this,e,null,Z,r,{})}}function te(e){let t,n;return{c(){t=s("svg"),n=s("path"),this.h()},l(e){t=o(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var a=l(t);n=o(a,"path",{d:!0},1),l(n).forEach(c),a.forEach(c),this.h()},h(){i(n,"d","M50,5C25.147,5,5,25.147,5,50c0,24.854,20.147,45,45,45c24.854,0,45-20.146,45-45C95,25.147,74.854,5,50,5z M49.999,76.75  c-3.342,0-6.061-2.717-6.061-6.057c0-3.346,2.719-6.066,6.061-6.066c3.343,0,6.063,2.723,6.063,6.066  C56.063,74.033,53.342,76.75,49.999,76.75z M66.238,43.808c-1.174,1.827-2.795,4.01-6.028,6.531  c-3.213,2.461-4.185,3.724-4.478,4.259c-0.166,0.299-0.402,0.895-0.59,2.004c-0.065,0.39-0.119,0.812-0.162,1.265l-0.254,2.714  l-9.771,0.023l0.124-3.127c0.017-0.4,0.06-1.185,0.168-1.918c0.324-2.229,1.085-4.209,2.261-5.882  c1.104-1.573,3.247-3.563,6.549-6.079c2.442-1.863,3.396-2.928,3.764-3.492c0.47-0.717,0.697-1.472,0.697-2.305  c0-1.931-0.705-3.46-2.094-4.545c-1.474-1.151-3.518-1.735-6.073-1.735c-2.265,0-4.176,0.599-5.682,1.778  c-1.594,1.239-2.713,2.953-3.245,4.964l-0.66,2.492l-9.563-1.037l0.676-3.238c0.88-4.218,2.865-7.474,5.902-9.677  c3.934-2.855,8.156-4.303,12.552-4.303c4.856,0,8.831,1.249,12.508,3.931c3.399,2.482,5.349,6.492,5.349,11.002  C68.188,39.642,67.55,41.727,66.238,43.808z"),i(t,"height","20px"),i(t,"width","20px"),i(t,"class","align-top inline"),i(t,"fill","#A2A2A2"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),i(t,"version","1.1"),i(t,"x","0px"),i(t,"y","0px"),i(t,"viewBox","0 0 100 100"),i(t,"enable-background","new 0 0 100 100"),i(t,"xml:space","preserve")},m(e,a){d(e,t,a),u(t,n)},p:f,i:f,o:f,d(e){e&&c(t)}}}class ne extends n{constructor(e){super(),a(this,e,null,te,r,{})}}function ae(e){let t,n;return{c(){t=s("svg"),n=s("path"),this.h()},l(e){t=o(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var a=l(t);n=o(a,"path",{d:!0},1),l(n).forEach(c),a.forEach(c),this.h()},h(){i(n,"d","M50,5C25.147,5,5,25.147,5,50c0,24.852,20.147,45,45,45c24.854,0,45-20.148,45-45C95,25.147,74.854,5,50,5z M70.243,70.24  c-1.173,1.172-2.708,1.758-4.243,1.758s-3.07-0.586-4.242-1.757L50,58.484L38.243,70.242C37.071,71.414,35.536,72,34,72  s-3.071-0.586-4.243-1.757c-2.343-2.345-2.343-6.144,0-8.485L41.515,50L29.757,38.242c-2.343-2.343-2.343-6.142,0-8.485  c2.343-2.343,6.142-2.343,8.485,0L50,41.514l11.756-11.757c2.344-2.343,6.145-2.343,8.485,0c2.344,2.343,2.344,6.142,0.001,8.485  L58.486,49.999l11.756,11.756C72.586,64.1,72.586,67.898,70.243,70.24z"),i(t,"height","20px"),i(t,"width","20px"),i(t,"class","align-top inline"),i(t,"fill","#FF0000"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),i(t,"version","1.1"),i(t,"x","0px"),i(t,"y","0px"),i(t,"viewBox","0 0 100 100"),i(t,"enable-background","new 0 0 100 100"),i(t,"xml:space","preserve")},m(e,a){d(e,t,a),u(t,n)},p:f,i:f,o:f,d(e){e&&c(t)}}}class re extends n{constructor(e){super(),a(this,e,null,ae,r,{})}}function se(e,t,n){const a=e.slice();return a[2]=t[n],a}function oe(e){let t,n;return{c(){t=m("h1"),n=h(e[1]),this.h()},l(a){t=o(a,"H1",{class:!0});var r=l(t);n=p(r,e[1]),r.forEach(c),this.h()},h(){i(t,"class","font-medium mb-2")},m(e,a){d(e,t,a),u(t,n)},p(e,t){2&t&&g(n,e[1])},d(e){e&&c(t)}}}function le(e){let t,n,a,r,s,f,v=e[2].description+"";return{c(){t=m("div"),n=m("span"),a=y(),r=m("span"),s=h(v),f=y(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"SPAN",{class:!0,style:!0}),l(n).forEach(c),a=x(i),r=o(i,"SPAN",{class:!0});var d=l(r);s=p(d,v),d.forEach(c),f=x(i),i.forEach(c),this.h()},h(){i(n,"class","w-4 h-4 inline-block rounded-full align-middle"),b(n,"background-color",e[2].color),i(r,"class","align-middle"),i(t,"class","")},m(e,o){d(e,t,o),u(t,n),u(t,a),u(t,r),u(r,s),u(t,f)},p(e,t){1&t&&b(n,"background-color",e[2].color),1&t&&v!==(v=e[2].description+"")&&g(s,v)},d(e){e&&c(t)}}}function ce(e){let t,n,a=e[1]&&oe(e),r=e[0],s=[];for(let o=0;o<r.length;o+=1)s[o]=le(se(e,r,o));return{c(){t=m("div"),a&&a.c(),n=y();for(let e=0;e<s.length;e+=1)s[e].c();this.h()},l(e){t=o(e,"DIV",{class:!0});var r=l(t);a&&a.l(r),n=x(r);for(let t=0;t<s.length;t+=1)s[t].l(r);r.forEach(c),this.h()},h(){i(t,"class","\n    absolute\n    z-10\n    flex\n    flex-col\n    bg-white\n    px-4\n    py-2\n    max-w-[150px]\n    shadow-sm\n    rounded-md\n    bottom-12\n    left-2\n  ")},m(e,r){d(e,t,r),a&&a.m(t,null),u(t,n);for(let n=0;n<s.length;n+=1)s[n].m(t,null)},p(e,[o]){if(e[1]?a?a.p(e,o):(a=oe(e),a.c(),a.m(t,n)):a&&(a.d(1),a=null),1&o){let n;for(r=e[0],n=0;n<r.length;n+=1){const a=se(e,r,n);s[n]?s[n].p(a,o):(s[n]=le(a),s[n].c(),s[n].m(t,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=r.length}},i:f,o:f,d(e){e&&c(t),a&&a.d(),v(s,e)}}}function ie(e,t,n){let{points:a}=t,{title:r}=t;return e.$$set=e=>{"points"in e&&n(0,a=e.points),"title"in e&&n(1,r=e.title)},[a,r]}class de extends n{constructor(e){super(),a(this,e,ie,ce,r,{points:0,title:1})}}function ue(e,t,n){const a=e.slice();return a[13]=t[n],a}function fe(e){let t;const n=e[8].default,a=V(n,e,e[7],null);return{c(){a&&a.c()},l(e){a&&a.l(e)},m(e,n){a&&a.m(e,n),t=!0},p(e,r){a&&a.p&&(!t||128&r)&&w(a,n,e,e[7],r,null,null)},i(e){t||($(a,e),t=!0)},o(e){E(a,e),t=!1},d(e){a&&a.d(e)}}}function me(e){let t,n,a,r,s;return{c(){t=m("div"),n=m("h1"),a=h("Click a point to learn "),r=m("br"),s=h("about accidents and other information at that railroad crossing."),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"H1",{class:!0});var d=l(n);a=p(d,"Click a point to learn "),r=o(d,"BR",{}),s=p(d,"about accidents and other information at that railroad crossing."),d.forEach(c),i.forEach(c),this.h()},h(){i(n,"class","block self-center w-[220px] font-medium text-gray-500 text-xl mx-auto align-middle"),i(t,"class","px-4 py-4 sm:px-6 flex items center h-full")},m(e,o){d(e,t,o),u(t,n),u(n,a),u(n,r),u(n,s)},p:f,i:f,o:f,d(e){e&&c(t)}}}function he(e){let t,n,a,r,s,f,b,v,w,k,N,I,S,T,_,C,V,A,M,z,P,L,R,O,B,K,q,U,H,Y,G=e[0].properties.Street+"",J=e[0].properties.CityName+"",F=e[0].properties.CountyName+"",Q=e[0].properties.StateName+"",W=e[0].properties["Number of accidents"]+"",X=e[0].properties["Total Killed"]+"",Z=e[0].properties["Total injured"]+"";const ee=[ye,ge,pe],te=[];function ne(e,t){return"Yes"===e[0].properties["Meets minimum safety guidelines"]?0:"No"===e[0].properties["Meets minimum safety guidelines"]?1:2}S=ne(e),T=te[S]=ee[S](e);let ae=e[3]&&xe(e);return{c(){t=m("div"),n=m("h3"),a=h(G),r=y(),s=m("h3"),f=h(J),b=h(", "),v=h(F),w=h(", "),k=h(Q),N=y(),I=m("p"),T.c(),_=y(),C=m("p"),V=h(W),A=h(" Accidents"),M=y(),z=m("p"),P=h(X),L=h(" Killed"),R=y(),O=m("p"),B=h(Z),K=h(" Injured"),q=y(),U=m("div"),H=m("dl"),ae&&ae.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"H3",{class:!0});var d=l(n);a=p(d,G),d.forEach(c),r=x(i),s=o(i,"H3",{class:!0});var u=l(s);f=p(u,J),b=p(u,", "),v=p(u,F),w=p(u,", "),k=p(u,Q),u.forEach(c),N=x(i),I=o(i,"P",{class:!0});var m=l(I);T.l(m),m.forEach(c),_=x(i),C=o(i,"P",{class:!0});var h=l(C);V=p(h,W),A=p(h," Accidents"),h.forEach(c),M=x(i),z=o(i,"P",{class:!0});var g=l(z);P=p(g,X),L=p(g," Killed"),g.forEach(c),R=x(i),O=o(i,"P",{class:!0});var y=l(O);B=p(y,Z),K=p(y," Injured"),y.forEach(c),i.forEach(c),q=x(e),U=o(e,"DIV",{class:!0});var $=l(U);H=o($,"DL",{class:!0});var E=l(H);ae&&ae.l(E),E.forEach(c),$.forEach(c),this.h()},h(){i(n,"class","text-lg leading-6 font-medium text-gray-900"),i(s,"class","text-md leading-6 font-medium text-gray-600 mb-2"),i(I,"class","font-bold my-0 pt-1 pb-3 max-w-2xl text-sm text-gray-600"),i(C,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(z,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(O,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(t,"class","px-4 py-4 sm:px-6"),i(H,"class","divide-y divide-gray-200"),i(U,"class","border-t border-gray-200 px-4 py-2 sm:py-4 sm:p-0")},m(e,o){d(e,t,o),u(t,n),u(n,a),u(t,r),u(t,s),u(s,f),u(s,b),u(s,v),u(s,w),u(s,k),u(t,N),u(t,I),te[S].m(I,null),u(t,_),u(t,C),u(C,V),u(C,A),u(t,M),u(t,z),u(z,P),u(z,L),u(t,R),u(t,O),u(O,B),u(O,K),d(e,q,o),d(e,U,o),u(U,H),ae&&ae.m(H,null),Y=!0},p(e,t){(!Y||1&t)&&G!==(G=e[0].properties.Street+"")&&g(a,G),(!Y||1&t)&&J!==(J=e[0].properties.CityName+"")&&g(f,J),(!Y||1&t)&&F!==(F=e[0].properties.CountyName+"")&&g(v,F),(!Y||1&t)&&Q!==(Q=e[0].properties.StateName+"")&&g(k,Q);let n=S;S=ne(e),S!==n&&(D(),E(te[n],1,1,(()=>{te[n]=null})),j(),T=te[S],T||(T=te[S]=ee[S](e),T.c()),$(T,1),T.m(I,null)),(!Y||1&t)&&W!==(W=e[0].properties["Number of accidents"]+"")&&g(V,W),(!Y||1&t)&&X!==(X=e[0].properties["Total Killed"]+"")&&g(P,X),(!Y||1&t)&&Z!==(Z=e[0].properties["Total injured"]+"")&&g(B,Z),e[3]?ae?ae.p(e,t):(ae=xe(e),ae.c(),ae.m(H,null)):ae&&(ae.d(1),ae=null)},i(e){Y||($(T),Y=!0)},o(e){E(T),Y=!1},d(e){e&&c(t),te[S].d(),e&&c(q),e&&c(U),ae&&ae.d()}}}function pe(e){let t,n,a;return t=new ne({}),{c(){k(t.$$.fragment),n=h(" May or may not meet minimum safety guidelines")},l(e){N(t.$$.fragment,e),n=p(e," May or may not meet minimum safety guidelines")},m(e,r){I(t,e,r),d(e,n,r),a=!0},i(e){a||($(t.$$.fragment,e),a=!0)},o(e){E(t.$$.fragment,e),a=!1},d(e){S(t,e),e&&c(n)}}}function ge(e){let t,n,a;return t=new re({}),{c(){k(t.$$.fragment),n=h(" Does not meet minimum safety guidelines")},l(e){N(t.$$.fragment,e),n=p(e," Does not meet minimum safety guidelines")},m(e,r){I(t,e,r),d(e,n,r),a=!0},i(e){a||($(t.$$.fragment,e),a=!0)},o(e){E(t.$$.fragment,e),a=!1},d(e){S(t,e),e&&c(n)}}}function ye(e){let t,n,a;return t=new ee({}),{c(){k(t.$$.fragment),n=h(" Meets minimum safety guidelines")},l(e){N(t.$$.fragment,e),n=p(e," Meets minimum safety guidelines")},m(e,r){I(t,e,r),d(e,n,r),a=!0},i(e){a||($(t.$$.fragment,e),a=!0)},o(e){E(t.$$.fragment,e),a=!1},d(e){S(t,e),e&&c(n)}}}function xe(e){let t,n=e[3],a=[];for(let r=0;r<n.length;r+=1)a[r]=be(ue(e,n,r));return{c(){for(let e=0;e<a.length;e+=1)a[e].c();t=M()},l(e){for(let t=0;t<a.length;t+=1)a[t].l(e);t=M()},m(e,n){for(let t=0;t<a.length;t+=1)a[t].m(e,n);d(e,t,n)},p(e,r){if(40&r){let s;for(n=e[3],s=0;s<n.length;s+=1){const o=ue(e,n,s);a[s]?a[s].p(o,r):(a[s]=be(o),a[s].c(),a[s].m(t.parentNode,t))}for(;s<a.length;s+=1)a[s].d(1);a.length=n.length}},d(e){v(a,e),e&&c(t)}}}function be(e){let t,n,a,r,s,f,b,v=(e[5][e[13].key]||e[13].key)+"",w=e[13].value+"";return{c(){t=m("div"),n=m("dt"),a=h(v),r=y(),s=m("dd"),f=h(w),b=y(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"DT",{class:!0});var d=l(n);a=p(d,v),d.forEach(c),r=x(i),s=o(i,"DD",{class:!0});var u=l(s);f=p(u,w),u.forEach(c),b=x(i),i.forEach(c),this.h()},h(){i(n,"class","text-sm font-medium text-gray-500"),i(s,"class","text-sm text-gray-900 mt-0 col-span-1"),i(t,"class","py-1 sm:py-2 grid grid-cols-2 gap-2 sm:px-6")},m(e,o){d(e,t,o),u(t,n),u(n,a),u(t,r),u(t,s),u(s,f),u(t,b)},p(e,t){8&t&&v!==(v=(e[5][e[13].key]||e[13].key)+"")&&g(a,v),8&t&&w!==(w=e[13].value+"")&&g(f,w)},d(e){e&&c(t)}}}function ve(e){let t,n,a,r,s,f,h,p,g,b,v=e[2]&&fe(e);r=new de({props:{points:e[4]}});const w=[he,me],T=[];function _(e,t){return e[0]?0:1}return p=_(e),g=T[p]=w[p](e),{c(){t=m("div"),n=m("div"),v&&v.c(),a=y(),k(r.$$.fragment),s=y(),f=m("div"),h=m("div"),g.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"DIV",{class:!0});var d=l(n);v&&v.l(d),a=x(d),N(r.$$.fragment,d),d.forEach(c),s=x(i),f=o(i,"DIV",{class:!0});var u=l(f);h=o(u,"DIV",{class:!0});var m=l(h);g.l(m),m.forEach(c),u.forEach(c),i.forEach(c),this.h()},h(){i(n,"class","flex-grow z-0 h-full"),i(h,"class","h-full overflow-y-scroll"),i(f,"class","bg-white h-1/2 sm:w-1/2 sm:h-full md:w-96 border-gray-200 border-t sm:border-t-0 sm:border-l"),i(t,"class","flex flex-col sm:flex-row h-full")},m(o,l){d(o,t,l),u(t,n),v&&v.m(n,null),u(n,a),I(r,n,null),e[9](n),u(t,s),u(t,f),u(f,h),T[p].m(h,null),b=!0},p(e,[t]){e[2]?v?(v.p(e,t),4&t&&$(v,1)):(v=fe(e),v.c(),$(v,1),v.m(n,a)):v&&(D(),E(v,1,1,(()=>{v=null})),j());let r=p;p=_(e),p===r?T[p].p(e,t):(D(),E(T[r],1,1,(()=>{T[r]=null})),j(),g=T[p],g?g.p(e,t):(g=T[p]=w[p](e),g.c()),$(g,1),g.m(h,null))},i(e){b||($(v),$(r.$$.fragment,e),$(g),b=!0)},o(e){E(v),E(r.$$.fragment,e),E(g),b=!1},d(n){n&&c(t),v&&v.d(),S(r),e[9](null),T[p].d()}}}function we(e,t,n){let a;T(e,W,(e=>n(11,a=e)));let r,s,o,l,{$$slots:c={},$$scope:i}=t,{center:d}=t,u=null;const f=["id","CrossingID","Total Killed","Total injured","Number of accidents","Latitude","Longitude","Street","CityName","CountyName","StateName","Meets minimum safety guidelines"];return _(F,{getMap:()=>s}),_(Q,{getMapbox:()=>o}),C((async()=>{o=window.mapboxgl,o.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(2,s=new o.Map({container:r,style:"mapbox://styles/mapbox/light-v10",center:d||a.lngLat,zoom:d?15:a.zoom,minZoom:3,maxZoom:20})),s.addControl(new MapboxGeocoder({accessToken:o.accessToken,mapboxgl:o}),"top-right"),s.on("load",(()=>{s.resize(),s.addSource("railroad_crossing_incidents",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incidents/{z}/{x}/{y}.pbf"]}),s.addLayer({id:"railroad_crossing_incidents",type:"circle",source:"railroad_crossing_incidents","source-layer":"railroad_crossing_incidents",layout:{},paint:{"circle-radius":["case",["has","sqrt_point_count"],["+",["*",["get","sqrt_point_count"],1.1],10],10],"circle-color":["case",["==",["get","Number of accidents"],0],"blue","red"],"circle-opacity":["case",["boolean",["feature-state","hover"],!1],1,.3],"circle-stroke-color":"white","circle-stroke-width":["case",["boolean",["feature-state","hover"],!1],3,0]}})})),d&&setTimeout((()=>{const e=s.project(d),t=s.queryRenderedFeatures([[e.x-5,e.y-5],[e.x+5,e.y+5]],{layers:["railroad_crossing_incidents"]});1===t.length&&n(0,u=t[0])}),1100);let e=null;function t({featureId:e,state:t}){s.setFeatureState({id:e,source:"railroad_crossing_incidents",sourceLayer:"railroad_crossing_incidents"},{hover:t})}let l=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1});return s.on("mousemove",(n=>{const a=s.queryRenderedFeatures(n.point,{layers:["railroad_crossing_incidents"]})[0];if(!a)return s.getCanvas().style.cursor="",l.remove(),void(e&&(t({featureId:e,state:!1}),e=null));if(s.getCanvas().style.cursor="pointer",a&&a.id===e)return;e&&t({featureId:e,state:!1}),e=a.id,t({featureId:a.id,state:!0});const r=a.properties,o=a.geometry.coordinates.slice();for(e=a.id;Math.abs(n.lngLat.lng-o[0])>180;)o[0]+=n.lngLat.lng>o[0]?360:-360;if(r.point_count&&r.point_count>-2){const e=`${r.point_count} locations`;l.setLngLat(o).setHTML(e).addTo(s)}})),s.on("click","railroad_crossing_incidents",(async function(e){const t=e.features[0],{point_count:a}=t.properties;if(s.resize(),a){const e=s.getZoom()+2;s.flyTo({center:t.geometry.coordinates,zoom:e}),n(0,u=null)}else n(0,u=e.features[0])})),()=>{n(2,s=null)}})),e.$$set=e=>{"center"in e&&n(6,d=e.center),"$$scope"in e&&n(7,i=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&u&&n(3,l=Object.keys(u.properties).filter((e=>!f.find((t=>t.includes(e))))).map((e=>({key:e,value:u.properties[e]}))))},[u,r,s,l,[{color:"red",description:"Accidents"},{color:"blue",description:"No accidents"}],{CountyName:"County",CityName:"City",StateName:"State"},d,i,c,function(e){A[e?"unshift":"push"]((()=>{r=e,n(1,r)}))}]}class $e extends n{constructor(e){super(),a(this,e,we,ve,r,{center:6})}}const Ee={Alabama:"AL",Alaska:"AK",Arizona:"AZ",Arkansas:"AR",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE","District of Columbia":"DC",Florida:"FL",Georgia:"GA",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Puerto Rico":"PR","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY"};function ke(e){const t=t=>{!e||e.contains(t.target)||t.defaultPrevented||e.dispatchEvent(new CustomEvent("click_outside",{detail:{event:t,node:e}}))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function Ne(e,t,n){const a=e.slice();return a[18]=t[n],a}function Ie(e,t,n){const a=e.slice();return a[21]=t[n],a}function De(e,t,n){const a=e.slice();return a[24]=t[n],a}function je(e){let t,n,a,r,s,f,g,b,v,w,$,E,k,N,I,D,j=e[1].column===e[24]&&"ASC"===e[1].order&&Se();function S(){return e[10](e[24])}let T=e[1].column===e[24]&&"DESC"===e[1].order&&Te();function _(){return e[11](e[24])}function C(){return e[12](e[24])}function V(...t){return e[13](e[24],...t)}return{c(){t=m("div"),n=m("div"),a=m("button"),r=m("span"),j&&j.c(),s=h("\n                            Sort Ascending"),f=y(),g=m("button"),b=m("span"),T&&T.c(),v=h("\n                            Sort Descending"),w=y(),$=m("button"),E=m("span"),k=h("𐄂"),N=h("\n                            Remove Sort"),this.h()},l(e){t=o(e,"DIV",{class:!0,role:!0,"aria-orientation":!0,"aria-labelledby":!0,tabindex:!0});var i=l(t);n=o(i,"DIV",{class:!0,role:!0});var d=l(n);a=o(d,"BUTTON",{type:!0,class:!0,role:!0,tabindex:!0,id:!0});var u=l(a);r=o(u,"SPAN",{class:!0});var m=l(r);j&&j.l(m),m.forEach(c),s=p(u,"\n                            Sort Ascending"),u.forEach(c),f=x(d),g=o(d,"BUTTON",{type:!0,class:!0,role:!0,tabindex:!0,id:!0});var h=l(g);b=o(h,"SPAN",{class:!0});var y=l(b);T&&T.l(y),y.forEach(c),v=p(h,"\n                            Sort Descending"),h.forEach(c),w=x(d),$=o(d,"BUTTON",{type:!0,class:!0,role:!0,tabindex:!0,id:!0});var I=l($);E=o(I,"SPAN",{class:!0});var D=l(E);k=p(D,"𐄂"),D.forEach(c),N=p(I,"\n                            Remove Sort"),I.forEach(c),d.forEach(c),i.forEach(c),this.h()},h(){i(r,"class","inline-block w-3 h-3"),i(a,"type","button"),i(a,"class","text-gray-700 hover:text-gray-900 hover:bg-gray-100 block px-2 py-2 text-xs"),i(a,"role","menuitem"),i(a,"tabindex","-1"),i(a,"id","menu-item-0"),i(b,"class","inline-block w-3 h-3"),i(g,"type","button"),i(g,"class","text-gray-700 hover:text-gray-900 hover:bg-gray-100 block px-2 py-2 text-xs"),i(g,"role","menuitem"),i(g,"tabindex","-1"),i(g,"id","menu-item-1"),i(E,"class","inline-block w-3 h-3"),i($,"type","button"),i($,"class","text-gray-700 hover:text-gray-900 hover:bg-gray-100 block px-2 py-2 text-xs"),i($,"role","menuitem"),i($,"tabindex","-1"),i($,"id","menu-item-2"),i(n,"class",""),i(n,"role","none"),i(t,"class","origin-top-right absolute right-0 mt-2 w-40 rounded-md shadow bg-white ring-1 ring-black ring-opacity-5 focus:outline-none"),i(t,"role","menu"),i(t,"aria-orientation","vertical"),i(t,"aria-labelledby","menu-button"),i(t,"tabindex","-1")},m(e,o){d(e,t,o),u(t,n),u(n,a),u(a,r),j&&j.m(r,null),u(a,s),u(n,f),u(n,g),u(g,b),T&&T.m(b,null),u(g,v),u(n,w),u(n,$),u($,E),u(E,k),u($,N),I||(D=[P(a,"click",S),P(g,"click",_),P($,"click",C),L(ke.call(null,t)),P(t,"click_outside",V)],I=!0)},p(t,n){(e=t)[1].column===e[24]&&"ASC"===e[1].order?j||(j=Se(),j.c(),j.m(r,null)):j&&(j.d(1),j=null),e[1].column===e[24]&&"DESC"===e[1].order?T||(T=Te(),T.c(),T.m(b,null)):T&&(T.d(1),T=null)},d(e){e&&c(t),j&&j.d(),T&&T.d(),I=!1,R(D)}}}function Se(e){let t;return{c(){t=h("✓")},l(e){t=p(e,"✓")},m(e,n){d(e,t,n)},d(e){e&&c(t)}}}function Te(e){let t;return{c(){t=h("✓")},l(e){t=p(e,"✓")},m(e,n){d(e,t,n)},d(e){e&&c(t)}}}function _e(e){let t,n,a,r,f,g,b=e[24]+"",v="Map view"!==e[24]&&function(e){let t,n,a,r,f,h,p,g;function b(){return e[9](e[24])}let v=e[2].open&&e[2].open===e[24]&&je(e);return{c(){t=m("div"),n=m("div"),a=m("button"),r=s("svg"),f=s("path"),h=y(),v&&v.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var s=l(t);n=o(s,"DIV",{});var i=l(n);a=o(i,"BUTTON",{type:!0,class:!0,id:!0,"aria-expanded":!0,"aria-haspopup":!0});var d=l(a);r=o(d,"svg",{class:!0,xmlns:!0,viewBox:!0,fill:!0,"aria-hidden":!0},1);var u=l(r);f=o(u,"path",{"fill-rule":!0,d:!0,"clip-rule":!0},1),l(f).forEach(c),u.forEach(c),d.forEach(c),i.forEach(c),h=x(s),v&&v.l(s),s.forEach(c),this.h()},h(){i(f,"fill-rule","evenodd"),i(f,"d","M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"),i(f,"clip-rule","evenodd"),i(r,"class","h-3 w-3"),i(r,"xmlns","http://www.w3.org/2000/svg"),i(r,"viewBox","0 0 20 20"),i(r,"fill","currentColor"),i(r,"aria-hidden","true"),i(a,"type","button"),i(a,"class","inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm p-1 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-indigo-500"),i(a,"id","menu-button"),i(a,"aria-expanded","true"),i(a,"aria-haspopup","true"),i(t,"class","relative inline-block text-left right-0 top-0 ml-4 self-center")},m(e,s){d(e,t,s),u(t,n),u(n,a),u(a,r),u(r,f),u(t,h),v&&v.m(t,null),p||(g=P(a,"click",b),p=!0)},p(n,a){(e=n)[2].open&&e[2].open===e[24]?v?v.p(e,a):(v=je(e),v.c(),v.m(t,null)):v&&(v.d(1),v=null)},d(e){e&&c(t),v&&v.d(),p=!1,g()}}}(e);return{c(){t=m("th"),n=m("div"),a=m("span"),r=h(b),f=y(),v&&v.c(),g=y(),this.h()},l(e){t=o(e,"TH",{scope:!0,class:!0});var s=l(t);n=o(s,"DIV",{class:!0});var i=l(n);a=o(i,"SPAN",{});var d=l(a);r=p(d,b),d.forEach(c),f=x(i),v&&v.l(i),i.forEach(c),g=x(s),s.forEach(c),this.h()},h(){i(n,"class","flex flex-row "),i(t,"scope","col"),i(t,"class","px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider")},m(e,s){d(e,t,s),u(t,n),u(n,a),u(a,r),u(n,f),v&&v.m(n,null),u(t,g)},p(e,t){"Map view"!==e[24]&&v.p(e,t)},d(e){e&&c(t),v&&v.d()}}}function Ce(e){let t,n=e[21].value+"";return{c(){t=h(n)},l(e){t=p(e,n)},m(e,n){d(e,t,n)},p(e,a){1&a&&n!==(n=e[21].value+"")&&g(t,n)},i:f,o:f,d(e){e&&c(t)}}}function Ve(e){let t,n,a,r;const s=[Pe,ze,Me],o=[];function l(e,t){return"Yes"===e[21].value?0:"No"===e[21].value?1:2}return t=l(e),n=o[t]=s[t](e),{c(){n.c(),a=M()},l(e){n.l(e),a=M()},m(e,n){o[t].m(e,n),d(e,a,n),r=!0},p(e,r){let c=t;t=l(e),t!==c&&(D(),E(o[c],1,1,(()=>{o[c]=null})),j(),n=o[t],n||(n=o[t]=s[t](e),n.c()),$(n,1),n.m(a.parentNode,a))},i(e){r||($(n),r=!0)},o(e){E(n),r=!1},d(e){o[t].d(e),e&&c(a)}}}function Ae(e){let t,n,a,r;function s(){return e[14](e[21])}return{c(){t=m("button"),n=h("View on map"),this.h()},l(e){t=o(e,"BUTTON",{class:!0});var a=l(t);n=p(a,"View on map"),a.forEach(c),this.h()},h(){i(t,"class","text-gray-600 hover:text-blue-600 hover:shadow-sm bg-gray-50 hover:bg-gray-100 p-2")},m(e,o){d(e,t,o),u(t,n),a||(r=P(t,"click",s),a=!0)},p(t,n){e=t},i:f,o:f,d(e){e&&c(t),a=!1,r()}}}function Me(e){let t,n,a;return t=new ne({}),{c(){k(t.$$.fragment),n=h(" Info unavailable")},l(e){N(t.$$.fragment,e),n=p(e," Info unavailable")},m(e,r){I(t,e,r),d(e,n,r),a=!0},i(e){a||($(t.$$.fragment,e),a=!0)},o(e){E(t.$$.fragment,e),a=!1},d(e){S(t,e),e&&c(n)}}}function ze(e){let t,n,a;return t=new re({}),{c(){k(t.$$.fragment),n=h(" No")},l(e){N(t.$$.fragment,e),n=p(e," No")},m(e,r){I(t,e,r),d(e,n,r),a=!0},i(e){a||($(t.$$.fragment,e),a=!0)},o(e){E(t.$$.fragment,e),a=!1},d(e){S(t,e),e&&c(n)}}}function Pe(e){let t,n,a;return t=new ee({}),{c(){k(t.$$.fragment),n=h(" Yes")},l(e){N(t.$$.fragment,e),n=p(e," Yes")},m(e,r){I(t,e,r),d(e,n,r),a=!0},i(e){a||($(t.$$.fragment,e),a=!0)},o(e){E(t.$$.fragment,e),a=!1},d(e){S(t,e),e&&c(n)}}}function Le(e){let t,n,a,r;const s=[Ae,Ve,Ce],u=[];function f(e,t){return"Map view"===e[21].key?0:"Meets minimum safety guidelines"===e[21].key?1:2}return n=f(e),a=u[n]=s[n](e),{c(){t=m("td"),a.c(),this.h()},l(e){t=o(e,"TD",{class:!0});var n=l(t);a.l(n),n.forEach(c),this.h()},h(){i(t,"class","px-12 py-4 text-left whitespace-nowrap text-sm font-medium text-gray-900")},m(e,a){d(e,t,a),u[n].m(t,null),r=!0},p(e,r){let o=n;n=f(e),n===o?u[n].p(e,r):(D(),E(u[o],1,1,(()=>{u[o]=null})),j(),a=u[n],a?a.p(e,r):(a=u[n]=s[n](e),a.c()),$(a,1),a.m(t,null))},i(e){r||($(a),r=!0)},o(e){E(a),r=!1},d(e){e&&c(t),u[n].d()}}}function Re(e){let t,n,a,r=e[18],s=[];for(let o=0;o<r.length;o+=1)s[o]=Le(Ie(e,r,o));const i=e=>E(s[e],1,1,(()=>{s[e]=null}));return{c(){t=m("tr");for(let e=0;e<s.length;e+=1)s[e].c();n=y()},l(e){t=o(e,"TR",{});var a=l(t);for(let t=0;t<s.length;t+=1)s[t].l(a);n=x(a),a.forEach(c)},m(e,r){d(e,t,r);for(let n=0;n<s.length;n+=1)s[n].m(t,null);u(t,n),a=!0},p(e,a){if(257&a){let o;for(r=e[18],o=0;o<r.length;o+=1){const l=Ie(e,r,o);s[o]?(s[o].p(l,a),$(s[o],1)):(s[o]=Le(l),s[o].c(),$(s[o],1),s[o].m(t,n))}for(D(),o=r.length;o<s.length;o+=1)i(o);j()}},i(e){if(!a){for(let e=0;e<r.length;e+=1)$(s[e]);a=!0}},o(e){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)E(s[t]);a=!1},d(e){e&&c(t),v(s,e)}}}function Oe(e){let t,n,a,r,s,f,h,p,g,b,w,k,N,I,S=e[3],T=[];for(let o=0;o<S.length;o+=1)T[o]=_e(De(e,S,o));let _=e[0],C=[];for(let o=0;o<_.length;o+=1)C[o]=Re(Ne(e,_,o));const V=e=>E(C[e],1,1,(()=>{C[e]=null}));return{c(){t=m("div"),n=m("div"),a=m("div"),r=m("div"),s=y(),f=m("div"),h=m("div"),p=m("div"),g=m("table"),b=m("thead"),w=m("tr");for(let e=0;e<T.length;e+=1)T[e].c();k=y(),N=m("tbody");for(let e=0;e<C.length;e+=1)C[e].c();this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"DIV",{class:!0});var d=l(n);a=o(d,"DIV",{class:!0});var u=l(a);r=o(u,"DIV",{id:!0}),l(r).forEach(c),u.forEach(c),d.forEach(c),s=x(i),f=o(i,"DIV",{class:!0});var m=l(f);h=o(m,"DIV",{class:!0});var y=l(h);p=o(y,"DIV",{class:!0});var v=l(p);g=o(v,"TABLE",{class:!0});var $=l(g);b=o($,"THEAD",{class:!0});var E=l(b);w=o(E,"TR",{class:!0});var I=l(w);for(let t=0;t<T.length;t+=1)T[t].l(I);I.forEach(c),E.forEach(c),k=x($),N=o($,"TBODY",{class:!0});var D=l(N);for(let t=0;t<C.length;t+=1)C[t].l(D);D.forEach(c),$.forEach(c),v.forEach(c),y.forEach(c),m.forEach(c),i.forEach(c),this.h()},h(){i(r,"id","geocoder"),i(a,"class",""),i(n,"class","w-full h-96 p-2"),i(w,"class","divide-x divide-gray-200"),i(b,"class","bg-gray-50"),i(N,"class","divide-y divide-gray-200"),i(g,"class","min-w-full divide-y divide-gray-200 bg-white"),i(p,"class","shadow border-b border-t border-gray-200 sm:rounded-md"),i(h,"class","align-middle inline-block min-w-full"),i(f,"class",""),i(t,"class","flex flex-col h-full overflow-scroll bg-gray-50")},m(e,o){d(e,t,o),u(t,n),u(n,a),u(a,r),u(t,s),u(t,f),u(f,h),u(h,p),u(p,g),u(g,b),u(b,w);for(let t=0;t<T.length;t+=1)T[t].m(w,null);u(g,k),u(g,N);for(let t=0;t<C.length;t+=1)C[t].m(N,null);I=!0},p(e,[t]){if(254&t){let n;for(S=e[3],n=0;n<S.length;n+=1){const a=De(e,S,n);T[n]?T[n].p(a,t):(T[n]=_e(a),T[n].c(),T[n].m(w,null))}for(;n<T.length;n+=1)T[n].d(1);T.length=S.length}if(257&t){let n;for(_=e[0],n=0;n<_.length;n+=1){const a=Ne(e,_,n);C[n]?(C[n].p(a,t),$(C[n],1)):(C[n]=Re(a),C[n].c(),$(C[n],1),C[n].m(N,null))}for(D(),n=_.length;n<C.length;n+=1)V(n);j()}},i(e){if(!I){for(let e=0;e<_.length;e+=1)$(C[e]);I=!0}},o(e){C=C.filter(Boolean);for(let t=0;t<C.length;t+=1)E(C[t]);I=!1},d(e){e&&c(t),v(T,e),v(C,e)}}}function Be(e,t,n){let{rows:a}=t,r=[],s={column:null,order:null},o={open:null};const l=a[0].map((e=>e.key)),c=z();function i(e){o.open===e?n(2,o.open=null,o):setTimeout((()=>{n(2,o.open=e,o)}),2)}function d(e,t){console.log("e",t.detail),o.open===e&&setTimeout((()=>{n(2,o.open=null,o)}),1),n(2,o.open=e,o)}function u(e,t){n(1,s={column:e,order:t}),c("query",{sort:s,filters:r})}function f(e){n(1,s={column:null,order:null}),c("query",{sort:s,filters:r})}function m(e){console.log("huh"),c("viewLocation",e)}C((()=>{const e=window.mapboxgl;e.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJuR1ZmQ01vIn0.zyEdsIKM-4orPm-3Y0XWDQ";const t=new MapboxGeocoder({accessToken:e.accessToken,types:"region,district,place"});t.addTo("#geocoder"),t.on("result",(({result:e})=>{const t=e,{place_name:n,place_type:a}=t,o=n.split(", "),l=a[0];"place"===l?(r.push({column:"CityName",value:o[0]}),r.push({column:"StateName",value:Ee[o[1]]})):"district"===l?(r.push({column:"CountyName",value:o[0].replace(" County","").toLowerCase()}),r.push({column:"StateName",value:Ee[o[1]]})):"region"===l&&r.push({column:"StateName",value:Ee[o[0]]}),c("query",{sort:s,filters:r})}))}));return e.$$set=e=>{"rows"in e&&n(0,a=e.rows)},e.$$.update=()=>{2&e.$$.dirty&&console.log("sort",s)},[a,s,o,l,i,d,u,f,m,e=>{i(e)},e=>u(e,"ASC"),e=>u(e,"DESC"),e=>f(),(e,t)=>{d(e,t)},e=>{m(e.value)}]}class Ke extends n{constructor(e){super(),a(this,e,Be,Oe,r,{rows:0})}}function qe(e,t,n){const a=e.slice();return a[2]=t[n],a[4]=n,a}function Ue(e){let t,n;return{c(){t=m("h1"),n=h(e[1]),this.h()},l(a){t=o(a,"H1",{class:!0});var r=l(t);n=p(r,e[1]),r.forEach(c),this.h()},h(){i(t,"class","font-medium mb-2")},m(e,a){d(e,t,a),u(t,n)},p(e,t){2&t&&g(n,e[1])},d(e){e&&c(t)}}}function He(e){let t;return{c(){t=h("+")},l(e){t=p(e,"+")},m(e,n){d(e,t,n)},p:f,d(e){e&&c(t)}}}function Ye(e){let t,n,a=e[0][e[4]+1][0]-1+"";return{c(){t=h("-"),n=h(a)},l(e){t=p(e,"-"),n=p(e,a)},m(e,a){d(e,t,a),d(e,n,a)},p(e,t){1&t&&a!==(a=e[0][e[4]+1][0]-1+"")&&g(n,a)},d(e){e&&c(t),e&&c(n)}}}function Ge(e){let t,n,a,r,s,f,v=e[2][0]+"";function w(e,t){return e[0][e[4]+1]?Ye:He}let $=w(e),E=$(e);return{c(){t=m("div"),n=m("span"),a=y(),r=m("span"),s=h(v),E.c(),f=y(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"SPAN",{class:!0,style:!0}),l(n).forEach(c),a=x(i),r=o(i,"SPAN",{});var d=l(r);s=p(d,v),E.l(d),d.forEach(c),f=x(i),i.forEach(c),this.h()},h(){i(n,"class","w-4 h-4 inline-block"),b(n,"background-color",e[2][1]),i(t,"class","")},m(e,o){d(e,t,o),u(t,n),u(t,a),u(t,r),u(r,s),E.m(r,null),u(t,f)},p(e,t){1&t&&b(n,"background-color",e[2][1]),1&t&&v!==(v=e[2][0]+"")&&g(s,v),$===($=w(e))&&E?E.p(e,t):(E.d(1),E=$(e),E&&(E.c(),E.m(r,null)))},d(e){e&&c(t),E.d()}}}function Je(e){let t,n,a=e[1]&&Ue(e),r=e[0],s=[];for(let o=0;o<r.length;o+=1)s[o]=Ge(qe(e,r,o));return{c(){t=m("div"),a&&a.c(),n=y();for(let e=0;e<s.length;e+=1)s[e].c();this.h()},l(e){t=o(e,"DIV",{class:!0});var r=l(t);a&&a.l(r),n=x(r);for(let t=0;t<s.length;t+=1)s[t].l(r);r.forEach(c),this.h()},h(){i(t,"class","\n    absolute\n    z-10\n    flex\n    flex-col\n    bg-white\n    px-4\n    py-2\n    max-w-[150px]\n    shadow-sm\n    rounded-md\n    bottom-12\n    left-2\n  ")},m(e,r){d(e,t,r),a&&a.m(t,null),u(t,n);for(let n=0;n<s.length;n+=1)s[n].m(t,null)},p(e,[o]){if(e[1]?a?a.p(e,o):(a=Ue(e),a.c(),a.m(t,n)):a&&(a.d(1),a=null),1&o){let n;for(r=e[0],n=0;n<r.length;n+=1){const a=qe(e,r,n);s[n]?s[n].p(a,o):(s[n]=Ge(a),s[n].c(),s[n].m(t,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=r.length}},i:f,o:f,d(e){e&&c(t),a&&a.d(),v(s,e)}}}function Fe(e,t,n){let{scale:a}=t,{title:r}=t;return e.$$set=e=>{"scale"in e&&n(0,a=e.scale),"title"in e&&n(1,r=e.title)},[a,r]}class Qe extends n{constructor(e){super(),a(this,e,Fe,Je,r,{scale:0,title:1})}}function We(e){let t;const n=e[8].default,a=V(n,e,e[7],null);return{c(){a&&a.c()},l(e){a&&a.l(e)},m(e,n){a&&a.m(e,n),t=!0},p(e,r){a&&a.p&&(!t||128&r)&&w(a,n,e,e[7],r,null,null)},i(e){t||($(a,e),t=!0)},o(e){E(a,e),t=!1},d(e){a&&a.d(e)}}}function Xe(e){let t,n,a,r,s,f,b,v,w,$,E,k,N,I,D,j,S,T,_,C,V,A,M=e[3].properties.name+"",z=e[3].properties.accidents+"",P=e[3].properties.killed+"",L=e[3].properties.injured+"";return{c(){t=m("div"),n=m("div"),a=m("h3"),r=h(M),s=y(),f=m("p"),b=h(z),v=y(),w=m("span"),$=h("Accidents"),E=y(),k=m("p"),N=h(P),I=y(),D=m("span"),j=h("Killed"),S=y(),T=m("p"),_=h(L),C=y(),V=m("span"),A=h("Injured"),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"DIV",{class:!0});var d=l(n);a=o(d,"H3",{class:!0});var u=l(a);r=p(u,M),u.forEach(c),s=x(d),f=o(d,"P",{class:!0});var m=l(f);b=p(m,z),v=x(m),w=o(m,"SPAN",{class:!0});var h=l(w);$=p(h,"Accidents"),h.forEach(c),m.forEach(c),E=x(d),k=o(d,"P",{class:!0});var g=l(k);N=p(g,P),I=x(g),D=o(g,"SPAN",{class:!0});var y=l(D);j=p(y,"Killed"),y.forEach(c),g.forEach(c),S=x(d),T=o(d,"P",{class:!0});var R=l(T);_=p(R,L),C=x(R),V=o(R,"SPAN",{class:!0});var O=l(V);A=p(O,"Injured"),O.forEach(c),R.forEach(c),d.forEach(c),i.forEach(c),this.h()},h(){i(a,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),i(w,"class","font-normal"),i(f,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(D,"class","font-normal"),i(k,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(V,"class","font-normal"),i(T,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(n,"class","px-4 py-4 sm:px-6"),i(t,"class","bg-white shadow overflow-hidden rounded-md absolute top-4 right-0 mr-4 w-1/2 lg:w-1/3 pb-2")},m(e,o){d(e,t,o),u(t,n),u(n,a),u(a,r),u(n,s),u(n,f),u(f,b),u(f,v),u(f,w),u(w,$),u(n,E),u(n,k),u(k,N),u(k,I),u(k,D),u(D,j),u(n,S),u(n,T),u(T,_),u(T,C),u(T,V),u(V,A)},p(e,t){8&t&&M!==(M=e[3].properties.name+"")&&g(r,M),8&t&&z!==(z=e[3].properties.accidents+"")&&g(b,z),8&t&&P!==(P=e[3].properties.killed+"")&&g(N,P),8&t&&L!==(L=e[3].properties.injured+"")&&g(_,L)},d(e){e&&c(t)}}}function Ze(e){let t,n,a,r,s,f,g,b,v,w,T,_,C,V,A,M,z,L=e[2]&&We(e);C=new Qe({props:{scale:e[5],title:e[4]}});let B=e[3]&&Xe(e);return{c(){t=m("div"),L&&L.c(),n=y(),a=m("div"),r=m("button"),s=h("Accidents"),f=y(),g=m("button"),b=h("Killed"),v=y(),w=m("button"),T=h("Injured"),_=y(),k(C.$$.fragment),V=y(),B&&B.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);L&&L.l(i),n=x(i),a=o(i,"DIV",{class:!0});var d=l(a);r=o(d,"BUTTON",{type:!0,class:!0});var u=l(r);s=p(u,"Accidents"),u.forEach(c),f=x(d),g=o(d,"BUTTON",{type:!0,class:!0});var m=l(g);b=p(m,"Killed"),m.forEach(c),v=x(d),w=o(d,"BUTTON",{type:!0,class:!0});var h=l(w);T=p(h,"Injured"),h.forEach(c),d.forEach(c),_=x(i),N(C.$$.fragment,i),V=x(i),B&&B.l(i),i.forEach(c),this.h()},h(){i(r,"type","button"),i(r,"class","\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-t-md\n        sm:rounded-l-md\n        sm:rounded-tr-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(r,"selected","accidents"===e[0]),i(g,"type","button"),i(g,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(g,"selected","killed"===e[0]),i(w,"type","button"),i(w,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-b-md\n        sm:rounded-r-md\n        sm:rounded-bl-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(w,"selected","injured"===e[0]),i(a,"class","absolute z-10 flex flex-col sm:flex-row shadow-sm rounded-md top-4 left-4"),i(t,"class","flex-grow z-0 h-full")},m(o,l){d(o,t,l),L&&L.m(t,null),u(t,n),u(t,a),u(a,r),u(r,s),u(a,f),u(a,g),u(g,b),u(a,v),u(a,w),u(w,T),u(t,_),I(C,t,null),u(t,V),B&&B.m(t,null),e[12](t),A=!0,M||(z=[P(r,"click",e[9]),P(g,"click",e[10]),P(w,"click",e[11])],M=!0)},p(e,[a]){e[2]?L?(L.p(e,a),4&a&&$(L,1)):(L=We(e),L.c(),$(L,1),L.m(t,n)):L&&(D(),E(L,1,1,(()=>{L=null})),j()),1&a&&O(r,"selected","accidents"===e[0]),1&a&&O(g,"selected","killed"===e[0]),1&a&&O(w,"selected","injured"===e[0]);const s={};32&a&&(s.scale=e[5]),16&a&&(s.title=e[4]),C.$set(s),e[3]?B?B.p(e,a):(B=Xe(e),B.c(),B.m(t,null)):B&&(B.d(1),B=null)},i(e){A||($(L),$(C.$$.fragment,e),A=!0)},o(e){E(L),E(C.$$.fragment,e),A=!1},d(n){n&&c(t),L&&L.d(),S(C),B&&B.d(),e[12](null),M=!1,R(z)}}}function et(e,t,n){let a,r,s;T(e,X,(e=>n(14,s=e)));let o,l,c,{$$slots:i={},$$scope:d}=t,u="accidents",f=null;const m={accidents:"Number of accidents",injured:"Number of accidents with injuries",killed:"Number of accidents with fatalities"},h={accidents:[[0,"#fcde9c"],[500,"#faa476"],[1e3,"#f0746e"],[2e3,"#e34f6f"],[4e3,"#dc3977"],[8e3,"#b9257a"],[16e3,"#7c1d6f"]],injured:[[0,"#fcde9c"],[250,"#faa476"],[500,"#f0746e"],[750,"#e34f6f"],[1e3,"#dc3977"],[1250,"#b9257a"],[1500,"#7c1d6f"]],killed:[[0,"#fcde9c"],[825,"#faa476"],[1750,"#f0746e"],[2625,"#e34f6f"],[3500,"#dc3977"],[4375,"#b9257a"],[6175,"#7c1d6f"]]};function p(e){console.log("prop",e),n(0,u=e);const t=r;l.setPaintProperty("state_totals","fill-color",{property:u,stops:t})}_(F,{getMap:()=>l}),_(Q,{getMapbox:()=>c}),C((async()=>(c=window.mapboxgl,c.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(2,l=new c.Map({container:o,style:"mapbox://styles/mapbox/light-v10",center:s.lngLat,zoom:s.zoom,minZoom:0,maxZoom:8})),l.on("load",(()=>{l.resize(),l.addSource("state_totals",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incident-totals/states/{z}/{x}/{y}.pbf"]}),l.addLayer({id:"state_totals",type:"fill",source:"state_totals","source-layer":"state_totals",layout:{},paint:{"fill-color":{property:u,stops:[[0,"#fcde9c"],[500,"#faa476"],[1e3,"#f0746e"],[2e3,"#e34f6f"],[4e3,"#dc3977"],[8e3,"#b9257a"],[16e3,"#7c1d6f"]]},"fill-opacity":["case",["boolean",["feature-state","hover"],!1],1,.8]}}),l.addLayer({id:"state_totals_lines",type:"line",source:"state_totals","source-layer":"state_totals",layout:{},paint:{"line-color":"#444","line-width":2}})})),l.on("mouseenter","state_totals",(function(e){l.getCanvas().style.cursor="pointer"})),l.on("mouseleave","state_totals",(function(){l.getCanvas().style.cursor=""})),l.on("click",(async function(e){const t=l.queryRenderedFeatures(e.point);n(3,f=t.find((e=>"state_totals"===e.layer.id)))})),()=>{n(2,l=null)})));return e.$$set=e=>{"$$scope"in e&&n(7,d=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&n(4,a=m[u]),1&e.$$.dirty&&n(5,r=h[u])},[u,o,l,f,a,r,p,d,i,()=>{p("accidents")},()=>{p("killed")},()=>{p("injured")},function(e){A[e?"unshift":"push"]((()=>{o=e,n(1,o)}))}]}class tt extends n{constructor(e){super(),a(this,e,et,Ze,r,{})}}function nt(e){let t;const n=e[8].default,a=V(n,e,e[7],null);return{c(){a&&a.c()},l(e){a&&a.l(e)},m(e,n){a&&a.m(e,n),t=!0},p(e,r){a&&a.p&&(!t||128&r)&&w(a,n,e,e[7],r,null,null)},i(e){t||($(a,e),t=!0)},o(e){E(a,e),t=!1},d(e){a&&a.d(e)}}}function at(e){let t,n,a,r,s,f,b,v,w,$,E,k,N,I,D,j,S,T,_,C,V,A,M=e[3].properties.name+"",z=e[3].properties.accidents+"",P=e[3].properties.killed+"",L=e[3].properties.injured+"";return{c(){t=m("div"),n=m("div"),a=m("h3"),r=h(M),s=y(),f=m("p"),b=h(z),v=y(),w=m("span"),$=h("Accidents"),E=y(),k=m("p"),N=h(P),I=y(),D=m("span"),j=h("Killed"),S=y(),T=m("p"),_=h(L),C=y(),V=m("span"),A=h("Injured"),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);n=o(i,"DIV",{class:!0});var d=l(n);a=o(d,"H3",{class:!0});var u=l(a);r=p(u,M),u.forEach(c),s=x(d),f=o(d,"P",{class:!0});var m=l(f);b=p(m,z),v=x(m),w=o(m,"SPAN",{class:!0});var h=l(w);$=p(h,"Accidents"),h.forEach(c),m.forEach(c),E=x(d),k=o(d,"P",{class:!0});var g=l(k);N=p(g,P),I=x(g),D=o(g,"SPAN",{class:!0});var y=l(D);j=p(y,"Killed"),y.forEach(c),g.forEach(c),S=x(d),T=o(d,"P",{class:!0});var R=l(T);_=p(R,L),C=x(R),V=o(R,"SPAN",{class:!0});var O=l(V);A=p(O,"Injured"),O.forEach(c),R.forEach(c),d.forEach(c),i.forEach(c),this.h()},h(){i(a,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),i(w,"class","font-normal"),i(f,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(D,"class","font-normal"),i(k,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(V,"class","font-normal"),i(T,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),i(n,"class","px-4 py-4 sm:px-6"),i(t,"class","bg-white shadow overflow-hidden rounded-md absolute top-4 right-0 mr-4 w-1/2 lg:w-1/3 pb-2")},m(e,o){d(e,t,o),u(t,n),u(n,a),u(a,r),u(n,s),u(n,f),u(f,b),u(f,v),u(f,w),u(w,$),u(n,E),u(n,k),u(k,N),u(k,I),u(k,D),u(D,j),u(n,S),u(n,T),u(T,_),u(T,C),u(T,V),u(V,A)},p(e,t){8&t&&M!==(M=e[3].properties.name+"")&&g(r,M),8&t&&z!==(z=e[3].properties.accidents+"")&&g(b,z),8&t&&P!==(P=e[3].properties.killed+"")&&g(N,P),8&t&&L!==(L=e[3].properties.injured+"")&&g(_,L)},d(e){e&&c(t)}}}function rt(e){let t,n,a,r,s,f,g,b,v,w,T,_,C,V,A,M,z,L=e[2]&&nt(e);C=new Qe({props:{scale:e[5],title:e[4]}});let B=e[3]&&at(e);return{c(){t=m("div"),L&&L.c(),n=y(),a=m("div"),r=m("button"),s=h("Accidents"),f=y(),g=m("button"),b=h("Killed"),v=y(),w=m("button"),T=h("Injured"),_=y(),k(C.$$.fragment),V=y(),B&&B.c(),this.h()},l(e){t=o(e,"DIV",{class:!0});var i=l(t);L&&L.l(i),n=x(i),a=o(i,"DIV",{class:!0});var d=l(a);r=o(d,"BUTTON",{type:!0,class:!0});var u=l(r);s=p(u,"Accidents"),u.forEach(c),f=x(d),g=o(d,"BUTTON",{type:!0,class:!0});var m=l(g);b=p(m,"Killed"),m.forEach(c),v=x(d),w=o(d,"BUTTON",{type:!0,class:!0});var h=l(w);T=p(h,"Injured"),h.forEach(c),d.forEach(c),_=x(i),N(C.$$.fragment,i),V=x(i),B&&B.l(i),i.forEach(c),this.h()},h(){i(r,"type","button"),i(r,"class","\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-t-md\n        sm:rounded-l-md\n        sm:rounded-tr-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(r,"selected","accidents"===e[0]),i(g,"type","button"),i(g,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(g,"selected","killed"===e[0]),i(w,"type","button"),i(w,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-b-md\n        sm:rounded-r-md\n        sm:rounded-bl-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(w,"selected","injured"===e[0]),i(a,"class","absolute z-10 flex flex-col sm:flex-row shadow-sm rounded-md top-4 left-4"),i(t,"class","flex-grow z-0 h-full")},m(o,l){d(o,t,l),L&&L.m(t,null),u(t,n),u(t,a),u(a,r),u(r,s),u(a,f),u(a,g),u(g,b),u(a,v),u(a,w),u(w,T),u(t,_),I(C,t,null),u(t,V),B&&B.m(t,null),e[12](t),A=!0,M||(z=[P(r,"click",e[9]),P(g,"click",e[10]),P(w,"click",e[11])],M=!0)},p(e,[a]){e[2]?L?(L.p(e,a),4&a&&$(L,1)):(L=nt(e),L.c(),$(L,1),L.m(t,n)):L&&(D(),E(L,1,1,(()=>{L=null})),j()),1&a&&O(r,"selected","accidents"===e[0]),1&a&&O(g,"selected","killed"===e[0]),1&a&&O(w,"selected","injured"===e[0]);const s={};16&a&&(s.title=e[4]),C.$set(s),e[3]?B?B.p(e,a):(B=at(e),B.c(),B.m(t,null)):B&&(B.d(1),B=null)},i(e){A||($(L),$(C.$$.fragment,e),A=!0)},o(e){E(L),E(C.$$.fragment,e),A=!1},d(n){n&&c(t),L&&L.d(),S(C),B&&B.d(),e[12](null),M=!1,R(z)}}}function st(e,t,n){let a,r;T(e,W,(e=>n(14,r=e)));let s,o,l,{$$slots:c={},$$scope:i}=t,d="accidents",u=null;const f={accidents:"Number of accidents",injured:"Number of accidents with injuries",killed:"Number of accidents with fatalities"};_(F,{getMap:()=>o}),_(Q,{getMapbox:()=>l});const m=[[0,"#fcde9c"],[15,"#faa476"],[30,"#f0746e"],[45,"#e34f6f"],[60,"#dc3977"],[75,"#b9257a"],[90,"#7c1d6f"]];function h(e){n(0,d=e),o.setPaintProperty("county_totals","fill-color",{property:d,stops:m})}C((async()=>(l=window.mapboxgl,l.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(2,o=new l.Map({container:s,style:"mapbox://styles/mapbox/light-v10",center:r.lngLat,zoom:r.zoom,minZoom:7,maxZoom:14})),o.on("load",(()=>{o.resize(),o.addSource("county_totals",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incident-totals/counties/{z}/{x}/{y}.pbf"]}),o.addLayer({id:"county_totals",type:"fill",source:"county_totals","source-layer":"county_totals",layout:{},paint:{"fill-color":{property:d,stops:[[0,"#fcde9c"],[15,"#faa476"],[30,"#f0746e"],[45,"#e34f6f"],[60,"#dc3977"],[75,"#b9257a"],[90,"#7c1d6f"]]},"fill-opacity":["case",["boolean",["feature-state","hover"],!1],1,.8]}}),o.addLayer({id:"county_totals_lines",type:"line",source:"county_totals","source-layer":"county_totals",layout:{},paint:{"line-color":"#444","line-width":2}})})),o.on("mousemove","county_totals",(function(e){o.getCanvas().style.cursor="pointer"})),o.on("mouseleave","county_totals",(function(){o.getCanvas().style.cursor=""})),o.on("click",(async function(e){const t=o.queryRenderedFeatures(e.point);n(3,u=t.find((e=>"county_totals"===e.layer.id)))})),()=>{n(2,o=null)})));return e.$$set=e=>{"$$scope"in e&&n(7,i=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&n(4,a=f[d])},[d,s,o,u,a,m,h,i,c,()=>{h("accidents")},()=>{h("killed")},()=>{h("injured")},function(e){A[e?"unshift":"push"]((()=>{s=e,n(1,s)}))}]}class ot extends n{constructor(e){super(),a(this,e,st,rt,r,{})}}function lt(e){let t,n,a,r;return a=new ot({}),{c(){t=m("div"),n=m("div"),k(a.$$.fragment),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=l(t);n=o(r,"DIV",{class:!0});var s=l(n);N(a.$$.fragment,s),s.forEach(c),r.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,s){d(e,t,s),u(t,n),I(a,n,null),r=!0},p:f,i(e){r||($(a.$$.fragment,e),r=!0)},o(e){E(a.$$.fragment,e),r=!1},d(e){e&&c(t),S(a)}}}function ct(e){let t,n,a,r;return a=new tt({}),{c(){t=m("div"),n=m("div"),k(a.$$.fragment),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=l(t);n=o(r,"DIV",{class:!0});var s=l(n);N(a.$$.fragment,s),s.forEach(c),r.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,s){d(e,t,s),u(t,n),I(a,n,null),r=!0},p:f,i(e){r||($(a.$$.fragment,e),r=!0)},o(e){E(a.$$.fragment,e),r=!1},d(e){e&&c(t),S(a)}}}function it(e){let t,n,a,r;return a=new Ke({props:{rows:e[0],columns:e[1]}}),a.$on("query",e[5]),a.$on("nextRequest",mt),a.$on("viewLocation",e[6]),{c(){t=m("div"),n=m("div"),k(a.$$.fragment),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=l(t);n=o(r,"DIV",{class:!0});var s=l(n);N(a.$$.fragment,s),s.forEach(c),r.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,s){d(e,t,s),u(t,n),I(a,n,null),r=!0},p(e,t){const n={};1&t&&(n.rows=e[0]),2&t&&(n.columns=e[1]),a.$set(n)},i(e){r||($(a.$$.fragment,e),r=!0)},o(e){E(a.$$.fragment,e),r=!1},d(e){e&&c(t),S(a)}}}function dt(e){let t,n,a,r;return a=new $e({props:{center:e[3]}}),{c(){t=m("div"),n=m("div"),k(a.$$.fragment),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=l(t);n=o(r,"DIV",{class:!0});var s=l(n);N(a.$$.fragment,s),s.forEach(c),r.forEach(c),this.h()},h(){i(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),i(t,"class","p-4 h-full bg-gray-50")},m(e,s){d(e,t,s),u(t,n),I(a,n,null),r=!0},p(e,t){const n={};8&t&&(n.center=e[3]),a.$set(n)},i(e){r||($(a.$$.fragment,e),r=!0)},o(e){E(a.$$.fragment,e),r=!1},d(e){e&&c(t),S(a)}}}function ut(e){let t,n,a,r,s,f,g,b,v,w,k,N,I,S,T,_,C,V,A,M,z,L,O,K,q,U,H,Y,G,J,F,Q,W,X,Z,ee,te,ne,ae,re,se,oe,le,ce,ie,de,ue,fe,me,he,pe,ge,ye,xe,be,ve,we,$e,Ee,ke,Ne,Ie,De,je,Se,Te;const _e=[dt,it,ct,lt],Ce=[];function Ve(e,t){return"map"===e[2]?0:"list"===e[2]?1:"us-totals"===e[2]?2:"nj-totals"===e[2]?3:-1}return~(fe=Ve(e))&&(me=Ce[fe]=_e[fe](e)),{c(){t=m("script"),a=m("link"),r=m("script"),f=m("link"),g=y(),b=m("div"),v=m("div"),w=m("h1"),k=h("Railroad Crossing Incidents"),N=y(),I=m("div"),S=m("nav"),T=m("button"),_=m("span"),C=h("Map"),V=y(),A=m("span"),L=y(),O=m("button"),K=m("span"),q=h("List"),U=y(),H=m("span"),J=y(),F=m("button"),Q=m("span"),W=h("N.J. Totals"),X=y(),Z=m("span"),ne=y(),ae=m("button"),re=m("span"),se=h("U.S. Totals"),oe=y(),le=m("span"),de=y(),ue=m("div"),me&&me.c(),he=y(),pe=m("div"),ge=h("Story by "),ye=m("a"),xe=h("Payton Guion"),be=h(". Graphics by "),ve=m("a"),we=h("Seth Vincent"),$e=h(". "),Ee=m("br"),ke=h("Data from the "),Ne=m("a"),Ie=h("Federal Railroad Administration"),De=h("."),this.h()},l(e){const n=B('[data-svelte="svelte-hlw6vs"]',document.head);t=o(n,"SCRIPT",{src:!0}),l(t).forEach(c),a=o(n,"LINK",{href:!0,rel:!0}),r=o(n,"SCRIPT",{src:!0}),l(r).forEach(c),f=o(n,"LINK",{rel:!0,href:!0,type:!0}),n.forEach(c),g=x(e),b=o(e,"DIV",{class:!0});var s=l(b);v=o(s,"DIV",{class:!0});var i=l(v);w=o(i,"H1",{class:!0});var d=l(w);k=p(d,"Railroad Crossing Incidents"),d.forEach(c),i.forEach(c),N=x(s),I=o(s,"DIV",{class:!0});var u=l(I);S=o(u,"NAV",{class:!0,"aria-label":!0});var m=l(S);T=o(m,"BUTTON",{class:!0,"aria-current":!0});var h=l(T);_=o(h,"SPAN",{});var y=l(_);C=p(y,"Map"),y.forEach(c),V=x(h),A=o(h,"SPAN",{"aria-hidden":!0,class:!0}),l(A).forEach(c),h.forEach(c),L=x(m),O=o(m,"BUTTON",{class:!0,"aria-current":!0});var $=l(O);K=o($,"SPAN",{});var E=l(K);q=p(E,"List"),E.forEach(c),U=x($),H=o($,"SPAN",{"aria-hidden":!0,class:!0}),l(H).forEach(c),$.forEach(c),J=x(m),F=o(m,"BUTTON",{class:!0,"aria-current":!0});var D=l(F);Q=o(D,"SPAN",{});var j=l(Q);W=p(j,"N.J. Totals"),j.forEach(c),X=x(D),Z=o(D,"SPAN",{"aria-hidden":!0,class:!0}),l(Z).forEach(c),D.forEach(c),ne=x(m),ae=o(m,"BUTTON",{class:!0,"aria-current":!0});var M=l(ae);re=o(M,"SPAN",{});var z=l(re);se=p(z,"U.S. Totals"),z.forEach(c),oe=x(M),le=o(M,"SPAN",{"aria-hidden":!0,class:!0}),l(le).forEach(c),M.forEach(c),m.forEach(c),u.forEach(c),de=x(s),ue=o(s,"DIV",{class:!0});var P=l(ue);me&&me.l(P),P.forEach(c),he=x(s),pe=o(s,"DIV",{class:!0});var R=l(pe);ge=p(R,"Story by "),ye=o(R,"A",{href:!0,target:!0,class:!0});var Y=l(ye);xe=p(Y,"Payton Guion"),Y.forEach(c),be=p(R,". Graphics by "),ve=o(R,"A",{href:!0,target:!0,class:!0});var G=l(ve);we=p(G,"Seth Vincent"),G.forEach(c),$e=p(R,". "),Ee=o(R,"BR",{class:!0}),ke=p(R,"Data from the "),Ne=o(R,"A",{href:!0,target:!0,class:!0});var ee=l(Ne);Ie=p(ee,"Federal Railroad Administration"),ee.forEach(c),De=p(R,"."),R.forEach(c),s.forEach(c),this.h()},h(){document.title="Railroad Crossing Incidents",t.src!==(n="https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js")&&i(t,"src","https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js"),i(a,"href","https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.css"),i(a,"rel","stylesheet"),r.src!==(s="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js")&&i(r,"src","https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js"),i(f,"rel","stylesheet"),i(f,"href","https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.css"),i(f,"type","text/css"),i(w,"class","font-bold text-gray-600"),i(v,"class","flex-none p-4"),i(A,"aria-hidden","true"),i(A,"class",M="\n          "+("map"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n          absolute inset-x-0 bottom-0 h-0.5\n        "),i(T,"class",z="\n        "+("map"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n        group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n      "),i(T,"aria-current","page"),i(H,"aria-hidden","true"),i(H,"class",Y="\n          "+("list"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n          absolute inset-x-0 bottom-0 h-0.5\n        "),i(O,"class",G="\n        "+("list"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n        group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n      "),i(O,"aria-current","page"),i(Z,"aria-hidden","true"),i(Z,"class",ee="\n            "+("nj-totals"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),i(F,"class",te="\n          "+("nj-totals"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),i(F,"aria-current","page"),i(le,"aria-hidden","true"),i(le,"class",ce="\n            "+("us-totals"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),i(ae,"class",ie="\n          "+("us-totals"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),i(ae,"aria-current","page"),i(S,"class","relative z-0 shadow flex divide-x divide-gray-200 border-t border-gray-100 border-"),i(S,"aria-label","Tabs"),i(I,"class","flex-none block"),i(ue,"class","flex-grow border-t border-gray-200 overflow-hidden"),i(ye,"href","https://twitter.com/PaytonGuion"),i(ye,"target","_blank"),i(ye,"class","underline"),i(ve,"href","https://twitter.com/sethdvincent"),i(ve,"target","_blank"),i(ve,"class","underline"),i(Ee,"class","sm:hidden"),i(Ne,"href","https://railroads.dot.gov"),i(Ne,"target","_blank"),i(Ne,"class","underline"),i(pe,"class","flex-none p-4 text-xs text-gray-500 border-t border-gray-200"),i(b,"class","flex flex-col h-screen border border-gray-100  max-w-screen-lg mx-auto")},m(n,s){u(document.head,t),u(document.head,a),u(document.head,r),u(document.head,f),d(n,g,s),d(n,b,s),u(b,v),u(v,w),u(w,k),u(b,N),u(b,I),u(I,S),u(S,T),u(T,_),u(_,C),u(T,V),u(T,A),u(S,L),u(S,O),u(O,K),u(K,q),u(O,U),u(O,H),u(S,J),u(S,F),u(F,Q),u(Q,W),u(F,X),u(F,Z),u(S,ne),u(S,ae),u(ae,re),u(re,se),u(ae,oe),u(ae,le),u(b,de),u(b,ue),~fe&&Ce[fe].m(ue,null),u(b,he),u(b,pe),u(pe,ge),u(pe,ye),u(ye,xe),u(pe,be),u(pe,ve),u(ve,we),u(pe,$e),u(pe,Ee),u(pe,ke),u(pe,Ne),u(Ne,Ie),u(pe,De),je=!0,Se||(Te=[P(T,"click",e[10]),P(O,"click",e[11]),P(F,"click",e[12]),P(ae,"click",e[13])],Se=!0)},p(e,[t]){(!je||4&t&&M!==(M="\n          "+("map"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n          absolute inset-x-0 bottom-0 h-0.5\n        "))&&i(A,"class",M),(!je||4&t&&z!==(z="\n        "+("map"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n        group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n      "))&&i(T,"class",z),(!je||4&t&&Y!==(Y="\n          "+("list"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n          absolute inset-x-0 bottom-0 h-0.5\n        "))&&i(H,"class",Y),(!je||4&t&&G!==(G="\n        "+("list"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n        group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n      "))&&i(O,"class",G),(!je||4&t&&ee!==(ee="\n            "+("nj-totals"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&i(Z,"class",ee),(!je||4&t&&te!==(te="\n          "+("nj-totals"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&i(F,"class",te),(!je||4&t&&ce!==(ce="\n            "+("us-totals"===e[2]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&i(le,"class",ce),(!je||4&t&&ie!==(ie="\n          "+("us-totals"===e[2]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&i(ae,"class",ie);let n=fe;fe=Ve(e),fe===n?~fe&&Ce[fe].p(e,t):(me&&(D(),E(Ce[n],1,1,(()=>{Ce[n]=null})),j()),~fe?(me=Ce[fe],me?me.p(e,t):(me=Ce[fe]=_e[fe](e),me.c()),$(me,1),me.m(ue,null)):me=null)},i(e){je||($(me),je=!0)},o(e){E(me),je=!1},d(e){c(t),c(a),c(r),c(f),e&&c(g),e&&c(b),~fe&&Ce[fe].d(),Se=!1,R(Te)}}}async function ft({fetch:e,page:t}){const n=await e("https://railroad-crossing-data.vercel.app/railroad_crossing_data/RRData.json?&_sort=StateName"),a=await n.json();if(console.log("json",a),n.ok){const{rows:e,columns:t}=Y(a);return{props:{rows:e,columns:t}}}return{status:n.status,error:new Error("Could not load data")}}function mt(e){console.log("next",e)}function ht(e,t,n){let a,r,s,o;T(e,G,(e=>n(7,o=e)));let{rows:l}=t,{columns:c}=t,i=o.query.get("view")||"nj-totals";async function d(e){o.query.set("view",e),n(2,i=e);const t=o.query.toString();await J(`${H}?${t}`)}K(1e3),q(150);return e.$$set=e=>{"rows"in e&&n(0,l=e.rows),"columns"in e&&n(1,c=e.columns)},e.$$.update=()=>{if(128&e.$$.dirty&&n(8,a=o.query.get("lng")),128&e.$$.dirty&&n(9,r=o.query.get("lat")),768&e.$$.dirty&&n(3,s=a&r?[a,r]:null),132&e.$$.dirty&&"map"!==i&&(o.query.has("lng")||o.query.has("lat"))){o.query.delete("lng"),o.query.delete("lat");const e=o.query.toString();J(`${H}?${e}`)}},[l,c,i,s,d,async function(e){await async function(e){const{sort:t,filters:a}=e;let r="";t.column&&(r=`_sort${"DESC"===t.order?"_desc":""}=${t.column}`);const s=[];if(a.length)for(const n of a)"StateName"===n.column?s.push(`StateName__exact=${n.value}`):"CountyName"===n.column?s.push(`CountyName__like=${n.value}`):"CityName"===n.column&&s.push(`CityName__like=${n.value}`);const o=`https://railroad-crossing-data.vercel.app/railroad_crossing_data/RRData.json?${[...s,r].join("&")}`;console.log("url",o);const i=await fetch(o),d=await i.json();console.log("json",d);const u=Y(d);n(0,l=[...u.rows]),n(1,c=[...u.columns])}(e.detail)},function(e){const[t,a]=e.detail;o.query.set("lng",t),o.query.set("lat",a),n(3,s=[t,a]),d("map")},o,a,r,()=>{d("map")},()=>{d("list")},()=>{d("nj-totals")},()=>{d("us-totals")}]}export default class extends n{constructor(e){super(),a(this,e,ht,ut,r,{rows:0,columns:1})}}export{ft as load};

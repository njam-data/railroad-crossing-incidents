import{H as e,C as t,S as n,i as r,s as o,I as s,c as a,a as l,d as i,b as c,f as d,F as u,G as f,e as h,t as m,g,h as p,k as y,n as x,J as b,K as v,E as w,v as $,r as E,j as k,m as N,o as I,B as C,u as _,w as T,L as S,x as D,z as j,D as V,M as A,l as P,N as z,O as M,P as L,Q as R,R as O,T as B,U,V as q,W as K}from"../chunks/vendor-4e4be06d.js";import{r as F,b as H}from"../chunks/paths-7dc55c62.js";function G(e){const t=["rowid","Latitude","Longitude","Active or Passive?","geometry","undefined"],n=["CityName","Street","Number of accidents","Total Killed","Total injured","Meets federal safety guidelines","StateName","CountyName","Distance from highway (feet)","Daily trains","Max train speed","Gates","Lights","Daily traffic","Last time traffic counted","School buses","Bus count","Railroad","CrossingID"],r=["link",...e.columns];return{rows:e.rows.map((e=>r.map(((n,r)=>{if(!t.find((e=>e.includes(n))))return"link"===n?{key:"Map view",value:[e[12],e[11]]}:{key:n,value:e[r-1]}})).filter((e=>!!e)).sort(((e,t)=>n.indexOf(e.key)-n.indexOf(t.key))))),columns:r}}const J={subscribe:t=>(()=>{const t=e("__svelte__");return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:t.navigating.subscribe}},session:t.session}})().page.subscribe(t)},Y=async function(e,t){return F.goto(e,t,[])};const W={},Q={},X=t({zoom:7.5,lngLat:["-74.558333","40.16"]}),Z=t({zoom:2,lngLat:["-98.5556","39.8097"]}),ee=t(!0);function te(e){let t,n;return{c(){t=s("svg"),n=s("path"),this.h()},l(e){t=a(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var r=l(t);n=a(r,"path",{d:!0},1),l(n).forEach(i),r.forEach(i),this.h()},h(){c(n,"d","M50,5C25.147,5,5,25.148,5,50c0,24.852,20.147,45,45,45c24.854,0,45-20.148,45-45C95,25.148,74.854,5,50,5z M74.675,38.917  l-23.75,29.511c-1.109,1.379-2.756,2.252-4.517,2.396c-0.173,0.015-0.347,0.021-0.52,0.021c-1.585,0-3.138-0.589-4.326-1.652  L25.985,55.17c-2.463-2.217-2.661-6.01-0.444-8.473c2.218-2.463,6.012-2.662,8.474-0.444l11.223,10.103l20.088-24.961  c2.078-2.582,5.855-2.989,8.438-0.913C76.344,32.558,76.752,36.335,74.675,38.917z"),c(t,"height","20px"),c(t,"width","20px"),c(t,"class","align-top inline"),c(t,"fill","#4CE600"),c(t,"xmlns","http://www.w3.org/2000/svg"),c(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),c(t,"version","1.1"),c(t,"x","0px"),c(t,"y","0px"),c(t,"viewBox","0 0 100 100"),c(t,"enable-background","new 0 0 100 100"),c(t,"xml:space","preserve")},m(e,r){d(e,t,r),u(t,n)},p:f,i:f,o:f,d(e){e&&i(t)}}}class ne extends n{constructor(e){super(),r(this,e,null,te,o,{})}}function re(e){let t,n;return{c(){t=s("svg"),n=s("path"),this.h()},l(e){t=a(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var r=l(t);n=a(r,"path",{d:!0},1),l(n).forEach(i),r.forEach(i),this.h()},h(){c(n,"d","M50,5C25.147,5,5,25.147,5,50c0,24.854,20.147,45,45,45c24.854,0,45-20.146,45-45C95,25.147,74.854,5,50,5z M49.999,76.75  c-3.342,0-6.061-2.717-6.061-6.057c0-3.346,2.719-6.066,6.061-6.066c3.343,0,6.063,2.723,6.063,6.066  C56.063,74.033,53.342,76.75,49.999,76.75z M66.238,43.808c-1.174,1.827-2.795,4.01-6.028,6.531  c-3.213,2.461-4.185,3.724-4.478,4.259c-0.166,0.299-0.402,0.895-0.59,2.004c-0.065,0.39-0.119,0.812-0.162,1.265l-0.254,2.714  l-9.771,0.023l0.124-3.127c0.017-0.4,0.06-1.185,0.168-1.918c0.324-2.229,1.085-4.209,2.261-5.882  c1.104-1.573,3.247-3.563,6.549-6.079c2.442-1.863,3.396-2.928,3.764-3.492c0.47-0.717,0.697-1.472,0.697-2.305  c0-1.931-0.705-3.46-2.094-4.545c-1.474-1.151-3.518-1.735-6.073-1.735c-2.265,0-4.176,0.599-5.682,1.778  c-1.594,1.239-2.713,2.953-3.245,4.964l-0.66,2.492l-9.563-1.037l0.676-3.238c0.88-4.218,2.865-7.474,5.902-9.677  c3.934-2.855,8.156-4.303,12.552-4.303c4.856,0,8.831,1.249,12.508,3.931c3.399,2.482,5.349,6.492,5.349,11.002  C68.188,39.642,67.55,41.727,66.238,43.808z"),c(t,"height","20px"),c(t,"width","20px"),c(t,"class","align-top inline"),c(t,"fill","#A2A2A2"),c(t,"xmlns","http://www.w3.org/2000/svg"),c(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),c(t,"version","1.1"),c(t,"x","0px"),c(t,"y","0px"),c(t,"viewBox","0 0 100 100"),c(t,"enable-background","new 0 0 100 100"),c(t,"xml:space","preserve")},m(e,r){d(e,t,r),u(t,n)},p:f,i:f,o:f,d(e){e&&i(t)}}}class oe extends n{constructor(e){super(),r(this,e,null,re,o,{})}}function se(e){let t,n;return{c(){t=s("svg"),n=s("path"),this.h()},l(e){t=a(e,"svg",{height:!0,width:!0,class:!0,fill:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,"enable-background":!0,"xml:space":!0},1);var r=l(t);n=a(r,"path",{d:!0},1),l(n).forEach(i),r.forEach(i),this.h()},h(){c(n,"d","M50,5C25.147,5,5,25.147,5,50c0,24.852,20.147,45,45,45c24.854,0,45-20.148,45-45C95,25.147,74.854,5,50,5z M70.243,70.24  c-1.173,1.172-2.708,1.758-4.243,1.758s-3.07-0.586-4.242-1.757L50,58.484L38.243,70.242C37.071,71.414,35.536,72,34,72  s-3.071-0.586-4.243-1.757c-2.343-2.345-2.343-6.144,0-8.485L41.515,50L29.757,38.242c-2.343-2.343-2.343-6.142,0-8.485  c2.343-2.343,6.142-2.343,8.485,0L50,41.514l11.756-11.757c2.344-2.343,6.145-2.343,8.485,0c2.344,2.343,2.344,6.142,0.001,8.485  L58.486,49.999l11.756,11.756C72.586,64.1,72.586,67.898,70.243,70.24z"),c(t,"height","20px"),c(t,"width","20px"),c(t,"class","align-top inline"),c(t,"fill","#FF0000"),c(t,"xmlns","http://www.w3.org/2000/svg"),c(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),c(t,"version","1.1"),c(t,"x","0px"),c(t,"y","0px"),c(t,"viewBox","0 0 100 100"),c(t,"enable-background","new 0 0 100 100"),c(t,"xml:space","preserve")},m(e,r){d(e,t,r),u(t,n)},p:f,i:f,o:f,d(e){e&&i(t)}}}class ae extends n{constructor(e){super(),r(this,e,null,se,o,{})}}function le(e,t,n){const r=e.slice();return r[2]=t[n],r}function ie(e){let t,n;return{c(){t=h("h1"),n=m(e[1]),this.h()},l(r){t=a(r,"H1",{class:!0});var o=l(t);n=g(o,e[1]),o.forEach(i),this.h()},h(){c(t,"class","font-medium mb-2")},m(e,r){d(e,t,r),u(t,n)},p(e,t){2&t&&p(n,e[1])},d(e){e&&i(t)}}}function ce(e){let t,n,r,o,s,f,v=e[2].description+"";return{c(){t=h("div"),n=h("span"),r=y(),o=h("span"),s=m(v),f=y(),this.h()},l(e){t=a(e,"DIV",{class:!0});var c=l(t);n=a(c,"SPAN",{class:!0,style:!0}),l(n).forEach(i),r=x(c),o=a(c,"SPAN",{class:!0});var d=l(o);s=g(d,v),d.forEach(i),f=x(c),c.forEach(i),this.h()},h(){c(n,"class","w-4 h-4 inline-block rounded-full align-middle"),b(n,"background-color",e[2].color),c(o,"class","align-middle"),c(t,"class","")},m(e,a){d(e,t,a),u(t,n),u(t,r),u(t,o),u(o,s),u(t,f)},p(e,t){1&t&&b(n,"background-color",e[2].color),1&t&&v!==(v=e[2].description+"")&&p(s,v)},d(e){e&&i(t)}}}function de(e){let t,n,r=e[1]&&ie(e),o=e[0],s=[];for(let a=0;a<o.length;a+=1)s[a]=ce(le(e,o,a));return{c(){t=h("div"),r&&r.c(),n=y();for(let e=0;e<s.length;e+=1)s[e].c();this.h()},l(e){t=a(e,"DIV",{class:!0});var o=l(t);r&&r.l(o),n=x(o);for(let t=0;t<s.length;t+=1)s[t].l(o);o.forEach(i),this.h()},h(){c(t,"class","\n    absolute\n    z-10\n    flex\n    flex-col\n    bg-white\n    px-4\n    py-2\n    max-w-[150px]\n    shadow-sm\n    rounded-md\n    bottom-12\n    left-2\n  ")},m(e,o){d(e,t,o),r&&r.m(t,null),u(t,n);for(let n=0;n<s.length;n+=1)s[n].m(t,null)},p(e,[a]){if(e[1]?r?r.p(e,a):(r=ie(e),r.c(),r.m(t,n)):r&&(r.d(1),r=null),1&a){let n;for(o=e[0],n=0;n<o.length;n+=1){const r=le(e,o,n);s[n]?s[n].p(r,a):(s[n]=ce(r),s[n].c(),s[n].m(t,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=o.length}},i:f,o:f,d(e){e&&i(t),r&&r.d(),v(s,e)}}}function ue(e,t,n){let{points:r}=t,{title:o}=t;return e.$$set=e=>{"points"in e&&n(0,r=e.points),"title"in e&&n(1,o=e.title)},[r,o]}class fe extends n{constructor(e){super(),r(this,e,ue,de,o,{points:0,title:1})}}function he(e,t,n){const r=e.slice();return r[14]=t[n],r}function me(e){let t;const n=e[9].default,r=V(n,e,e[8],null);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||256&o)&&w(r,n,e,e[8],o,null,null)},i(e){t||($(r,e),t=!0)},o(e){E(r,e),t=!1},d(e){r&&r.d(e)}}}function ge(e){let t,n,r,o,s,p,b,v,w,$;return{c(){t=h("div"),n=h("div"),r=h("h1"),o=m("Railroad crossing incidents"),s=y(),p=h("p"),b=m("Click a crossing to see its safety data and whether it meets safety guidelines."),v=y(),w=h("p"),$=m("This data was retrieved from the Federal Railroad Administration in early April 2021 and the agency acknowledges that it might not offer a complete or accurate picture of U.S. rail crossings."),this.h()},l(e){t=a(e,"DIV",{class:!0});var c=l(t);n=a(c,"DIV",{class:!0});var d=l(n);r=a(d,"H1",{class:!0});var u=l(r);o=g(u,"Railroad crossing incidents"),u.forEach(i),s=x(d),p=a(d,"P",{class:!0});var f=l(p);b=g(f,"Click a crossing to see its safety data and whether it meets safety guidelines."),f.forEach(i),v=x(d),w=a(d,"P",{class:!0});var h=l(w);$=g(h,"This data was retrieved from the Federal Railroad Administration in early April 2021 and the agency acknowledges that it might not offer a complete or accurate picture of U.S. rail crossings."),h.forEach(i),d.forEach(i),c.forEach(i),this.h()},h(){c(r,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),c(p,"class","font-medium text-gray-700 text-xl"),c(w,"class","text-gray-500 mt-4"),c(n,"class","h-40 self-center"),c(t,"class","px-4 py-4 sm:px-6 flex items-center h-full")},m(e,a){d(e,t,a),u(t,n),u(n,r),u(r,o),u(n,s),u(n,p),u(p,b),u(n,v),u(n,w),u(w,$)},p:f,i:f,o:f,d(e){e&&i(t)}}}function pe(e){let t,n,r,o,s,f,b,v,w,k,N,I,T,S,D,j,V,A,P,z,M,L,R,O,B,U,q,K,F,H,G=e[0].properties.Street+"",J=e[0].properties.CityName+"",Y=e[0].properties.CountyName+"",W=e[0].properties.StateName+"",Q=e[0].properties["Number of accidents"]+"",X=e[0].properties["Total Killed"]+"",Z=e[0].properties["Total injured"]+"";const ee=[be,xe,ye],te=[];function ne(e,t){return"Yes"===e[0].properties["Meets federal safety guidelines"]?0:"No"===e[0].properties["Meets federal safety guidelines"]?1:2}T=ne(e),S=te[T]=ee[T](e);let re=e[3]&&ve(e);return{c(){t=h("div"),n=h("h3"),r=m(G),o=y(),s=h("h3"),f=m(J),b=m(", "),v=m(Y),w=m(", "),k=m(W),N=y(),I=h("p"),S.c(),D=y(),j=h("p"),V=m(Q),A=m(" Accidents"),P=y(),z=h("p"),M=m(X),L=m(" Killed"),R=y(),O=h("p"),B=m(Z),U=m(" Injured"),q=y(),K=h("div"),F=h("dl"),re&&re.c(),this.h()},l(e){t=a(e,"DIV",{class:!0});var c=l(t);n=a(c,"H3",{class:!0});var d=l(n);r=g(d,G),d.forEach(i),o=x(c),s=a(c,"H3",{class:!0});var u=l(s);f=g(u,J),b=g(u,", "),v=g(u,Y),w=g(u,", "),k=g(u,W),u.forEach(i),N=x(c),I=a(c,"P",{class:!0});var h=l(I);S.l(h),h.forEach(i),D=x(c),j=a(c,"P",{class:!0});var m=l(j);V=g(m,Q),A=g(m," Accidents"),m.forEach(i),P=x(c),z=a(c,"P",{class:!0});var p=l(z);M=g(p,X),L=g(p," Killed"),p.forEach(i),R=x(c),O=a(c,"P",{class:!0});var y=l(O);B=g(y,Z),U=g(y," Injured"),y.forEach(i),c.forEach(i),q=x(e),K=a(e,"DIV",{class:!0});var $=l(K);F=a($,"DL",{class:!0});var E=l(F);re&&re.l(E),E.forEach(i),$.forEach(i),this.h()},h(){c(n,"class","text-lg leading-6 font-medium text-gray-900"),c(s,"class","text-md leading-6 font-medium text-gray-600 mb-2"),c(I,"class","font-bold my-0 pt-1 pb-3 max-w-2xl text-sm text-gray-600"),c(j,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),c(z,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),c(O,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),c(t,"class","px-4 py-4 sm:px-6"),c(F,"class","divide-y divide-gray-200"),c(K,"class","border-t border-gray-200 px-4 py-2 sm:py-4 sm:p-0")},m(e,a){d(e,t,a),u(t,n),u(n,r),u(t,o),u(t,s),u(s,f),u(s,b),u(s,v),u(s,w),u(s,k),u(t,N),u(t,I),te[T].m(I,null),u(t,D),u(t,j),u(j,V),u(j,A),u(t,P),u(t,z),u(z,M),u(z,L),u(t,R),u(t,O),u(O,B),u(O,U),d(e,q,a),d(e,K,a),u(K,F),re&&re.m(F,null),H=!0},p(e,t){(!H||1&t)&&G!==(G=e[0].properties.Street+"")&&p(r,G),(!H||1&t)&&J!==(J=e[0].properties.CityName+"")&&p(f,J),(!H||1&t)&&Y!==(Y=e[0].properties.CountyName+"")&&p(v,Y),(!H||1&t)&&W!==(W=e[0].properties.StateName+"")&&p(k,W);let n=T;T=ne(e),T!==n&&(C(),E(te[n],1,1,(()=>{te[n]=null})),_(),S=te[T],S||(S=te[T]=ee[T](e),S.c()),$(S,1),S.m(I,null)),(!H||1&t)&&Q!==(Q=e[0].properties["Number of accidents"]+"")&&p(V,Q),(!H||1&t)&&X!==(X=e[0].properties["Total Killed"]+"")&&p(M,X),(!H||1&t)&&Z!==(Z=e[0].properties["Total injured"]+"")&&p(B,Z),e[3]?re?re.p(e,t):(re=ve(e),re.c(),re.m(F,null)):re&&(re.d(1),re=null)},i(e){H||($(S),H=!0)},o(e){E(S),H=!1},d(e){e&&i(t),te[T].d(),e&&i(q),e&&i(K),re&&re.d()}}}function ye(e){let t,n,r;return t=new oe({}),{c(){k(t.$$.fragment),n=m(" May or may not meet federal safety guidelines")},l(e){N(t.$$.fragment,e),n=g(e," May or may not meet federal safety guidelines")},m(e,o){I(t,e,o),d(e,n,o),r=!0},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){E(t.$$.fragment,e),r=!1},d(e){T(t,e),e&&i(n)}}}function xe(e){let t,n,r;return t=new ae({}),{c(){k(t.$$.fragment),n=m(" Does not meet federal safety guidelines")},l(e){N(t.$$.fragment,e),n=g(e," Does not meet federal safety guidelines")},m(e,o){I(t,e,o),d(e,n,o),r=!0},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){E(t.$$.fragment,e),r=!1},d(e){T(t,e),e&&i(n)}}}function be(e){let t,n,r;return t=new ne({}),{c(){k(t.$$.fragment),n=m(" Meets federal safety guidelines")},l(e){N(t.$$.fragment,e),n=g(e," Meets federal safety guidelines")},m(e,o){I(t,e,o),d(e,n,o),r=!0},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){E(t.$$.fragment,e),r=!1},d(e){T(t,e),e&&i(n)}}}function ve(e){let t,n=e[3],r=[];for(let o=0;o<n.length;o+=1)r[o]=we(he(e,n,o));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=P()},l(e){for(let t=0;t<r.length;t+=1)r[t].l(e);t=P()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);d(e,t,n)},p(e,o){if(40&o){let s;for(n=e[3],s=0;s<n.length;s+=1){const a=he(e,n,s);r[s]?r[s].p(a,o):(r[s]=we(a),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){v(r,e),e&&i(t)}}}function we(e){let t,n,r,o,s,f,b,v=(e[5][e[14].key]||e[14].key)+"",w=e[14].value+"";return{c(){t=h("div"),n=h("dt"),r=m(v),o=y(),s=h("dd"),f=m(w),b=y(),this.h()},l(e){t=a(e,"DIV",{class:!0});var c=l(t);n=a(c,"DT",{class:!0});var d=l(n);r=g(d,v),d.forEach(i),o=x(c),s=a(c,"DD",{class:!0});var u=l(s);f=g(u,w),u.forEach(i),b=x(c),c.forEach(i),this.h()},h(){c(n,"class","text-sm font-medium text-gray-500"),c(s,"class","text-sm text-gray-900 mt-0 col-span-1"),c(t,"class","py-1 sm:py-2 grid grid-cols-2 gap-2 sm:px-6")},m(e,a){d(e,t,a),u(t,n),u(n,r),u(t,o),u(t,s),u(s,f),u(t,b)},p(e,t){8&t&&v!==(v=(e[5][e[14].key]||e[14].key)+"")&&p(r,v),8&t&&w!==(w=e[14].value+"")&&p(f,w)},d(e){e&&i(t)}}}function $e(e){let t,n,r,o,s,f,m,g,p,b,v=e[2]&&me(e);o=new fe({props:{points:e[4]}});const w=[pe,ge],S=[];function D(e,t){return e[0]?0:1}return g=D(e),p=S[g]=w[g](e),{c(){t=h("div"),n=h("div"),v&&v.c(),r=y(),k(o.$$.fragment),s=y(),f=h("div"),m=h("div"),p.c(),this.h()},l(e){t=a(e,"DIV",{class:!0});var c=l(t);n=a(c,"DIV",{class:!0});var d=l(n);v&&v.l(d),r=x(d),N(o.$$.fragment,d),d.forEach(i),s=x(c),f=a(c,"DIV",{class:!0});var u=l(f);m=a(u,"DIV",{class:!0});var h=l(m);p.l(h),h.forEach(i),u.forEach(i),c.forEach(i),this.h()},h(){c(n,"class","flex-grow z-0 h-full"),c(m,"class","h-full overflow-y-scroll"),c(f,"class","bg-white h-1/2 sm:w-1/2 sm:h-full md:w-96 border-gray-200 border-t sm:border-t-0 sm:border-l"),c(t,"class","flex flex-col sm:flex-row h-full")},m(a,l){d(a,t,l),u(t,n),v&&v.m(n,null),u(n,r),I(o,n,null),e[10](n),u(t,s),u(t,f),u(f,m),S[g].m(m,null),b=!0},p(e,[t]){e[2]?v?(v.p(e,t),4&t&&$(v,1)):(v=me(e),v.c(),$(v,1),v.m(n,r)):v&&(C(),E(v,1,1,(()=>{v=null})),_());let o=g;g=D(e),g===o?S[g].p(e,t):(C(),E(S[o],1,1,(()=>{S[o]=null})),_(),p=S[g],p?p.p(e,t):(p=S[g]=w[g](e),p.c()),$(p,1),p.m(m,null))},i(e){b||($(v),$(o.$$.fragment,e),$(p),b=!0)},o(e){E(v),E(o.$$.fragment,e),E(p),b=!1},d(n){n&&i(t),v&&v.d(),T(o),e[10](null),S[g].d()}}}function Ee(e,t,n){let r;S(e,X,(e=>n(12,r=e)));let o,s,a,l,{$$slots:i={},$$scope:c}=t,{center:d}=t,{bbox:u}=t,f=null;const h=["id","CrossingID","Total Killed","Total injured","Number of accidents","Latitude","Longitude","Street","CityName","CountyName","StateName","Meets federal safety guidelines"];return D(W,{getMap:()=>s}),D(Q,{getMapbox:()=>a}),j((async()=>{a=window.mapboxgl,a.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(2,s=new a.Map({container:o,style:"mapbox://styles/mapbox/light-v10",center:d||r.lngLat,zoom:d?15:r.zoom,minZoom:3,maxZoom:20})),s.addControl(new MapboxGeocoder({accessToken:a.accessToken,mapboxgl:a}),"top-left"),s.addControl(new a.NavigationControl,"top-left"),s.on("load",(()=>{s.resize(),s.addSource("railroad_crossing_incidents",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incidents/{z}/{x}/{y}.pbf"]}),s.addLayer({id:"railroad_crossing_incidents",type:"circle",source:"railroad_crossing_incidents","source-layer":"railroad_crossing_incidents",layout:{},paint:{"circle-radius":10,"circle-color":["case",["==",["get","Number of accidents"],0],"blue","red"],"circle-opacity":["case",["boolean",["feature-state","hover"],!1],1,.3],"circle-stroke-color":"white","circle-stroke-width":["case",["boolean",["feature-state","hover"],!1],3,0]}}),s.addLayer({id:"railroad_crossing_incidents_count",type:"symbol",source:"railroad_crossing_incidents","source-layer":"railroad_crossing_incidents",filter:["has","point_count"],layout:{"text-field":"{point_count}","text-size":10}})})),d&&setTimeout((()=>{const e=s.project(d),t=s.queryRenderedFeatures([[e.x-5,e.y-5],[e.x+5,e.y+5]],{layers:["railroad_crossing_incidents"]});1===t.length&&n(0,f=t[0])}),1100),u&&setTimeout((()=>{s.fitBounds(u)}),1100);let e=null;function t({featureId:e,state:t}){s.setFeatureState({id:e,source:"railroad_crossing_incidents",sourceLayer:"railroad_crossing_incidents"},{hover:t})}return s.on("mousemove",(n=>{const r=s.queryRenderedFeatures(n.point,{layers:["railroad_crossing_incidents"]})[0];if(console.log(r),!r)return s.getCanvas().style.cursor="",void(e&&(t({featureId:e,state:!1}),e=null));if(s.getCanvas().style.cursor="pointer",r&&r.id===e)return;e&&t({featureId:e,state:!1}),e=r.id,t({featureId:r.id,state:!0});const o=r.properties,a=r.geometry.coordinates.slice();for(;Math.abs(n.lngLat.lng-a[0])>180;)a[0]+=n.lngLat.lng>a[0]?360:-360;o.point_count&&o.point_count>-2&&o.point_count})),s.on("click","railroad_crossing_incidents",(async function(e){const t=e.features[0],{point_count:r}=t.properties;if(s.resize(),r){const e=s.getZoom()+2;s.flyTo({center:t.geometry.coordinates,zoom:e}),n(0,f=null)}else n(0,f=e.features[0])})),()=>{n(2,s=null)}})),e.$$set=e=>{"center"in e&&n(6,d=e.center),"bbox"in e&&n(7,u=e.bbox),"$$scope"in e&&n(8,c=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&f&&n(3,l=Object.keys(f.properties).filter((e=>!h.find((t=>t.includes(e))))).map((e=>({key:e,value:f.properties[e]}))))},[f,o,s,l,[{color:"red",description:"Accidents"},{color:"blue",description:"No accidents"}],{CountyName:"County",CityName:"City",StateName:"State"},d,u,c,i,function(e){A[e?"unshift":"push"]((()=>{o=e,n(1,o)}))}]}class ke extends n{constructor(e){super(),r(this,e,Ee,$e,o,{center:6,bbox:7})}}const Ne={Alabama:"AL",Alaska:"AK",Arizona:"AZ",Arkansas:"AR",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE","District of Columbia":"DC",Florida:"FL",Georgia:"GA",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Puerto Rico":"PR","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY"};function Ie(e){const t=t=>{!e||e.contains(t.target)||t.defaultPrevented||e.dispatchEvent(new CustomEvent("click_outside",{detail:{event:t,node:e}}))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function Ce(e,t,n){const r=e.slice();return r[25]=t[n],r}function _e(e,t,n){const r=e.slice();return r[28]=t[n],r}function Te(e,t,n){const r=e.slice();return r[31]=t[n],r}function Se(e){let t,n,r,o,s,p,b,v,w,$,E,k,N,I,C,_;return{c(){t=h("div"),n=h("div"),r=h("button"),o=m("x"),s=y(),p=h("div"),b=h("h3"),v=m("Locations table"),w=y(),$=h("p"),E=m("Search for railroad crossings near you using the search bar on the left. Sort by a column by selecting the drop down menu next to its name."),k=y(),N=h("button"),I=m("Get started"),this.h()},l(e){t=a(e,"DIV",{class:!0});var c=l(t);n=a(c,"DIV",{class:!0});var d=l(n);r=a(d,"BUTTON",{class:!0});var u=l(r);o=g(u,"x"),u.forEach(i),s=x(d),p=a(d,"DIV",{class:!0});var f=l(p);b=a(f,"H3",{class:!0});var h=l(b);v=g(h,"Locations table"),h.forEach(i),w=x(f),$=a(f,"P",{class:!0});var m=l($);E=g(m,"Search for railroad crossings near you using the search bar on the left. Sort by a column by selecting the drop down menu next to its name."),m.forEach(i),k=x(f),N=a(f,"BUTTON",{class:!0});var y=l(N);I=g(y,"Get started"),y.forEach(i),f.forEach(i),d.forEach(i),c.forEach(i),this.h()},h(){c(r,"class","\n        float-right\n        h-4\n        px-2\n        pb-5\n        rounded-sm\n        mt-2\n        mr-2\n        hover:bg-gray-100\n        text-gray-600\n        hover:text-gray-900\n      "),c(b,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),c($,"class","font-medium my-0 py0 max-w-2xl text-gray-600"),c(N,"class","mt-2 float-right inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),c(p,"class","p-4 sm:px-6"),c(n,"class","z-10 bg-white shadow overflow-hidden absolute rounded-md mr-2 w-1/2 lg:w-1/3 pb-2"),c(t,"class","flex justify-center")},m(a,l){d(a,t,l),u(t,n),u(n,r),u(r,o),u(n,s),u(n,p),u(p,b),u(b,v),u(p,w),u(p,$),u($,E),u(p,k),u(p,N),u(N,I),C||(_=[z(r,"click",e[16]),z(N,"click",e[16])],C=!0)},p:f,d(e){e&&i(t),C=!1,M(_)}}}function De(e){let t,n,r,o,s,f,p,b,v,w,$,E,k,N,I,C,_=e[5].column===e[31]&&"ASC"===e[5].order&&je();function T(){return e[18](e[31])}let S=e[5].column===e[31]&&"DESC"===e[5].order&&Ve();function D(){return e[19](e[31])}function j(){return e[20](e[31])}function V(...t){return e[21](e[31],...t)}return{c(){t=h("div"),n=h("div"),r=h("button"),o=h("span"),_&&_.c(),s=m("\n                            Sort Ascending"),f=y(),p=h("button"),b=h("span"),S&&S.c(),v=m("\n                            Sort Descending"),w=y(),$=h("button"),E=h("span"),k=m("ð„‚"),N=m("\n                            Remove Sort"),this.h()},l(e){t=a(e,"DIV",{class:!0,role:!0,"aria-orientation":!0,"aria-labelledby":!0,tabindex:!0});var c=l(t);n=a(c,"DIV",{class:!0,role:!0});var d=l(n);r=a(d,"BUTTON",{type:!0,class:!0,role:!0,tabindex:!0,id:!0});var u=l(r);o=a(u,"SPAN",{class:!0});var h=l(o);_&&_.l(h),h.forEach(i),s=g(u,"\n                            Sort Ascending"),u.forEach(i),f=x(d),p=a(d,"BUTTON",{type:!0,class:!0,role:!0,tabindex:!0,id:!0});var m=l(p);b=a(m,"SPAN",{class:!0});var y=l(b);S&&S.l(y),y.forEach(i),v=g(m,"\n                            Sort Descending"),m.forEach(i),w=x(d),$=a(d,"BUTTON",{type:!0,class:!0,role:!0,tabindex:!0,id:!0});var I=l($);E=a(I,"SPAN",{class:!0});var C=l(E);k=g(C,"ð„‚"),C.forEach(i),N=g(I,"\n                            Remove Sort"),I.forEach(i),d.forEach(i),c.forEach(i),this.h()},h(){c(o,"class","inline-block w-3 h-3"),c(r,"type","button"),c(r,"class","w-full text-left text-gray-700 hover:text-gray-900 hover:bg-gray-100 block px-2 py-2 text-xs"),c(r,"role","menuitem"),c(r,"tabindex","-1"),c(r,"id","menu-item-0"),c(b,"class","inline-block w-3 h-3"),c(p,"type","button"),c(p,"class","w-full text-left text-gray-700 hover:text-gray-900 hover:bg-gray-100 block px-2 py-2 text-xs"),c(p,"role","menuitem"),c(p,"tabindex","-1"),c(p,"id","menu-item-1"),c(E,"class","inline-block w-3 h-3 invisible hover:visible"),c($,"type","button"),c($,"class","w-full text-left text-gray-700 hover:text-gray-900 hover:bg-gray-100 block px-2 py-2 text-xs"),c($,"role","menuitem"),c($,"tabindex","-1"),c($,"id","menu-item-2"),c(n,"class",""),c(n,"role","none"),c(t,"class","origin-top-right absolute right-0 mt-2 w-40 rounded-md shadow bg-white ring-1 ring-black ring-opacity-5 focus:outline-none"),c(t,"role","menu"),c(t,"aria-orientation","vertical"),c(t,"aria-labelledby","menu-button"),c(t,"tabindex","-1")},m(e,a){d(e,t,a),u(t,n),u(n,r),u(r,o),_&&_.m(o,null),u(r,s),u(n,f),u(n,p),u(p,b),S&&S.m(b,null),u(p,v),u(n,w),u(n,$),u($,E),u(E,k),u($,N),I||(C=[z(r,"click",T),z(p,"click",D),z($,"click",j),R(Ie.call(null,t)),z(t,"click_outside",V)],I=!0)},p(t,n){(e=t)[5].column===e[31]&&"ASC"===e[5].order?_||(_=je(),_.c(),_.m(o,null)):_&&(_.d(1),_=null),e[5].column===e[31]&&"DESC"===e[5].order?S||(S=Ve(),S.c(),S.m(b,null)):S&&(S.d(1),S=null)},d(e){e&&i(t),_&&_.d(),S&&S.d(),I=!1,M(C)}}}function je(e){let t;return{c(){t=m("âœ“")},l(e){t=g(e,"âœ“")},m(e,n){d(e,t,n)},d(e){e&&i(t)}}}function Ve(e){let t;return{c(){t=m("âœ“")},l(e){t=g(e,"âœ“")},m(e,n){d(e,t,n)},d(e){e&&i(t)}}}function Ae(e){let t,n,r,o,f,p,b=e[31]+"",v="Map view"!==e[31]&&function(e){let t,n,r,o,f,m,g,p;function b(){return e[17](e[31])}let v=e[6].open&&e[6].open===e[31]&&De(e);return{c(){t=h("div"),n=h("div"),r=h("button"),o=s("svg"),f=s("path"),m=y(),v&&v.c(),this.h()},l(e){t=a(e,"DIV",{class:!0});var s=l(t);n=a(s,"DIV",{});var c=l(n);r=a(c,"BUTTON",{type:!0,class:!0,id:!0,"aria-expanded":!0,"aria-haspopup":!0});var d=l(r);o=a(d,"svg",{class:!0,xmlns:!0,viewBox:!0,fill:!0,"aria-hidden":!0},1);var u=l(o);f=a(u,"path",{"fill-rule":!0,d:!0,"clip-rule":!0},1),l(f).forEach(i),u.forEach(i),d.forEach(i),c.forEach(i),m=x(s),v&&v.l(s),s.forEach(i),this.h()},h(){c(f,"fill-rule","evenodd"),c(f,"d","M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"),c(f,"clip-rule","evenodd"),c(o,"class","h-3 w-3"),c(o,"xmlns","http://www.w3.org/2000/svg"),c(o,"viewBox","0 0 20 20"),c(o,"fill","currentColor"),c(o,"aria-hidden","true"),c(r,"type","button"),c(r,"class","inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm p-1 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-indigo-500"),c(r,"id","menu-button"),c(r,"aria-expanded","true"),c(r,"aria-haspopup","true"),c(t,"class","relative inline-block text-left right-0 top-0 ml-4 self-center")},m(e,s){d(e,t,s),u(t,n),u(n,r),u(r,o),u(o,f),u(t,m),v&&v.m(t,null),g||(p=z(r,"click",b),g=!0)},p(n,r){(e=n)[6].open&&e[6].open===e[31]?v?v.p(e,r):(v=De(e),v.c(),v.m(t,null)):v&&(v.d(1),v=null)},d(e){e&&i(t),v&&v.d(),g=!1,p()}}}(e);return{c(){t=h("th"),n=h("div"),r=h("span"),o=m(b),f=y(),v&&v.c(),p=y(),this.h()},l(e){t=a(e,"TH",{scope:!0,class:!0});var s=l(t);n=a(s,"DIV",{class:!0});var c=l(n);r=a(c,"SPAN",{});var d=l(r);o=g(d,b),d.forEach(i),f=x(c),v&&v.l(c),c.forEach(i),p=x(s),s.forEach(i),this.h()},h(){c(n,"class","flex flex-row "),c(t,"scope","col"),c(t,"class","px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider")},m(e,s){d(e,t,s),u(t,n),u(n,r),u(r,o),u(n,f),v&&v.m(n,null),u(t,p)},p(e,t){"Map view"!==e[31]&&v.p(e,t)},d(e){e&&i(t),v&&v.d()}}}function Pe(e){let t,n=e[28].value+"";return{c(){t=m(n)},l(e){t=g(e,n)},m(e,n){d(e,t,n)},p(e,r){1&r[0]&&n!==(n=e[28].value+"")&&p(t,n)},i:f,o:f,d(e){e&&i(t)}}}function ze(e){let t,n,r,o;const s=[Oe,Re,Le],a=[];function l(e,t){return"Yes"===e[28].value?0:"No"===e[28].value?1:2}return t=l(e),n=a[t]=s[t](e),{c(){n.c(),r=P()},l(e){n.l(e),r=P()},m(e,n){a[t].m(e,n),d(e,r,n),o=!0},p(e,o){let i=t;t=l(e),t!==i&&(C(),E(a[i],1,1,(()=>{a[i]=null})),_(),n=a[t],n||(n=a[t]=s[t](e),n.c()),$(n,1),n.m(r.parentNode,r))},i(e){o||($(n),o=!0)},o(e){E(n),o=!1},d(e){a[t].d(e),e&&i(r)}}}function Me(e){let t,n,r,o;function s(){return e[22](e[28])}return{c(){t=h("button"),n=m("View on map"),this.h()},l(e){t=a(e,"BUTTON",{class:!0});var r=l(t);n=g(r,"View on map"),r.forEach(i),this.h()},h(){c(t,"class","text-gray-600 hover:text-blue-600 hover:shadow-sm bg-gray-50 hover:bg-gray-100 p-2")},m(e,a){d(e,t,a),u(t,n),r||(o=z(t,"click",s),r=!0)},p(t,n){e=t},i:f,o:f,d(e){e&&i(t),r=!1,o()}}}function Le(e){let t,n,r;return t=new oe({}),{c(){k(t.$$.fragment),n=m(" Info unavailable")},l(e){N(t.$$.fragment,e),n=g(e," Info unavailable")},m(e,o){I(t,e,o),d(e,n,o),r=!0},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){E(t.$$.fragment,e),r=!1},d(e){T(t,e),e&&i(n)}}}function Re(e){let t,n,r;return t=new ae({}),{c(){k(t.$$.fragment),n=m(" No")},l(e){N(t.$$.fragment,e),n=g(e," No")},m(e,o){I(t,e,o),d(e,n,o),r=!0},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){E(t.$$.fragment,e),r=!1},d(e){T(t,e),e&&i(n)}}}function Oe(e){let t,n,r;return t=new ne({}),{c(){k(t.$$.fragment),n=m(" Yes")},l(e){N(t.$$.fragment,e),n=g(e," Yes")},m(e,o){I(t,e,o),d(e,n,o),r=!0},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){E(t.$$.fragment,e),r=!1},d(e){T(t,e),e&&i(n)}}}function Be(e){let t,n,r,o;const s=[Me,ze,Pe],u=[];function f(e,t){return"Map view"===e[28].key?0:"Meets federal safety guidelines"===e[28].key?1:null!==e[28].value?2:-1}return~(n=f(e))&&(r=u[n]=s[n](e)),{c(){t=h("td"),r&&r.c(),this.h()},l(e){t=a(e,"TD",{class:!0});var n=l(t);r&&r.l(n),n.forEach(i),this.h()},h(){c(t,"class","px-4 py-4 text-left whitespace-nowrap text-xs font-medium text-gray-900")},m(e,r){d(e,t,r),~n&&u[n].m(t,null),o=!0},p(e,o){let a=n;n=f(e),n===a?~n&&u[n].p(e,o):(r&&(C(),E(u[a],1,1,(()=>{u[a]=null})),_()),~n?(r=u[n],r?r.p(e,o):(r=u[n]=s[n](e),r.c()),$(r,1),r.m(t,null)):r=null)},i(e){o||($(r),o=!0)},o(e){E(r),o=!1},d(e){e&&i(t),~n&&u[n].d()}}}function Ue(e){let t,n,r,o=e[25],s=[];for(let a=0;a<o.length;a+=1)s[a]=Be(_e(e,o,a));const c=e=>E(s[e],1,1,(()=>{s[e]=null}));return{c(){t=h("tr");for(let e=0;e<s.length;e+=1)s[e].c();n=y()},l(e){t=a(e,"TR",{});var r=l(t);for(let t=0;t<s.length;t+=1)s[t].l(r);n=x(r),r.forEach(i)},m(e,o){d(e,t,o);for(let n=0;n<s.length;n+=1)s[n].m(t,null);u(t,n),r=!0},p(e,r){if(32769&r[0]){let a;for(o=e[25],a=0;a<o.length;a+=1){const l=_e(e,o,a);s[a]?(s[a].p(l,r),$(s[a],1)):(s[a]=Be(l),s[a].c(),$(s[a],1),s[a].m(t,n))}for(C(),a=o.length;a<s.length;a+=1)c(a);_()}},i(e){if(!r){for(let e=0;e<o.length;e+=1)$(s[e]);r=!0}},o(e){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)E(s[t]);r=!1},d(e){e&&i(t),v(s,e)}}}function qe(e){let t,n,r,o;function s(e,t){return e[4]>1?Fe:Ke}let f=s(e),y=f(e);return{c(){t=h("p"),y.c(),n=m("\n\n    of "),r=m(e[2]),o=m(" total rows."),this.h()},l(s){t=a(s,"P",{class:!0});var c=l(t);y.l(c),n=g(c,"\n\n    of "),r=g(c,e[2]),o=g(c," total rows."),c.forEach(i),this.h()},h(){c(t,"class","float-left py-1.5 mt-2 text-xs text-gray-700")},m(e,s){d(e,t,s),y.m(t,null),u(t,n),u(t,r),u(t,o)},p(e,o){f===(f=s(e))&&y?y.p(e,o):(y.d(1),y=f(e),y&&(y.c(),y.m(t,n))),4&o[0]&&p(r,e[2])},d(e){e&&i(t),y.d()}}}function Ke(e){let t;return{c(){t=m("1 to 100")},l(e){t=g(e,"1 to 100")},m(e,n){d(e,t,n)},p:f,d(e){e&&i(t)}}}function Fe(e){let t,n,r,o=100*e[4]-100+1+"";function s(e,t){return 100*e[4]>e[2]?Ge:He}let a=s(e),l=a(e);return{c(){t=m(o),n=m("\n      to\n      "),l.c(),r=P()},l(e){t=g(e,o),n=g(e,"\n      to\n      "),l.l(e),r=P()},m(e,o){d(e,t,o),d(e,n,o),l.m(e,o),d(e,r,o)},p(e,n){16&n[0]&&o!==(o=100*e[4]-100+1+"")&&p(t,o),a===(a=s(e))&&l?l.p(e,n):(l.d(1),l=a(e),l&&(l.c(),l.m(r.parentNode,r)))},d(e){e&&i(t),e&&i(n),l.d(e),e&&i(r)}}}function He(e){let t,n=100*e[4]+"";return{c(){t=m(n)},l(e){t=g(e,n)},m(e,n){d(e,t,n)},p(e,r){16&r[0]&&n!==(n=100*e[4]+"")&&p(t,n)},d(e){e&&i(t)}}}function Ge(e){let t;return{c(){t=m(e[2])},l(n){t=g(n,e[2])},m(e,n){d(e,t,n)},p(e,n){4&n[0]&&p(t,e[2])},d(e){e&&i(t)}}}function Je(e){let t,n,r,o;return{c(){t=h("button"),n=m("Next page"),this.h()},l(e){t=a(e,"BUTTON",{class:!0});var r=l(t);n=g(r,"Next page"),r.forEach(i),this.h()},h(){c(t,"class","mt-2 float-right inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},m(s,a){d(s,t,a),u(t,n),r||(o=z(t,"click",e[13]),r=!0)},p:f,d(e){e&&i(t),r=!1,o()}}}function Ye(e){let t,n,r,o;return{c(){t=h("button"),n=m("Previous page"),this.h()},l(e){t=a(e,"BUTTON",{class:!0});var r=l(t);n=g(r,"Previous page"),r.forEach(i),this.h()},h(){c(t,"class","mt-2 mr-2 float-right inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},m(s,a){d(s,t,a),u(t,n),r||(o=z(t,"click",e[14]),r=!0)},p:f,d(e){e&&i(t),r=!1,o()}}}function We(e){let t,n,r,o,s,f,m,g,p,b,w,k,N,I,T,S,D,j,V,A=e[7]&&Se(e),P=e[8],z=[];for(let a=0;a<P.length;a+=1)z[a]=Ae(Te(e,P,a));let M=e[0],L=[];for(let a=0;a<M.length;a+=1)L[a]=Ue(Ce(e,M,a));const R=e=>E(L[e],1,1,(()=>{L[e]=null}));let O=e[3]&&qe(e),B=e[1]&&Je(e),U=e[4]>1&&Ye(e);return{c(){A&&A.c(),t=y(),n=h("div"),r=h("div"),o=h("div"),s=h("div"),f=y(),m=h("div"),g=h("div"),p=h("div"),b=h("table"),w=h("thead"),k=h("tr");for(let e=0;e<z.length;e+=1)z[e].c();N=y(),I=h("tbody");for(let e=0;e<L.length;e+=1)L[e].c();T=y(),S=h("div"),O&&O.c(),D=y(),B&&B.c(),j=y(),U&&U.c(),this.h()},l(e){A&&A.l(e),t=x(e),n=a(e,"DIV",{class:!0});var c=l(n);r=a(c,"DIV",{class:!0});var d=l(r);o=a(d,"DIV",{});var u=l(o);s=a(u,"DIV",{id:!0}),l(s).forEach(i),u.forEach(i),d.forEach(i),f=x(c),m=a(c,"DIV",{});var h=l(m);g=a(h,"DIV",{class:!0});var y=l(g);p=a(y,"DIV",{class:!0});var v=l(p);b=a(v,"TABLE",{class:!0});var $=l(b);w=a($,"THEAD",{class:!0});var E=l(w);k=a(E,"TR",{class:!0});var C=l(k);for(let t=0;t<z.length;t+=1)z[t].l(C);C.forEach(i),E.forEach(i),N=x($),I=a($,"TBODY",{class:!0});var _=l(I);for(let t=0;t<L.length;t+=1)L[t].l(_);_.forEach(i),$.forEach(i),v.forEach(i),y.forEach(i),h.forEach(i),c.forEach(i),T=x(e),S=a(e,"DIV",{class:!0});var V=l(S);O&&O.l(V),D=x(V),B&&B.l(V),j=x(V),U&&U.l(V),V.forEach(i),this.h()},h(){c(s,"id","geocoder"),c(r,"class","w-full h-96 p-2"),c(k,"class","divide-x divide-gray-200"),c(w,"class","bg-gray-50"),c(I,"class","divide-y divide-gray-200"),c(b,"class","min-w-full divide-y divide-gray-200 bg-white"),c(p,"class","shadow border-b border-t border-gray-200 sm:rounded-md"),c(g,"class","align-middle inline-block min-w-full"),c(n,"class","flex flex-col h-full overflow-scroll bg-gray-50"),c(S,"class","")},m(e,a){A&&A.m(e,a),d(e,t,a),d(e,n,a),u(n,r),u(r,o),u(o,s),u(n,f),u(n,m),u(m,g),u(g,p),u(p,b),u(b,w),u(w,k);for(let t=0;t<z.length;t+=1)z[t].m(k,null);u(b,N),u(b,I);for(let t=0;t<L.length;t+=1)L[t].m(I,null);d(e,T,a),d(e,S,a),O&&O.m(S,null),u(S,D),B&&B.m(S,null),u(S,j),U&&U.m(S,null),V=!0},p(e,n){if(e[7]?A?A.p(e,n):(A=Se(e),A.c(),A.m(t.parentNode,t)):A&&(A.d(1),A=null),8032&n[0]){let t;for(P=e[8],t=0;t<P.length;t+=1){const r=Te(e,P,t);z[t]?z[t].p(r,n):(z[t]=Ae(r),z[t].c(),z[t].m(k,null))}for(;t<z.length;t+=1)z[t].d(1);z.length=P.length}if(32769&n[0]){let t;for(M=e[0],t=0;t<M.length;t+=1){const r=Ce(e,M,t);L[t]?(L[t].p(r,n),$(L[t],1)):(L[t]=Ue(r),L[t].c(),$(L[t],1),L[t].m(I,null))}for(C(),t=M.length;t<L.length;t+=1)R(t);_()}e[3]?O?O.p(e,n):(O=qe(e),O.c(),O.m(S,D)):O&&(O.d(1),O=null),e[1]?B?B.p(e,n):(B=Je(e),B.c(),B.m(S,j)):B&&(B.d(1),B=null),e[4]>1?U?U.p(e,n):(U=Ye(e),U.c(),U.m(S,null)):U&&(U.d(1),U=null)},i(e){if(!V){for(let e=0;e<M.length;e+=1)$(L[e]);V=!0}},o(e){L=L.filter(Boolean);for(let t=0;t<L.length;t+=1)E(L[t]);V=!1},d(e){A&&A.d(e),e&&i(t),e&&i(n),v(z,e),v(L,e),e&&i(T),e&&i(S),O&&O.d(),B&&B.d(),U&&U.d()}}}function Qe(e,t,n){let r;S(e,ee,(e=>n(7,r=e)));let{rows:o}=t,{next:s}=t,{rowsCount:a}=t,{loaded:l}=t,{currentPage:i}=t,c=[],d={column:null,order:null},u={open:null};const f=o[0].map((e=>e.key)),h=L();function m(e){u.open===e?n(6,u.open=null,u):setTimeout((()=>{n(6,u.open=e,u)}),2)}function g(e,t){console.log("e",t.detail),u.open===e&&setTimeout((()=>{n(6,u.open=null,u)}),1),n(6,u.open=e,u)}function p(e,t){n(5,d={column:e,order:t}),h("query",{sort:d,filters:c})}function y(e){n(5,d={column:null,order:null}),h("query",{sort:d,filters:c})}function x(e){console.log("huh"),h("viewLocation",e)}j((()=>{const e=window.mapboxgl;e.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJuR1ZmQ01vIn0.zyEdsIKM-4orPm-3Y0XWDQ";const t=new MapboxGeocoder({accessToken:e.accessToken,types:"region,district,place"});t.addTo("#geocoder"),t.on("result",(({result:e})=>{const t=e,{place_name:n,place_type:r}=t,o=n.split(", "),s=r[0];"place"===s?(c.push({column:"CityName",value:o[0]}),c.push({column:"StateName",value:Ne[o[1]]})):"district"===s?(c.push({column:"CountyName",value:o[0].replace(" County","").toLowerCase()}),c.push({column:"StateName",value:Ne[o[1]]})):"region"===s&&c.push({column:"StateName",value:Ne[o[0]]}),h("query",{sort:d,filters:c})}))}));return e.$$set=e=>{"rows"in e&&n(0,o=e.rows),"next"in e&&n(1,s=e.next),"rowsCount"in e&&n(2,a=e.rowsCount),"loaded"in e&&n(3,l=e.loaded),"currentPage"in e&&n(4,i=e.currentPage)},[o,s,a,l,i,d,u,r,f,m,g,p,y,function(e){h("nextPage",{sort:d,filters:c})},function(e){h("previousPage",{sort:d,filters:c})},x,function(){ee.update((()=>!1))},e=>{m(e)},e=>p(e,"ASC"),e=>p(e,"DESC"),e=>y(),(e,t)=>{g(e,t)},e=>{x(e.value)}]}class Xe extends n{constructor(e){super(),r(this,e,Qe,We,o,{rows:0,next:1,rowsCount:2,loaded:3,currentPage:4},[-1,-1])}}function Ze(e,t,n){const r=e.slice();return r[2]=t[n],r[4]=n,r}function et(e){let t,n;return{c(){t=h("h1"),n=m(e[1]),this.h()},l(r){t=a(r,"H1",{class:!0});var o=l(t);n=g(o,e[1]),o.forEach(i),this.h()},h(){c(t,"class","font-medium mb-2")},m(e,r){d(e,t,r),u(t,n)},p(e,t){2&t&&p(n,e[1])},d(e){e&&i(t)}}}function tt(e){let t;return{c(){t=m("+")},l(e){t=g(e,"+")},m(e,n){d(e,t,n)},p:f,d(e){e&&i(t)}}}function nt(e){let t,n,r=e[0][e[4]+1][0]-1+"";return{c(){t=m("-"),n=m(r)},l(e){t=g(e,"-"),n=g(e,r)},m(e,r){d(e,t,r),d(e,n,r)},p(e,t){1&t&&r!==(r=e[0][e[4]+1][0]-1+"")&&p(n,r)},d(e){e&&i(t),e&&i(n)}}}function rt(e){let t,n,r,o,s,f,v=e[2][0]+"";function w(e,t){return e[0][e[4]+1]?nt:tt}let $=w(e),E=$(e);return{c(){t=h("div"),n=h("span"),r=y(),o=h("span"),s=m(v),E.c(),f=y(),this.h()},l(e){t=a(e,"DIV",{class:!0});var c=l(t);n=a(c,"SPAN",{class:!0,style:!0}),l(n).forEach(i),r=x(c),o=a(c,"SPAN",{});var d=l(o);s=g(d,v),E.l(d),d.forEach(i),f=x(c),c.forEach(i),this.h()},h(){c(n,"class","w-4 h-4 inline-block"),b(n,"background-color",e[2][1]),c(t,"class","")},m(e,a){d(e,t,a),u(t,n),u(t,r),u(t,o),u(o,s),E.m(o,null),u(t,f)},p(e,t){1&t&&b(n,"background-color",e[2][1]),1&t&&v!==(v=e[2][0]+"")&&p(s,v),$===($=w(e))&&E?E.p(e,t):(E.d(1),E=$(e),E&&(E.c(),E.m(o,null)))},d(e){e&&i(t),E.d()}}}function ot(e){let t,n,r=e[1]&&et(e),o=e[0],s=[];for(let a=0;a<o.length;a+=1)s[a]=rt(Ze(e,o,a));return{c(){t=h("div"),r&&r.c(),n=y();for(let e=0;e<s.length;e+=1)s[e].c();this.h()},l(e){t=a(e,"DIV",{class:!0});var o=l(t);r&&r.l(o),n=x(o);for(let t=0;t<s.length;t+=1)s[t].l(o);o.forEach(i),this.h()},h(){c(t,"class","\n    absolute\n    z-10\n    flex\n    flex-col\n    bg-white\n    px-4\n    py-2\n    max-w-[150px]\n    shadow-sm\n    rounded-md\n    bottom-12\n    left-2\n  ")},m(e,o){d(e,t,o),r&&r.m(t,null),u(t,n);for(let n=0;n<s.length;n+=1)s[n].m(t,null)},p(e,[a]){if(e[1]?r?r.p(e,a):(r=et(e),r.c(),r.m(t,n)):r&&(r.d(1),r=null),1&a){let n;for(o=e[0],n=0;n<o.length;n+=1){const r=Ze(e,o,n);s[n]?s[n].p(r,a):(s[n]=rt(r),s[n].c(),s[n].m(t,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=o.length}},i:f,o:f,d(e){e&&i(t),r&&r.d(),v(s,e)}}}function st(e,t,n){let{scale:r}=t,{title:o}=t;return e.$$set=e=>{"scale"in e&&n(0,r=e.scale),"title"in e&&n(1,o=e.title)},[r,o]}class at extends n{constructor(e){super(),r(this,e,st,ot,o,{scale:0,title:1})}}function lt(e){let t;const n=e[9].default,r=V(n,e,e[8],null);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||256&o)&&w(r,n,e,e[8],o,null,null)},i(e){t||($(r,e),t=!0)},o(e){E(r,e),t=!1},d(e){r&&r.d(e)}}}function it(e){let t,n,r,o,s;return{c(){t=h("h3"),n=m("Railroad crossing accidents in U.S. states"),r=y(),o=h("p"),s=m("Click states to see the total railroad crossing crashes, deaths and injuries. For more information on specific crossings, see the database and interactive map."),this.h()},l(e){t=a(e,"H3",{class:!0});var c=l(t);n=g(c,"Railroad crossing accidents in U.S. states"),c.forEach(i),r=x(e),o=a(e,"P",{class:!0});var d=l(o);s=g(d,"Click states to see the total railroad crossing crashes, deaths and injuries. For more information on specific crossings, see the database and interactive map."),d.forEach(i),this.h()},h(){c(t,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),c(o,"class","font-medium my-0 py0 max-w-2xl text-lg text-gray-600")},m(e,a){d(e,t,a),u(t,n),d(e,r,a),d(e,o,a),u(o,s)},p:f,d(e){e&&i(t),e&&i(r),e&&i(o)}}}function ct(e){let t,n,r,o,s,f,b,v,w,$,E,k,N,I,C,_,T,S,D,j,V,A,P,M,L,R,O=e[3].properties.name+"",B=e[3].properties.accidents+"",U=e[3].properties.killed+"",q=e[3].properties.injured+"",K=e[3].properties.name+"";return{c(){t=h("h3"),n=m(O),r=y(),o=h("p"),s=m(B),f=y(),b=h("span"),v=m("Accidents"),w=y(),$=h("p"),E=m(U),k=y(),N=h("span"),I=m("Killed"),C=y(),_=h("p"),T=m(q),S=y(),D=h("span"),j=m("Injured"),V=y(),A=h("button"),P=m("View crossings in "),M=m(K),this.h()},l(e){t=a(e,"H3",{class:!0});var c=l(t);n=g(c,O),c.forEach(i),r=x(e),o=a(e,"P",{class:!0});var d=l(o);s=g(d,B),f=x(d),b=a(d,"SPAN",{class:!0});var u=l(b);v=g(u,"Accidents"),u.forEach(i),d.forEach(i),w=x(e),$=a(e,"P",{class:!0});var h=l($);E=g(h,U),k=x(h),N=a(h,"SPAN",{class:!0});var m=l(N);I=g(m,"Killed"),m.forEach(i),h.forEach(i),C=x(e),_=a(e,"P",{class:!0});var p=l(_);T=g(p,q),S=x(p),D=a(p,"SPAN",{class:!0});var y=l(D);j=g(y,"Injured"),y.forEach(i),p.forEach(i),V=x(e),A=a(e,"BUTTON",{class:!0});var z=l(A);P=g(z,"View crossings in "),M=g(z,K),z.forEach(i),this.h()},h(){c(t,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),c(b,"class","font-normal"),c(o,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),c(N,"class","font-normal"),c($,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),c(D,"class","font-normal"),c(_,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),c(A,"class","mt-2 mr-2 inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},m(a,l){d(a,t,l),u(t,n),d(a,r,l),d(a,o,l),u(o,s),u(o,f),u(o,b),u(b,v),d(a,w,l),d(a,$,l),u($,E),u($,k),u($,N),u(N,I),d(a,C,l),d(a,_,l),u(_,T),u(_,S),u(_,D),u(D,j),d(a,V,l),d(a,A,l),u(A,P),u(A,M),L||(R=z(A,"click",e[7]),L=!0)},p(e,t){8&t&&O!==(O=e[3].properties.name+"")&&p(n,O),8&t&&B!==(B=e[3].properties.accidents+"")&&p(s,B),8&t&&U!==(U=e[3].properties.killed+"")&&p(E,U),8&t&&q!==(q=e[3].properties.injured+"")&&p(T,q),8&t&&K!==(K=e[3].properties.name+"")&&p(M,K)},d(e){e&&i(t),e&&i(r),e&&i(o),e&&i(w),e&&i($),e&&i(C),e&&i(_),e&&i(V),e&&i(A),L=!1,R()}}}function dt(e){let t,n,r,o,s,f,p,b,v,w,S,D,j,V,A,P,L,R,B,U=e[2]&&lt(e);function q(e,t){return e[3]?ct:it}j=new at({props:{scale:e[5],title:e[4]}});let K=q(e),F=K(e);return{c(){t=h("div"),U&&U.c(),n=y(),r=h("div"),o=h("button"),s=m("Accidents"),f=y(),p=h("button"),b=m("Killed"),v=y(),w=h("button"),S=m("Injured"),D=y(),k(j.$$.fragment),V=y(),A=h("div"),P=h("div"),F.c(),this.h()},l(e){t=a(e,"DIV",{class:!0});var c=l(t);U&&U.l(c),n=x(c),r=a(c,"DIV",{class:!0});var d=l(r);o=a(d,"BUTTON",{type:!0,class:!0});var u=l(o);s=g(u,"Accidents"),u.forEach(i),f=x(d),p=a(d,"BUTTON",{type:!0,class:!0});var h=l(p);b=g(h,"Killed"),h.forEach(i),v=x(d),w=a(d,"BUTTON",{type:!0,class:!0});var m=l(w);S=g(m,"Injured"),m.forEach(i),d.forEach(i),D=x(c),N(j.$$.fragment,c),V=x(c),A=a(c,"DIV",{class:!0});var y=l(A);P=a(y,"DIV",{class:!0});var $=l(P);F.l($),$.forEach(i),y.forEach(i),c.forEach(i),this.h()},h(){c(o,"type","button"),c(o,"class","\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-t-md\n        sm:rounded-l-md\n        sm:rounded-tr-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(o,"selected","accidents"===e[0]),c(p,"type","button"),c(p,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(p,"selected","killed"===e[0]),c(w,"type","button"),c(w,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-b-md\n        sm:rounded-r-md\n        sm:rounded-bl-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(w,"selected","injured"===e[0]),c(r,"class","absolute z-10 flex flex-col sm:flex-row shadow-sm rounded-md top-2 left-2"),c(P,"class","p-4 sm:px-6"),c(A,"class","z-10 bg-white shadow overflow-hidden rounded-md absolute top-2 right-0 mr-2 w-1/2 lg:w-1/3 pb-2"),c(t,"class","flex-grow z-0 h-full")},m(a,l){d(a,t,l),U&&U.m(t,null),u(t,n),u(t,r),u(r,o),u(o,s),u(r,f),u(r,p),u(p,b),u(r,v),u(r,w),u(w,S),u(t,D),I(j,t,null),u(t,V),u(t,A),u(A,P),F.m(P,null),e[13](t),L=!0,R||(B=[z(o,"click",e[10]),z(p,"click",e[11]),z(w,"click",e[12])],R=!0)},p(e,[r]){e[2]?U?(U.p(e,r),4&r&&$(U,1)):(U=lt(e),U.c(),$(U,1),U.m(t,n)):U&&(C(),E(U,1,1,(()=>{U=null})),_()),1&r&&O(o,"selected","accidents"===e[0]),1&r&&O(p,"selected","killed"===e[0]),1&r&&O(w,"selected","injured"===e[0]);const s={};32&r&&(s.scale=e[5]),16&r&&(s.title=e[4]),j.$set(s),K===(K=q(e))&&F?F.p(e,r):(F.d(1),F=K(e),F&&(F.c(),F.m(P,null)))},i(e){L||($(U),$(j.$$.fragment,e),L=!0)},o(e){E(U),E(j.$$.fragment,e),L=!1},d(n){n&&i(t),U&&U.d(),T(j),F.d(),e[13](null),R=!1,M(B)}}}function ut(e,t,n){let r,o,s;S(e,Z,(e=>n(15,s=e)));let{$$slots:a={},$$scope:l}=t;const i=L();let c,d,u,f="accidents",h=null;const m={accidents:"Number of accidents",injured:"Number of accidents with injuries",killed:"Number of accidents with fatalities"},g={accidents:[[0,"#fcde9c"],[500,"#faa476"],[1e3,"#f0746e"],[2e3,"#e34f6f"],[4e3,"#dc3977"],[8e3,"#b9257a"],[16e3,"#7c1d6f"]],injured:[[0,"#fcde9c"],[250,"#faa476"],[500,"#f0746e"],[750,"#e34f6f"],[1e3,"#dc3977"],[1250,"#b9257a"],[1500,"#7c1d6f"]],killed:[[0,"#fcde9c"],[825,"#faa476"],[1750,"#f0746e"],[2625,"#e34f6f"],[3500,"#dc3977"],[4375,"#b9257a"],[6175,"#7c1d6f"]]};function p(e){console.log("prop",e),n(0,f=e);const t=o;d.setPaintProperty("state_totals","fill-color",{property:f,stops:t})}D(W,{getMap:()=>d}),D(Q,{getMapbox:()=>u}),j((async()=>{u=window.mapboxgl,u.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(2,d=new u.Map({container:c,style:"mapbox://styles/mapbox/light-v10",center:s.lngLat,zoom:s.zoom,minZoom:0,maxZoom:8}));d.addControl(new class{onAdd(e){return this.map=e,this.container=document.createElement("div"),this.container.style.display="block",this.container.style.height="2.75rem",this.container.style.width="2.75rem",this.container}onRemove(){this.container.parentNode.removeChild(this.container),this.map=void 0}},"top-left"),d.addControl(new u.NavigationControl,"top-left"),d.on("load",(()=>{d.resize(),d.addSource("state_totals",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incident-totals/states/{z}/{x}/{y}.pbf"]}),d.addLayer({id:"state_totals",type:"fill",source:"state_totals","source-layer":"state_totals",layout:{},paint:{"fill-color":{property:f,stops:[[0,"#fcde9c"],[500,"#faa476"],[1e3,"#f0746e"],[2e3,"#e34f6f"],[4e3,"#dc3977"],[8e3,"#b9257a"],[16e3,"#7c1d6f"]]},"fill-opacity":["case",["boolean",["feature-state","hover"],!1],1,.7]}}),d.addLayer({id:"state_totals_lines",type:"line",source:"state_totals","source-layer":"state_totals",layout:{},paint:{"line-color":"#444","line-width":["case",["boolean",["feature-state","hover"],!1],3,1]}})}));let e=null;function t({featureId:e,state:t}){d.setFeatureState({id:e,source:"county_totals",sourceLayer:"county_totals"},{hover:t})}return d.on("mousemove",(function(n){const r=d.queryRenderedFeatures(n.point,{layers:["state_totals"]})[0];if(!r)return d.getCanvas().style.cursor="",void(e&&(t({featureId:e,state:!1}),e=null));d.getCanvas().style.cursor="pointer",r&&r.id===e||(e&&t({featureId:e,state:!1}),e=r.id,t({featureId:r.id,state:!0}))})),d.on("mouseleave","state_totals",(function(){d.getCanvas().style.cursor=""})),d.on("click",(async function(e){const t=d.queryRenderedFeatures(e.point);n(3,h=t.find((e=>"state_totals"===e.layer.id)))})),()=>{n(2,d=null)}}));return e.$$set=e=>{"$$scope"in e&&n(8,l=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&n(4,r=m[f]),1&e.$$.dirty&&n(5,o=g[f])},[f,c,d,h,r,o,p,function(){const e=B(h);console.log("onViewClick bbox",e),i("viewLocation",{bbox:e})},l,a,()=>{p("accidents")},()=>{p("killed")},()=>{p("injured")},function(e){A[e?"unshift":"push"]((()=>{c=e,n(1,c)}))}]}class ft extends n{constructor(e){super(),r(this,e,ut,dt,o,{})}}function ht(e){let t;const n=e[9].default,r=V(n,e,e[8],null);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||256&o)&&w(r,n,e,e[8],o,null,null)},i(e){t||($(r,e),t=!0)},o(e){E(r,e),t=!1},d(e){r&&r.d(e)}}}function mt(e){let t,n,r,o,s;return{c(){t=h("h3"),n=m("Railroad crossing accidents in New Jersey counties"),r=y(),o=h("p"),s=m("Click counties to see the total railroad crossing crashes, deaths and injuries. For more information on specific crossings, see the database and interactive map."),this.h()},l(e){t=a(e,"H3",{class:!0});var c=l(t);n=g(c,"Railroad crossing accidents in New Jersey counties"),c.forEach(i),r=x(e),o=a(e,"P",{class:!0});var d=l(o);s=g(d,"Click counties to see the total railroad crossing crashes, deaths and injuries. For more information on specific crossings, see the database and interactive map."),d.forEach(i),this.h()},h(){c(t,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),c(o,"class","font-medium my-0 py0 max-w-2xl text-lg text-gray-600")},m(e,a){d(e,t,a),u(t,n),d(e,r,a),d(e,o,a),u(o,s)},p:f,d(e){e&&i(t),e&&i(r),e&&i(o)}}}function gt(e){let t,n,r,o,s,f,b,v,w,$,E,k,N,I,C,_,T,S,D,j,V,A,P,M,L,R,O=e[3].properties.name+"",B=e[3].properties.accidents+"",U=e[3].properties.killed+"",q=e[3].properties.injured+"",K=e[3].properties.name+"";return{c(){t=h("h3"),n=m(O),r=y(),o=h("p"),s=m(B),f=y(),b=h("span"),v=m("Accidents"),w=y(),$=h("p"),E=m(U),k=y(),N=h("span"),I=m("Killed"),C=y(),_=h("p"),T=m(q),S=y(),D=h("span"),j=m("Injured"),V=y(),A=h("button"),P=m("View crossings in "),M=m(K),this.h()},l(e){t=a(e,"H3",{class:!0});var c=l(t);n=g(c,O),c.forEach(i),r=x(e),o=a(e,"P",{class:!0});var d=l(o);s=g(d,B),f=x(d),b=a(d,"SPAN",{class:!0});var u=l(b);v=g(u,"Accidents"),u.forEach(i),d.forEach(i),w=x(e),$=a(e,"P",{class:!0});var h=l($);E=g(h,U),k=x(h),N=a(h,"SPAN",{class:!0});var m=l(N);I=g(m,"Killed"),m.forEach(i),h.forEach(i),C=x(e),_=a(e,"P",{class:!0});var p=l(_);T=g(p,q),S=x(p),D=a(p,"SPAN",{class:!0});var y=l(D);j=g(y,"Injured"),y.forEach(i),p.forEach(i),V=x(e),A=a(e,"BUTTON",{class:!0});var z=l(A);P=g(z,"View crossings in "),M=g(z,K),z.forEach(i),this.h()},h(){c(t,"class","text-2xl leading-6 font-bold text-gray-900 pb-2 mb-2 border-b border-gray-100"),c(b,"class","font-normal"),c(o,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),c(N,"class","font-normal"),c($,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),c(D,"class","font-normal"),c(_,"class","font-bold my-0 py0 max-w-2xl text-lg text-gray-600"),c(A,"class","mt-2 mr-2 inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500")},m(a,l){d(a,t,l),u(t,n),d(a,r,l),d(a,o,l),u(o,s),u(o,f),u(o,b),u(b,v),d(a,w,l),d(a,$,l),u($,E),u($,k),u($,N),u(N,I),d(a,C,l),d(a,_,l),u(_,T),u(_,S),u(_,D),u(D,j),d(a,V,l),d(a,A,l),u(A,P),u(A,M),L||(R=z(A,"click",e[7]),L=!0)},p(e,t){8&t&&O!==(O=e[3].properties.name+"")&&p(n,O),8&t&&B!==(B=e[3].properties.accidents+"")&&p(s,B),8&t&&U!==(U=e[3].properties.killed+"")&&p(E,U),8&t&&q!==(q=e[3].properties.injured+"")&&p(T,q),8&t&&K!==(K=e[3].properties.name+"")&&p(M,K)},d(e){e&&i(t),e&&i(r),e&&i(o),e&&i(w),e&&i($),e&&i(C),e&&i(_),e&&i(V),e&&i(A),L=!1,R()}}}function pt(e){let t,n,r,o,s,f,p,b,v,w,S,D,j,V,A,P,L,R,B,U=e[2]&&ht(e);function q(e,t){return e[3]?gt:mt}j=new at({props:{scale:e[5],title:e[4]}});let K=q(e),F=K(e);return{c(){t=h("div"),U&&U.c(),n=y(),r=h("div"),o=h("button"),s=m("Accidents"),f=y(),p=h("button"),b=m("Killed"),v=y(),w=h("button"),S=m("Injured"),D=y(),k(j.$$.fragment),V=y(),A=h("div"),P=h("div"),F.c(),this.h()},l(e){t=a(e,"DIV",{class:!0});var c=l(t);U&&U.l(c),n=x(c),r=a(c,"DIV",{class:!0});var d=l(r);o=a(d,"BUTTON",{type:!0,class:!0});var u=l(o);s=g(u,"Accidents"),u.forEach(i),f=x(d),p=a(d,"BUTTON",{type:!0,class:!0});var h=l(p);b=g(h,"Killed"),h.forEach(i),v=x(d),w=a(d,"BUTTON",{type:!0,class:!0});var m=l(w);S=g(m,"Injured"),m.forEach(i),d.forEach(i),D=x(c),N(j.$$.fragment,c),V=x(c),A=a(c,"DIV",{class:!0});var y=l(A);P=a(y,"DIV",{class:!0});var $=l(P);F.l($),$.forEach(i),y.forEach(i),c.forEach(i),this.h()},h(){c(o,"type","button"),c(o,"class","\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-t-md\n        sm:rounded-l-md\n        sm:rounded-tr-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(o,"selected","accidents"===e[0]),c(p,"type","button"),c(p,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(p,"selected","killed"===e[0]),c(w,"type","button"),c(w,"class","\n        sm:-ml-px\n        relative\n        inline-flex\n        items-center\n        px-4\n        py-2\n        rounded-b-md\n        sm:rounded-r-md\n        sm:rounded-bl-none\n        border\n        border-gray-300\n        bg-white\n        text-sm\n        font-medium\n        text-gray-700\n        hover:bg-gray-50\n        focus:z-10\n        focus:outline-none\n        focus:ring-1\n        focus:ring-indigo-500\n        focus:border-indigo-500\n      "),O(w,"selected","injured"===e[0]),c(r,"class","absolute z-10 flex flex-col sm:flex-row shadow-sm rounded-md top-2 left-2"),c(P,"class","p-4 sm:px-6"),c(A,"class","z-10 bg-white shadow overflow-hidden rounded-md absolute top-2 right-0 mr-2 w-1/2 lg:w-1/3 pb-2"),c(t,"class","flex-grow z-0 h-full")},m(a,l){d(a,t,l),U&&U.m(t,null),u(t,n),u(t,r),u(r,o),u(o,s),u(r,f),u(r,p),u(p,b),u(r,v),u(r,w),u(w,S),u(t,D),I(j,t,null),u(t,V),u(t,A),u(A,P),F.m(P,null),e[13](t),L=!0,R||(B=[z(o,"click",e[10]),z(p,"click",e[11]),z(w,"click",e[12])],R=!0)},p(e,[r]){e[2]?U?(U.p(e,r),4&r&&$(U,1)):(U=ht(e),U.c(),$(U,1),U.m(t,n)):U&&(C(),E(U,1,1,(()=>{U=null})),_()),1&r&&O(o,"selected","accidents"===e[0]),1&r&&O(p,"selected","killed"===e[0]),1&r&&O(w,"selected","injured"===e[0]);const s={};16&r&&(s.title=e[4]),j.$set(s),K===(K=q(e))&&F?F.p(e,r):(F.d(1),F=K(e),F&&(F.c(),F.m(P,null)))},i(e){L||($(U),$(j.$$.fragment,e),L=!0)},o(e){E(U),E(j.$$.fragment,e),L=!1},d(n){n&&i(t),U&&U.d(),T(j),F.d(),e[13](null),R=!1,M(B)}}}function yt(e,t,n){let r,o;S(e,X,(e=>n(15,o=e)));let{$$slots:s={},$$scope:a}=t;const l=L();let i,c,d,u,f="accidents";const h={accidents:"Number of accidents",injured:"Number of accidents with injuries",killed:"Number of accidents with fatalities"};D(W,{getMap:()=>c}),D(Q,{getMapbox:()=>d});const m=[[0,"#fcde9c"],[15,"#faa476"],[30,"#f0746e"],[45,"#e34f6f"],[60,"#dc3977"],[75,"#b9257a"],[90,"#7c1d6f"]];function g(e){n(0,f=e),c.setPaintProperty("county_totals","fill-color",{property:f,stops:m})}j((async()=>{d=window.mapboxgl,d.accessToken="pk.eyJ1Ijoic2xkYXRhdGVhbSIsImEiOiJja240emRudmgxdzl4MnVuenp0azNmenE4In0.b5791YyrQaKdVufRXj2lqQ",n(2,c=new d.Map({container:i,style:"mapbox://styles/mapbox/light-v10",center:o.lngLat,zoom:o.zoom,minZoom:7,maxZoom:14}));c.addControl(new class{onAdd(e){return this.map=e,this.container=document.createElement("div"),this.container.style.display="block",this.container.style.height="2.75rem",this.container.style.width="2.75rem",this.container}onRemove(){this.container.parentNode.removeChild(this.container),this.map=void 0}},"top-left"),c.addControl(new d.NavigationControl,"top-left"),c.on("load",(()=>{c.resize(),c.addSource("county_totals",{type:"vector",tiles:["https://njam-tiles.s3.amazonaws.com/railroad-crossing-incident-totals/counties/{z}/{x}/{y}.pbf"]}),c.addLayer({id:"county_totals",type:"fill",source:"county_totals","source-layer":"county_totals",layout:{},paint:{"fill-color":{property:f,stops:[[0,"#fcde9c"],[15,"#faa476"],[30,"#f0746e"],[45,"#e34f6f"],[60,"#dc3977"],[75,"#b9257a"],[90,"#7c1d6f"]]},"fill-opacity":["case",["boolean",["feature-state","hover"],!1],1,.7]}}),c.addLayer({id:"county_totals_lines",type:"line",source:"county_totals","source-layer":"county_totals",layout:{},paint:{"line-color":"#444","line-width":["case",["boolean",["feature-state","hover"],!1],3,1]}})}));let e=null;function t({featureId:e,state:t}){c.setFeatureState({id:e,source:"county_totals",sourceLayer:"county_totals"},{hover:t})}return c.on("mousemove",(function(n){const r=c.queryRenderedFeatures(n.point,{layers:["county_totals"]})[0];if(!r)return c.getCanvas().style.cursor="",void(e&&(t({featureId:e,state:!1}),e=null));c.getCanvas().style.cursor="pointer",r&&r.id===e||(e&&t({featureId:e,state:!1}),e=r.id,t({featureId:r.id,state:!0}))})),c.on("mouseleave","county_totals",(function(){c.getCanvas().style.cursor=""})),c.on("click",(async function(e){const t=c.queryRenderedFeatures(e.point);n(3,u=t.find((e=>"county_totals"===e.layer.id)))})),()=>{n(2,c=null)}}));return e.$$set=e=>{"$$scope"in e&&n(8,a=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&n(4,r=h[f])},[f,i,c,u,r,m,g,function(){const e=B(u);console.log("onViewClick bbox",e),l("viewLocation",{bbox:e})},a,s,()=>{g("accidents")},()=>{g("killed")},()=>{g("injured")},function(e){A[e?"unshift":"push"]((()=>{i=e,n(1,i)}))}]}class xt extends n{constructor(e){super(),r(this,e,yt,pt,o,{})}}function bt(e){let t,n,r,o;return r=new xt({}),r.$on("viewLocation",e[13]),{c(){t=h("div"),n=h("div"),k(r.$$.fragment),this.h()},l(e){t=a(e,"DIV",{class:!0});var o=l(t);n=a(o,"DIV",{class:!0});var s=l(n);N(r.$$.fragment,s),s.forEach(i),o.forEach(i),this.h()},h(){c(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),c(t,"class","p-4 h-full bg-gray-50")},m(e,s){d(e,t,s),u(t,n),I(r,n,null),o=!0},p:f,i(e){o||($(r.$$.fragment,e),o=!0)},o(e){E(r.$$.fragment,e),o=!1},d(e){e&&i(t),T(r)}}}function vt(e){let t,n,r,o;return r=new ft({}),r.$on("viewLocation",e[13]),{c(){t=h("div"),n=h("div"),k(r.$$.fragment),this.h()},l(e){t=a(e,"DIV",{class:!0});var o=l(t);n=a(o,"DIV",{class:!0});var s=l(n);N(r.$$.fragment,s),s.forEach(i),o.forEach(i),this.h()},h(){c(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),c(t,"class","p-4 h-full bg-gray-50")},m(e,s){d(e,t,s),u(t,n),I(r,n,null),o=!0},p:f,i(e){o||($(r.$$.fragment,e),o=!0)},o(e){E(r.$$.fragment,e),o=!1},d(e){e&&i(t),T(r)}}}function wt(e){let t,n,r,o;return r=new Xe({props:{rows:e[0],columns:e[1],next:e[2],rowsCount:e[3],loaded:e[5],currentPage:e[6]}}),r.$on("query",e[10]),r.$on("nextPage",e[11]),r.$on("previousPage",e[12]),r.$on("viewLocation",e[13]),{c(){t=h("div"),n=h("div"),k(r.$$.fragment),this.h()},l(e){t=a(e,"DIV",{class:!0});var o=l(t);n=a(o,"DIV",{class:!0});var s=l(n);N(r.$$.fragment,s),s.forEach(i),o.forEach(i),this.h()},h(){c(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),c(t,"class","p-4 pb-12 h-full bg-gray-50")},m(e,s){d(e,t,s),u(t,n),I(r,n,null),o=!0},p(e,t){const n={};1&t&&(n.rows=e[0]),2&t&&(n.columns=e[1]),4&t&&(n.next=e[2]),8&t&&(n.rowsCount=e[3]),32&t&&(n.loaded=e[5]),64&t&&(n.currentPage=e[6]),r.$set(n)},i(e){o||($(r.$$.fragment,e),o=!0)},o(e){E(r.$$.fragment,e),o=!1},d(e){e&&i(t),T(r)}}}function $t(e){let t,n,r,o;return r=new ke({props:{center:e[7],bbox:e[8]}}),{c(){t=h("div"),n=h("div"),k(r.$$.fragment),this.h()},l(e){t=a(e,"DIV",{class:!0});var o=l(t);n=a(o,"DIV",{class:!0});var s=l(n);N(r.$$.fragment,s),s.forEach(i),o.forEach(i),this.h()},h(){c(n,"class","bg-white border h-full border-gray-200 rounded-md shadow"),c(t,"class","p-4 h-full bg-gray-50")},m(e,s){d(e,t,s),u(t,n),I(r,n,null),o=!0},p(e,t){const n={};128&t&&(n.center=e[7]),256&t&&(n.bbox=e[8]),r.$set(n)},i(e){o||($(r.$$.fragment,e),o=!0)},o(e){E(r.$$.fragment,e),o=!1},d(e){e&&i(t),T(r)}}}function Et(e){let t,n,r,o,s,f,p,b,v,w,k,N,I,T,S,D,j,V,A,P,L,R,O,B,q,K,F,H,G,J,Y,W,Q,X,Z,ee,te,ne,re,oe,se,ae,le,ie,ce,de,ue,fe,he,me,ge,pe,ye,xe,be,ve,we,$e,Ee,ke,Ne,Ie,Ce,_e,Te,Se;const De=[$t,wt,vt,bt],je=[];function Ve(e,t){return"map"===e[4]?0:"list"===e[4]?1:"us-totals"===e[4]?2:"nj-totals"===e[4]?3:-1}return~(fe=Ve(e))&&(he=je[fe]=De[fe](e)),{c(){t=h("script"),r=h("link"),o=h("script"),f=h("link"),p=y(),b=h("div"),v=h("div"),w=h("h1"),k=m("Railroad Crossing Incidents"),N=y(),I=h("div"),T=h("nav"),S=h("button"),D=h("span"),j=m("Map"),V=y(),A=h("span"),R=y(),O=h("button"),B=h("span"),q=m("Locations"),K=y(),F=h("span"),J=y(),Y=h("button"),W=h("span"),Q=m("N.J. Totals"),X=y(),Z=h("span"),ne=y(),re=h("button"),oe=h("span"),se=m("U.S. Totals"),ae=y(),le=h("span"),de=y(),ue=h("div"),he&&he.c(),me=y(),ge=h("div"),pe=m("Story by "),ye=h("a"),xe=m("Payton Guion"),be=m(". Graphics by "),ve=h("a"),we=m("Seth Vincent"),$e=m(". "),Ee=h("br"),ke=m("Data from the "),Ne=h("a"),Ie=m("Federal Railroad Administration"),Ce=m("."),this.h()},l(e){const n=U('[data-svelte="svelte-hlw6vs"]',document.head);t=a(n,"SCRIPT",{src:!0}),l(t).forEach(i),r=a(n,"LINK",{href:!0,rel:!0}),o=a(n,"SCRIPT",{src:!0}),l(o).forEach(i),f=a(n,"LINK",{rel:!0,href:!0,type:!0}),n.forEach(i),p=x(e),b=a(e,"DIV",{class:!0});var s=l(b);v=a(s,"DIV",{class:!0});var c=l(v);w=a(c,"H1",{class:!0});var d=l(w);k=g(d,"Railroad Crossing Incidents"),d.forEach(i),c.forEach(i),N=x(s),I=a(s,"DIV",{class:!0});var u=l(I);T=a(u,"NAV",{class:!0,"aria-label":!0});var h=l(T);S=a(h,"BUTTON",{class:!0,"aria-current":!0});var m=l(S);D=a(m,"SPAN",{});var y=l(D);j=g(y,"Map"),y.forEach(i),V=x(m),A=a(m,"SPAN",{"aria-hidden":!0,class:!0}),l(A).forEach(i),m.forEach(i),R=x(h),O=a(h,"BUTTON",{class:!0,"aria-current":!0});var $=l(O);B=a($,"SPAN",{});var E=l(B);q=g(E,"Locations"),E.forEach(i),K=x($),F=a($,"SPAN",{"aria-hidden":!0,class:!0}),l(F).forEach(i),$.forEach(i),J=x(h),Y=a(h,"BUTTON",{class:!0,"aria-current":!0});var C=l(Y);W=a(C,"SPAN",{});var _=l(W);Q=g(_,"N.J. Totals"),_.forEach(i),X=x(C),Z=a(C,"SPAN",{"aria-hidden":!0,class:!0}),l(Z).forEach(i),C.forEach(i),ne=x(h),re=a(h,"BUTTON",{class:!0,"aria-current":!0});var P=l(re);oe=a(P,"SPAN",{});var z=l(oe);se=g(z,"U.S. Totals"),z.forEach(i),ae=x(P),le=a(P,"SPAN",{"aria-hidden":!0,class:!0}),l(le).forEach(i),P.forEach(i),h.forEach(i),u.forEach(i),de=x(s),ue=a(s,"DIV",{class:!0});var M=l(ue);he&&he.l(M),M.forEach(i),me=x(s),ge=a(s,"DIV",{class:!0});var L=l(ge);pe=g(L,"Story by "),ye=a(L,"A",{href:!0,target:!0,class:!0});var H=l(ye);xe=g(H,"Payton Guion"),H.forEach(i),be=g(L,". Graphics by "),ve=a(L,"A",{href:!0,target:!0,class:!0});var G=l(ve);we=g(G,"Seth Vincent"),G.forEach(i),$e=g(L,". "),Ee=a(L,"BR",{class:!0}),ke=g(L,"Data from the "),Ne=a(L,"A",{href:!0,target:!0,class:!0});var ee=l(Ne);Ie=g(ee,"Federal Railroad Administration"),ee.forEach(i),Ce=g(L,"."),L.forEach(i),s.forEach(i),this.h()},h(){document.title="Railroad Crossing Incidents",t.src!==(n="https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js")&&c(t,"src","https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js"),c(r,"href","https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.css"),c(r,"rel","stylesheet"),o.src!==(s="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js")&&c(o,"src","https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js"),c(f,"rel","stylesheet"),c(f,"href","https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.css"),c(f,"type","text/css"),c(w,"class","font-bold text-gray-600"),c(v,"class","flex-none p-2 sm:p-4"),c(A,"aria-hidden","true"),c(A,"class",P="\n          "+("map"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n          absolute inset-x-0 bottom-0 h-0.5\n        "),c(S,"class",L="\n        "+("map"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n        group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-2 sm:p-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n      "),c(S,"aria-current","page"),c(F,"aria-hidden","true"),c(F,"class",H="\n          "+("list"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n          absolute inset-x-0 bottom-0 h-0.5\n        "),c(O,"class",G="\n        "+("list"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n        group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-2 sm:p-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n      "),c(O,"aria-current","page"),c(Z,"aria-hidden","true"),c(Z,"class",ee="\n            "+("nj-totals"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),c(Y,"class",te="\n          "+("nj-totals"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-2 sm:p-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),c(Y,"aria-current","page"),c(le,"aria-hidden","true"),c(le,"class",ie="\n            "+("us-totals"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "),c(re,"class",ce="\n          "+("us-totals"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-2 sm:p-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "),c(re,"aria-current","page"),c(T,"class","relative z-0 shadow flex divide-x divide-gray-200 border-t border-gray-100 border-"),c(T,"aria-label","Tabs"),c(I,"class","flex-none block"),c(ue,"class","flex-grow border-t border-gray-200 overflow-hidden"),c(ye,"href","https://twitter.com/PaytonGuion"),c(ye,"target","_blank"),c(ye,"class","underline"),c(ve,"href","https://twitter.com/sethdvincent"),c(ve,"target","_blank"),c(ve,"class","underline"),c(Ee,"class","sm:hidden"),c(Ne,"href","https://railroads.dot.gov"),c(Ne,"target","_blank"),c(Ne,"class","underline"),c(ge,"class","flex-none p-4 text-xs text-gray-500 border-t border-gray-200"),c(b,"class","flex flex-col h-screen border border-gray-100  max-w-screen-lg mx-auto")},m(n,s){u(document.head,t),u(document.head,r),u(document.head,o),u(document.head,f),d(n,p,s),d(n,b,s),u(b,v),u(v,w),u(w,k),u(b,N),u(b,I),u(I,T),u(T,S),u(S,D),u(D,j),u(S,V),u(S,A),u(T,R),u(T,O),u(O,B),u(B,q),u(O,K),u(O,F),u(T,J),u(T,Y),u(Y,W),u(W,Q),u(Y,X),u(Y,Z),u(T,ne),u(T,re),u(re,oe),u(oe,se),u(re,ae),u(re,le),u(b,de),u(b,ue),~fe&&je[fe].m(ue,null),u(b,me),u(b,ge),u(ge,pe),u(ge,ye),u(ye,xe),u(ge,be),u(ge,ve),u(ve,we),u(ge,$e),u(ge,Ee),u(ge,ke),u(ge,Ne),u(Ne,Ie),u(ge,Ce),_e=!0,Te||(Se=[z(S,"click",e[17]),z(O,"click",e[18]),z(Y,"click",e[19]),z(re,"click",e[20])],Te=!0)},p(e,[t]){(!_e||16&t&&P!==(P="\n          "+("map"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n          absolute inset-x-0 bottom-0 h-0.5\n        "))&&c(A,"class",P),(!_e||16&t&&L!==(L="\n        "+("map"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n        group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-2 sm:p-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n      "))&&c(S,"class",L),(!_e||16&t&&H!==(H="\n          "+("list"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n          absolute inset-x-0 bottom-0 h-0.5\n        "))&&c(F,"class",H),(!_e||16&t&&G!==(G="\n        "+("list"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n        group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-2 sm:p-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n      "))&&c(O,"class",G),(!_e||16&t&&ee!==(ee="\n            "+("nj-totals"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&c(Z,"class",ee),(!_e||16&t&&te!==(te="\n          "+("nj-totals"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-2 sm:p-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&c(Y,"class",te),(!_e||16&t&&ie!==(ie="\n            "+("us-totals"===e[4]?"bg-njam-green":"group-hover:bg-gray-300")+"\n            absolute inset-x-0 bottom-0 h-0.5\n          "))&&c(le,"class",ie),(!_e||16&t&&ce!==(ce="\n          "+("us-totals"===e[4]?"text-gray-900":"text-gray-500 hover:text-gray-700")+"\n          group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-2 sm:p-4 text-sm font-medium text-center hover:bg-gray-50 focus:z-10\n        "))&&c(re,"class",ce);let n=fe;fe=Ve(e),fe===n?~fe&&je[fe].p(e,t):(he&&(C(),E(je[n],1,1,(()=>{je[n]=null})),_()),~fe?(he=je[fe],he?he.p(e,t):(he=je[fe]=De[fe](e),he.c()),$(he,1),he.m(ue,null)):he=null)},i(e){_e||($(he),_e=!0)},o(e){E(he),_e=!1},d(e){i(t),i(r),i(o),i(f),e&&i(p),e&&i(b),~fe&&je[fe].d(),Te=!1,M(Se)}}}async function kt({fetch:e,page:t}){const n=await e("https://railroad-crossing-incidents.vercel.app/railroad_crossing_incidents/railroad_crossing_incidents.json"),r=await n.json();if(n.ok){const{rows:e,columns:t}=G(r),n=r.filtered_table_rows_count;let o=null;return o=r.next&&r.next.includes(",")?r.next.split(",")[1]:r.next,console.log("next",o),{props:{rows:e,columns:t,next:o,rowsCount:n}}}return{status:n.status,error:new Error("Could not load data")}}function Nt(e,t,n){let r,o,s,a,l;S(e,J,(e=>n(14,l=e)));let{rows:i}=t,{columns:c}=t,{next:d}=t,{rowsCount:u}=t,f=!0,h=1,m=l.query.get("view")||"map";async function g(e){n(5,f=!1);const{sort:t,filters:r}=e,o=d?`_next=${d}`:"";let s="";t.column&&(s=`_sort${"DESC"===t.order?"_desc":""}=${t.column}`);const a=[];if(r.length)for(const n of r)"StateName"===n.column?a.push(`StateName__exact=${n.value}`):"CountyName"===n.column?a.push(`CountyName__like=${n.value}`):"CityName"===n.column&&a.push(`CityName__like=${n.value}`);const l=`https://railroad-crossing-incidents.vercel.app/railroad_crossing_incidents/railroad_crossing_incidents.json?${[o,...a,s].join("&")}`,h=await fetch(l),m=await h.json(),g=G(m);n(0,i=[...g.rows]),n(1,c=[...g.columns]),n(3,u=m.filtered_table_rows_count),m.next&&m.next.includes(",")?n(2,d=m.next.split(",")[1]):n(2,d=m.next),n(5,f=!0)}async function p(e){l.query.set("view",e),n(4,m=e);const t=l.query.toString();await Y(`${H}?${t}`)}q(1e3),K(150);return e.$$set=e=>{"rows"in e&&n(0,i=e.rows),"columns"in e&&n(1,c=e.columns),"next"in e&&n(2,d=e.next),"rowsCount"in e&&n(3,u=e.rowsCount)},e.$$.update=()=>{if(16384&e.$$.dirty&&n(15,r=l.query.get("lng")),16384&e.$$.dirty&&n(16,o=l.query.get("lat")),98304&e.$$.dirty&&n(7,s=r&o?[r,o]:null),16384&e.$$.dirty&&n(8,a=JSON.parse(l.query.get("bbox"))),16400&e.$$.dirty&&"map"!==m&&(l.query.has("lng")||l.query.has("lat"))){l.query.delete("lng"),l.query.delete("lat");const e=l.query.toString();Y(`${H}?${e}`)}},[i,c,d,u,m,f,h,s,a,p,async function(e){n(2,d=null),n(6,h=1),await g(e.detail)},async function(e){console.log("next"),n(6,h+=1),await g(e.detail)},async function(e){console.log("previous"),n(2,d-=200),d<0&&(n(2,d=null),n(6,h=1)),n(6,h-=1),await g(e.detail)},function(e){if(e.detail.bbox)n(8,a=e.detail.bbox),l.query.set("bbox",JSON.stringify(a));else{const[t,r]=e.detail;l.query.set("lng",t),l.query.set("lat",r),n(7,s=[t,r])}p("map")},l,r,o,()=>{p("map")},()=>{p("list")},()=>{p("nj-totals")},()=>{p("us-totals")}]}export default class extends n{constructor(e){super(),r(this,e,Nt,Et,o,{rows:0,columns:1,next:2,rowsCount:3})}}export{kt as load};
